"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[578],{61562:function(a,e,o){o.d(e,{Z:function(){return m}});var t=o(73396),r=o(87139);const l=["onClick"],n={class:"botonTecladoSpaceDiv"};function s(a,e,o,s,i,d){const c=(0,t.up)("MDBInput"),u=(0,t.up)("MDBModalHeader"),p=(0,t.up)("MDBModalBody"),m=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.j4)(m,{frame:"",position:"bottom",id:"keyBoardModal",tabindex:"-1",labelledby:"keyBoardModal",modelValue:s.keyBoardModal,"onUpdate:modelValue":e[4]||(e[4]=a=>s.keyBoardModal=a)},{default:(0,t.w5)((()=>[s.showInput?((0,t.wg)(),(0,t.j4)(u,{key:0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{style:{width:"80rem !important"},label:"Texto introducido",modelValue:s.text,"onUpdate:modelValue":e[0]||(e[0]=a=>s.text=a)},null,8,["modelValue"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(p,{class:"mainDiv"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.chars.length,((a,e)=>((0,t.wg)(),(0,t.iD)("div",{key:e},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.chars[a-1],((a,e)=>((0,t.wg)(),(0,t.iD)("div",{class:"btn-group-vertical mt-1 divTecla",key:e},[(0,t._)("button",{type:"button",style:(0,r.j5)([{"text-transform":"none"},s.keyStyle(a)]),class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e=>s.processTecla(a)},(0,r.zw)(a),13,l)])))),128))])))),128)),(0,t._)("div",n,[(0,t._)("button",{style:(0,r.j5)([{"font-size":"1.8rem"},s.keyStyle("âœŽ")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e[1]||(e[1]=a=>s.processTecla("âœŽ"))}," âœŽ ",4),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonTecladoSpace",onClick:e[2]||(e[2]=a=>s.processTecla(" "))}," â£ "),(0,t._)("button",{style:(0,r.j5)([{"font-size":"1.8rem"},s.keyStyle("#")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e[3]||(e[3]=a=>s.processTecla("#"))}," â…£ ",4)])])),_:1})])),_:1},8,["modelValue"])}var i=o(44870),d=o(74313),c={name:"KeyBoardComponent",components:{MDBIcon:d.vm,MDBModalBody:d.Yz,MDBModal:d.j3,MDBBtn:d.$v,MDBModalHeader:d.ol,MDBModalTitle:d.wo,MDBInput:d.u2,MDBModalFooter:d.ab},props:{value:String,text:String},setup(a,{expose:e}){const o=(0,i.iH)(a.value||""),r=(0,i.iH)(!1),l=(0,i.iH)(!1),n=(0,i.iH)(!1);let s=!1;const d=(0,i.iH)(!1),c=[["q","w","e","r","t","y","u","i","o","p","â†"],["a","s","d","f","g","h","j","k","l","Ã±","â†µ"],["z","x","c","v","b","n","m",",",".","-","â‡ª"]],u=(0,i.iH)([]);function p(a){switch(a){case"â†":v();break;case"â†µ":r.value=!1;break;case"â‡ª":s=!s,o.value.length>0&&(l.value=!l.value),b();break;case"#":n.value=!n.value,b();break;case"âœŽ":d.value=!d.value;break;default:f(a);break}}function m(a){let e=o.value.length<=0&&!s||l.value,t="background-color: #606060 !important; color: white !important;";return n.value&&"#"==a||d.value&&"âœŽ"==a||"â‡ª"==a&&e?t:e?"text-transform: uppercase":"text-transform: none;"}function f(a){let e=o.value.length<=0&&!s||l.value;s=!1,e&&(a=a.toUpperCase()),o.value+=a}function v(){o.value.length>0&&(o.value=o.value.slice(0,-1))}function b(){let a=c;const e=["Ã¡","Ã©","Ã­","Ã³","Ãº","Ã¼","Â¡","Â¿"];if(n.value){let e=[["1","2","3","4","5","6","7","8","9","0","Ã§"]];e=e.concat(c),a=e}u.value=a.map((a=>a.map((a=>e.includes(a)?[a,a.toUpperCase()]:a))))}function M(a=""){void 0===o.value&&(o.value=""),o.value=a,r.value=!0}function w(){return[o.value,r.value]}return e({getValue:w,abrirModal:M}),(0,t.bv)((()=>{b()})),{text:o,addTecla:f,deleteTecla:v,keyBoardModal:r,processTecla:p,upperCase:l,keyStyle:m,buildKeyboard:b,abrirModal:M,showInput:d,chars:u}}},u=o(40089);const p=(0,u.Z)(c,[["render",s],["__scopeId","data-v-c19133e2"]]);var m=p},89578:function(a,e,o){o.r(e),o.d(e,{default:function(){return Y}});var t=o(73396),r=o(87139);const l={class:"row mt-2"},n={class:"row mt-4 divInferior"},s={class:"col anchoCajaConsumoPersonal"},i={key:0,class:"col tablaDescansando table-responsive d-inline",style:{"background-color":"white"}},d={class:"table"},c={class:"tituloDescanso"},u=["onClick"],p={class:"textoNombre d-inline-block text-truncate"};function m(a,e,o,m,f,v){const b=(0,t.up)("MDBCardTitle"),M=(0,t.up)("MDBIcon"),w=(0,t.up)("MDBCardBody"),_=(0,t.up)("MDBCard"),h=(0,t.up)("MDBBtn"),y=(0,t.up)("ModalLeerQR"),g=(0,t.up)("FichajesModal"),B=(0,t.up)("InformesCajaComponent");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",l,[(0,t.Wm)(_,{onClick:e[0]||(e[0]=a=>m.modalFichajes.abrirModal()),class:"estiloCard ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("iniciar_turno","Iniciar turno")),1)])),_:1}),(0,t.Wm)(M,{class:"mt-3",icon:"play",iconStyle:"fas",size:"6x"})])),_:1})])),_:1}),(0,t.Wm)(_,{onClick:e[1]||(e[1]=a=>m.iniciarDescanso()),class:"estiloCard ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("iniciar_descanso","Iniciar descanso")),1)])),_:1}),(0,t.Wm)(M,{class:"mt-3",icon:"pause",iconStyle:"fas",size:"6x"})])),_:1})])),_:1}),(0,t.Wm)(_,{onClick:e[2]||(e[2]=a=>m.preguntarFinalizarTurno()),class:"estiloCard ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("finalizar_turno","Finalizar turno")),1)])),_:1}),(0,t.Wm)(M,{class:"mt-3",icon:"stop",iconStyle:"fas",size:"6x"})])),_:1})])),_:1}),m.esFac_Tena?((0,t.wg)(),(0,t.j4)(_,{key:0,onClick:e[3]||(e[3]=a=>m.ModalLeerQRRef.abrirModal()),class:"estiloCardQR ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("iframe_iterum","Leer QR")),1)])),_:1}),(0,t.Wm)(M,{class:"mt-3",icon:"qrcode",iconStyle:"fas",size:"5x"})])),_:1})])),_:1})):(0,t.kq)("",!0),m.verVentas?((0,t.wg)(),(0,t.j4)(_,{key:1,onClick:e[4]||(e[4]=a=>m.ModalVentasRef.abrirModal()),class:"estiloCardQR ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("estado_ventas","Estado Ventas")),1)])),_:1}),(0,t.Wm)(M,{class:"mt-3",icon:"book",iconStyle:"fas",size:"5x"})])),_:1})])),_:1})):(0,t.kq)("",!0)]),(0,t._)("div",n,[(0,t._)("div",s,[m.trabajadorActivo?((0,t.wg)(),(0,t.j4)(h,{key:0,onClick:e[5]||(e[5]=a=>m.activarConsumoPersonal()),color:"primary",class:"w-100 botonConsumoPersonal"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("consumo_personal","Consumo personal")),1)])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(h,{onClick:e[6]||(e[6]=a=>m.apagar_equipo()),color:"danger",class:"w-100 botonConsumoPersonal mt-4"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("apagar_equipo","Apagar equipo")),1)])),_:1}),null!=m.idActivoDescanso?((0,t.wg)(),(0,t.j4)(h,{key:1,onClick:e[7]||(e[7]=a=>m.preguntarFinalDescanso()),color:"primary",class:"w-100 botonConsumoPersonal mt-4"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("finalizar_descanso","Finalizar descanso")),1)])),_:1})):(0,t.kq)("",!0)]),m.arrayTrabajadoresDescanso&&m.arrayTrabajadoresDescanso.length>0?((0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("table",d,[(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",c,(0,r.zw)(a.$t("trabajadores_en_descanso_activo","Trabajadores en descanso activo")),1)])]),(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(m.arrayTrabajadoresDescanso,((a,e)=>((0,t.wg)(),(0,t.iD)("tr",{key:e,class:(0,r.C_)({activoTabla:a._id===m.idActivoDescanso}),onClick:e=>m.setActivo(a._id)},[(0,t._)("td",null,[(0,t._)("span",p,(0,r.zw)(a.nombre),1)])],10,u)))),128))])])])):(0,t.kq)("",!0)]),(0,t.Wm)(y,{ref:"ModalLeerQRRef"},null,512),(0,t.Wm)(g,{ref:"modalFichajes"},null,512),(0,t.Wm)(B,{ref:"ModalVentasRef"},null,512)],64)}o(57658);var f=o(74834),v=o(61562),b=o(44161);const M=["src"];function w(a,e,o,l,n,s){const i=(0,t.up)("MDBBtn"),d=(0,t.up)("MDBModalFooter"),c=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.j4)(c,{id:"ModalLeerQR",tabindex:"-1",labelledby:"ModalLeerQRLabel",modelValue:l.ModalLeerQR,"onUpdate:modelValue":e[1]||(e[1]=a=>l.ModalLeerQR=a),fullscreen:""},{default:(0,t.w5)((()=>[(0,t._)("iframe",{src:l.url,style:{position:"absolute",height:"90%",width:"90%",border:"none"}},null,8,M),(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{color:"danger",size:"lg",onClick:e[0]||(e[0]=a=>l.ModalLeerQR=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("cerrar","Cerrar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}var _=o(44870),h=o(74313),y={name:"ModalLeerQRComponent",components:{MDBModal:h.j3,MDBModalFooter:h.ab,MDBBtn:h.$v},setup(a,{expose:e}){const o=(0,_.iH)(!1),t=(0,_.iH)("");function r(a){l(),o.value=!0}function l(){t.value="https://silema.web.app/validarQR-trabajador"}return e({abrirModal:r}),{ModalLeerQR:o,abrirModal:r,url:t}}},g=o(40089);const B=(0,g.Z)(y,[["render",w]]);var C=B,k=o(42492),D=o.n(k),j=o(20065),T=o(49242);const z={class:"row"},x={key:0,class:"row mt-2"},W={class:"table table-striped"},F={class:"textoNombre d-inline-block text-truncate"},H={key:1,class:"row"},V={class:"sinResultados position-relative"},R={class:"textoSinResultados position-absolute top-50 start-50 translate-middle"};function $(a,e,o,l,n,s){const i=(0,t.up)("MDBModalTitle"),d=(0,t.up)("MDBModalHeader"),c=(0,t.up)("MDBBtn"),u=(0,t.up)("MDBModalBody"),p=(0,t.up)("MDBModalFooter"),m=(0,t.up)("MDBModal"),f=(0,t.up)("KeyBoardComponent");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(m,{id:"modalFichajes",tabindex:"-1",labelledby:"staticBackdropLabel",modelValue:l.modalFichajes,"onUpdate:modelValue":e[3]||(e[3]=a=>l.modalFichajes=a),size:"xl",modalFichajes:""},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{id:"staticBackdropLabel"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("fichar","Fichar")),1)])),_:1})])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t._)("div",z,[(0,t.wy)((0,t._)("input",{class:"form-control inputBusqueda w-100",type:"text",placeholder:"Buscar por nombre","aria-label":".form-control-lg example",readonly:"",onClick:e[0]||(e[0]=a=>l.openKeyboard()),"onUpdate:modelValue":e[1]||(e[1]=a=>l.inputBusqueda=a)},null,512),[[T.nr,l.inputBusqueda]])]),l.arrayTrabajadores&&l.arrayTrabajadores.length>0?((0,t.wg)(),(0,t.iD)("div",x,[(0,t._)("table",W,[(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.arrayTrabajadores,((e,o)=>((0,t.wg)(),(0,t.iD)("tr",{key:o},[(0,t._)("td",null,[(0,t._)("span",F,(0,r.zw)(e.nombre),1)]),(0,t._)("td",null,[(0,t.Wm)(c,{color:"primary",size:"lg",onClick:a=>l.fichar(e._id),class:"w-100",style:{height:"3.85rem","font-size":"1.5rem"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("fichar","Fichar")),1)])),_:2},1032,["onClick"])])])))),128))])])])):((0,t.wg)(),(0,t.iD)("div",H,[(0,t._)("div",V,[(0,t._)("span",R,(0,r.zw)(a.$t("sin_resultados","Sin resultados")),1)])]))])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:"primary",size:"lg",onClick:e[2]||(e[2]=a=>l.modalFichajes=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("cerrar","Cerrar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(f,{ref:"keyboardRef"},null,512)],64)}var q={name:"FichajesModal",components:{MDBModal:h.j3,MDBModalHeader:h.ol,MDBModalTitle:h.wo,MDBModalBody:h.Yz,MDBModalFooter:h.ab,MDBBtn:h.$v,KeyBoardComponent:v.Z},setup(){const a=(0,_.iH)(null),e=(0,_.iH)([]),o=(0,_.iH)(""),r=(0,_.iH)(""),l=(0,_.iH)(null);function n(){a.value=!0}function s(){b.Z.post("trabajadores/buscar",{busqueda:o.value}).then((a=>{e.value=a.data})).catch((a=>{D().fire("Oops...",a.message,"error")}))}function i(e){b.Z.post("trabajadores/fichar",{idTrabajador:e}).then((e=>{if(!e.data)throw Error("Error, no se ha podido fichar");f.W.cargarTrabajadoresFichados(),a.value=!1})).catch((a=>{D().fire("Oops...",a.message,"error")}))}let d;async function c(){try{l.value.abrirModal(o.value),d=setInterval((()=>{o.value=l.value.getValue()[0],l.value.getValue()[1]||clearInterval(d)}),100)}catch(a){d=void 0}}return(0,t.YP)(o,(()=>{s()})),{modalFichajes:a,abrirModal:n,arrayTrabajadores:e,inputBusqueda:o,fichar:i,inputText:r,keyboardRef:l,openKeyboard:c}}};const I=(0,g.Z)(q,[["render",$],["__scopeId","data-v-41124af1"]]);var U=I,L=o(54455);const S={class:"caja"},E={class:"result"};function Z(a,e,o,l,n,s){const i=(0,t.up)("MDBModalHeader"),d=(0,t.up)("MDBBtn"),c=(0,t.up)("MDBModalBody"),u=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.j4)(u,{id:"modalVentas",tabindex:"-1",labelledby:"tituloModalEstadoVentas",modelValue:l.modalVentas,"onUpdate:modelValue":e[1]||(e[1]=a=>l.modalVentas=a),staticBackdrop:"",size:"lg"},{default:(0,t.w5)((()=>[(0,t._)("div",S,[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t._)("h2",null,(0,r.zw)(a.$t("estado_de_la_caja","Estado de la caja")),1)])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,{color:"primary",onClick:e[0]||(e[0]=a=>l.toggleCaja())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(a.$t("consultar_estado_de_la_caja","Consultar estado de la caja")),1)])),_:1}),(0,t._)("div",E,(0,r.zw)(a.$t("estado","estado"))+": "+(0,r.zw)(l.emoji),1)])),_:1})])])),_:1},8,["modelValue"])}var Q={name:"InformesCajaComponent",components:{MDBBtn:h.$v,MDBCard:h.Yl,MDBModal:h.j3,MDBModalBody:h.Yz,MDBModalHeader:h.ol},setup(a,{expose:e}){const o=(0,_.iH)(!1),r=(0,j.oR)(),l=(0,t.Fl)((()=>r.state.Caja.arrayVentas));let n=0;const s=()=>{u.value=c(),b.Z.post("/movimientos/getPred").then((a=>{u.value=p(a.data)}))};function i(a){return Math.floor(Math.random()*a)}function d(){o.value=!0}function c(){const a=["Consultando con jesus...","Preguntando a los astros...","Mirando en la bola de cristal...","Leyendo el tarot...","Mirando en la barra del bar...","Consultando con el oraculo...","Leyendo el horoscopo...","Mirando en el cafe turco...","Consultando con el espiritu santo...","Lo siento profe no estudie..."];return a[i(a.length)]}e({abrirModal:d});const u=(0,_.iH)(c()),p=(a=[])=>{if(0==a.length||!a)return"No hay datos â“";const e=Number(a[0]?.Import),o=20*e/100,t=50*e/100,r=e,s=125*e/100;return n=0,l.value.forEach((a=>{n+=Number(a.total)})),n<=o?"ðŸ’©":n>o&&n<=t?"ðŸ˜":n>t&&n<=r?"ðŸ˜€":n>r&&n<=s?"ðŸ˜":"ðŸ¤‘"};return s(),{toggleCaja:s,emoji:u,modalVentas:o}}};const A=(0,g.Z)(Q,[["render",Z],["__scopeId","data-v-ee02c22a"]]);var K=A,O={name:"fichajesView",components:{MDBIcon:h.vm,FichajesModal:U,MDBCard:h.Yl,MDBCardBody:h.H7,MDBCardTitle:h.QM,MDBBtn:h.$v,ModalLeerQR:C,InformesCajaComponent:K,KeyBoardComponent:v.Z},setup(){const a=(0,j.oR)(),e=a.getters["Configuracion/parametros"],o=(0,_.iH)(null),r=(0,_.iH)(!1),l=(0,_.iH)(null),n=(0,_.iH)([]),s=(0,_.iH)(null),i=(0,_.iH)(null),d=(0,_.iH)(!1),c=(0,t.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),u=(0,t.Fl)((()=>a.state.Trabajadores.indexActivo)),p=(0,t.Fl)((()=>c.value&&void 0!=u.value&&null!=u.value&&c.value[u.value]?c.value[u.value]:null)),m=(0,t.Fl)((()=>a.state.Cestas.arrayCestas)),v=(0,t.Fl)((()=>{if(m.value)for(let a=0;a<m.value.length;a++)if(m.value[a]._id==c.value[u.value].idCesta)return m.value[a];return null}));function M(a){s.value=a}function w(){s.value=null}function h(){b.Z.post("trabajadores/desfichar",{idTrabajador:p.value._id}).then((a=>{if(!a.data)throw Error("Error, no se ha podido registrar el fin de turno (backend)");f.W.cargarTrabajadoresFichados(),D().fire("OK","Fin de turno registrado correctamente","success")})).catch((a=>{D().fire("Oops...",a.message,"error")}))}function y(a){for(let e=0;e<n.value.length;e++)if(a===n.value[e]._id)return n.value[e];return null}function g(){if(s.value){const a=y(s.value);a&&D().fire({title:"Por favor, confirma el descanso para: ",html:`${a.nombre}`,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Confirmar"}).then((a=>{a.isConfirmed&&T(s.value)}))}}function B(){D().fire({title:"Â¿Desea realmente apagar el equipo? ",html:"Â¡Esta funcion apagarÃ¡ instantaneamente su equipo!",showCancelButton:!0,confirmButtonText:"Apagar",cancelButtonText:"Cancelar",confirmButtonColor:"red",cancelButtonColor:"green",iconColor:"red",icon:"warning",backdrop:"rgba(255,0,0,0.4)"}).then((a=>{a.isConfirmed&&b.Z.post("controlTpv/ApagarOrdenador",{}).then((a=>{a.data?D().fire("Â¡Apagando!","Su equipo se apagarÃ¡ en unos instantes...","success"):D().fire("Â¡No hemos podido apagar el equipo!","Si el error se mantiene, pruebe a forzar un apagado!","error")})).catch((a=>{D().fire("Â¡No hemos podido apagar el equipo!","Si el error se mantiene, pruebe a forzar un apagado!"+a,"error")}))}))}async function C(){if(m.value&&v.value)for(let e=0;e<m.value.length;e++)if(m.value[e]._id===v.value._id){await a.dispatch("Cestas/setModoCesta",{modo:"CONSUMO_PERSONAL",index:e}),L.Z.push("/main");break}}function k(){p.value&&D().fire({title:"Confirma. Fin de turno para: ",html:`${p.value.nombre}`,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Confirmar"}).then((a=>{a.isConfirmed&&h()}))}function T(a){b.Z.post("trabajadores/finDescanso",{idTrabajador:a}).then((a=>{if(!a.data)throw Error("Error, no se  ha podido iniciar el descanso");f.W.cargarTrabajadoresFichados(),w(),x(),D().fire("Descanso finalizado","","success")})).catch((a=>{D().fire("Oops...",a.message,"error")}))}function z(){p.value._id?b.Z.post("trabajadores/inicioDescanso",{idTrabajador:p.value._id}).then((a=>{if(!a.data)throw Error("Error, no se ha podido iniciar el descanso");x(),f.W.cargarTrabajadoresFichados(),D().fire("OK","Descanso iniciado correctamente","success")})).catch((a=>{D().fire("Oops...",a.message,"error")})):D().fire("Importante....","Es necesario un trabajador activo para realizar esta acciÃ³n","warning")}function x(){b.Z.get("trabajadores/descansando").then((a=>{if(!a.data)throw Error("Error, no se han podido obtener los trabajadores en descanso");n.value=a.data})).catch((a=>{D().fire("Oops...",a.message,"error")}))}return(0,t.bv)((()=>{if(!e?.nombreEmpresa)return L.Z.push("/");x(),"tena"==e?.nombreEmpresa?.toLowerCase()&&(r.value=!0),b.Z.post("/parametros/getParametros").then((a=>{d.value="Si"===a.data?.params.verInformesVentas}))})),{modalFichajes:o,arrayTrabajadoresDescanso:n,idActivoDescanso:s,esFac_Tena:r,setActivo:M,trabajadorActivo:p,finDeTurno:h,iniciarDescanso:z,preguntarFinalDescanso:g,resetidActivoDescansando:w,preguntarFinalizarTurno:k,activarConsumoPersonal:C,apagar_equipo:B,ModalLeerQRRef:l,ModalVentasRef:i,verVentas:d}}};const P=(0,g.Z)(O,[["render",m],["__scopeId","data-v-5d73f698"]]);var Y=P}}]);
//# sourceMappingURL=578.2d2eac44.js.map