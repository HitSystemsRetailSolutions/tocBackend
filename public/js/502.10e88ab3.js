"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[502],{61562:function(a,e,o){o.d(e,{Z:function(){return p}});var r=o(73396),t=o(87139);const n=["onClick"],l={class:"botonTecladoSpaceDiv"};function s(a,e,o,s,i,c){const d=(0,r.up)("MDBInput"),u=(0,r.up)("MDBModalHeader"),m=(0,r.up)("MDBModalBody"),p=(0,r.up)("MDBModal");return(0,r.wg)(),(0,r.j4)(p,{frame:"",position:"bottom",id:"keyBoardModal",tabindex:"-1",labelledby:"keyBoardModal",modelValue:s.keyBoardModal,"onUpdate:modelValue":e[4]||(e[4]=a=>s.keyBoardModal=a)},{default:(0,r.w5)((()=>[s.showInput?((0,r.wg)(),(0,r.j4)(u,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{style:{width:"80rem !important"},label:"Texto introducido",modelValue:s.text,"onUpdate:modelValue":e[0]||(e[0]=a=>s.text=a)},null,8,["modelValue"])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(m,{class:"mainDiv"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.chars.length,((a,e)=>((0,r.wg)(),(0,r.iD)("div",{key:e},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.chars[a-1],((a,e)=>((0,r.wg)(),(0,r.iD)("div",{class:"btn-group-vertical mt-1 divTecla",key:e},[(0,r._)("button",{type:"button",style:(0,t.j5)([{"text-transform":"none"},s.keyStyle(a)]),class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e=>s.processTecla(a)},(0,t.zw)(a),13,n)])))),128))])))),128)),(0,r._)("div",l,[(0,r._)("button",{style:(0,t.j5)([{"font-size":"1.8rem"},s.keyStyle("âœŽ")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e[1]||(e[1]=a=>s.processTecla("âœŽ"))}," âœŽ ",4),(0,r._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonTecladoSpace",onClick:e[2]||(e[2]=a=>s.processTecla(" "))}," â£ "),(0,r._)("button",{style:(0,t.j5)([{"font-size":"1.8rem"},s.keyStyle("#")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e[3]||(e[3]=a=>s.processTecla("#"))}," â…£ ",4)])])),_:1})])),_:1},8,["modelValue"])}var i=o(44870),c=o(74313),d={name:"KeyBoardComponent",components:{MDBIcon:c.vm,MDBModalBody:c.Yz,MDBModal:c.j3,MDBBtn:c.$v,MDBModalHeader:c.ol,MDBModalTitle:c.wo,MDBInput:c.u2,MDBModalFooter:c.ab},props:{value:String,text:String},setup(a,{expose:e}){const o=(0,i.iH)(a.value||""),t=(0,i.iH)(!1),n=(0,i.iH)(!1),l=(0,i.iH)(!1);let s=!1;const c=(0,i.iH)(!1),d=[["q","w","e","r","t","y","u","i","o","p","â†"],["a","s","d","f","g","h","j","k","l","Ã±","â†µ"],["z","x","c","v","b","n","m",",",".","-","â‡ª"]],u=(0,i.iH)([]);function m(a){switch(a){case"â†":v();break;case"â†µ":t.value=!1;break;case"â‡ª":s=!s,o.value.length>0&&(n.value=!n.value),b();break;case"#":l.value=!l.value,b();break;case"âœŽ":c.value=!c.value;break;default:f(a);break}}function p(a){let e=o.value.length<=0&&!s||n.value,r="background-color: #606060 !important; color: white !important;";return l.value&&"#"==a||c.value&&"âœŽ"==a||"â‡ª"==a&&e?r:e?"text-transform: uppercase":"text-transform: none;"}function f(a){let e=o.value.length<=0&&!s||n.value;s=!1,e&&(a=a.toUpperCase()),o.value+=a}function v(){o.value.length>0&&(o.value=o.value.slice(0,-1))}function b(){let a=d;const e=["Ã¡","Ã©","Ã­","Ã³","Ãº","Ã¼","Â¡","Â¿"];if(l.value){let e=[["1","2","3","4","5","6","7","8","9","0","Ã§"]];e=e.concat(d),a=e}u.value=a.map((a=>a.map((a=>e.includes(a)?[a,a.toUpperCase()]:a))))}function w(a=""){void 0===o.value&&(o.value=""),o.value=a,t.value=!0}function M(){return[o.value,t.value]}return e({getValue:M,abrirModal:w}),(0,r.bv)((()=>{b()})),{text:o,addTecla:f,deleteTecla:v,keyBoardModal:t,processTecla:m,upperCase:n,keyStyle:p,buildKeyboard:b,abrirModal:w,showInput:c,chars:u}}},u=o(40089);const m=(0,u.Z)(d,[["render",s],["__scopeId","data-v-c19133e2"]]);var p=m},93502:function(a,e,o){o.r(e),o.d(e,{default:function(){return Y}});var r=o(73396),t=o(87139);const n={class:"row mt-2"},l={class:"row mt-4 divInferior"},s={class:"col anchoCajaConsumoPersonal"},i={key:0,class:"col tablaDescansando table-responsive d-inline",style:{"background-color":"white"}},c={class:"table"},d={class:"tituloDescanso"},u=["onClick"],m={class:"textoNombre d-inline-block text-truncate"};function p(a,e,o,p,f,v){const b=(0,r.up)("MDBCardTitle"),w=(0,r.up)("MDBIcon"),M=(0,r.up)("MDBCardBody"),_=(0,r.up)("MDBCard"),h=(0,r.up)("MDBBtn"),g=(0,r.up)("ModalLeerQR"),y=(0,r.up)("FichajesModal"),B=(0,r.up)("InformesCajaComponent");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",n,[(0,r.Wm)(_,{onClick:e[0]||(e[0]=a=>p.modalFichajes.abrirModal()),class:"estiloCard ms-4"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("iniciar_turno","Iniciar turno")),1)])),_:1}),(0,r.Wm)(w,{class:"mt-3",icon:"play",iconStyle:"fas",size:"6x"})])),_:1})])),_:1}),(0,r.Wm)(_,{onClick:e[1]||(e[1]=a=>p.iniciarDescanso()),class:"estiloCard ms-4"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("iniciar_descanso","Iniciar descanso")),1)])),_:1}),(0,r.Wm)(w,{class:"mt-3",icon:"pause",iconStyle:"fas",size:"6x"})])),_:1})])),_:1}),(0,r.Wm)(_,{onClick:e[2]||(e[2]=a=>p.preguntarFinalizarTurno()),class:"estiloCard ms-4"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("finalizar_turno","Finalizar turno")),1)])),_:1}),(0,r.Wm)(w,{class:"mt-3",icon:"stop",iconStyle:"fas",size:"6x"})])),_:1})])),_:1}),p.esFac_Tena?((0,r.wg)(),(0,r.j4)(_,{key:0,onClick:e[3]||(e[3]=a=>p.ModalLeerQRRef.abrirModal()),class:"estiloCardQR ms-4"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("iframe_iterum","Leer QR")),1)])),_:1}),(0,r.Wm)(w,{class:"mt-3",icon:"qrcode",iconStyle:"fas",size:"5x"})])),_:1})])),_:1})):(0,r.kq)("",!0),p.verVentas?((0,r.wg)(),(0,r.j4)(_,{key:1,onClick:e[4]||(e[4]=a=>p.ModalVentasRef.abrirModal()),class:"estiloCardQR ms-4"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("estado_ventas","Estado Ventas")),1)])),_:1}),(0,r.Wm)(w,{class:"mt-3",icon:"book",iconStyle:"fas",size:"5x"})])),_:1})])),_:1})):(0,r.kq)("",!0)]),(0,r._)("div",l,[(0,r._)("div",s,[p.trabajadorActivo?((0,r.wg)(),(0,r.j4)(h,{key:0,onClick:e[5]||(e[5]=a=>p.resetearImpresora()),color:"secondary",class:"w-50 botonResetearImpresora"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("resetear_impresora","Resetear impresora")),1)])),_:1})):(0,r.kq)("",!0),p.trabajadorActivo?((0,r.wg)(),(0,r.j4)(h,{key:1,onClick:e[6]||(e[6]=a=>p.activarConsumoPersonal()),color:"primary",class:"w-100 botonConsumoPersonal"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("consumo_personal","Consumo personal")),1)])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(h,{onClick:e[7]||(e[7]=a=>p.apagar_equipo()),color:"danger",class:"w-100 botonConsumoPersonal mt-4"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("apagar_equipo","Apagar equipo")),1)])),_:1}),null!=p.idActivoDescanso?((0,r.wg)(),(0,r.j4)(h,{key:2,onClick:e[8]||(e[8]=a=>p.preguntarFinalDescanso()),color:"primary",class:"w-100 botonConsumoPersonal mt-4"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("finalizar_descanso","Finalizar descanso")),1)])),_:1})):(0,r.kq)("",!0)]),p.arrayTrabajadoresDescanso&&p.arrayTrabajadoresDescanso.length>0?((0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("table",c,[(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",d,(0,t.zw)(a.$t("trabajadores_en_descanso_activo","Trabajadores en descanso activo")),1)])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(p.arrayTrabajadoresDescanso,((a,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:e,class:(0,t.C_)({activoTabla:a._id===p.idActivoDescanso}),onClick:e=>p.setActivo(a._id)},[(0,r._)("td",null,[(0,r._)("span",m,(0,t.zw)(a.nombre),1)])],10,u)))),128))])])])):(0,r.kq)("",!0)]),(0,r.Wm)(g,{ref:"ModalLeerQRRef"},null,512),(0,r.Wm)(y,{ref:"modalFichajes"},null,512),(0,r.Wm)(B,{ref:"ModalVentasRef"},null,512)],64)}o(57658);var f=o(74834),v=o(61562),b=o(44161);const w=["src"];function M(a,e,o,n,l,s){const i=(0,r.up)("MDBBtn"),c=(0,r.up)("MDBModalFooter"),d=(0,r.up)("MDBModal");return(0,r.wg)(),(0,r.j4)(d,{id:"ModalLeerQR",tabindex:"-1",labelledby:"ModalLeerQRLabel",modelValue:n.ModalLeerQR,"onUpdate:modelValue":e[1]||(e[1]=a=>n.ModalLeerQR=a),fullscreen:""},{default:(0,r.w5)((()=>[(0,r._)("iframe",{src:n.url,style:{position:"absolute",height:"90%",width:"90%",border:"none"}},null,8,w),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{color:"danger",size:"lg",onClick:e[0]||(e[0]=a=>n.ModalLeerQR=!1)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("cerrar","Cerrar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}var _=o(44870),h=o(74313),g={name:"ModalLeerQRComponent",components:{MDBModal:h.j3,MDBModalFooter:h.ab,MDBBtn:h.$v},setup(a,{expose:e}){const o=(0,_.iH)(!1),r=(0,_.iH)("");function t(a){n(),o.value=!0}function n(){r.value="https://silema.web.app/validarQR-trabajador"}return e({abrirModal:t}),{ModalLeerQR:o,abrirModal:t,url:r}}},y=o(40089);const B=(0,y.Z)(g,[["render",M]]);var C=B,k=o(42492),D=o.n(k),j=o(20065),T=o(49242);const z={class:"row"},x={key:0,class:"row mt-2"},W={class:"table table-striped"},F={class:"textoNombre d-inline-block text-truncate"},H={key:1,class:"row"},V={class:"sinResultados position-relative"},R={class:"textoSinResultados position-absolute top-50 start-50 translate-middle"};function I(a,e,o,n,l,s){const i=(0,r.up)("MDBModalTitle"),c=(0,r.up)("MDBModalHeader"),d=(0,r.up)("MDBBtn"),u=(0,r.up)("MDBModalBody"),m=(0,r.up)("MDBModalFooter"),p=(0,r.up)("MDBModal"),f=(0,r.up)("KeyBoardComponent");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(p,{id:"modalFichajes",tabindex:"-1",labelledby:"staticBackdropLabel",modelValue:n.modalFichajes,"onUpdate:modelValue":e[3]||(e[3]=a=>n.modalFichajes=a),size:"xl",modalFichajes:""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{id:"staticBackdropLabel"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("fichar","Fichar")),1)])),_:1})])),_:1}),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r._)("div",z,[(0,r.wy)((0,r._)("input",{class:"form-control inputBusqueda w-100",type:"text",placeholder:"Buscar por nombre","aria-label":".form-control-lg example",readonly:"",onClick:e[0]||(e[0]=a=>n.openKeyboard()),"onUpdate:modelValue":e[1]||(e[1]=a=>n.inputBusqueda=a)},null,512),[[T.nr,n.inputBusqueda]])]),n.arrayTrabajadores&&n.arrayTrabajadores.length>0?((0,r.wg)(),(0,r.iD)("div",x,[(0,r._)("table",W,[(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.arrayTrabajadores,((e,o)=>((0,r.wg)(),(0,r.iD)("tr",{key:o},[(0,r._)("td",null,[(0,r._)("span",F,(0,t.zw)(e.nombre),1)]),(0,r._)("td",null,[(0,r.Wm)(d,{color:"primary",size:"lg",onClick:a=>n.fichar(e._id),class:"w-100",style:{height:"3.85rem","font-size":"1.5rem"}},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("fichar","Fichar")),1)])),_:2},1032,["onClick"])])])))),128))])])])):((0,r.wg)(),(0,r.iD)("div",H,[(0,r._)("div",V,[(0,r._)("span",R,(0,t.zw)(a.$t("sin_resultados","Sin resultados")),1)])]))])),_:1}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{color:"primary",size:"lg",onClick:e[2]||(e[2]=a=>n.modalFichajes=!1)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("cerrar","Cerrar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(f,{ref:"keyboardRef"},null,512)],64)}var $={name:"FichajesModal",components:{MDBModal:h.j3,MDBModalHeader:h.ol,MDBModalTitle:h.wo,MDBModalBody:h.Yz,MDBModalFooter:h.ab,MDBBtn:h.$v,KeyBoardComponent:v.Z},setup(){const a=(0,_.iH)(null),e=(0,_.iH)([]),o=(0,_.iH)(""),t=(0,_.iH)(""),n=(0,_.iH)(null);function l(){a.value=!0}function s(){b.Z.post("trabajadores/buscar",{busqueda:o.value}).then((a=>{e.value=a.data})).catch((a=>{D().fire("Oops...",a.message,"error")}))}function i(e){b.Z.post("trabajadores/fichar",{idTrabajador:e}).then((e=>{if(!e.data)throw Error("Error, no se ha podido fichar");f.W.cargarTrabajadoresFichados(),a.value=!1})).catch((a=>{D().fire("Oops...",a.message,"error")}))}let c;async function d(){try{n.value.abrirModal(o.value),c=setInterval((()=>{console.log("refrescando"),o.value=n.value.getValue()[0],n.value.getValue()[1]||clearInterval(c)}),100)}catch(a){c=void 0}}return(0,r.YP)(o,(()=>{s()})),{modalFichajes:a,abrirModal:l,arrayTrabajadores:e,inputBusqueda:o,fichar:i,inputText:t,keyboardRef:n,openKeyboard:d}}};const q=(0,y.Z)($,[["render",I],["__scopeId","data-v-d8d5b824"]]);var S=q,U=o(54455);const E={class:"caja"},L={class:"result"};function Z(a,e,o,n,l,s){const i=(0,r.up)("MDBModalHeader"),c=(0,r.up)("MDBBtn"),d=(0,r.up)("MDBModalBody"),u=(0,r.up)("MDBModal");return(0,r.wg)(),(0,r.j4)(u,{id:"modalVentas",tabindex:"-1",labelledby:"tituloModalEstadoVentas",modelValue:n.modalVentas,"onUpdate:modelValue":e[1]||(e[1]=a=>n.modalVentas=a),staticBackdrop:"",size:"lg"},{default:(0,r.w5)((()=>[(0,r._)("div",E,[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r._)("h2",null,(0,t.zw)(a.$t("estado_de_la_caja","Estado de la caja")),1)])),_:1}),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{color:"primary",onClick:e[0]||(e[0]=a=>n.toggleCaja())},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(a.$t("consultar_estado_de_la_caja","Consultar estado de la caja")),1)])),_:1}),(0,r._)("div",L,(0,t.zw)(a.$t("estado","estado"))+": "+(0,t.zw)(n.emoji),1)])),_:1})])])),_:1},8,["modelValue"])}var Q={name:"InformesCajaComponent",components:{MDBBtn:h.$v,MDBCard:h.Yl,MDBModal:h.j3,MDBModalBody:h.Yz,MDBModalHeader:h.ol},setup(a,{expose:e}){const o=(0,_.iH)(!1),t=(0,j.oR)(),n=(0,r.Fl)((()=>t.state.Caja.arrayVentas));let l=0;const s=()=>{u.value=d(),b.Z.post("/movimientos/getPred").then((a=>{u.value=m(a.data)}))};function i(a){return Math.floor(Math.random()*a)}function c(){o.value=!0}function d(){const a=["Consultando con jesus...","Preguntando a los astros...","Mirando en la bola de cristal...","Leyendo el tarot...","Mirando en la barra del bar...","Consultando con el oraculo...","Leyendo el horoscopo...","Mirando en el cafe turco...","Consultando con el espiritu santo...","Lo siento profe no estudie..."];return a[i(a.length)]}e({abrirModal:c});const u=(0,_.iH)(d()),m=(a=[])=>{if(0==a.length||!a)return"No hay datos â“";const e=Number(a[0]?.Import),o=20*e/100,r=50*e/100,t=e,s=125*e/100;return l=0,n.value.forEach((a=>{l+=Number(a.total)})),l<=o?"ðŸ’©":l>o&&l<=r?"ðŸ˜":l>r&&l<=t?"ðŸ˜€":l>t&&l<=s?"ðŸ˜":"ðŸ¤‘"};return s(),{toggleCaja:s,emoji:u,modalVentas:o}}};const A=(0,y.Z)(Q,[["render",Z],["__scopeId","data-v-ee02c22a"]]);var K=A,P={name:"fichajesView",components:{MDBIcon:h.vm,FichajesModal:S,MDBCard:h.Yl,MDBCardBody:h.H7,MDBCardTitle:h.QM,MDBBtn:h.$v,ModalLeerQR:C,InformesCajaComponent:K,KeyBoardComponent:v.Z},setup(){const a=(0,j.oR)(),e=a.getters["Configuracion/parametros"],o=(0,_.iH)(null),t=(0,_.iH)(!1),n=(0,_.iH)(null),l=(0,_.iH)([]),s=(0,_.iH)(null),i=(0,_.iH)(null),c=(0,_.iH)(!1),d=(0,r.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),u=(0,r.Fl)((()=>a.state.Trabajadores.indexActivo)),m=(0,r.Fl)((()=>d.value&&void 0!=u.value&&null!=u.value&&d.value[u.value]?d.value[u.value]:null)),p=(0,r.Fl)((()=>a.state.Cestas.arrayCestas)),v=(0,r.Fl)((()=>{if(p.value)for(let a=0;a<p.value.length;a++)if(p.value[a]._id==d.value[u.value].idCesta)return p.value[a];return null}));function w(a){s.value=a}function M(){s.value=null}const h=async()=>{const a=await D().fire({title:"Â¿EstÃ¡s seguro?",text:"Â¡Se reiniciarÃ¡ el contador de papel de la impresora!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:'<i class="fas fa-check-circle"></i> Si, reiniciar impresora',cancelButtonText:'<i class="fas fa-times-circle"></i> No, cancelar'});if(a.isConfirmed)try{const a=await b.Z.post("/impresora/reiniciarPapel");if(!a.data)throw Error("Error al reiniciar el papel de la impresora");D().fire({title:"OK",text:"Impresora reiniciada correctamente",timer:1e3,timerProgressBar:!0,icon:"success"})}catch(e){D().fire({title:"Error",text:e.message,icon:"error"})}};function g(){b.Z.post("trabajadores/desfichar",{idTrabajador:m.value._id}).then((a=>{if(!a.data)throw Error("Error, no se ha podido registrar el fin de turno (backend)");f.W.cargarTrabajadoresFichados(),D().fire("OK","Fin de turno registrado correctamente","success")})).catch((a=>{D().fire("Oops...",a.message,"error")}))}function y(a){for(let e=0;e<l.value.length;e++)if(a===l.value[e]._id)return l.value[e];return null}function B(){if(s.value){const a=y(s.value);a&&D().fire({title:"Por favor, confirma el descanso para: ",html:`${a.nombre}`,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Confirmar"}).then((a=>{a.isConfirmed&&z(s.value)}))}}function C(){D().fire({title:"Â¿Desea realmente apagar el equipo? ",html:"Â¡Esta funcion apagarÃ¡ instantaneamente su equipo!",showCancelButton:!0,confirmButtonText:"Apagar",cancelButtonText:"Cancelar",confirmButtonColor:"red",cancelButtonColor:"green",iconColor:"red",icon:"warning",backdrop:"rgba(255,0,0,0.4)"}).then((a=>{a.isConfirmed&&b.Z.post("controlTpv/ApagarOrdenador",{}).then((a=>{a.data?D().fire("Â¡Apagando!","Su equipo se apagarÃ¡ en unos instantes...","success"):D().fire("Â¡No hemos podido apagar el equipo!","Si el error se mantiene, pruebe a forzar un apagado!","error")})).catch((a=>{D().fire("Â¡No hemos podido apagar el equipo!","Si el error se mantiene, pruebe a forzar un apagado!"+a,"error")}))}))}async function k(){if(p.value&&v.value)for(let e=0;e<p.value.length;e++)if(p.value[e]._id===v.value._id){await a.dispatch("Cestas/setModoCesta",{modo:"CONSUMO_PERSONAL",index:e}),U.Z.push("/main");break}}function T(){m.value&&D().fire({title:"Confirma. Fin de turno para: ",html:`${m.value.nombre}`,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Confirmar"}).then((a=>{a.isConfirmed&&g()}))}function z(a){b.Z.post("trabajadores/finDescanso",{idTrabajador:a}).then((a=>{if(!a.data)throw Error("Error, no se  ha podido iniciar el descanso");f.W.cargarTrabajadoresFichados(),M(),W(),D().fire("Descanso finalizado","","success")})).catch((a=>{D().fire("Oops...",a.message,"error")}))}function x(){m.value._id?b.Z.post("trabajadores/inicioDescanso",{idTrabajador:m.value._id}).then((a=>{if(!a.data)throw Error("Error, no se ha podido iniciar el descanso");W(),f.W.cargarTrabajadoresFichados(),D().fire("OK","Descanso iniciado correctamente","success")})).catch((a=>{D().fire("Oops...",a.message,"error")})):D().fire("Importante....","Es necesario un trabajador activo para realizar esta acciÃ³n","warning")}function W(){b.Z.get("trabajadores/descansando").then((a=>{if(!a.data)throw Error("Error, no se han podido obtener los trabajadores en descanso");l.value=a.data})).catch((a=>{D().fire("Oops...",a.message,"error")}))}return(0,r.bv)((()=>{W(),"Tena"==e.nombreEmpresa&&(t.value=!0),b.Z.post("/parametros/getParametros").then((a=>{c.value="Si"===a.data?.params.verInformesVentas}))})),{modalFichajes:o,arrayTrabajadoresDescanso:l,idActivoDescanso:s,esFac_Tena:t,setActivo:w,trabajadorActivo:m,finDeTurno:g,iniciarDescanso:x,preguntarFinalDescanso:B,resetidActivoDescansando:M,preguntarFinalizarTurno:T,activarConsumoPersonal:k,apagar_equipo:C,ModalLeerQRRef:n,ModalVentasRef:i,verVentas:c,resetearImpresora:h}}};const O=(0,y.Z)(P,[["render",p],["__scopeId","data-v-7e296eaa"]]);var Y=O}}]);
//# sourceMappingURL=502.10e88ab3.js.map