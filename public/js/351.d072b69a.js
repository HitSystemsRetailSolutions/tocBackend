"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[351],{22871:function(e,a,o){o.d(a,{Z:function(){return p}});var t=o(73396),l=o(87139);const n=["onClick"],r={class:"botonTecladoSpaceDiv"};function i(e,a,o,i,c,d){const u=(0,t.up)("MDBInput"),s=(0,t.up)("MDBModalHeader"),m=(0,t.up)("MDBModalBody"),p=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.j4)(p,{frame:"",position:"bottom",id:"keyBoardModal",tabindex:"-1",labelledby:"keyBoardModal",modelValue:i.keyBoardModal,"onUpdate:modelValue":a[5]||(a[5]=e=>i.keyBoardModal=e)},{default:(0,t.w5)((()=>[i.showInput?((0,t.wg)(),(0,t.j4)(s,{key:0},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{width:"80rem !important"},label:"Texto introducido",modelValue:i.text,"onUpdate:modelValue":a[0]||(a[0]=e=>i.text=e)},null,8,["modelValue"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(m,{class:"mainDiv"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.chars.length,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.chars[e-1],((e,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"btn-group-vertical mt-1 divTecla",key:a},[(0,t._)("button",{type:"button",style:(0,l.j5)([{"text-transform":"none"},i.keyStyle(e)]),class:"btn btn-outline-secondary py-3 botonTeclado",onClick:a=>i.processTecla(e)},(0,l.zw)(e),13,n)])))),128))])))),128)),(0,t._)("div",r,[(0,t._)("button",{style:(0,l.j5)([{"font-size":"1.8rem"},i.keyStyle("✎")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:a[1]||(a[1]=e=>i.processTecla("✎"))}," ✎ ",4),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonTecladoSpace",onClick:a[2]||(a[2]=e=>i.processTecla(" "))}," ␣ "),(0,t._)("button",{style:{"font-size":"1.8rem"},type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:a[3]||(a[3]=e=>i.processTecla("@"))}," @ "),(0,t._)("button",{style:(0,l.j5)([{"font-size":"1.8rem"},i.keyStyle("#")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:a[4]||(a[4]=e=>i.processTecla("#"))}," Ⅳ ",4)])])),_:1})])),_:1},8,["modelValue"])}var c=o(44870),d=o(74313),u={name:"KeyBoardComponent",components:{MDBIcon:d.vm,MDBModalBody:d.Yz,MDBModal:d.j3,MDBBtn:d.$v,MDBModalHeader:d.ol,MDBModalTitle:d.wo,MDBInput:d.u2,MDBModalFooter:d.ab},props:{value:String,text:String},setup(e,{expose:a}){const o=(0,c.iH)(e.value||""),l=(0,c.iH)(!1),n=(0,c.iH)(!1),r=(0,c.iH)(!1);let i=!1;const d=(0,c.iH)(!1),u=[["q","w","e","r","t","y","u","i","o","p","←"],["a","s","d","f","g","h","j","k","l","ñ","↵"],["z","x","c","v","b","n","m",",",".","-","⇪"]],s=(0,c.iH)([]);function m(e){switch(e){case"←":_();break;case"↵":l.value=!1;break;case"⇪":i=!i,o.value.length>0&&(n.value=!n.value),f();break;case"#":r.value=!r.value,f();break;case"✎":d.value=!d.value;break;default:v(e);break}}function p(e){let a=(o.value?.length<=0||!o.value)&&!i||n.value,t="background-color: #606060 !important; color: white !important;";return r.value&&"#"==e||d.value&&"✎"==e||"⇪"==e&&a?t:a?"text-transform: uppercase":"text-transform: none;"}function v(e){let a=n.value;i=!1,a&&(e=e.toUpperCase()),o.value+=e}function g(e){o.value=e}function _(){o.value.length>0&&(o.value=o.value.slice(0,-1))}function f(){let e=u;const a=["á","é","í","ó","ú","ü","¡","¿"];if(r.value){let a=[["1","2","3","4","5","6","7","8","9","0","ç"]];a=a.concat(u),e=a}s.value=e.map((e=>e.map((e=>a.includes(e)?[e,e.toUpperCase()]:e))))}function b(e=""){void 0===o.value&&(o.value=""),o.value=e,l.value=!0}function y(){return[o.value,l.value]}return a({getValue:y,abrirModal:b,setText:g}),(0,t.bv)((()=>{f()})),{text:o,addTecla:v,deleteTecla:_,keyBoardModal:l,processTecla:m,upperCase:n,keyStyle:p,buildKeyboard:f,abrirModal:b,showInput:d,chars:s}}},s=o(40089);const m=(0,s.Z)(u,[["render",i],["__scopeId","data-v-0b19e9d8"]]);var p=m},9776:function(e,a,o){o.r(a),o.d(a,{default:function(){return _e}});var t=o(73396),l=o(87139),n=o(49242);const r=e=>((0,t.dD)("data-v-636cd7aa"),e=e(),(0,t.Cn)(),e),i={id:"main"},c={id:"vueMenuEncargo"},d={class:"encargos"},u={class:""},s={class:"row"},m={class:"d-flex justify-content-center align-items-center"},p={key:0},v={class:"btnEncargo lgEncargo float-right"},g=r((()=>(0,t._)("hr",null,null,-1))),_={class:"productos"},f={key:0,style:{"overflow-y":"scroll",height:"28vh"}},b={class:"d-flex flex-column juatify-content-center"},y={style:{"max-width":"270px"}},k={style:{display:"flex","align-items":"center",width:"60%"}},D=["aria-label","title","onUpdate:modelValue","onClick"],h=r((()=>(0,t._)("br",null,null,-1))),C={key:1},w=r((()=>(0,t._)("hr",{class:"hrEncargo"},null,-1))),T={class:"recogida"},M={class:"opciones-recogida"},B={class:"fechas-recogida"},E={key:0},x={key:1},H={key:2},A=["id","onUpdate:modelValue","onClick"],j=r((()=>(0,t._)("hr",{class:"hrEncargo"},null,-1))),I={class:"encargos-footer"},N=r((()=>(0,t._)("small",{id:"emailHelp",class:"form-text text-muted"},"Precio total:",-1))),R={class:"mb-0 mt-2"},z={class:"form-text text-muted"},V={key:0,style:{color:"#c00","font-weight":"bold","margin-left":"4px"}},P={key:0,class:"mb-2 d-flex align-items-center gap-3"},$={class:"form-check form-check-inline"},U={class:"form-check-label",for:"radioEfectivo"},q={class:"form-check form-check-inline"},S={class:"form-check-label",for:"radioDatafono"},O={class:"d-flex"},W={class:"input-deja-a-cuenta"},F=["disabled","aria-disabled","aria-label","title"],Z={class:"btnTotal"},K=["disabled"],Y={class:""},G=["disabled"],L={class:"row"},J={class:"col"},Q={class:"input-group input-group-lg"},X={class:"row"},ee={class:"col text-center"};function ae(e,a,o,r,ae,oe){const te=(0,t.up)("MDBIcon"),le=(0,t.up)("MDBModalTitle"),ne=(0,t.up)("MDBModalHeader"),re=(0,t.up)("NumpadComponent"),ie=(0,t.up)("MDBModalBody"),ce=(0,t.up)("MDBBtn"),de=(0,t.up)("MDBModalFooter"),ue=(0,t.up)("MDBModal"),se=(0,t.up)("ModalClientesComponent"),me=(0,t.up)("KeyBoardComponent");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",i,[(0,t._)("div",c,[(0,t._)("div",null,[(0,t._)("div",d,[(0,t._)("div",u,[(0,t._)("div",s,[(0,t._)("div",m,[r.clienteData.id?((0,t.wg)(),(0,t.iD)("h1",p,[(0,t._)("button",v,(0,l.zw)(r.clienteData.nombre),1)])):(0,t.kq)("",!0)])]),g,(0,t._)("div",_,[r.productos.length?((0,t.wg)(),(0,t.iD)("div",f,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.productos,((a,o)=>((0,t.wg)(),(0,t.iD)("div",{class:"producto d-flex justify-content-between w-75 mx-auto",key:o},[(0,t._)("div",b,[(0,t._)("span",y," - "+(0,l.zw)(a.nombre),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.arraySuplementos,((e,a)=>((0,t.wg)(),(0,t.iD)("span",{key:a},(0,l.zw)(e.nombre),1)))),128))]),(0,t._)("div",k,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","aria-label":e.$t("comentario_producto","Comentario del producto"),readonly:!0,title:e.$t("comentario_no_editable","El comentario solo es editable desde el teclado virtual"),placeholder:"Comentario del producto...","onUpdate:modelValue":e=>a.comentario=e,onClick:e=>r.openKeyboard(o),style:{flex:"1"}},null,8,D),[[n.nr,a.comentario]]),(0,t.Wm)(te,{icon:"keyboard",style:{"margin-left":"6px",color:"#888"},"aria-hidden":"true",title:e.$t("pulsa_para_editar","Pulsa para editar el comentario")},null,8,["title"])])])))),128)),h])):((0,t.wg)(),(0,t.iD)("div",C,(0,l.zw)(e.$t("toc_game_no_hay_productos","No hay ningún producto seleccionado")),1))]),w,(0,t._)("div",T,[(0,t._)("div",M,[(0,t._)("button",{onClick:a[0]||(a[0]=(...e)=>r.onClickRecogida&&r.onClickRecogida(...e)),value:"1",class:(0,l.C_)({active:1===r.refEncargoRecogida})},(0,l.zw)(e.$t("toc_game_encargos_hoy","Hoy")),3),(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>r.onClickRecogida&&r.onClickRecogida(...e)),value:"2",class:(0,l.C_)({active:2===r.refEncargoRecogida})},(0,l.zw)(e.$t("toc_game_encargos_otro_dia","Otro día")),3),(0,t._)("button",{onClick:a[2]||(a[2]=(...e)=>r.onClickRecogida&&r.onClickRecogida(...e)),value:"3",class:(0,l.C_)({active:3===r.refEncargoRecogida})},(0,l.zw)(e.$t("toc_game_encargos_cada","Cada...")),3)]),(0,t._)("div",B,[1===r.refEncargoRecogida?((0,t.wg)(),(0,t.iD)("div",E,[(0,t._)("button",{onClick:a[3]||(a[3]=(...e)=>r.onClickAmPm&&r.onClickAmPm(...e)),value:"am",class:(0,l.C_)({active:"am"===r.refAmPm})},(0,l.zw)(e.$t("toc_game_encargos_por_la_manana","Turno de la mañana")),3),(0,t._)("button",{onClick:a[4]||(a[4]=(...e)=>r.onClickAmPm&&r.onClickAmPm(...e)),value:"pm",class:(0,l.C_)({active:"pm"===r.refAmPm})},(0,l.zw)(e.$t("toc_game_encargos_por_la_tarde","Turno de la tarde")),3)])):(0,t.kq)("",!0),2===r.refEncargoRecogida?((0,t.wg)(),(0,t.iD)("div",x,[(0,t.wy)((0,t._)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=e=>r.fechaInput=e)},null,512),[[n.nr,r.fechaInput]]),(0,t.wy)((0,t._)("input",{type:"time",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>r.horaInput=e)},null,512),[[n.nr,r.horaInput]])])):(0,t.kq)("",!0),3===r.refEncargoRecogida?((0,t.wg)(),(0,t.iD)("div",H,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.dias,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a},[(0,t.wy)((0,t._)("input",{type:"button",id:e.dia,"onUpdate:modelValue":a=>e.dia=a,onClick:a=>r.clickDia(e),class:(0,l.C_)({active:e.checked})},null,10,A),[[n.nr,e.dia]])])))),128))])):(0,t.kq)("",!0)])]),j,(0,t._)("div",I,[(0,t._)("div",null,[N,(0,t._)("p",R,(0,l.zw)(r.precioTotal)+"€",1)]),(0,t._)("div",null,[(0,t._)("small",z,[(0,t.Uk)(" Deja a cuenta: "),r.clienteData?.noPagaEnTienda?((0,t.wg)(),(0,t.iD)("span",V,[(0,t.Wm)(te,{icon:"info-circle",style:{"margin-right":"2px"},"aria-hidden":"true"}),(0,t.Uk)(" "+(0,l.zw)(e.$t("no_modificable_para_clientes_de_facturacion","No modificable para clientes de facturación")),1)])):(0,t.kq)("",!0)]),1===r.tipoDatafono3G?((0,t.wg)(),(0,t.iD)("div",P,[(0,t._)("div",$,[(0,t.wy)((0,t._)("input",{class:"form-check-input",type:"radio",id:"radioEfectivo",value:"EFECTIVO","onUpdate:modelValue":a[7]||(a[7]=e=>r.metodoPago=e)},null,512),[[n.G2,r.metodoPago]]),(0,t._)("label",U,[(0,t.Wm)(te,{icon:"money-bill-wave",style:{color:"#28a745","margin-right":"4px"}}),(0,t.Uk)(" "+(0,l.zw)(e.$t("efectivo","Efectivo")),1)])]),(0,t._)("div",q,[(0,t.wy)((0,t._)("input",{class:"form-check-input",type:"radio",id:"radioDatafono",value:"DATAFONO3G","onUpdate:modelValue":a[8]||(a[8]=e=>r.metodoPago=e)},null,512),[[n.G2,r.metodoPago]]),(0,t._)("label",S,[(0,t.Wm)(te,{icon:"credit-card",style:{color:"#007bff","margin-right":"4px"}}),(0,t.Uk)(" "+(0,l.zw)(e.$t("datafono_3g","Datáfono 3G")),1)])])])):(0,t.kq)("",!0),(0,t._)("div",O,[(0,t._)("div",W,[(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",id:"cuentaInputDejaACuenta",name:"dejaACuenta",placeholder:"0",min:"0","onUpdate:modelValue":a[9]||(a[9]=e=>r.dejaACuenta=e),onClick:a[10]||(a[10]=(...e)=>r.openTecladoNum&&r.openTecladoNum(...e)),disabled:r.clienteData?.noPagaEnTienda,"aria-disabled":r.clienteData?.noPagaEnTienda?"true":"false","aria-label":e.$t("deja_a_cuenta","Deja a cuenta"),readonly:"",title:r.clienteData?.noPagaEnTienda?e.$t("no_modificable_para_clientes_que_no_pagan_en_tienda","No modificable para clientes que no pagan en tienda"):""},null,8,F),[[n.nr,r.dejaACuenta]])]),(0,t._)("div",Z,[(0,t._)("input",{type:"button",value:"APLICAR TOTAL",class:"btn btn-secondary",onClick:a[11]||(a[11]=(...e)=>r.aplicarTotalImporte&&r.aplicarTotalImporte(...e)),disabled:r.botonBloqueado||r.clienteData?.noPagaEnTienda},null,8,K)])])]),(0,t._)("div",Y,[(0,t._)("input",{type:"button",value:"Crear encargo",class:"btn btn-primary btn-lg mt-3",onClick:a[12]||(a[12]=(...e)=>r.crearEncargo&&r.crearEncargo(...e)),disabled:r.botonBloqueado},null,8,G)])])])])])])]),(0,t.Wm)(ue,{id:"modalTecladoNum",tabindex:"-1",labelledby:"modalTecladoNumLabel",modelValue:r.modalTecladoNum,"onUpdate:modelValue":a[16]||(a[16]=e=>r.modalTecladoNum=e),"data-backdrop":"false"},{default:(0,t.w5)((()=>[(0,t.Wm)(ne,null,{default:(0,t.w5)((()=>[(0,t.Wm)(le,{id:"modalTecladoNumLabel"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.$t("deja_a_cuenta","Deja a cuenta")),1)])),_:1})])),_:1}),(0,t.Wm)(ie,null,{default:(0,t.w5)((()=>[(0,t._)("div",L,[(0,t._)("div",J,[(0,t._)("div",Q,[r.numpadRef?(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":a[13]||(a[13]=e=>r.numpadRef.cantidad=e)},null,512)),[[n.nr,r.numpadRef.cantidad]]):(0,t.kq)("",!0)])])]),(0,t._)("div",X,[(0,t._)("div",ee,[(0,t.Wm)(re,{skipBalanza:!0,ref:"numpadRef"},null,512)])])])),_:1}),(0,t.Wm)(de,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ce,{color:"danger",onClick:a[14]||(a[14]=e=>r.closeTecladoNum()),size:"lg"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Cerrar ")])),_:1}),(0,t.Wm)(ce,{color:"success",size:"lg",onClick:a[15]||(a[15]=e=>r.finishTecladoNum())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.$t("aceptar","Aceptar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(se,{ref:"refModalClientes"},null,512),(0,t.Wm)(me,{ref:"keyboardRef"},null,512)],64)}o(57658);var oe=o(44870),te=o(74313),le=o(20065),ne=o(79312),re=o(18827),ie=o(42492),ce=o.n(ie),de=o(87853),ue=o(91076),se=o(44918),me=o(22871),pe={name:"EncargosComponent",components:{ModalClientesComponent:ne.Z,NumpadComponent:re.Z,MDBCard:te.Yl,MDBCardBody:te.H7,MDBCardTitle:te.QM,MDBCardText:te.Pp,MDBBtn:te.$v,MDBCheckbox:te.IH,MDBModal:te.j3,MDBModalHeader:te.ol,MDBModalTitle:te.wo,MDBModalBody:te.Yz,MDBModalFooter:te.ab,MDBIcon:te.vm,MDBLoading:te.J$,KeyBoardComponent:me.Z},setup(){const e=(0,oe.iH)(!1),a=(0,oe.iH)(null),o=(0,le.oR)(),{t:l}=(0,de.QT)(),n=o.getters["Cestas/getCestaActiva"],r=(o.getters["Cestas/getCestaActivaIndex"],(0,t.Fl)((()=>o.state.Trabajadores.arrayTrabajadores))),i=(0,t.Fl)((()=>o.state.Trabajadores.indexActivo)),c=(0,t.Fl)((()=>r.value&&null!=i.value&&void 0!=i.value&&r.value[i.value]?r.value[i.value]:null)),d=(0,oe.iH)(null),u=(0,oe.iH)(null),s=(0,oe.iH)(null),m=(0,oe.iH)("09:00"),p=(0,oe.iH)([{dia:"Lunes",nDia:0,checked:!1},{dia:"Martes",nDia:1,checked:!1},{dia:"Miércoles",nDia:2,checked:!1},{dia:"Jueves",nDia:3,checked:!1},{dia:"Viernes",nDia:4,checked:!1},{dia:"Sábado",nDia:5,checked:!1},{dia:"Domingo",nDia:6,checked:!1}]),v=(0,oe.iH)(null),g=(0,oe.iH)(0),_=(0,oe.iH)({id:n.idCliente,nombreCliente:n.nombreCliente}),f=(0,oe.iH)(null),b=(0,oe.iH)(null),y=(0,oe.iH)(n.lista.map((e=>({id:e.idArticulo,nombre:e.nombre,total:e.subtotal,unidades:e.unidades,comentario:"",arraySuplementos:e.arraySuplementos,promocion:e.promocion,descuentoTienda:e?.descuentoTienda||0,articulosMenu:e.articulosMenu||null})))),k=(0,oe.iH)(null),D=(0,oe.iH)(null),h=(0,oe.iH)("EFECTIVO"),C=(0,oe.iH)(0),w=e=>{d.value=parseInt(e.target.value)},T=e=>{u.value=e.target.value},M=e=>{const a=p.value.find((a=>a.nDia===e.nDia));a&&(a.checked=!a.checked)},B=()=>p.value.filter((e=>e.checked)),E=()=>{const e=n.detalleIva,a=Object.keys(e).filter((e=>e.startsWith("importe"))).reduce(((a,o)=>a+e[o]),0);return Math.round(100*a)/100},x=()=>{g.value=k.value},H=()=>{if(e.value=!0,!_.value.id)return A(l("toc_game_encargos_error_no_cliente","Tienes que seleccionar un cliente para crear el encargo."),"error"),void(e.value=!1);if(!y.value.length)return A(l("toc_game_encargos_error_no_productos","Tienes que haber al menos un producto para crear el encargo."),"error"),void(e.value=!1);if(!d.value)return A(l("toc_game_encargos_error_no_recogida","Tienes que elegir una opción de recogida (hoy, otro día o cada...)"),"error"),void(e.value=!1);if(1===d.value&&!u.value)return A(l("toc_game_encargos_error_no_am_pm","Tienes que elegir por la mañana o por la tarde"),"error"),void(e.value=!1);if(2===d.value&&(!s.value||!m.value))return A(l("toc_game_encargos_error_fecha_hora","Tienes que elegir la fecha y la hora del encargo"),"error"),void(e.value=!1);if(3===d.value&&!B().length)return A(l("toc_game_encargos_error_dias_seleccionados","Tienes que elegir al menos un día"),"error"),void(e.value=!1);if(1===d.value){const e=new Date,a=e.getFullYear(),o=e.getMonth()+1,t=e.getDate();s.value=`${a}-${o.toString().padStart(2,"0")}-${t.toString().padStart(2,"0")}`}if(3===d.value){let e=new Date,a=e.getDay(),o=B()[0].nDia+1,t=(o-a+7)%7,l=new Date(e.getTime()+24*t*60*60*1e3);const n=l.getFullYear(),r=l.getMonth()+1,i=l.getDate();s.value=`${n}-${r.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}`}const a={idCliente:_.value.id,nombreCliente:_.value.nombre,opcionRecogida:d.value,amPm:u.value,fecha:s.value,hora:m.value,dias:B(),dejaCuenta:g.value||0,total:E(),productos:y.value,cesta:n,idTrabajador:c.value._id,nombreDependienta:c.value.nombre};ue.Z.post("encargos/setEncargo",a).then((({data:a})=>{if(!a||!a.msg)return A(l("toc_game_encargos_error_general","Error general"),"error"),void(e.value=!1);if(a.error)return A(a.msg,"error"),void(e.value=!1);if(g.value>0){const a="DATAFONO3G"===h.value?"DATAFONO_3G":"ENTRADA_DINERO";ue.Z.post("movimientos/nuevoMovimiento",{cantidad:g.value,concepto:"dejaACuentaEncargo",idTrabajador:c.value._id,tipo:a,nombreCliente:_.value.nombre}).then((o=>{if(!o.data)throw e.value=!1,Error("No se ha podido realizar el movimiento de caja");"DATAFONO_3G"===a&&ue.Z.post("movimientos/nuevoMovimiento",{cantidad:g.value,concepto:"dejaACuentaEncargo",idTrabajador:c.value._id,tipo:"ENTRADA_DINERO",nombreCliente:_.value.nombre,ExtraData:{imprimir:!1}})})).catch((a=>{e.value=!1,ce().fire("Oops...",a.message,"error")}))}e.value=!1,A(l("toc_game_encargos_ok","Encargo creado!"),"success",j)})).catch((a=>{e.value=!1,A(l("toc_game_encargos_error_general","Error general"),"error")}))},A=(e,a,o=(()=>{}))=>{ce().fire("error"===a?"Oops...":"Ok!!",e,a).then((()=>o()))},j=async()=>{o.dispatch("EstadoDinamico/reset"),z("/main")},I=()=>{_.value?.noPagaEnTienda?A(l("toc_game_encargos_no_modificar_deja_a_cuenta_cliente_no_paga_en_tienda","No se puede modificar el deja a cuenta en un cliente que no paga en tienda."),"info"):b.value=!0},N=()=>{b.value=!1},R=()=>{let e=Number(f.value.cantidad);g.value=Number(e.toFixed(2)),N()},z=e=>se.Z.push(e);let V;async function P(e){try{const a=y.value[e];D.value.abrirModal(a.comentario),V=setInterval((()=>{const e=D.value.getValue()[0];e!==a.comentario&&(a.comentario=e),D.value.getValue()[1]||clearInterval(V)}),100)}catch(a){console.log(a),V=void 0}}return(0,t.bv)((async()=>{k.value=E();try{ue.Z.post("parametros/getParametros").then((e=>{"3G"!==e.data?.tipoDatafono&&"0.0.0.0"!=e.data?.ipTefpay||(C.value=1)}));const e=n.idCliente,a=await ue.Z.post("clientes/getClienteById",{idCliente:e});a&&a.data&&(_.value=a.data)}catch(e){console.error("Error en axios:",e)}})),(0,t.JJ)("okValue",(()=>b.value?R():I())),{refModalClientes:a,cestaActiva:n,clienteData:_,productos:y,refEncargoRecogida:d,refAmPm:u,dias:p,fechaInput:s,horaInput:m,dejaACuenta:g,onClickRecogida:w,onClickAmPm:T,clickDia:M,crearEncargo:H,precioTotal:k,refDia:v,botonBloqueado:e,numpadRef:f,modalTecladoNum:b,openTecladoNum:I,closeTecladoNum:N,finishTecladoNum:R,aplicarTotalImporte:x,keyboardRef:D,openKeyboard:P,metodoPago:h,tipoDatafono3G:C}}},ve=o(40089);const ge=(0,ve.Z)(pe,[["render",ae],["__scopeId","data-v-636cd7aa"]]);var _e=ge}}]);
//# sourceMappingURL=351.d072b69a.js.map