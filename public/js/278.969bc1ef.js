"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[278],{33727:function(a,t,e){e.d(t,{Z:function(){return y}});var o=e(73396),n=e(87139);const l={class:"btn-group"},d={class:"btn-group"},u={class:"btn-group"},s={class:"btn-group"},c={class:"btn-group"};function i(a,t,e,i,r,p){return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["btn-group-vertical mt-1",{disabled:e.disabled}])},[(0,o._)("div",l,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[0]||(t[0]=a=>i.addTecla("1"))}," 1 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[1]||(t[1]=a=>i.addTecla("2"))}," 2 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[2]||(t[2]=a=>i.addTecla("3"))}," 3 ")]),(0,o._)("div",d,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[3]||(t[3]=a=>i.addTecla("4"))}," 4 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[4]||(t[4]=a=>i.addTecla("5"))}," 5 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[5]||(t[5]=a=>i.addTecla("6"))}," 6 ")]),(0,o._)("div",u,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[6]||(t[6]=a=>i.addTecla("7"))}," 7 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[7]||(t[7]=a=>i.addTecla("8"))}," 8 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[8]||(t[8]=a=>i.addTecla("9"))}," 9 ")]),(0,o._)("div",s,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[9]||(t[9]=a=>i.deleteTecla())}," < "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[10]||(t[10]=a=>i.addTecla("0"))}," 0 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary botonNumpad",onClick:t[11]||(t[11]=a=>i.addTecla("."))}," , ")]),(0,o._)("div",c,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary botonComa",onClick:t[12]||(t[12]=a=>i.okValue(Number(i.cantidad)))}," OK ")])],2)}e(42492);var r=e(32066),p=e(43666),b=e(44870);const m=(0,r.io)("http://"+p.Z.state.TocGameURL+":5051");var v={props:{skipBalanza:{type:Boolean,default:!1},max3EntersDigits:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},name:"NumpadComponent",setup(a,{expose:t,emit:e}){const n=(0,b.iH)("0"),l=(0,o.f3)("okValue"),d=(0,b.iH)("5.5rem"),u=(0,b.iH)("5.5rem");(0,o.Fl)((()=>p.Z.state.Weight.lastWeight));function s(){e("activarShake")}function c(t){if(a.max3EntersDigits){let[a,e]=n.value.split("."),o=n.value.includes(".");if(a.length>=3&&!o&&"."!=t)return s();if(e&&e.length>=2)return s();if("."===t&&n.value.includes("."))return s()}"."===t&&n.value.includes(".")||(n.value+=t,"0"==n.value[0]&&(n.value=n.value.slice(1)),e("setValue",n.value))}function i(){n.value=n.value.slice(0,-1),""===n.value&&(n.value="0")}function r(a){n.value=Number(a).toString(),e("setValue",n.value)}return m.on("setBalanzaValue",(t=>{t&&!a.skipBalanza&&r(t)})),t({cantidad:n,setValor:r}),(0,o.bv)((async()=>{a.skipBalanza||r((await(0,o.Fl)((()=>p.Z.state.Weight.lastWeight))).value)})),{okValue:l,cantidad:n,addTecla:c,deleteTecla:i,setValor:r,anchoTecla:d,altoTecla:u}}},_=e(40089);const f=(0,_.Z)(v,[["render",i],["__scopeId","data-v-2468ee80"]]);var y=f},98278:function(a,t,e){e.r(t),e.d(t,{default:function(){return x}});var o=e(73396),n=e(87139),l=e(49242);const d={class:"col-md-4 colJuntitas espacios2"},u={class:"input-group input-group-lg"},s={value:"Entrega Diària",selected:""},c={value:"COMPRAS"},i={value:"OTROS"},r={key:0,class:"input-group input-group-lg"},p={class:"col-md-5 colJuntitas"},b={class:"col-12 d-flex justify-content-between"},m={class:"col-5"},v={class:"col-4"},_={class:"col-3"},f={class:"w-100"},y={class:"concepto"},C={class:"col-md-3 m-auto"};function g(a,t,e,g,w,k){const T=(0,o.up)("MDBCardHeader"),B=(0,o.up)("MDBCardBody"),h=(0,o.up)("MDBBtn"),D=(0,o.up)("MDBCardFooter"),z=(0,o.up)("MDBCard"),N=(0,o.up)("MDBTable"),S=(0,o.up)("NumpadComponent");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",d,[(0,o.Wm)(z,{text:"center",class:"sizeSalida m-auto mt-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("salida_de_dinero","Salida de dinero")),1)])),_:1}),g.numpadRef&&g.numpadRef.cantidad?((0,o.wg)(),(0,o.j4)(B,{key:0},{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>g.numpadRef.cantidad=a),type:"text",class:"form-control",placeholder:"Introduce la cantidad",disabled:""},null,512),[[l.nr,g.numpadRef.cantidad]])]),(0,o.wy)((0,o._)("select",{class:"form-select form-select-lg mb-3 mt-2","aria-label":".form-select-lg example","onUpdate:modelValue":t[1]||(t[1]=a=>g.concepto=a)},[(0,o._)("option",s,(0,n.zw)(a.$t("entrega_diaria","ENTREGA DIARIA")),1),(0,o._)("option",c,(0,n.zw)(a.$t("compras","COMPRAS")),1),(0,o._)("option",i,(0,n.zw)(a.$t("otros","OTROS")),1)],512),[[l.bM,g.concepto]]),"OTROS"===g.concepto?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>g.otrosConcepto=a),type:"text",class:"form-control",placeholder:"Introduce el concepto"},null,512),[[l.nr,g.otrosConcepto]])])):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(D,{class:"text-muted text-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{color:"success",size:"lg",onClick:t[3]||(t[3]=a=>g.confirmarSalida())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("confirmar_salida","Confirmar salida")),1)])),_:1})])),_:1})])),_:1})]),(0,o._)("div",p,[(0,o.Wm)(z,{class:"sizeCardListaSalida m-auto mt-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{style:{"text-align":"center"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("listado_de_salidas","Listado de salidas")),1)])),_:1}),(0,o.Wm)(B,{class:"sizeCardBody"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{class:"sizeCardBodyListaSalida"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",b,[(0,o._)("th",m,(0,n.zw)(a.$t("hora","Hora")),1),(0,o._)("th",v,(0,n.zw)(a.$t("concepto","Concepto")),1),(0,o._)("th",_,(0,n.zw)(a.$t("total","Total")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(g.listaSalidas,((a,t)=>((0,o.wg)(),(0,o.iD)("tr",f,[(0,o._)("td",null,(0,n.zw)(g.getTiempo(a._id)),1),(0,o._)("td",y,(0,n.zw)(a.concepto),1),(0,o._)("td",null,(0,n.zw)(a.valor?.toFixed(2))+" €",1)])))),256))])])),_:1})])),_:1})])),_:1})]),(0,o._)("div",C,[(0,o.Wm)(S,{ref:"numpadRef"},null,512)])],64)}var w=e(91076),k=e(74313),T=e(42492),B=e.n(T),h=e(44870),D=e(20065),z=e(33727),N=e(36797),S=e.n(N),M={name:"SalidaComponent",components:{MDBCard:k.Yl,MDBCardHeader:k.uX,MDBCardBody:k.H7,NumpadComponent:z.Z,MDBBtn:k.$v,MDBCardFooter:k.Rw,MDBTable:k.re},setup(){const a=(0,D.oR)(),t=(0,o.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),e=(0,o.Fl)((()=>a.state.Trabajadores.indexActivo)),n=(0,o.Fl)((()=>t.value&&null!=e.value&&void 0!=e.value&&t.value[e.value]?t.value[e.value]:null)),l=(0,h.iH)(null),d=(0,h.iH)(""),u=(0,h.iH)("Entrega Diària"),s=(0,h.iH)([]);function c(a){const t=new Date(a);return S()(t).format("HH:mm:ss DD/MM/YYYY")}async function i(){let a;Number(l.value.cantidad)>=200&&(a=await B().fire({title:"¿Estás seguro?",text:"Se va a realizar una salida de dinero superior a 200€",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})),Number(l.value.cantidad)>=200&&!a.isConfirmed||w.Z.post("movimientos/nuevoMovimiento",{cantidad:Number(l.value.cantidad),concepto:"OTROS"===u.value?d.value:u.value,idTrabajador:n.value._id,tipo:"SALIDA"}).then((a=>{if(!a.data)throw Error("No se ha podido realizar la salida de dinero");l.value.setValor("0"),l.value.cantidad="0",B().fire("Perfecto","Salida de dinero realizada correctamente","success"),r()})).catch((a=>{B().fire("Oops...",a.message,"error")}))}function r(){w.Z.get("movimientos/getSalidasIntervalo").then((a=>{void 0!=a.data&&null!=a.data&&(s.value=a.data.reverse())})).catch((a=>{B().fire("Oops...","Error al mostrar lista","error")}))}return(0,o.bv)((()=>{r()})),(0,o.JJ)("okValue",i),{confirmarSalida:i,numpadRef:l,concepto:u,otrosConcepto:d,listaSalidas:s,getTiempo:c}}},R=e(40089);const H=(0,R.Z)(M,[["render",g],["__scopeId","data-v-562129bf"]]);var x=H}}]);
//# sourceMappingURL=278.969bc1ef.js.map