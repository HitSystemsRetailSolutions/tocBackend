"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[841],{9361:function(a,e,o){o.d(e,{Z:function(){return y}});var t=o(3396),n=o(7139);const r={class:"container"},l={class:"h3 text-center"},i={class:"h3"},s={class:"row mt-2 container"},c={class:"again py-5"},d={class:"again py-5"},u={class:"again py-5"},m={class:"again py-5"},v={class:"row mt-2"},p={class:"d-inline-block text-end"};function f(a,e,o,f,_,b){const C=(0,t.up)("MDBBtn"),g=(0,t.up)("MDBModalBody"),k=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.j4)(k,{id:"modalDatafono",tabindex:"-1",labelledby:"tituloModalDatafono",modelValue:f.modalErrorDatafono,"onUpdate:modelValue":e[5]||(e[5]=a=>f.modalErrorDatafono=a),staticBackdrop:"",size:"xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("p",l,(0,n.zw)(a.$t("error_al_ejecutar","Error al ejecutar"))+" "+(0,n.zw)(a.$t("la_comanda_en_el_datafono","la comanda en el datáfono")),1),(0,t._)("p",i,(0,n.zw)(a.$t("seleccione","seleccione"))+":",1)]),(0,t._)("div",s,[(0,t.Wm)(C,{color:"success",size:"1g",class:"botonEstado my-3",onClick:e[0]||(e[0]=a=>f.darComoValido())},{default:(0,t.w5)((()=>[(0,t._)("span",c,(0,n.zw)(a.$t("dar_como_valido","Pago válido con tarjeta")),1)])),_:1}),(0,t.Wm)(C,{color:"primary",size:"lg",class:"botonEstado my-3",disabled:f.esperandoConexion?"":a.disabled,onClick:e[1]||(e[1]=a=>{f.tarjetaUltimoTicket(),f.esperandoConexion=!0})},{default:(0,t.w5)((()=>[(0,t._)("span",d,(0,n.zw)(a.$t("reintentar_pago","Reintentar pago")),1)])),_:1},8,["disabled"]),(0,t.Wm)(C,{color:"primary",size:"lg",class:"botonEstado my-3",onClick:e[2]||(e[2]=a=>f.modalErrorDatafono=!1)},{default:(0,t.w5)((()=>[(0,t._)("span",u,(0,n.zw)(a.$t("pago en efectivo","Pago en EFECTIVO")),1)])),_:1}),(0,t.Wm)(C,{color:"primary",size:"lg",class:"botonEstado my-3",onClick:e[3]||(e[3]=a=>f.anularTicket())},{default:(0,t.w5)((()=>[(0,t._)("span",m,(0,n.zw)(a.$t("reintentar_anular_ticket","Reintentar Anular Ticket")),1)])),_:1})]),(0,t._)("div",v,[(0,t._)("div",p,[(0,t.Wm)(C,{color:"danger",size:"lg",class:"mt-2",onClick:e[4]||(e[4]=a=>f.modalErrorDatafono=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.$t("cancelar","Cancelar")),1)])),_:1})])])])),_:1})])),_:1},8,["modelValue"])}var _=o(65),b=o(4161),C=o(4313),g=o(2492),k=o.n(g),w=o(4870),T={name:"ModalErrorDatafonoComponent",components:{MDBModal:C.j3,MDBModalBody:C.Yz,MDBBtn:C.$v},setup(a,{expose:e}){const o=(0,w.iH)(null),n=(0,_.oR)(),r=(0,w.iH)(!1),l=(0,t.Fl)((()=>n.state.Trabajadores.arrayTrabajadores));let i=(0,w.iH)(!1);const s=(0,t.Fl)((()=>n.state.Trabajadores.indexActivo)),c=(0,t.Fl)((()=>l.value&&void 0!=s.value&&null!=s.value&&l.value[s.value]?l.value[s.value]:null));function d(a){o.value=a,r.value=!0}async function u(){await b.Z.post("paytef/darPorValidoUltimoTicket",{idTrabajador:c.value._id}).then((()=>{r.value=!1,n.dispatch("Datafono/setEstado","APROBADA")})).catch((a=>{r.value=!0,k().fire("Oops...",a.message,"error")}))}function m(){i.value=!0,b.Z.post("paytef/cobrarUltimoTicket",{idTrabajador:c.value._id}).then((()=>{r.value=!1,i.value=!1,n.dispatch("Datafono/setEstado","PENDIENTE")})).catch((a=>{i.value=!1,r.value=!0,k().fire("Oops...",a.message,"error")})),i.value=!1}function v(){null!=o.value&&confirm("¿Confirma ANULACIÓN de ticket?")&&(b.Z.post("tickets/anularTicket",{ticketId:o.value}).then((a=>{a.data.res&&"EFECTIVO"==a.data.tipo?k().fire({icon:"success",title:"Ticket anulado",showConfirmButton:!1,timer:1200}):a.data.res||k().fire({icon:"error",title:"Ya esta anulado",showConfirmButton:!1,timer:1400})})).catch((a=>{k().fire(a.message)})),r.value=!1)}return e({abrirModal:d}),{store:n,darComoValido:u,modalErrorDatafono:r,tarjetaUltimoTicket:m,esperandoConexion:i,arrayTrabajadores:l,indexTrabajadorActivo:s,idSeleccionado:o,anularTicket:v}}},D=o(89);const h=(0,D.Z)(T,[["render",f]]);var y=h},6841:function(a,e,o){o.r(e),o.d(e,{default:function(){return h}});var t=o(3396),n=o(7139);const r={class:"margenLateral position-relative"},l={class:"position-absolute start-0 mb-1 mt-4"},i={class:"sizeTrabajadores"},s={class:"btn-group",role:"group"},c=["onClick"];function d(a,e,o,d,u,m){const v=(0,t.up)("LateralComponent"),p=(0,t.up)("ModalErrorDatafonoComponentVue"),f=(0,t.up)("router-view");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(v),(0,t.Wm)(p,{ref:"modalErrorDatafonoRef"},null,512),(0,t._)("div",r,[(0,t.Wm)(f),(0,t._)("div",l,[(0,t._)("div",i,[(0,t._)("div",s,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(d.arrayTrabajadores,((a,e)=>((0,t.wg)(),(0,t.iD)("button",{key:e,type:"button",class:(0,n.C_)(["btn btn-lg sizeBotonesTrabajador d-inline-block text-truncate me-2",[e===d.indexActivo?"btn-primary":"btn-outline-primary"]]),onClick:a=>d.setIndexActivo(e)},(0,n.zw)(a.nombre),11,c)))),128))])])])])],64)}function u(a,e,o,r,l,i){const s=(0,t.up)("MDBIcon"),c=(0,t.up)("MDBSideNavItem"),d=(0,t.up)("MDBSideNavMenu"),u=(0,t.up)("MDBSideNav");return(0,t.wg)(),(0,t.j4)(u,{modelValue:r.sidenavPositions,"onUpdate:modelValue":e[7]||(e[7]=a=>r.sidenavPositions=a),id:"sidenavPositions",mode:r.mode,slim:!0,backdrop:!1},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"mx-auto text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{onClick:e[0]||(e[0]=a=>r.goTo("/main"))},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{icon:"money-bill-alt",size:"5x"})])),_:1}),(0,t.Wm)(c,{class:(0,n.C_)(["mt-5",{activo:r.router.currentRoute.value.path.startsWith("/menu/caja")}]),onClick:e[1]||(e[1]=a=>r.goTo("/menu/caja"))},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{icon:"piggy-bank",size:"5x"})])),_:1},8,["class"]),(0,t.Wm)(c,{class:(0,n.C_)(["mt-5",{activo:r.router.currentRoute.value.path.startsWith("/menu/encargos")}]),onClick:e[2]||(e[2]=a=>r.goTo("/menu/encargos"))},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{icon:"clipboard",size:"5x"})])),_:1},8,["class"]),(0,t.Wm)(c,{onClick:e[3]||(e[3]=a=>r.goTo("/menu/fichajes")),class:(0,n.C_)(["mt-5",{activo:r.router.currentRoute.value.path.startsWith("/menu/fichajes")}])},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{icon:"door-open",size:"5x"})])),_:1},8,["class"]),(0,t.Wm)(c,{onClick:e[4]||(e[4]=a=>r.activarDevolucion()),class:(0,n.C_)(["mt-5",{activo:r.router.currentRoute.value.path.startsWith("/menu/devolver")}])},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{icon:"trash-alt",size:"5x"})])),_:1},8,["class"]),(0,t.Wm)(c,{onClick:e[5]||(e[5]=a=>r.goTo("/menu/pedidos")),class:(0,n.C_)(["mt-5",{activo:r.router.currentRoute.value.path.startsWith("/menu/pedido")}])},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{icon:"globe",size:"5x"})])),_:1},8,["class"]),(0,t.Wm)(c,{onClick:e[6]||(e[6]=a=>r.goTo("/tecnico")),class:"mt-5"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{icon:"key",size:"5x"})])),_:1})])),_:1})])),_:1},8,["modelValue","mode"])}o(7658);var m=o(4313),v=o(4870),p=o(2483),f=o(65),_={name:"LateralComponent",components:{MDBSideNav:m.Bv,MDBSideNavMenu:m.g5,MDBSideNavItem:m.Yx,MDBIcon:m.vm},setup(){const a=(0,p.tv)(),e=(0,f.oR)(),o=(0,v.iH)(!0),n=(0,v.iH)("over"),r=a=>{n.value=a},l=(0,t.Fl)((()=>e.state.Cestas.arrayCestas)),i=(0,t.Fl)((()=>e.state.Trabajadores.arrayTrabajadores)),s=(0,t.Fl)((()=>e.state.Trabajadores.indexActivo)),c=(0,t.Fl)((()=>{if(l.value)for(let a=0;a<l.value.length;a++)if(l.value[a]._id==i.value[s.value].idCesta)return l.value[a];return null}));function d(e){a.push(e)}async function u(){if(l.value&&c.value)for(let o=0;o<l.value.length;o++)if(c.value._id===l.value[o]._id){await e.dispatch("Cestas/setModoCesta",{modo:"DEVOLUCION",index:o}),a.push("/main");break}}return{sidenavPositions:o,mode:n,setMode:r,router:a,goTo:d,activarDevolucion:u}}},b=o(89);const C=(0,b.Z)(_,[["render",u]]);var g=C,k=o(9361),w=o(2066),T={name:"MenuPrincipalView",components:{LateralComponent:g,ModalErrorDatafonoComponentVue:k.Z},setup(){const a=(0,f.oR)(),e=(0,v.iH)(null),o=(0,w.io)("http://"+a.state.TocGameURL+":5051"),n=(0,t.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),r=(0,t.Fl)((()=>a.state.Trabajadores.indexActivo));function l(e){a.dispatch("Trabajadores/setIndexActivo",e)}return o.on("consultaPaytefRefund",(a=>{a.ok||e.value.abrirModal(a.id)})),{arrayTrabajadores:n,setIndexActivo:l,modalErrorDatafonoRef:e,indexActivo:r}}};const D=(0,b.Z)(T,[["render",d],["__scopeId","data-v-4cf53c6a"]]);var h=D}}]);
//# sourceMappingURL=841.ceae94fd.js.map