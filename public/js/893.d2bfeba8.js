"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[893],{35893:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});var i=a(73396),o=a(87139);const n=e=>((0,i.dD)("data-v-7a641764"),e=e(),(0,i.Cn)(),e),l={key:0,class:"row mt-1"},u=n((()=>(0,i._)("h1",{class:"titulo text-center",style:{"font-weight":"bold"}}," Estamos cargando la información con los equipos conectados ",-1))),r={style:{display:"flex","justify-content":"center",padding:"2%",zoom:"1.6"}},s={key:0},d=n((()=>(0,i._)("div",{style:{"margin-top":"2%"}},null,-1))),c=n((()=>(0,i._)("div",{style:{display:"flex","flex-direction":"column","align-items":"center"}},[(0,i._)("h1",{style:{"font-weight":"bold","font-size":"3.5rem","margin-bottom":"2%"}}," ¡Upss! "),(0,i._)("p",{class:"subtitulo"}," Parece que falta configurar los dispositivos externos. "),(0,i._)("p",{class:"subtitulo"}," El autoconfigurado te ayudará a configurar los dispositivos con unas simples preguntas. "),(0,i._)("i",{class:"fas fa-bug",style:{"font-size":"3rem",padding:"2%",color:"indianred"}})],-1))),p=[d,c],v={key:1},f=n((()=>(0,i._)("div",{style:{"margin-top":"3%"}},null,-1))),m={class:"subtitulo2"},g={key:0,class:"subtitulo3"},y={key:1,style:{display:"flex","justify-content":"center",padding:"2%",zoom:"1.6"}},w={key:2,style:{display:"flex","justify-content":"space-evenly"}},S={key:3,style:{display:"flex","justify-content":"space-evenly"}},k=n((()=>(0,i._)("hr",null,null,-1))),B={key:2},h=n((()=>(0,i._)("div",{style:{"margin-top":"3%"}},null,-1))),D={class:"subtitulo2"},_={key:0,class:"subtitulo3"},M={key:1,style:{display:"flex","justify-content":"center",padding:"2%",zoom:"1.6"}},x={key:2,style:{display:"flex","justify-content":"space-evenly"}},P=n((()=>(0,i._)("hr",null,null,-1))),z={key:3},b=n((()=>(0,i._)("div",{style:{"margin-top":"2%"}},null,-1))),C=n((()=>(0,i._)("div",{style:{display:"flex","flex-direction":"column","align-items":"center"}},[(0,i._)("h1",{style:{"font-weight":"bold","font-size":"3.5rem","margin-bottom":"2%"}}," ¡Finalizado! "),(0,i._)("p",{class:"subtitulo"}," Los datos introducidos se han guardado correctamente. "),(0,i._)("p",{class:"subtitulo"},"Puedes reiniciar la configuración o salir."),(0,i._)("i",{class:"fas fa-bug",style:{"font-size":"3rem",padding:"2%",color:"indianred"}})],-1))),T=[b,C];function W(e,t,a,n,d,c){const b=(0,i.up)("MDBSpinner"),C=(0,i.up)("MDBModalTitle"),W=(0,i.up)("MDBModalHeader"),U=(0,i.up)("MDBIcon"),I=(0,i.up)("MDBStepperHead"),q=(0,i.up)("MDBStepperStep"),H=(0,i.up)("MDBStepper"),R=(0,i.up)("MDBBtn"),V=(0,i.up)("MDBProgressBar"),L=(0,i.up)("MDBProgress"),Z=(0,i.up)("MDBModalBody"),j=(0,i.up)("MDBModalFooter"),E=(0,i.up)("MDBModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[n.openConfigurator?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",l,[u,(0,i._)("div",r,[(0,i.Wm)(b)])])),(0,i.Wm)(E,{id:"infoTPVmodal",tabindex:"-1",labelledby:"infoTPVmodal",modelValue:n.openConfigurator,"onUpdate:modelValue":t[8]||(t[8]=e=>n.openConfigurator=e),size:"xl",staticBackdrop:""},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{close:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{id:"infoTPVmodal"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("title_config_printer","Configurador de dispositivos")),1)])),_:1})])),_:1}),(0,i.Wm)(Z,null,{default:(0,i.w5)((()=>[(0,i.Wm)(H,{ref:"btnStepper",disableStepperHeadClick:"true"},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{active:""},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{icon:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(n.menuTextList[0])+"    ",1),(0,i.Wm)(U,{icon:"book-open"})])),_:1})])),_:1}),(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I,{icon:"2"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(n.menuTextList[1])+"   ",1),(0,i.Wm)(U,{icon:"print"})])),_:1})])),_:1}),(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I,{icon:"3"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(n.menuTextList[2])+"   ",1),(0,i.Wm)(U,{icon:"desktop"})])),_:1})])),_:1}),(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I,{icon:"5"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(n.menuTextList[3])+"   ",1),(0,i.Wm)(U,{icon:"flag"})])),_:1})])),_:1})])),_:1},512),0==n.configuratorStep?((0,i.wg)(),(0,i.iD)("div",s,p)):(0,i.kq)("",!0),2==n.configuratorStep?((0,i.wg)(),(0,i.iD)("div",v,[f,(0,i._)("div",null,[(0,i._)("p",m,(0,o.zw)(n.textList[n.textI]),1),null!=n.printType?((0,i.wg)(),(0,i.iD)("p",g," Configuración actual: "+(0,o.zw)(n.Ports[n.printType][n.checkPrinterStep]["name"]),1)):(0,i.kq)("",!0),0==n.Step||2==n.Step&&!n.confirmButtons?((0,i.wg)(),(0,i.iD)("div",y,[(0,i.Wm)(b)])):(0,i.kq)("",!0),n.confirmButtons?((0,i.wg)(),(0,i.iD)("div",w,[(0,i.Wm)(R,{outline:"danger",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[0]||(t[0]=e=>n.initConfigurator())},{default:(0,i.w5)((()=>[(0,i.Uk)("No ha impreso")])),_:1}),(0,i.Wm)(R,{outline:"success",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[1]||(t[1]=e=>{n.Step=4,n.initConfigurator()})},{default:(0,i.w5)((()=>[(0,i.Uk)("Ha impreso")])),_:1})])):(0,i.kq)("",!0),1==n.Step?((0,i.wg)(),(0,i.iD)("div",S,[(0,i.Wm)(R,{outline:"secondary",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[2]||(t[2]=e=>{n.printType=0,n.Step+=1,n.textI+=1,n.initConfigurator()})},{default:(0,i.w5)((()=>[(0,i.Uk)("USB")])),_:1}),(0,i.Wm)(R,{outline:"secondary",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[3]||(t[3]=e=>{n.printType=1,n.textI+=1,n.Step+=1,n.initConfigurator()})},{default:(0,i.w5)((()=>[(0,i.Uk)("SERIAL")])),_:1})])):(0,i.kq)("",!0),k,(0,i.Wm)(L,{height:15},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{value:n.StepPorcentage},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(n.StepPorcentage)+"% ",1)])),_:1},8,["value"])])),_:1})])])):(0,i.kq)("",!0),3==n.configuratorStep?((0,i.wg)(),(0,i.iD)("div",B,[h,(0,i._)("div",null,[(0,i._)("p",D,(0,o.zw)(n.textList[n.textI]),1),-1!=n.checkVisorStep?((0,i.wg)(),(0,i.iD)("p",_," Configuración actual: "+(0,o.zw)(n.Ports[n.printType][n.checkVisorStep]["name"]),1)):(0,i.kq)("",!0),0==n.Step||1==n.Step&&!n.confirmButtons?((0,i.wg)(),(0,i.iD)("div",M,[(0,i.Wm)(b)])):(0,i.kq)("",!0),n.confirmButtons?((0,i.wg)(),(0,i.iD)("div",x,[(0,i.Wm)(R,{outline:"danger",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[4]||(t[4]=e=>n.VisorManager())},{default:(0,i.w5)((()=>[(0,i.Uk)("No ha cambiado")])),_:1}),(0,i.Wm)(R,{outline:"success",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[5]||(t[5]=e=>{n.Step=3,n.VisorManager()})},{default:(0,i.w5)((()=>[(0,i.Uk)("Ha cambiado")])),_:1})])):(0,i.kq)("",!0),P,(0,i.Wm)(L,{height:15},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{value:n.StepPorcentage},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(n.StepPorcentage)+"% ",1)])),_:1},8,["value"])])),_:1})])])):(0,i.kq)("",!0),4==n.configuratorStep?((0,i.wg)(),(0,i.iD)("div",z,T)):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(j,null,{default:(0,i.w5)((()=>[0!=n.Step&&(2!=n.Step||n.confirmButtons)||0==n.configuratorStep||4==n.configuratorStep?((0,i.wg)(),(0,i.j4)(R,{key:0,color:"danger",size:"lg",onClick:t[6]||(t[6]=e=>n.exitBtn())},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)([0,4].includes(n.configuratorStep)?0==n.configuratorStep?"Salir":"Reiniciar":"Continuar sin "+n.menuTextList[n.configuratorStep-1]),1)])),_:1})):(0,i.kq)("",!0),[0,4].includes(n.configuratorStep)?((0,i.wg)(),(0,i.j4)(R,{key:1,color:"success",size:"lg",onClick:t[7]||(t[7]=e=>n.continueBtn())},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(0==n.configuratorStep?"Iniciar Configuración ":"Guardar y finalizar"),1)])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])],64)}a(57658);var U=a(44870),I=a(91076),q=a(78223),H=a(42492),R=a.n(H),V=a(74313),L=(a(74834),a(50085)),Z=(a(29564),{name:"InstallWizard",components:{MDBCard:V.Yl,MDBCardBody:V.H7,MDBCardText:V.Pp,MDBIcon:V.vm,QrcodeVue:L.Z,MDBInput:V.u2,MDBSpinner:V.JL,MDBModal:V.j3,MDBModalHeader:V.ol,MDBRow:V.uZ,MDBModalTitle:V.wo,MDBDropdown:V.H6,MDBContainer:V.L5,MDBCol:V.TK,MDBModalBody:V.Yz,MDBPopover:V.SW,MDBModalFooter:V.ab,MDBBtn:V.$v,MDBProgressBar:V.F5,MDBDropdownToggle:V.CU,MDBDropdownItem:V.i2,MDBDropdownMenu:V.Ed,MDBProgress:V.g9,MDBStepper:V.QI,MDBStepperHead:V.Jv,MDBStepperStep:V.x9,MDBStepperContent:V.AC},setup(){const e=(0,U.iH)(!1),t=(0,U.iH)(-1),a=(0,U.iH)(-1),o=(0,U.iH)(null),n={printerPort:"",printerRate:0,printerType:0,visorPort:"",visorRate:0,vid:"",pid:""},l=["Introucción","Impresora","Visor","Finalizar"],u=["Estamos recuperando tu información de la impresora..","Indique el tipo de impresora que tiene conectada","Iniciando configuración de la impresora...","Indique si la impresora ha impreso correctamente","Configuración finalizada con éxito, guardando datos...","No hemos podido configurar la impresora, inténtelo de nuevo","Estamos recuperando tu información del visor..","Iniciando configuración del visor...","Indique si el visor ha cambiado correctamente"],r=(0,U.iH)(0),s=[{vid:"",pid:""},{vid:"0x4b8",pid:"0x202"}],d=[[{name:"Puerto 1",value:"USB1",rate:0},{name:"Puerto 1 con EPSON 04b8 0202",value:"USB1",rate:0,vid:s[1].vid,pid:s[1].pid}],[{name:"Puerto 1 | Rate 1",value:"ttyS0",rate:9600},{name:"Puerto 1 | Rate 2",value:"ttyS0",rate:115200},{name:"Puerto 1 | Rate 3",value:"ttyS0",rate:38400},{name:"Puerto 2 | Rate 1",value:"ttyS1",rate:9600},{name:"Puerto 2 | Rate 2",value:"ttyS1",rate:115200},{name:"Puerto 2 | Rate 3",value:"ttyS1",rate:38400}],[{name:"Puerto 1",value:"ttyUSB0",rate:9600},{name:"Puerto 2",value:"ttyUSB1",rate:9600},{name:"Puerto 3",value:"ttyUSB2",rate:9600}],[{name:"Puerto 1 | Rate 1",value:"ttyS0",rate:9600},{name:"Puerto 1 | Rate 2",value:"ttyS0",rate:115200},{name:"Puerto 1 | Rate 3",value:"ttyS0",rate:38400},{name:"Puerto 2 | Rate 1",value:"ttyS1",rate:9600},{name:"Puerto 2 | Rate 2",value:"ttyS1",rate:115200},{name:"Puerto 2 | Rate 3",value:"ttyS1",rate:38400}]],c=(0,U.iH)(0),p=(0,U.iH)(0),v=(0,U.iH)(null),f=(0,U.iH)(0),m=(0,U.iH)(!1);function g(){setTimeout((()=>{m.value=!0}),1e3)}async function y(){switch(c.value){case 0:p.value=5,setTimeout((()=>{p.value=15,c.value+=1,r.value+=1}),1200);break;case 2:if(!(t.value<d[o.value].length-1)){c.value+=1,y();break}t.value+=1,e.value=!1,r.value=2;const a=d[o.value][t.value].vid||"",i=d[o.value][t.value].pid||"";await I.Z.post("/instalador/sendTestPrint",{type:o.value,value:d[o.value][t.value].value,rate:d[o.value][t.value].rate,vid:a,pid:i}).then((e=>{setTimeout((()=>{h()}),500)}));break;case 3:p.value=50,r.value=5,e.value=!1,setTimeout((()=>{r.value=6,f.value=3,c.value=0,v?.value.changeStep(f.value),k()}),1e3);break;case 4:p.value=50,r.value=4,e.value=!1,n.vid=d[o.value][t.value].vid||"",n.pid=d[o.value][t.value].pid||"",n.printerPort=d[o.value][t.value].value,n.printerRate=d[o.value][t.value].rate,n.printerType=o.value,setTimeout((()=>{r.value=6,f.value=3,c.value=0,v?.value.changeStep(f.value),k()}),1e3);break}}function w(){if(0==f.value)q.Z.push("/");else{if([0,4].includes(f.value))return void q.Z.go(0);2==f.value?(c.value=3,y()):(c.value=2,k())}}function S(){0==f.value?_():B()}async function k(){switch(c.value){case 0:setTimeout((()=>{p.value+=5,c.value+=1,o.value=2,r.value+=1,k()}),1200);break;case 1:if(!(a.value<d[o.value].length-1)){c.value+=1,k();break}a.value+=1,e.value=!1,r.value=2,await I.Z.post("/instalador/sendTestVisor",{value:d[o.value][a.value].value,rate:d[o.value][a.value].rate}).then((e=>{setTimeout((()=>{D()}),500)}));break;case 2:p.value=100,r.value=5,e.value=!1,setTimeout((()=>{r.value=6,f.value=4,c.value=0,v?.value.changeStep(f.value)}),1e3);break;case 3:p.value=100,r.value=4,e.value=!1,setTimeout((()=>{r.value=6,f.value=4,c.value=0,n.visorPort=d[o.value][a.value].value,n.visorRate=d[o.value][a.value].rate,v?.value.changeStep(f.value)}),1e3);break}}function B(){I.Z.post("/instalador/saveData",{data:n}).then((e=>{e.data?R().fire({title:"Configuración finalizada",text:"Los datos se han guardado correctamente",icon:"success",confirmButtonText:"Aceptar"}).then((()=>{q.Z.push("/")})):R().fire({title:"Error",text:"No se han podido guardar los datos",icon:"error",confirmButtonText:"Aceptar"}).then((()=>{q.Z.push("/")}))}))}function h(){r.value=3,e.value=!0,p.value+=5}function D(){r.value=8,e.value=!0,p.value+=5}function _(){f.value=2,y(),v?.value.changeStep(f.value)}return(0,i.bv)((()=>{g()})),{openConfigurator:m,configuratorStepModule:_,btnStepper:v,configuratorStep:f,printType:o,Ports:d,initConfigurator:y,textI:r,confirmButtons:e,checkVisorStep:a,VisorManager:k,textList:u,StepPorcentage:p,exitBtn:w,continueBtn:S,Step:c,CheckPrint:h,menuTextList:l,checkPrinterStep:t,init:g}}}),j=a(40089);const E=(0,j.Z)(Z,[["render",W],["__scopeId","data-v-7a641764"]]);var F=E}}]);
//# sourceMappingURL=893.d2bfeba8.js.map