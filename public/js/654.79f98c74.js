"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[654],{50206:function(e,a,o){var n=o(1702);e.exports=n([].slice)},89363:function(e){e.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},6833:function(e,a,o){var n=o(88113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},35268:function(e,a,o){var n=o(17854),t=o(84326);e.exports="process"===t(n.process)},22104:function(e,a,o){var n=o(34374),t=Function.prototype,l=t.apply,i=t.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?i.bind(l):function(){return i.apply(l,arguments)})},49974:function(e,a,o){var n=o(21470),t=o(19662),l=o(34374),i=n(n.bind);e.exports=function(e,a){return t(e),void 0===a?e:l?i(e,a):function(){return e.apply(a,arguments)}}},21470:function(e,a,o){var n=o(84326),t=o(1702);e.exports=function(e){if("Function"===n(e))return t(e)}},60490:function(e,a,o){var n=o(35005);e.exports=n("document","documentElement")},17152:function(e,a,o){var n=o(17854),t=o(22104),l=o(60614),i=o(89363),r=o(88113),s=o(50206),c=o(48053),u=n.Function,d=/MSIE .\./.test(r)||i&&function(){var e=n.Bun.version.split(".");return e.length<3||"0"===e[0]&&(e[1]<3||"3"===e[1]&&"0"===e[2])}();e.exports=function(e,a){var o=a?2:1;return d?function(n,i){var r=c(arguments.length,1)>o,d=l(n)?n:u(n),v=r?s(arguments,o):[],_=r?function(){t(d,this,v)}:d;return a?e(_,i):e(_)}:e}},20261:function(e,a,o){var n,t,l,i,r=o(17854),s=o(22104),c=o(49974),u=o(60614),d=o(92597),v=o(47293),_=o(60490),f=o(50206),m=o(80317),p=o(48053),g=o(6833),y=o(35268),w=r.setImmediate,b=r.clearImmediate,C=r.process,h=r.Dispatch,k=r.Function,A=r.MessageChannel,E=r.String,I=0,R={},N="onreadystatechange";v((function(){n=r.location}));var U=function(e){if(d(R,e)){var a=R[e];delete R[e],a()}},T=function(e){return function(){U(e)}},S=function(e){U(e.data)},O=function(e){r.postMessage(E(e),n.protocol+"//"+n.host)};w&&b||(w=function(e){p(arguments.length,1);var a=u(e)?e:k(e),o=f(arguments,1);return R[++I]=function(){s(a,void 0,o)},t(I),I},b=function(e){delete R[e]},y?t=function(e){C.nextTick(T(e))}:h&&h.now?t=function(e){h.now(T(e))}:A&&!g?(l=new A,i=l.port2,l.port1.onmessage=S,t=c(i.postMessage,i)):r.addEventListener&&u(r.postMessage)&&!r.importScripts&&n&&"file:"!==n.protocol&&!v(O)?(t=O,r.addEventListener("message",S,!1)):t=N in m("script")?function(e){_.appendChild(m("script"))[N]=function(){_.removeChild(this),U(e)}}:function(e){setTimeout(T(e),0)}),e.exports={set:w,clear:b}},48053:function(e){var a=TypeError;e.exports=function(e,o){if(e<o)throw a("Not enough arguments");return e}},11091:function(e,a,o){var n=o(82109),t=o(17854),l=o(20261).clear;n({global:!0,bind:!0,enumerable:!0,forced:t.clearImmediate!==l},{clearImmediate:l})},84633:function(e,a,o){o(11091),o(12986)},12986:function(e,a,o){var n=o(82109),t=o(17854),l=o(20261).set,i=o(17152),r=t.setImmediate?i(l,!1):l;n({global:!0,bind:!0,enumerable:!0,forced:t.setImmediate!==r},{setImmediate:r})},34730:function(e,a,o){o.d(a,{HB:function(){return d},i_:function(){return c},re:function(){return u}});var n=o(91076),t=o(13150),l=o(16683),i=o(43666);let r=i.Z;function s(){return r.state.Trabajadores.arrayTrabajadores&&null!=r.state.Trabajadores.indexActivo?r.state.Trabajadores.arrayTrabajadores[r.state.Trabajadores.indexActivo]??null:null}async function c(e,a,o){null!=e&&e>0&&n.Z.post("movimientos/nuevoMovimiento",{cantidad:e,concepto:a,idTrabajador:s()._id,tipo:o})}async function u(){return t.Z.activado()}async function d(){if(!await t.Z.activado())return null;let e=await t.Z.get_estado();if(e.err)return{err:e.err};let a=(0,l.li)();const o=e=>{(0,l.eh)(e).forEach((({mob:e,den:o,value:n})=>{a[e][o]=(a[e][o]??0)+n}))};o(e.cantidad_recicladores_pd),o(e.cantidad_stacker_pd),o(e.cantidad_caja_fuerte_pd);let n=[];const i={monedas:[1,2,5,10,20,50,100,200],billetes:[500,1e3,2e3,5e3,1e4,2e4,5e4]};for(let t=0;t<i.monedas.length+i.billetes.length;t++)t<i.monedas.length?n[t]=a.monedas[i.monedas[t]]??0:n[t]=a.billetes[i.billetes[t-i.monedas.length]]??0;return{infoDinero:n}}},13150:function(e,a,o){var n=o(91076);function t(e,a){return arguments.length<2?n.Z.get(e).then((e=>e.data)):n.Z.post(e,a,{headers:{"Content-Type":"application/json"}}).then((e=>e.data))}function l(e,a){return e="cashlogy/"+e,arguments.length<2?t(e):t(e,a)}function i(){return l("activado")}function r(e,a){return l("saveGrupoProcesos",{nombre:e,info:a})}function s(e){return l("crearGrupoProcesosDeUnSoloProceso",{info:e})}function c(){return l("get_procesoPrevioInterrumpido")}function u(e){return l("aceptar_procesoPrevioInterrumpido",e)}function d(){return l("aceptar_reset_remoto")}function v(e){return l("importe_entrado_manualmente_en_cobrar",e)}function _(e,a=!0){return l("cobrar",{importe_a_cobrar:e,auto_aceptar:a})}function f(e){return l("anadir_cambios_y_devolver",e)}function m(){return l("anadir_cambios")}function p(e){return l("solo_dispensar",e)}function g(){return l("dar_cambio_entrada")}function y(e,a){return l("dispensar_por_denominacion",{cantidad_retirar_pd:e,destino_billetes:a})}function w(e,a,o){return l("vaciado_completo",{solo_monedas:e,denominaciones_vaciar:a,destino_billetes:o})}function b(e=!1){return l("consulta_todas_denominaciones",e)}function C(){return l("recaudar")}function h(e){return l("mantenimiento",e)}function k(){return l("poner_a_cero")}function A(){return l("resolver_incidencias")}function E(){return l("get_niveles")}function I(e){return l("get_errores",e)}function R(){return l("get_estado")}function N(e){return l("boton_pulsar",e)}function U(){return l("loadFondoCaja")}function T(e){return l("saveFondoCaja",e)}function S(e=!1){return l("reiniciar",e)}function O(e){return l("enviar_comando_inicializacion",e)}function x(){return l("do_stop_proceso_activo")}a["Z"]={activado:i,saveGrupoProcesos:r,crearGrupoProcesosDeUnSoloProceso:s,get_procesoPrevioInterrumpido:c,aceptar_procesoPrevioInterrumpido:u,aceptar_reset_remoto:d,importe_entrado_manualmente_en_cobrar:v,cobrar:_,anadir_cambios_y_devolver:f,anadir_cambios:m,solo_dispensar:p,dar_cambio_entrada:g,dispensar_por_denominacion:y,vaciado_completo:w,consulta_todas_denominaciones:b,recaudar:C,mantenimiento:h,poner_a_cero:k,resolver_incidencias:A,get_niveles:E,get_errores:I,get_estado:R,boton_pulsar:N,loadFondoCaja:U,saveFondoCaja:T,reiniciar:S,enviar_comando_inicializacion:O,do_stop_proceso_activo:x}},16683:function(e,a,o){o.d(a,{Cq:function(){return g},JQ:function(){return m},R_:function(){return r},XX:function(){return y},bW:function(){return p},c:function(){return u},eh:function(){return v},iX:function(){return s},j9:function(){return f},kJ:function(){return _},li:function(){return d},ul:function(){return w},uz:function(){return i},vg:function(){return l}});o(57658);var n=o(73396),t=o(44870);function l(e,a=!1){return e.toFixed(2)+(a?" €":"")}function i(e){return new Promise((a=>{setTimeout(a,e)}))}async function r(...e){function a(){return e.every((e=>e.value))}if(a())return;let o,t=(0,n.YP)(e,(()=>{o?.()}));do{let e=new Promise((e=>{o=e}));await e}while(!a());t?.()}const s=["billetes","monedas"],c=["monedas","billetes"];function u(e){let a,o=e.denominaciones_dispensables,n={header:{cols:["Cantidad reciclador","Cantidad introducida"]},body:[]};for(let t of s)for(let l=o[t].length-1;l>=0;l--){let i=o[t][l];a={mob:t,den_cents:i,cols:[{value:e.cantidad_recicladores_pd[t][i]},{value:e.cantidad_entrado_pd[t][i]}]},n.body.push(a)}return n}function d(){return{monedas:{},billetes:{}}}function v(e){let a=[];if(!e)return a;for(let o of c)e[o]&&Object.keys(e[o]).map((e=>parseInt(e))).sort(((e,a)=>e-a)).forEach((n=>{a.push({mob:o,den:n,value:e[o][n]})}));return a}function _(e){return 0==v(e).length}function f(e){let a=d();return v(e).forEach((({mob:e,den:o,value:n})=>{a[e][o]=n})),a}function m(e,a,o){let n;this.start=function(l){(0,t.dq)(a)?a.value=!1:arguments.length<=2&&(o=a);let i=e?.(l);return new Promise((e=>{n=e})).then((e=>(i&&i(e),o?.(e),(0,t.dq)(a)&&(a.value=!0),e)))},this.R=function(e){n(e)}}function p(e){return"CAJA_FUERTE"==e?"CAJA FUERTE":e}function g(e,a){let o="";return o=a<100?`${a}cts`:100==a?"uneuro":200==a?"doseuros":a/100+"euros",o=`/img/${o}.png`,o}function y(e){return Math.round(100*e)}function w(e){return e/100}},37532:function(e,a,o){o.d(a,{Z:function(){return O}});var n=o(73396),t=o(87139),l=o(44870),i=o(74313),r=o(91076),s=o(13150),c=(o(16683),o(43666));const u={key:0,class:"frame-Cashlogy flex-column"},d={key:1,class:"frame-Cashlogy flex-column",style:{"overflow-y":"auto"}},v=(0,n._)("br",null,null,-1),_={class:"w-100"},f={class:"w-100"},m=(0,n._)("br",null,null,-1),p=(0,n._)("br",null,null,-1),g=(0,n._)("br",null,null,-1),y=["src"],w=(0,n._)("br",null,null,-1),b=["src"],C=(0,n._)("br",null,null,-1),h={key:2,class:"frame-Cashlogy flex-column",style:{"justify-content":"start","align-items":"start","overflow-y":"auto",gap:"2px"}},k={key:0},A=["onClick"],E=(0,n._)("br",null,null,-1),I={key:1},R=["onClick"],N=(0,n._)("br",null,null,-1),U=(0,n._)("br",null,null,-1);var T={__name:"CashlogyConsultaErroresChild",setup(e,{expose:a}){let o=c.Z;const T=(0,l.iH)(!0);function S(e){let a=new Date(e);const o=e=>("00"+e.toString()).slice(-2);return`${o(a.getHours())}:${o(a.getMinutes())}:${o(a.getSeconds())}`}function O(e){switch(e){case"0":return"AVISO";case"1":return"ERROR NIVEL 1";case"2":return"ERROR NIVEL 2";case"3":default:return"ERROR FATAL"}}const x=(0,l.iH)(null),D=(0,l.iH)(null);async function P(e){try{let a=await s.Z.get_errores(e),o=r.Z.defaults.baseURL.replace(/\/?\/$/,"");if([].concat(a.detalle_errores_actuales,a.lista_errores_pasados).forEach((e=>{e.imagen&&(e.imagen=o+e.imagen),e.video&&(e.video=o+e.video)})),x.value=a.detalle_errores_actuales,D.value=a.lista_errores_pasados.reverse(),$.value&&!H){Z.value=!0;for(let e of x.value)if(e.codigo==$.value.codigo){Z.value=!1;break}}T.value=!1}catch(a){}}let L;async function M(e,a){T.value=!0,$.value=null;let t=(0,n.YP)((()=>o.state.Cashlogy.id_notificaciones),(()=>{P(e)}));P(e);let l=new Promise((e=>{L=e})).then((()=>{t()}));a&&a.then((()=>{L()})),await l}const $=(0,l.iH)(null),Z=(0,l.iH)(!1);let H=!1;const z=(0,l.iH)(null);function j(e,a){if($.value=e,H=a,a)Z.value=!1;else{Z.value=!0;for(let e of x.value)if(e.codigo==$.value.codigo){Z.value=!1;break}}}function q(){$.value=null}return(0,n.Ah)((()=>{L&&L()})),a({run:M}),(e,a)=>T.value?((0,n.wg)(),(0,n.iD)("div",u," Espere ")):$.value?((0,n.wg)(),(0,n.iD)("div",d,[Z.value?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)(" Solucionado "),v],64)):(0,n.kq)("",!0),(0,n._)("div",_,[(0,n.Uk)((0,t.zw)($.value.titulo)+" - "+(0,t.zw)(S($.value.date_start))+" - "+(0,t.zw)(O($.value.tipo))+" ("+(0,t.zw)($.value.codigo)+") ",1),$.value.imagen||$.value.video?((0,n.wg)(),(0,n.j4)((0,l.SU)(i.$v),{key:0,onClick:q,color:"info",style:{overflow:"visible"}},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cerrar ")])),_:1})):(0,n.kq)("",!0)]),(0,n._)("div",f,[(0,n.Uk)((0,t.zw)($.value.mensaje_principal)+" ",1),m,(0,n.Uk)(" "+(0,t.zw)($.value.mensaje_adicional)+" ",1),p]),$.value.video?((0,n.wg)(),(0,n.j4)((0,l.SU)(i.$v),{key:1,color:"success",style:{overflow:"visible"},onClick:a[0]||(a[0]=e=>z.value?.scrollIntoView({behavior:"smooth",block:"start"})),class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Ir a video ")])),_:1})):(0,n.kq)("",!0),g,$.value.imagen?((0,n.wg)(),(0,n.iD)("img",{key:2,src:$.value.imagen},null,8,y)):(0,n.kq)("",!0),(0,n.Uk)(),w,$.value.video?((0,n.wg)(),(0,n.iD)("video",{key:3,controls:"",ref_key:"mostrando_error_video",ref:z},[(0,n._)("source",{src:$.value.video},null,8,b)],512)):(0,n.kq)("",!0),C,(0,n.Wm)((0,l.SU)(i.$v),{onClick:q,color:"info",style:{overflow:"visible"},class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cerrar ")])),_:1})])):((0,n.wg)(),(0,n.iD)("div",h,[0==x.value.length&&0==D.value.length?((0,n.wg)(),(0,n.iD)("div",k," No hay errores ")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(x.value,(e=>((0,n.wg)(),(0,n.iD)("div",{style:{"border-top":"1px solid grey","border-bottom":"1px solid grey",padding:"1px"},class:"d-flex flex-row w-100",onClick:a=>j(e,!1)},[(0,n.Wm)((0,l.SU)(i.$v),{color:"info"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(i.vm),{fas:"",icon:"caret-right"})])),_:1}),(0,n._)("div",null,[(0,n.Uk)((0,t.zw)(S(e.date_start))+" - "+(0,t.zw)(O(e.tipo))+" - "+(0,t.zw)(e.titulo)+" ",1),E,(0,n.Uk)(" "+(0,t.zw)(e.mensaje_principal)+" - "+(0,t.zw)(e.mensaje_adicional),1)])],8,A)))),256)),D.value.length?((0,n.wg)(),(0,n.iD)("div",I,"Errores Pasados:")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(D.value,(e=>((0,n.wg)(),(0,n.iD)("div",{style:{"border-top":"1px solid grey","border-bottom":"1px solid grey"},class:"d-flex flex-row w-100",onClick:a=>j(e,!0)},[(0,n.Wm)((0,l.SU)(i.$v),{color:"warning"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(i.vm),{fas:"",icon:"caret-right"})])),_:1}),(0,n._)("div",null,[(0,n.Uk)((0,t.zw)(S(e.date_start))+" - "+(0,t.zw)(S(e.date_end))+" - "+(0,t.zw)(O(e.tipo))+" - "+(0,t.zw)(e.titulo)+" ",1),N,(0,n.Uk)(" "+(0,t.zw)(e.mensaje_principal)+" - "+(0,t.zw)(e.mensaje_adicional),1)])],8,R)))),256)),U,(0,n.Wm)((0,l.SU)(i.$v),{onClick:(0,l.SU)(L),color:"info",style:{overflow:"visible"},class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cerrar ")])),_:1},8,["onClick"])]))}};const S=T;var O=S},74025:function(e,a,o){o.d(a,{Z:function(){return v}});o(57658),o(30541);var n=o(73396),t=o(44870),l=o(87139),i=o(74313);o(13150),o(16683);const r={class:"frame-Cashlogy flex-column"},s={class:"d-flex flex-column",style:{gap:"2px"}};var c={__name:"CashlogyErrorDevolucion",setup(e,{expose:a}){let o,c=(0,t.iH)([]),u=(0,t.iH)(!1);function d(){o?.(!0)}async function v(e=null){if(c.value=[],e?.error_en_la_devolucion&&c.value.push("ATENCIóN, Puede ser un problema de cambio"),e?.no_hay_caja_fuerte&&c.value.push("No hay caja fuerte"),0==c.value.length)return Promise.resolve(!1);c.value.unshift("Error en la devolución"),u.value=!1;let a=new Promise((e=>{o=e})).then((e=>(u.value=!0,e)));return a}return a({run:v}),(e,a)=>((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",s,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,t.SU)(c),(e=>((0,n.wg)(),(0,n.iD)("span",null,(0,l.zw)(e),1)))),256)),(0,n.Wm)((0,t.SU)(i.$v),{onClick:d,disabled:(0,t.SU)(u),color:"warning",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1},8,["disabled"])])]))}},u=o(40089);const d=(0,u.Z)(c,[["__scopeId","data-v-2df696eb"]]);var v=d},75629:function(e,a,o){o.d(a,{Z:function(){return N}});var n=o(73396),t=o(44870),l=o(87139),i=o(74313),r=o(68315),s=o(13150),c=o(16683);const u={key:0,class:"frame-Cashlogy flex-column"},d={key:1,class:"frame-Cashlogy"},v={style:{"text-align":"start"}},_=(0,n._)("br",null,null,-1),f=(0,n._)("br",null,null,-1),m=(0,n._)("br",null,null,-1),p=(0,n._)("br",null,null,-1),g=(0,n._)("br",null,null,-1),y={style:{"text-align":"end"}},w={key:2,class:"frame-Cashlogy"},b={style:{"text-align":"start"}},C=(0,n._)("br",null,null,-1),h=(0,n._)("br",null,null,-1),k={key:3,class:"frame-Cashlogy"},A={style:{"text-align":"start"}},E=(0,n._)("br",null,null,-1);var I={__name:"CashlogyMantenimiento",setup(e,{expose:a}){const o=(0,t.iH)("");let I=(0,t.iH)(!1);const R=new c.JQ((()=>{O.value="PANTALLA_MENU"})),N=new c.JQ((()=>{O.value="PANTALLA_PREVENTIVO"}),I),U=new c.JQ((()=>{O.value="PANTALLA_CORREAS"}),I),T=new c.JQ((()=>{O.value="PANTALLA_CORRECTO"})),S=(0,t.iH)(null),O=(0,t.iH)(null);let x=!1;async function D(){let e,a;if(x=!0,O.value=null,await(0,c.R_)(S),e=await S.value.start(),e)return x=!1,e;try{await s.Z.crearGrupoProcesosDeUnSoloProceso();let n=await s.Z.mantenimiento("CONSULTA");e=await S.value.informacionAbort_y_cancel(n),e||(a=n.num_billetes_faltan);while(!e){o.value=a.toString();let t=await R.start();if("SALIR"==t&&(e={num_billetes_faltan:a}),"PREVENTIVO"==t){let o=await N.start();"MANTENIMIENTO_PREVENTIVO"==o&&(await s.Z.crearGrupoProcesosDeUnSoloProceso(),n=await s.Z.mantenimiento("RESET"),e=await S.value.informacionAbort_y_cancel(n),e||(a=n.num_billetes_faltan,await T.start()))}if("CORREAS"==t){let a=await U.start();"MANTENIMIENTO_CORREAS"==a&&(await s.Z.crearGrupoProcesosDeUnSoloProceso(),n=await s.Z.mantenimiento("LIMPIEZA"),e=await S.value.informacionAbort_y_cancel(n),e||await T.start())}}}catch(n){console.log(n),e={cancelado:!0}}return S.value?.end(),x=!1,e}return(0,n.Ah)((()=>{x&&s.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:D}),(e,a)=>((0,n.wg)(),(0,n.j4)(r.Z,{enProceso:null!=O.value,ref_key:"CashlogyPantalla_ref",ref:S},{default:(0,n.w5)((()=>["PANTALLA_MENU"==O.value?((0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)((0,t.SU)(i.$v),{onClick:a[0]||(a[0]=e=>(0,t.SU)(R).R("PREVENTIVO")),color:"primary",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" MANTENIMIENTO PREVENTIVO MAQUINA ")])),_:1}),(0,n.Wm)((0,t.SU)(i.$v),{onClick:a[1]||(a[1]=e=>(0,t.SU)(R).R("CORREAS")),color:"primary",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" MANTENIMIENTO CORREAS LECTOR BILLETES ")])),_:1}),(0,n.Wm)((0,t.SU)(i.$v),{onClick:a[2]||(a[2]=e=>(0,t.SU)(R).R("SALIR")),color:"primary",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" SALIR ")])),_:1})])):(0,n.kq)("",!0),"PANTALLA_PREVENTIVO"==O.value?((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",v,[(0,n.Uk)(" Si ha realizado el Mantenimiento Preventivo pulse"),_,(0,n.Uk)(" para inicializar el contado de usos:"),f,m,(0,n.Uk)(" Billetes que faltan para el mantenimiento: "+(0,l.zw)(o.value),1),p,(0,n.Wm)((0,t.SU)(i.$v),{disabled:(0,t.SU)(I),onClick:a[3]||(a[3]=e=>(0,t.SU)(N).R("MANTENIMIENTO_PREVENTIVO")),color:"success",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" INIZIALIZAR CONTADOR MANTENIMENTO PREVENTIVO ")])),_:1},8,["disabled"]),g,(0,n._)("div",y,[(0,n.Wm)((0,t.SU)(i.$v),{disabled:(0,t.SU)(I),onClick:a[4]||(a[4]=e=>(0,t.SU)(N).R("SALIR")),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" SALIR ")])),_:1},8,["disabled"])])])])):(0,n.kq)("",!0),"PANTALLA_CORREAS"==O.value?((0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("div",b,[(0,n.Uk)(" Si ha realizado el Mantenimiento de las Correas,"),C,(0,n.Uk)(" pulse inicializarlo y borrar el aviso:"),h,(0,n.Wm)((0,t.SU)(i.$v),{disabled:(0,t.SU)(I),onClick:a[5]||(a[5]=e=>(0,t.SU)(U).R("MANTENIMIENTO_CORREAS")),color:"success",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" INICIALIZAR MANTENIMIENTO CORREAS ")])),_:1},8,["disabled"]),(0,n.Wm)((0,t.SU)(i.$v),{disabled:(0,t.SU)(I),onClick:a[6]||(a[6]=e=>(0,t.SU)(U).R("SALIR")),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" SALIR ")])),_:1},8,["disabled"])])])):(0,n.kq)("",!0),"PANTALLA_CORRECTO"==O.value?((0,n.wg)(),(0,n.iD)("div",k,[(0,n._)("div",A,[(0,n.Uk)(" Mantenimiento correcto"),E,(0,n.Wm)((0,t.SU)(i.$v),{onClick:a[7]||(a[7]=e=>(0,t.SU)(T).R()),color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" ACEPTAR ")])),_:1})])])):(0,n.kq)("",!0)])),_:1},8,["enProceso"]))}};const R=I;var N=R},69523:function(e,a,o){o.d(a,{Z:function(){return W}});o(57658),o(84633);var n=o(73396),t=o(87139),l=o(44870),i=o(74313),r=o(12195),s=o(75629),c=o(34028),u=o(37532),d=o(13150),v=o(16683),_=o(43666);const f=e=>((0,n.dD)("data-v-10ef7837"),e=e(),(0,n.Cn)(),e),m=["src"],p={key:1,class:"d-flex flex-column",style:{width:"4rem","padding-top":"1rem"}},g=["src"],y={key:2,class:"modal-Cashlogy"},w={class:"frame-Cashlogy"},b={class:"col-2 h-100"},C={class:"w-100",style:{"text-emphasis":"start"}},h={class:"d-flex flex-column",style:{"align-items":"stretch",gap:"2px",padding:"2rem 0",overflow:"hidden"}},k=["src"],A=["innerHTML"],E={key:0,class:"col h-100"},I=f((()=>(0,n._)("div",{class:"frame-Cashlogy flex-column"}," Espere... ",-1))),R=[I],N={key:1,class:"col h-100"},U={key:0,class:"frame-Cashlogy flex-column"},T={key:1,class:"w-100 h-100"},S={key:1,class:"frame-Cashlogy flex-column"},O=f((()=>(0,n._)("br",null,null,-1))),x=f((()=>(0,n._)("br",null,null,-1))),D={key:2,class:"w-100 h-100",style:{padding:"4rem"}},P={key:3,class:"w-100 h-100"},L={key:4,class:"frame-Cashlogy flex-column"},M={key:5,class:"frame-Cashlogy flex-column"},$={key:6,class:"frame-Cashlogy flex-column"},Z={class:"d-flex flex-column",style:{gap:"2px"}},H={key:7,class:"frame-Cashlogy flex-column"},z={class:"d-flex flex-column",style:{gap:"2px"}},j={key:8,class:"frame-Cashlogy flex-column"};var q={__name:"CashlogyMenuNotificaciones",props:{miniMenu:Boolean},setup(e,{expose:a}){const o=e;let f=_.Z;async function I(){return d.Z.activado()}const q=["NIVEL","MANTENIMIENTO","AVISO","ERROR","PENDIENTE","INICIALIZANDO","CONECTANDO","RESET_REMOTO","FINALIZADO","ERR_INICIALIZACION"],B=[["NIVEL","Nivel<br>cambio"],["MANTENIMIENTO","Mantenimiento"],["AVISO","Aviso"],["ERROR","Error"],["PENDIENTE","Proceso<br>interrumpido"],["RESET_REMOTO","Reinicializado"],["INICIALIZANDO","Inicializando"],["CONECTANDO","Conectando"],["FINALIZADO","Comunicación<br>finalizada"],["ERR_INICIALIZACION","Error<br>inicialización"]],V=new Map(B),W=(0,n.Fl)((()=>{let e=[];for(let a of q){let o=f.state.Cashlogy.id_notificaciones[a],n=f.state.Cashlogy.id_notificaciones_vistas[a];if(o){let t;t=ae.value==a?"ico-selected":o!=n?"ico-no-visto":"ico-visto";let l={tipo:a,class:t,img:`/img/cashlogy/${a.toLowerCase()}.jpg`,text:V.get(a)??""};e.push(l)}}return f.state.Cashlogy.id_notificaciones[ae.value]||fe?.(!1),e})),F=["NIVEL","MANTENIMIENTO","AVISO","ERROR","PENDIENTE","INICIALIZANDO","CONECTANDO","RESET_REMOTO","FINALIZADO","ERR_INICIALIZACION"],Y=(0,l.iH)(!1),K=(0,n.Fl)((()=>{let e=null,a=!0;for(let n=F.length-1;n>=0;n--){let o=F[n],t=f.state.Cashlogy.id_notificaciones[o],l=f.state.Cashlogy.id_notificaciones_vistas[o];t&&(e||(e=o),t!=l&&(a=!1))}let o=e?`/img/cashlogy/${e.toLowerCase()}.jpg`:"";return Y.value=!!e,{tipo:e,class:a?"ico-visto":"ico-no-visto",img:o}}));async function G(){ee.value=!1,J&&(await J(),await new Promise((e=>setImmediate(e))),await new Promise((e=>setImmediate(e))),J&&await J())}let J,X=0;async function Q(e){switch(X++,J&&(await J(),await new Promise((e=>setImmediate(e)))),ee.value=!0,ae.value=e,f.dispatch("Cashlogy/notificacion_vista",{[e]:f.state.Cashlogy.id_notificaciones[e]}),e){case"NIVEL":await le();break;case"MANTENIMIENTO":await se();break;case"AVISO":case"ERROR":await de(e);break;case"PENDIENTE":await _e();break;case"ERR_INICIALIZACION":case"FINALIZADO":case"INICIALIZANDO":case"CONECTANDO":await pe(e);break;case"RESET_REMOTO":await ge();break}X--,0==X&&(ee.value=!1)}const ee=(0,l.iH)(!1);(0,n.YP)(ee,(e=>{e||(oe.value=!0,ae.value=null)})),(0,n.Ah)((()=>{G()}));const ae=(0,l.iH)(null),oe=(0,l.iH)(!1),ne=(0,l.iH)({});let te;async function le(){oe.value=!0;let e=!1,a=new Promise((e=>{te=e})).then((()=>{e=!0,J=null}));J=async()=>{te(),await a};while(1){try{let a=await d.Z.get_niveles();if(e)break;if(a.err)oe.value=!0;else{let e,o=new Map([[0,["",""]],[11,["Vacío","class-vacio"]],[12,["Casi Vacío","class-vacio"]],[21,["Lleno","class-lleno"]],[22,["Casi Lleno","class-lleno"]]]),n=a.denominaciones_dispensables,t={header:{cols:["Estado","Porcentaje"]},body:[]};for(let i of v.iX)for(let l=n[i].length-1;l>=0;l--){let r=n[i][l],s=o.get(a.estado_pd[i][r]);e={mob:i,den_cents:r,cols:[{value:s?.[0]??"",class:s?.[1]??""},{value:`${a.porcentaje_pd[i][r]}%`}]},t.body.push(e)}let l=o.get(a.estado_pd.STACKER);if(e={text:"STACKER",cols:[{value:l?.[0]??"",class:l?.[1]??""},{value:`${a.porcentaje_pd.STACKER}%`}]},t.body.push(e),"SAFEBOX"in a.estado_pd||"SAFEBOX"in a.estado_pd){let n=o.get(a.estado_pd.SAFEBOX);e={text:"CAJA FUERTE",cols:[{value:n?.[0]??"",class:n?.[1]??""},{value:`${a.porcentaje_pd.SAFEBOX}%`}]},t.body.push(e)}ne.value=t,oe.value=!1}}catch(o){}if(oe.value?await Promise.race([(0,v.uz)(5e3),a]):await a,e)break}}const ie=(0,l.iH)(null);let re;async function se(){if(oe.value=!1,o.miniMenu)await(0,v.R_)(ie),await ie.value.run();else{J=async()=>{re(),await e};let e=new Promise((e=>{re=e})).then((()=>{J=null}));await e}}const ce=(0,l.iH)(null);let ue;async function de(e){oe.value=!1,await(0,v.R_)(ce);let a=new Promise((e=>{ue=e})).then((()=>{J=null}));J=async()=>{ue(),await a},await ce.value.run(e,a),ue(),await a}const ve=(0,l.iH)(null);async function _e(){let e;oe.value=!0;let a=new Promise((a=>{e=a})).then((()=>{J=null}));J=async()=>{e(),await a};let o=await d.Z.get_procesoPrevioInterrumpido();oe.value=!1,await(0,v.R_)(ve);let n=await ve.value.run(o,a);"BOT_ACEPTAR"==n&&await d.Z.aceptar_procesoPrevioInterrumpido(o),e(),await a}let fe,me;async function pe(e){oe.value=!1,J=async()=>{fe?.(),await a};let a=new Promise((e=>{fe=e})).then((e=>{fe=null,J=null,e&&d.Z.reiniciar(!0)}));await a}async function ge(){oe.value=!1,J=async()=>{me(!1),await e};let e=new Promise((e=>{me=e})).then((e=>{me=null,J=null,e&&d.Z.aceptar_reset_remoto()}));await e}function ye(){ee.value=!1}return a({activado:I,restart:ye,mini_menu_activo:Y}),(a,o)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[e.miniMenu&&K.value.tipo?((0,n.wg)(),(0,n.iD)("img",{key:0,style:{"object-fit":"contain"},src:K.value.img,onClick:o[0]||(o[0]=e=>Q(K.value.tipo)),class:(0,t.C_)(["miniMenu border-ico",K.value.class])},null,10,m)):(0,n.kq)("",!0),e.miniMenu?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(W.value,(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,t.C_)(["border-ico",e.class]),style:{height:"4rem","margin-bottom":"0.3rem",overflow:"hidden"}},[(0,n.Wm)((0,l.SU)(i.$v),{onClick:a=>Q(e.tipo),class:"w-100 h-100 p-0"},{default:(0,n.w5)((()=>[(0,n._)("img",{src:e.img,style:{"object-fit":"contain"}},null,8,g)])),_:2},1032,["onClick"])],2)))),256))])),ee.value?((0,n.wg)(),(0,n.iD)("div",y,[(0,n._)("div",w,[(0,n._)("div",b,[(0,n._)("div",C,[(0,n.Wm)((0,l.SU)(i.$v),{onClick:G,color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Volver ")])),_:1})]),(0,n._)("div",h,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(W.value,(e=>((0,n.wg)(),(0,n.j4)((0,l.SU)(i.$v),{onClick:a=>Q(e.tipo),style:{display:"flex","justify-content":"center","align-items":"center"},class:(0,t.C_)(["border-ico",e.class])},{default:(0,n.w5)((()=>[(0,n._)("img",{src:e.img},null,8,k),(0,n._)("div",{innerHTML:e.text},null,8,A)])),_:2},1032,["onClick","class"])))),256))])]),oe.value?((0,n.wg)(),(0,n.iD)("div",E,R)):((0,n.wg)(),(0,n.iD)("div",N,["NIVEL"==ae.value?((0,n.wg)(),(0,n.iD)("div",U,[(0,n.Wm)(r.Z,{tabla:ne.value,style:{flex:"0 0 80%"}},null,8,["tabla"])])):(0,n.kq)("",!0),"MANTENIMIENTO"==ae.value?((0,n.wg)(),(0,n.iD)("div",T,[e.miniMenu?((0,n.wg)(),(0,n.j4)(s.Z,{key:0,ref_key:"CashlogyMantenimiento_ref",ref:ie},null,512)):((0,n.wg)(),(0,n.iD)("div",S,[(0,n.Uk)(" Realice el mantenimiento de Cashlogy"),O,(0,n.Uk)(" Vaya a Mantenimiento en el menu Cashlogy BackOffice"),x,(0,n.Wm)((0,l.SU)(i.$v),{onClick:(0,l.SU)(re),color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1},8,["onClick"])]))])):(0,n.kq)("",!0),"AVISO"==ae.value||"ERROR"==ae.value?((0,n.wg)(),(0,n.iD)("div",D,[(0,n.Wm)(u.Z,{ref_key:"CashlogyConsultaErrorChild_ref",ref:ce},null,512)])):(0,n.kq)("",!0),"PENDIENTE"==ae.value?((0,n.wg)(),(0,n.iD)("div",P,[(0,n.Wm)(c.Z,{ref_key:"CashlogyProcesoPrevioInterrumpido_ref",ref:ve},null,512)])):(0,n.kq)("",!0),"INICIALIZANDO"==ae.value?((0,n.wg)(),(0,n.iD)("div",L,[(0,n.Uk)(" Inicializando "),(0,n.Wm)((0,l.SU)(i.$v),{onClick:o[1]||(o[1]=e=>(0,l.SU)(fe)?.()),color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1})])):(0,n.kq)("",!0),"CONECTANDO"==ae.value?((0,n.wg)(),(0,n.iD)("div",M,[(0,n.Uk)(" Conectando "),(0,n.Wm)((0,l.SU)(i.$v),{onClick:o[2]||(o[2]=e=>(0,l.SU)(fe)?.()),color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1})])):(0,n.kq)("",!0),"ERR_INICIALIZACION"==ae.value?((0,n.wg)(),(0,n.iD)("div",$,[(0,n.Uk)(" Error inicialización "),(0,n._)("div",Z,[(0,n.Wm)((0,l.SU)(i.$v),{onClick:o[3]||(o[3]=e=>(0,l.SU)(fe)?.(!0)),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Reiniciar ")])),_:1}),(0,n.Wm)((0,l.SU)(i.$v),{onClick:o[4]||(o[4]=e=>(0,l.SU)(fe)?.(!1)),color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Volver ")])),_:1})])])):(0,n.kq)("",!0),"FINALIZADO"==ae.value?((0,n.wg)(),(0,n.iD)("div",H,[(0,n.Uk)(" Finalizado "),(0,n._)("div",z,[(0,n.Wm)((0,l.SU)(i.$v),{onClick:o[5]||(o[5]=e=>(0,l.SU)(fe)?.(!0)),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Reiniciar ")])),_:1}),(0,n.Wm)((0,l.SU)(i.$v),{onClick:o[6]||(o[6]=e=>(0,l.SU)(fe)?.(!1)),color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Volver ")])),_:1})])])):(0,n.kq)("",!0),"RESET_REMOTO"==ae.value?((0,n.wg)(),(0,n.iD)("div",j,[(0,n.Uk)(" Cashlogy se ha reiniciado "),(0,n.Wm)((0,l.SU)(i.$v),{onClick:o[7]||(o[7]=e=>(0,l.SU)(me)?.(!0)),color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1})])):(0,n.kq)("",!0)]))])])):(0,n.kq)("",!0)],64))}},B=o(40089);const V=(0,B.Z)(q,[["__scopeId","data-v-10ef7837"]]);var W=V},68315:function(e,a,o){o.d(a,{Z:function(){return Z}});o(57658);var n=o(73396),t=o(87139),l=o(44870),i=o(74313),r=o(92136),s=o(69523),c=o(34028),u=o(13150),d=o(16683),v=o(43666);const _=e=>((0,n.dD)("data-v-a4e0bc6c"),e=e(),(0,n.Cn)(),e),f={key:0,class:"modal-Cashlogy",style:{"font-size":"1.25rem"}},m={style:{display:"flex",height:"100%",padding:"0.5rem"}},p={style:{flex:"0 0 80%",position:"relative",height:"100%",border:"2px solid black","border-radius":"10px",padding:"0.7rem"}},g=_((()=>(0,n._)("legend",{style:{float:"none",width:"auto",margin:"0 0.3rem","font-size":"1.5rem",color:"black"}},"Cashlogy",-1))),y={class:"w-100 h-100",style:{position:"relative"}},w={key:0,class:"frame-Cashlogy flex-column"},b=_((()=>(0,n._)("div",{style:{border:"1px solid black","border-radius":"6px",padding:"2rem"}}," Conectando con Cashlogy ",-1))),C={key:0},h={key:0,style:{position:"absolute",bottom:"0px",width:"100%",height:"100%","background-color":"rgb(0 0 0 /20%)"}},k=["innerHTML"],A=_((()=>(0,n._)("br",null,null,-1))),E={class:"d-flex flex-column",style:{gap:"2px"}},I={style:{flex:"1 0 0","margin-left":"1rem"}},R={key:0,class:"modal-Cashlogy"},N={key:1,class:"modal-Cashlogy"},U={class:"frame-Cashlogy flex-column"},T=["innerHTML"],S={style:{flex:"0 0 20%"},class:"items-Cashlogy"},O={key:2,class:"modal-Cashlogy"},x={class:"frame-Cashlogy flex-column"},D=_((()=>(0,n._)("div",null," Cashlogy se ha reiniciado ",-1))),P={style:{flex:"0 0 20%"},class:"items-Cashlogy"};var L={__name:"CashlogyPantalla",props:{enProceso:Boolean},setup(e,{expose:a}){const o=e;let _=v.Z;const L=(0,l.iH)(!1);(0,n.YP)((()=>o.enProceso),(()=>{B()}));const M=(0,l.iH)(!1),$=(0,l.iH)(""),Z=(0,l.iH)([]),H=(0,l.iH)(!1),z=(0,l.iH)(""),j=(0,l.iH)(!1);let q;function B(){q&&clearTimeout(q),j.value=!1,q=setTimeout((()=>{j.value=!0}),1e4)}function V(){u.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR"),u.Z.boton_pulsar("BOT_CANCELAR")}function W(e){H.value=!0,u.Z.boton_pulsar(e)}async function F(e){if("OK"==e.state)return void(M.value=!1);if("TIMEOUT"==e.state&&"RETIRAR_STACKER"==e.tipo_cmd_suspendible)return void(M.value=!1);"TIMEOUT"==e.state&&"DISPENSAR"==e.tipo_cmd_suspendible?($.value="Problema con la devolución<br>\n                 Retire el billete para continuar\n                ",z.value="height:60%;"):"ERR_INICIALIZACION"==e.state||"FINALIZADO"==e.state?($.value=`Proceso irrecuperable<br>\n                 Estado:${e.state}<br>\n                 Ha habido un error en la inicialización. Revisar cables y conexiones.\n                `,z.value="height:50%;"):($.value=`Proceso suspendido<br>\n                 Espere...<br>\n                 Estado:${e.state}\n                `,z.value="height:50%;"),M.value=!0;let a=[{msg:e.opcion_cancelar?"CANCELAR":"INTERRUMPIR",bot:"BOT_ABORTAR_Y_CANCELAR"}];e.opcion_manual&&a.push({msg:oe.value,bot:"BOT_ABORTAR_Y_MANUAL"}),Z.value=a,H.value=!1,B()}function Y(e){r.socket[e]("Cashlogy.suspendido",F)}const K=(0,l.iH)(!1),G=(0,l.iH)(null);async function J(e){K.value=!0,await(0,d.R_)(G);let a=await G.value.run(e);K.value=!1,u.Z.boton_pulsar(a),B()}function X(e){r.socket[e]("Cashlogy.procesoPrevioInterrumpido",J)}const Q=(0,l.iH)(),ee=(0,l.iH)(""),ae=(0,l.iH)("CANCELAR OPERACIÓN"),oe=(0,l.iH)("");function ne(e,a){oe.value=e,ae.value=a}let te;async function le(e){if(!e)return null;if(e.abort_info){let a=e.abort_info.grupo_procesos,o=a?.nombre,n=a?.enCurso?.proceso;o||(o=n??"",n=""),ee.value=`error de comunicación con Cashlogy<br>\n                 Grupo:${o}<br>\n                `+(o?`Subproceso:${n??""}<br>`:"");let t="";e.abort_info.stopped?t="stopped":e.abort_info.reset_remoto?(t="reinicio",u.Z.aceptar_reset_remoto()):t=e.abort_info.last_suspendido_state?e.abort_info.last_suspendido_state:e.abort_info.reason,ee.value+=`Razon:${t}`,Q.value=!0;let l=await new Promise((e=>{te=e}));return Q.value=!1,{cancelado:"BOT_CANCELAR"==l,manual:"BOT_MANUAL"==l&&null!=ae.value,aceptado_principal:"BOT_MANUAL"==l&&null==ae.value,abort_id:e.abort_info.grupo_procesos?.preEstado?.date??-1}}return e.abortado_antes_de_empezar?e.abortado_antes_de_empezar:null}const ie=(0,l.iH)(!1);let re,se,ce;function ue(){se=new Promise((e=>{ce=e}))}function de(e){ce?.(e)}async function ve(e,a){let o,n=e.start(a);se.then((a=>{o=a,e.R(void 0)}));let t=await n;return[t,o?await le(o):null]}function _e(e){r.socket[e]("Cashlogy.reset_remoto",de)}function fe(e){Y(e),X(e),_e(e)}async function me(){if(L.value=!0,M.value=!1,await u.Z.do_stop_proceso_activo(),_.state.Cashlogy?.id_notificaciones.RESET_REMOTO){ie.value=!0;let e=await new Promise((e=>{re=e}));if("BOT_CANCELAR"==e||"BOT_MANUAL"==e)return L.value=!1,{cancelado:"BOT_CANCELAR"==e,manual:"BOT_MANUAL"==e};await u.Z.aceptar_reset_remoto(),ie.value=!1}ue(),fe("on"),B()}async function pe(){L.value=!1,fe("off")}return(0,n.Ah)((()=>{pe()})),a({start:me,end:pe,texto_botones_para_abort:ne,informacionAbort_y_cancel:le,startPantalla_withReset:ve}),(e,a)=>L.value?((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("div",m,[(0,n._)("fieldset",p,[g,(0,n._)("div",y,[(0,n._)("div",{style:{height:"100%"},class:(0,t.C_)({disabled:M.value})},[o.enProceso?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",w,[b,j.value?((0,n.wg)(),(0,n.iD)("div",C,[(0,n.Wm)((0,l.SU)(i.$v),{onClick:V,color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Salir ")])),_:1})])):(0,n.kq)("",!0)])),(0,n.WI)(e.$slots,"default")],2),M.value?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",{class:"div_suspendido",style:(0,t.j5)(z.value)},[(0,n._)("div",{innerHTML:$.value},null,8,k),A,(0,n._)("div",E,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Z.value,(({msg:e,bot:a})=>((0,n.wg)(),(0,n.j4)((0,l.SU)(i.$v),{disabled:H.value,onClick:e=>W(a),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(e),1)])),_:2},1032,["disabled","onClick"])))),256))])],4)])):(0,n.kq)("",!0)])]),(0,n._)("div",I,[(0,n.Wm)(s.Z,{ref:"CashlogyMenuNotificacionesRef"},null,512)])]),K.value?((0,n.wg)(),(0,n.iD)("div",R,[(0,n.Wm)(c.Z,{ref_key:"CashlogyProcesoPrevioInterrumpido_ref",ref:G},null,512)])):(0,n.kq)("",!0),Q.value?((0,n.wg)(),(0,n.iD)("div",N,[(0,n._)("div",U,[(0,n._)("div",{innerHTML:ee.value},null,8,T),(0,n._)("div",S,[ae.value?((0,n.wg)(),(0,n.j4)((0,l.SU)(i.$v),{key:0,onClick:a[0]||(a[0]=()=>(0,l.SU)(te)("BOT_CANCELAR")),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(ae.value),1)])),_:1})):(0,n.kq)("",!0),oe.value?((0,n.wg)(),(0,n.j4)((0,l.SU)(i.$v),{key:1,onClick:a[1]||(a[1]=()=>(0,l.SU)(te)("BOT_MANUAL")),color:"warning",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(oe.value),1)])),_:1})):(0,n.kq)("",!0)])])])):(0,n.kq)("",!0),ie.value?((0,n.wg)(),(0,n.iD)("div",O,[(0,n._)("div",x,[D,(0,n._)("div",P,[(0,n.Wm)((0,l.SU)(i.$v),{onClick:a[2]||(a[2]=e=>(0,l.SU)(re)("BOT_ACEPTAR")),color:"success",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" ACEPTAR ")])),_:1}),(0,n.Wm)((0,l.SU)(i.$v),{onClick:a[3]||(a[3]=e=>(0,l.SU)(re)("BOT_CANCELAR")),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" CANCELAR OPERACIÓN ")])),_:1}),oe.value?((0,n.wg)(),(0,n.j4)((0,l.SU)(i.$v),{key:0,onClick:a[4]||(a[4]=e=>(0,l.SU)(re)("BOT_MANUAL")),color:"warning",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(oe.value),1)])),_:1})):(0,n.kq)("",!0)])])])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)}},M=o(40089);const $=(0,M.Z)(L,[["__scopeId","data-v-a4e0bc6c"]]);var Z=$},34028:function(e,a,o){o.d(a,{Z:function(){return f}});o(57658);var n=o(73396),t=o(44870),l=o(74313),i=o(12195),r=o(16683);const s={class:"frame-Cashlogy"},c={style:{flex:"0 0 30%"}},u=["innerHTML"];var d={__name:"CashlogyProcesoPrevioInterrumpido",setup(e,{expose:a}){(0,t.iH)("");const o=(0,t.iH)(!1),d=(0,t.iH)(""),v=(0,t.iH)({});let _=()=>{},f=!1;const m=(0,t.iH)(!1);async function p(e,a=null,n=!1){f=!0;let t=e?.nombre,l=e?.enCurso?.proceso;if(t||(t=l??"",l=""),d.value=`Resumen proceso interrumpido previo<br>\n             Grupo:${t}<br>\n            `+(t?`Subproceso:${l??""}<br>`:"")+(e?.info?.importe_entrado?`Importe entrado por el cliente:${(0,r.vg)(e?.info?.importe_entrado,!0)}<br>`:""),m.value=n,e?.preEstado?.date){let a=new Date(e.preEstado?.date);const o=e=>("0"+e.toString()).slice(-2);let n=`${o(a.getDate())}/${o(a.getMonth()+1)}/${a.getFullYear()} - ${o(a.getHours())}:${o(a.getMinutes())}:${o(a.getSeconds())}`;d.value+=`Fecha: ${n}<br>`}if(e?.postEstado&&e?.preEstado){let a,o=!(0,r.kJ)(e.postEstado.cantidad_caja_fuerte_pd),n={header:{cols:["Cantidad reciclador","Cantidad stacker",o?"Cantidad caja fuerte":null].filter((e=>null!=e))},body:[],footer:{head:"Valoración",cols:[]}};for(let i of r.iX)for(let t=e.postEstado.denominaciones[i].length-1;t>=0;t--){let l=e.postEstado.denominaciones[i][t],r=e.postEstado.cantidad_recicladores_pd[i][l],s=e.postEstado.cantidad_stacker_pd[i][l],c=e.postEstado.cantidad_caja_fuerte_pd[i][l]??0,u=e.preEstado.cantidad_recicladores_pd[i][l],d=e.preEstado.cantidad_stacker_pd[i][l],v=e.preEstado.cantidad_caja_fuerte_pd[i][l]??c;const _=(e,a)=>e==a?{value:e.toString(),class:""}:e<a?{value:`${e}(-${a-e})`,class:"class-menos"}:{value:`${e}(+${e-a})`,class:"class-mas"};a={mob:i,den_cents:l,cols:[_(r,u),_(s,d),o?_(c,v):null].filter((e=>null!=e))},n.body.push(a)}const t=e=>{let a=0;for(let{mob:o,den:n,value:t}of(0,r.eh)(e))a+=n*t;return a/100},l=(e,a)=>{let o=t(e),n=t(a);return o==n?{value:(0,r.vg)(o,!0),class:""}:o<n?{value:`${(0,r.vg)(o,!0)} (-${(0,r.vg)(n-o,!0)})`,class:"class-menos"}:{value:`${(0,r.vg)(o,!0)} (+${(0,r.vg)(o-n,!0)})`,class:"class-mas"}};n.footer.cols=[l(e.postEstado.cantidad_recicladores_pd,e.preEstado.cantidad_recicladores_pd),l(e.postEstado.cantidad_stacker_pd,e.preEstado.cantidad_stacker_pd),o?l(e.postEstado.cantidad_caja_fuerte_pd,e.preEstado.cantidad_caja_fuerte_pd):null].filter((e=>null!=e)),v.value=n}else v.value={};let i=new Promise((e=>{_=e})).then((e=>(o.value=!0,e)));o.value=!1,a&&a.then((()=>{_?.("BOT_CANCELAR")}));let s=await i;return f=!1,s}return(0,n.Ah)((()=>{f&&_?.("BOT_CANCELAR")})),a({run:p}),(e,a)=>((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",c,[(0,n._)("div",{innerHTML:d.value},null,8,u),(0,n._)("div",null,[(0,n.Wm)((0,t.SU)(l.$v),{disabled:o.value,onClick:a[0]||(a[0]=e=>(0,t.SU)(_)("BOT_ACEPTAR")),color:"success",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" ACEPTAR ")])),_:1},8,["disabled"]),(0,n.Wm)((0,t.SU)(l.$v),{disabled:o.value,onClick:a[1]||(a[1]=e=>(0,t.SU)(_)("BOT_CANCELAR")),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" CANCELAR ")])),_:1},8,["disabled"]),m.value?((0,n.wg)(),(0,n.j4)((0,t.SU)(l.$v),{key:0,disabled:o.value,onClick:a[2]||(a[2]=e=>(0,t.SU)(_)("BOT_MANUAL")),color:"warning",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" COBRO MANUAL ")])),_:1},8,["disabled"])):(0,n.kq)("",!0)])]),(0,n.Wm)(i.Z,{tabla:v.value},null,8,["tabla"])]))}},v=o(40089);const _=(0,v.Z)(d,[["__scopeId","data-v-b209fb32"]]);var f=_},12195:function(e,a,o){o.d(a,{Z:function(){return E}});var n=o(73396),t=o(87139),l=o(44870),i=o(49242),r=o(74313),s=o(16683);const c={class:"tabla-denominaciones",style:{"font-size":"1rem"}},u={key:0},d={colspan:"2"},v={style:{"min-width":"8.8rem"}},_={style:{"text-align":"center"}},f=["src"],m=["value"],p=["value"],g={key:3,style:{"text-align":"end"}},y={key:1},w={colspan:"2"},b={key:0},C={style:{"text-align":"end"}};var h={__name:"CashlogyTablaDenominaciones",props:["tabla","checkboxs"],emits:["click-body","click-footer","update:checkboxs"],setup(e,{emit:a}){const o=e,h=(0,n.Fl)((()=>o.tabla)),k=(0,l.iH)([]);function A(e,o,n){a("click-body",e,o,n,this)}function E(e,o){a("click-footer",e,o,this)}return o.checkboxs&&(k.value=o.checkboxs),(0,n.YP)((()=>o.checkboxs),(()=>{k.value=o.checkboxs})),(0,n.YP)(k,(()=>{a("update:checkboxs",k.value)})),(e,a)=>((0,n.wg)(),(0,n.iD)("table",c,[h.value.header?((0,n.wg)(),(0,n.iD)("thead",u,[(0,n._)("tr",null,[(0,n._)("th",d,(0,t.zw)(h.value.header.head??""),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.value.header.cols,(e=>((0,n.wg)(),(0,n.iD)("th",null,(0,t.zw)(e),1)))),256))])])):(0,n.kq)("",!0),(0,n._)("tbody",null,[h.value.body?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(h.value.body,(e=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("td",v,(0,t.zw)(e.text?e.text:("billetes"==e.mob?"Billetes de ":"Monedas de ")+(e.den_cents>=100?e.den_cents/100+"€":e.den_cents+"c")),1),(0,n._)("td",_,[null==e.text?((0,n.wg)(),(0,n.iD)("img",{key:0,src:(0,l.SU)(s.Cq)(e.mob,e.den_cents),style:{height:"2ch"}},null,8,f)):(0,n.kq)("",!0)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cols,((o,s)=>((0,n.wg)(),(0,n.iD)("td",(0,n.dG)({class:o.class||"",style:null!=o.checkbox?"text-align:center;":"text-align:end"},(0,n.mx)(o.clickable?{click:function(){A(e,o,s)}}:{},!0)),[o.button?((0,n.wg)(),(0,n.j4)((0,l.SU)(r.$v),{key:0,color:"secondary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(o.value),1)])),_:2},1024)):o.input?((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text",style:{"text-align":"end",border:"2px solid red","border-radius":"4px",height:"100%"},readonly:"",value:o.value,size:"6",onFocus:a[0]||(a[0]=e=>{e.currentTarget?.blur?.()})},null,40,m)):null!=o.checkbox?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:2,type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=e=>k.value=e),value:`${e.mob},${e.den_cents},${s}`},null,8,p)),[[i.e8,k.value]]):((0,n.wg)(),(0,n.iD)("div",g,(0,t.zw)(o.value),1))],16)))),256))])))),256)):(0,n.kq)("",!0)]),h.value.footer?((0,n.wg)(),(0,n.iD)("tfoot",y,[(0,n._)("tr",null,[(0,n._)("th",w,(0,t.zw)(h.value.footer.head??""),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.value.footer.cols,((e,a)=>((0,n.wg)(),(0,n.iD)(n.HY,null,["string"==typeof e?((0,n.wg)(),(0,n.iD)("td",b,(0,t.zw)(e),1)):((0,n.wg)(),(0,n.iD)("td",(0,n.dG)({key:1,class:e.class||""},(0,n.mx)(e.clickable?{click:function(){E(e,a)}}:{},!0),{style:{"text-align":"end"}}),[(0,n._)("div",C,(0,t.zw)(e.value),1)],16))],64)))),256))])])):(0,n.kq)("",!0)]))}},k=o(40089);const A=(0,k.Z)(h,[["__scopeId","data-v-d00f1f0e"]]);var E=A}}]);
//# sourceMappingURL=654.79f98c74.js.map