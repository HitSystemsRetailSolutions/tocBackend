"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[682],{48118:function(a,t,e){e.d(t,{Z:function(){return C}});var n=e(73396),o=e(87139);const l={class:"btn-group"},d={class:"btn-group"},u={class:"btn-group"},s={class:"btn-group"},c=["disabled"],r={class:"btn-group"};function i(a,t,e,i,p,b){return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(["btn-group-vertical mt-1",{disabled:e.disabled}])},[(0,n._)("div",l,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[0]||(t[0]=a=>i.addTecla("1"))}," 1 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[1]||(t[1]=a=>i.addTecla("2"))}," 2 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[2]||(t[2]=a=>i.addTecla("3"))}," 3 ")]),(0,n._)("div",d,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[3]||(t[3]=a=>i.addTecla("4"))}," 4 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[4]||(t[4]=a=>i.addTecla("5"))}," 5 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[5]||(t[5]=a=>i.addTecla("6"))}," 6 ")]),(0,n._)("div",u,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[6]||(t[6]=a=>i.addTecla("7"))}," 7 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[7]||(t[7]=a=>i.addTecla("8"))}," 8 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[8]||(t[8]=a=>i.addTecla("9"))}," 9 ")]),(0,n._)("div",s,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[9]||(t[9]=a=>i.deleteTecla())}," < "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[10]||(t[10]=a=>i.addTecla("0"))}," 0 "),(0,n._)("button",{disabled:e.disabledComa,type:"button",class:"btn btn-outline-secondary botonNumpad",onClick:t[11]||(t[11]=a=>i.addTecla("."))}," , ",8,c)]),(0,n._)("div",r,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary botonComa",onClick:t[12]||(t[12]=a=>i.okValue(Number(i.cantidad)))}," OK ")])],2)}e(42492);var p=e(32066),b=e(25994),m=e(44870);const v=(0,p.io)("http://"+b.Z.state.TocGameURL+":5051");var y={props:{useBalanza:{type:Boolean,default:!1},max3EntersDigits:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledComa:{type:Boolean,default:!1}},name:"NumpadComponent",setup(a,{expose:t,emit:e}){const o=(0,m.iH)("0"),l=(0,n.f3)("okValue"),d=(0,m.iH)("5.5rem"),u=(0,m.iH)("5.5rem");(0,n.Fl)((()=>b.Z.state.Weight.lastWeight));function s(){e("activarShake")}function c(t){if(a.max3EntersDigits){let[a,e]=o.value.split("."),n=o.value.includes(".");if(a.length>=3&&!n&&"."!=t)return s();if(e&&e.length>=2)return s();if("."===t&&o.value.includes("."))return s()}"."===t&&o.value.includes(".")||(o.value+=t,"0"==o.value[0]&&(o.value=o.value.slice(1)),e("setValue",o.value))}function r(){o.value=o.value.slice(0,-1),""===o.value&&(o.value="0")}function i(a){o.value=Number(a).toString(),e("setValue",o.value)}return v.on("setBalanzaValue",(t=>{t&&a.useBalanza&&i(t)})),t({cantidad:o,setValor:i}),(0,n.bv)((async()=>{a.useBalanza&&i((await(0,n.Fl)((()=>b.Z.state.Weight.lastWeight))).value)})),{okValue:l,cantidad:o,addTecla:c,deleteTecla:r,setValor:i,anchoTecla:d,altoTecla:u}}},f=e(40089);const _=(0,f.Z)(y,[["render",i],["__scopeId","data-v-7dce7ef7"]]);var C=_},71350:function(a,t,e){e.r(t),e.d(t,{default:function(){return H}});var n=e(73396),o=e(87139),l=e(49242);const d={class:"col-md-4 colJuntitas"},u={class:"input-group input-group-lg"},s={class:"input-group input-group-lg mt-2"},c={class:"col-md-5 colJuntitas"},r={class:"col-12 d-flex justify-content-between"},i={class:"col-5"},p={class:"col-4"},b={class:"col-3"},m={class:"w-100"},v={class:"concepto"},y={class:"col-md-3 m-auto"};function f(a,t,e,f,_,C){const g=(0,n.up)("MDBCardHeader"),w=(0,n.up)("MDBCardBody"),k=(0,n.up)("MDBBtn"),B=(0,n.up)("MDBCardFooter"),T=(0,n.up)("MDBCard"),h=(0,n.up)("MDBTable"),D=(0,n.up)("NumpadComponent"),N=(0,n.up)("KeyBoardComponent");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",d,[(0,n.Wm)(T,{text:"center",class:"sizeSalida m-auto mt-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(a.$t("entrada_de_dinero","Entrada de dinero")),1)])),_:1}),f.numpadRef&&f.numpadRef.cantidad?((0,n.wg)(),(0,n.j4)(w,{key:0},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>f.numpadRef.cantidad=a),type:"text",class:"form-control",placeholder:"Introduce la cantidad",disabled:""},null,512),[[l.nr,f.numpadRef.cantidad]])]),(0,n._)("div",s,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>f.concepto=a),type:"text",class:"form-control",placeholder:"Concepto",readonly:"",onClick:t[2]||(t[2]=a=>f.openKeyboard())},null,512),[[l.nr,f.concepto]])])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(B,{class:"text-muted text-end"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{color:"success",size:"lg",onClick:t[3]||(t[3]=a=>f.confirmarEntrada())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(a.$t("confirmar_entrada","Confirmar entrada")),1)])),_:1})])),_:1})])),_:1})]),(0,n._)("div",c,[(0,n.Wm)(T,{class:"sizeCardListaEntrada m-auto mt-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{style:{"text-align":"center"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(a.$t("listado_de_entradas","Listado de entradas")),1)])),_:1}),(0,n.Wm)(w,{class:"sizeCardBody"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"sizeCardBodyListaEntrada"},{default:(0,n.w5)((()=>[(0,n._)("thead",null,[(0,n._)("tr",r,[(0,n._)("th",i,(0,o.zw)(a.$t("hora","Hora")),1),(0,n._)("th",p,(0,o.zw)(a.$t("concepto","Concepto")),1),(0,n._)("th",b,(0,o.zw)(a.$t("total","Total")),1)])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(f.listaEntradas,((a,t)=>((0,n.wg)(),(0,n.iD)("tr",m,[(0,n._)("td",null,(0,o.zw)(f.getTiempo(a._id)),1),(0,n._)("td",v,(0,o.zw)(a.concepto),1),(0,n._)("td",null,(0,o.zw)(a.valor?.toFixed(2))+" â‚¬",1)])))),256))])])),_:1})])),_:1})])),_:1})]),(0,n._)("div",y,[(0,n.Wm)(D,{ref:"numpadRef"},null,512)]),(0,n.Wm)(N,{ref:"keyboardRef"},null,512)],64)}var _=e(91076),C=e(74313),g=e(42492),w=e.n(g),k=e(44870),B=e(20065),T=e(48118),h=e(36797),D=e.n(h),N=e(22871),z={name:"EntradaComponent",components:{MDBCard:C.Yl,MDBCardHeader:C.uX,MDBCardBody:C.H7,NumpadComponent:T.Z,MDBBtn:C.$v,MDBCardFooter:C.Rw,MDBTable:C.re,KeyBoardComponent:N.Z},setup(){const a=(0,B.oR)(),t=(0,n.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),e=(0,n.Fl)((()=>a.state.Trabajadores.indexActivo)),o=(0,n.Fl)((()=>t.value&&null!=e.value&&void 0!=e.value&&t.value[e.value]?t.value[e.value]:null)),l=(0,k.iH)(null),d=(0,k.iH)(""),u=(0,k.iH)([]),s=(0,k.iH)(null);function c(a){const t=new Date(a);return D()(t).format("HH:mm:ss DD/MM/YYYY")}function r(){""==d.value&&(d.value="Entrada"),_.Z.post("movimientos/nuevoMovimiento",{cantidad:Number(l.value.cantidad),concepto:d.value,idTrabajador:o.value._id,tipo:"ENTRADA_DINERO"}).then((a=>{if(!a.data)throw Error("No se ha podido realizar la entrada de dinero");l.value.setValor("0"),w().fire("Perfecto","Entrada de dinero realizada correctamente","success"),i()})).catch((a=>{w().fire("Oops...",a.message,"error")}))}function i(){_.Z.get("movimientos/getEntradasIntervalo").then((a=>{void 0!=a.data&&null!=a.data&&(u.value=a.data.reverse())})).catch((a=>{w().fire("Oops...","Error al mostrar lista","error")}))}let p;async function b(){try{s.value.abrirModal(d.value),p=setInterval((()=>{const a=s.value.getValue()[0];a!==d.value&&(d.value=a),s.value.getValue()[1]||clearInterval(p)}),100)}catch(a){console.log(a),p=void 0}}return(0,n.bv)((()=>{i()})),(0,n.JJ)("okValue",r),{confirmarEntrada:r,numpadRef:l,concepto:d,listaEntradas:u,getEntradas:i,getTiempo:c,openKeyboard:b,keyboardRef:s}}},E=e(40089);const M=(0,E.Z)(z,[["render",f],["__scopeId","data-v-40b44fa4"]]);var H=M}}]);
//# sourceMappingURL=682.3dc404d5.js.map