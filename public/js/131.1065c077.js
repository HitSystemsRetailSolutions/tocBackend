"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[131],{61562:function(e,l,a){a.d(l,{Z:function(){return p}});var o=a(73396),t=a(87139);const n=["onClick"],i={class:"botonTecladoSpaceDiv"};function s(e,l,a,s,d,u){const r=(0,o.up)("MDBInput"),c=(0,o.up)("MDBModalHeader"),m=(0,o.up)("MDBModalBody"),p=(0,o.up)("MDBModal");return(0,o.wg)(),(0,o.j4)(p,{frame:"",position:"bottom",id:"keyBoardModal",tabindex:"-1",labelledby:"keyBoardModal",modelValue:s.keyBoardModal,"onUpdate:modelValue":l[4]||(l[4]=e=>s.keyBoardModal=e)},{default:(0,o.w5)((()=>[s.showInput?((0,o.wg)(),(0,o.j4)(c,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{style:{width:"80rem !important"},label:"Texto introducido",modelValue:s.text,"onUpdate:modelValue":l[0]||(l[0]=e=>s.text=e)},null,8,["modelValue"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(m,{class:"mainDiv"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.chars.length,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.chars[e-1],((e,l)=>((0,o.wg)(),(0,o.iD)("div",{class:"btn-group-vertical mt-1 divTecla",key:l},[(0,o._)("button",{type:"button",style:(0,t.j5)([{"text-transform":"none"},s.keyStyle(e)]),class:"btn btn-outline-secondary py-3 botonTeclado",onClick:l=>s.processTecla(e)},(0,t.zw)(e),13,n)])))),128))])))),128)),(0,o._)("div",i,[(0,o._)("button",{style:(0,t.j5)([{"font-size":"1.8rem"},s.keyStyle("✎")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:l[1]||(l[1]=e=>s.processTecla("✎"))}," ✎ ",4),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonTecladoSpace",onClick:l[2]||(l[2]=e=>s.processTecla(" "))}," ␣ "),(0,o._)("button",{style:(0,t.j5)([{"font-size":"1.8rem"},s.keyStyle("#")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:l[3]||(l[3]=e=>s.processTecla("#"))}," Ⅳ ",4)])])),_:1})])),_:1},8,["modelValue"])}var d=a(44870),u=a(74313),r={name:"KeyBoardComponent",components:{MDBIcon:u.vm,MDBModalBody:u.Yz,MDBModal:u.j3,MDBBtn:u.$v,MDBModalHeader:u.ol,MDBModalTitle:u.wo,MDBInput:u.u2,MDBModalFooter:u.ab},props:{value:String,text:String},setup(e,{expose:l}){const a=(0,d.iH)(e.value||""),t=(0,d.iH)(!1),n=(0,d.iH)(!1),i=(0,d.iH)(!1);let s=!1;const u=(0,d.iH)(!1),r=[["q","w","e","r","t","y","u","i","o","p","←"],["a","s","d","f","g","h","j","k","l","ñ","↵"],["z","x","c","v","b","n","m",",",".","-","⇪"]],c=(0,d.iH)([]);function m(e){switch(e){case"←":b();break;case"↵":t.value=!1;break;case"⇪":s=!s,a.value.length>0&&(n.value=!n.value),y();break;case"#":i.value=!i.value,y();break;case"✎":u.value=!u.value;break;default:v(e);break}}function p(e){let l=a.value.length<=0&&!s||n.value,o="background-color: #606060 !important; color: white !important;";return i.value&&"#"==e||u.value&&"✎"==e||"⇪"==e&&l?o:l?"text-transform: uppercase":"text-transform: none;"}function v(e){let l=a.value.length<=0&&!s||n.value;s=!1,l&&(e=e.toUpperCase()),a.value+=e}function b(){a.value.length>0&&(a.value=a.value.slice(0,-1))}function y(){let e=r;const l=["á","é","í","ó","ú","ü","¡","¿"];if(i.value){let l=[["1","2","3","4","5","6","7","8","9","0","ç"]];l=l.concat(r),e=l}c.value=e.map((e=>e.map((e=>l.includes(e)?[e,e.toUpperCase()]:e))))}function f(e=""){void 0===a.value&&(a.value=""),a.value=e,t.value=!0}function B(){return[a.value,t.value]}return l({getValue:B,abrirModal:f}),(0,o.bv)((()=>{y()})),{text:a,addTecla:v,deleteTecla:b,keyBoardModal:t,processTecla:m,upperCase:n,keyStyle:p,buildKeyboard:y,abrirModal:f,showInput:u,chars:c}}},c=a(40089);const m=(0,c.Z)(r,[["render",s],["__scopeId","data-v-c19133e2"]]);var p=m},89131:function(e,l,a){a.d(l,{Z:function(){return I}});var o=a(73396),t=a(87139),n=a(49242);const i={class:"row"},s={class:"d-inline-block text-center"},d={class:"row mt-1 p-4"},u={class:"col-md-8"},r={class:"col-md-4"},c={key:0,class:"row"},m={class:"col"},p={class:"table-responsive w-100",style:{height:"400px"}},v={class:"table table-striped mt-1"},b={class:"textoNombre d-inline-block text-truncate"},y={key:1,class:"row"},f={class:"sinResultados position-relative"},B={class:"textoSinResultados position-absolute top-50 start-50 translate-middle"};function C(e,l,a,C,k,M){const w=(0,o.up)("MDBBtn"),g=(0,o.up)("MDBBadge"),_=(0,o.up)("MDBicon"),D=(0,o.up)("MDBModalBody"),h=(0,o.up)("MDBModal"),V=(0,o.up)("ModalNuevoCliente"),x=(0,o.up)("KeyBoardComponentVue");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(h,{id:"modalClientes",tabindex:"-1",labelledby:"tituloModalClientes",modelValue:C.modalClientes,"onUpdate:modelValue":l[8]||(l[8]=e=>C.modalClientes=e),staticBackdrop:"",size:"xl"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o._)("div",s,[(0,o.Wm)(w,{color:"warning",class:"sizeBotones",onClick:l[0]||(l[0]=e=>C.clickDelivery("Glovo")),disabled:!C.activoGlovo},{default:(0,o.w5)((()=>[(0,o.Uk)("Glovo")])),_:1},8,["disabled"]),(0,o.Wm)(w,{color:"dark",class:"ms-2 sizeBotones",disabled:!C.activoUber,onClick:l[1]||(l[1]=e=>C.clickDelivery("Uber"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Uber")])),_:1},8,["disabled"]),(0,o.Wm)(w,{color:"primary",class:"ms-2 sizeBotones",disabled:!C.activoToGo,onClick:l[2]||(l[2]=e=>C.clickDelivery("TooGoodToGo"))},{default:(0,o.w5)((()=>[(0,o.Uk)("To Go")])),_:1},8,["disabled"]),(0,o.Wm)(w,{color:"success",class:"ms-2 sizeBotones",onClick:l[3]||(l[3]=e=>C.modalNuevoClienteRef.abrirModal())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.$t("nuevo","Nuevo")),1)])),_:1}),(0,o.Wm)(w,{color:"danger",class:"ms-2 sizeBotones",onClick:l[4]||(l[4]=e=>C.modalClientes=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.$t("salir","Salir")),1)])),_:1})])]),(0,o._)("div",d,[(0,o._)("div",u,[(0,o.wy)((0,o._)("input",{class:"form-control inputBusqueda w-100",type:"text",placeholder:"Buscar por nombre","aria-label":".form-control-lg example","onUpdate:modelValue":l[5]||(l[5]=e=>C.inputBusqueda=e),onClick:l[6]||(l[6]=e=>C.openKeyboard()),readonly:""},null,512),[[n.nr,C.inputBusqueda]])]),(0,o._)("div",r,[(0,o.Wm)(w,{color:"secondary",class:"botonBusqueda w-100",onClick:l[7]||(l[7]=e=>C.buscar())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.$t("buscar","Buscar")),1)])),_:1})])]),C.arrayClientes?.length>0?((0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",m,[(0,o._)("div",p,[(0,o._)("table",v,[(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(C.arrayClientes,((l,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a},[(0,o._)("td",null,[(0,o._)("span",b,[(0,o.Uk)((0,t.zw)(l.nombre)+"  ",1),l.albaran?((0,o.wg)(),(0,o.j4)(g,{key:0,badge:"info",class:"text-dark",pill:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Albaran")])),_:1})):(0,o.kq)("",!0)])]),(0,o._)("td",null,[(0,o.Wm)(w,{color:"primary",size:"lg",onClick:e=>C.selectCliente(l.id,l.nombre,l.albaran),class:"w-100",style:{height:"3.85rem","font-size":"1.5rem"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.$t("elegir","Elegir")),1),(0,o.Wm)(_,{icon:""})])),_:2},1032,["onClick"])])])))),128))])])])])])):((0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("div",f,[(0,o._)("span",B,(0,t.zw)(e.$t("sin_resultados","Sin resultados")),1)])]))])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(V,{ref:"modalNuevoClienteRef"},null,512),(0,o.Wm)(x,{ref:"keyboardRef"},null,512)],64)}var k=a(44161),M=a(74313),w=a(42492),g=a.n(w),_=a(44870),D=a(20065);const h={class:"row"},V={class:"col w-50"},x={class:"col w-50 datos"};function H(e,l,a,n,i,s){const d=(0,o.up)("MDBModalHeader"),u=(0,o.up)("MDBInput"),r=(0,o.up)("MDBModalBody"),c=(0,o.up)("MDBBtn"),m=(0,o.up)("MDBModalFooter"),p=(0,o.up)("MDBModal");return(0,o.wg)(),(0,o.j4)(p,{id:"modalFichaCliente",tabindex:"-1",labelledby:"tituloModalFichaCliente",modelValue:n.modalFichaCliente,"onUpdate:modelValue":l[9]||(l[9]=e=>n.modalFichaCliente=e),staticBackdrop:"",size:"xl"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,"Ficha de "+(0,t.zw)(n.nombre),1)])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",h,[(0,o._)("div",V,[(0,o.Wm)(u,{label:"Nombre",modelValue:n.nombre,"onUpdate:modelValue":l[0]||(l[0]=e=>n.nombre=e),style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,o.Wm)(u,{label:"Telefono",modelValue:n.telefono,"onUpdate:modelValue":l[1]||(l[1]=e=>n.telefono=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,o.Wm)(u,{label:"email",modelValue:n.email,"onUpdate:modelValue":l[2]||(l[2]=e=>n.email=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,o.Wm)(u,{label:"direccion",modelValue:n.direccion,"onUpdate:modelValue":l[3]||(l[3]=e=>n.direccion=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"])]),(0,o._)("div",x,[(0,o.Wm)(u,{label:"Tarjeta Cliente",modelValue:n.tarjeta,"onUpdate:modelValue":l[4]||(l[4]=e=>n.tarjeta=e),class:"datos",style:{"margin-top":"10px"},"aria-required":"true"},null,8,["modelValue"]),(0,o.Wm)(u,{label:"Nif",modelValue:n.nif,"onUpdate:modelValue":l[5]||(l[5]=e=>n.nif=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,o.Wm)(u,{label:"descuento",modelValue:n.descuento,"onUpdate:modelValue":l[6]||(l[6]=e=>n.descuento=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"])])])])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{color:"primary",onClick:l[7]||(l[7]=e=>n.guardarCliente())},{default:(0,o.w5)((()=>[(0,o.Uk)(" Guardar ")])),_:1}),(0,o.Wm)(c,{color:"danger",onClick:l[8]||(l[8]=e=>n.modalFichaCliente=!1),ref:"salirBoton"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Salir ")])),_:1},512)])),_:1})])),_:1},8,["modelValue"])}var T={name:"ModalFichaClienteComponent",props:["callback"],components:{MDBBtn:M.$v,MDBInput:M.u2,MDBModal:M.j3,MDBModalBody:M.Yz,MDBModalFooter:M.ab,MDBModalHeader:M.ol},setup(e,l){const a=(0,_.iH)(!1),t=e=>{n.value="",i.value="",s.value="",d.value="",u.value="",r.value="",c.value="",a.value=!0};l.expose({abrirModal:t});const n=(0,_.iH)(""),i=(0,_.iH)(""),s=(0,_.iH)(""),d=(0,_.iH)(""),u=(0,_.iH)(""),r=(0,_.iH)(""),c=(0,_.iH)("0"),m=((0,_.iH)(null),(0,_.iH)(null)),p=(0,o.f3)("cambiosCliente"),v=()=>{""!=n.value?isNaN(Number(c.value))?g().fire({title:"Vaya...",text:"El descuento tiene que ser un número",icon:"error",confirmButtonText:"Aceptar"}):k.Z.post("clientes/crearNuevoCliente",{nombre:n.value,telefono:i.value,email:s.value,direccion:d.value,tarjetaCliente:u.value,nif:r.value,descuento:c.value}).then((()=>{g().fire({title:"Cliente creado",icon:"success",confirmButtonText:"Aceptar"}),a.value=!1})):g().fire({title:"Vaya...",text:"El campo de nombre y de tarjeta son obligatorios",icon:"error",confirmButtonText:"Aceptar"})};return{modalFichaCliente:a,guardarCliente:v,nombre:n,telefono:i,email:s,direccion:d,tarjeta:u,nif:r,descuento:c,salirBoton:m,cambiosCliente:p}}},U=a(40089);const W=(0,U.Z)(T,[["render",H]]);var z=W,j=a(61562),N={name:"ModalClientesComponent",components:{MDBModal:M.j3,MDBModalBody:M.Yz,MDBBtn:M.$v,ModalNuevoCliente:z,MDBIcon:M.vm,MDBBadge:M.m_,KeyBoardComponentVue:j.Z},setup(e,l){const a=(0,D.oR)(),t=(0,_.iH)(!1),n=(0,_.iH)(0),i=(0,_.iH)(null),s=(0,_.iH)(""),d=(0,_.iH)(),u=(0,_.iH)(null),r=(0,_.iH)(!0),c=(0,_.iH)(!0),m=(0,_.iH)(!0),p=(0,o.f3)("actualizarPuntos"),v=(0,o.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),b=(0,o.Fl)((()=>a.state.Trabajadores.indexActivo)),y=(0,o.Fl)((()=>v.value&&void 0!=b.value&&null!=b.value&&v.value[b.value]?v.value[b.value]:null)),f=(0,o.Fl)((()=>a.state.Cestas.arrayCestas));function B(){t.value=!0,w()}function C(){n.value++}function M(e){k.Z.post("clientes/getClienteById",{idCliente:e}).then((l=>{if(!l.data)throw Error("No se ha podido obtener la información del cliente. backend");V(e,l.data.nombre,l.data.albaran)})).catch((e=>{g().fire("Oops...",e.message,"error")}))}const w=async()=>{const e=await k.Z.post("clientes/getServiciosTienda");e.data?(r.value=!!e.data.includes("Glovo"),c.value=!!e.data.includes("TooGoodToGo"),m.value=!!e.data.includes("Uber")):(r.value=!1,c.value=!1,m.value=!1)},h=async e=>{const l=await k.Z.post("clientes/getClienteByServicio",{servicio:e});if(!l.data)throw Error("No se ha podido obtener la información del cliente. backend");M(l.data)};async function V(e,l,o){if(f.value)for(let n=0;n<f.value.length;n++)if(y.value.idCesta===f.value[n]._id){a.dispatch("Cestas/setClienteCesta",{index:n,idCliente:e,albaran:o,nombreCliente:l}),a.dispatch("EstadoDinamico/setVistaCliente",!0),p();const i=await k.Z.post("clientes/getClienteById",{idCliente:e});a.dispatch("Cestas/setDescuentoAction",Number(i.data.descuento)/100),t.value=!1;break}}function x(){k.Z.post("clientes/buscar",{busqueda:s.value}).then((e=>{d.value=e.data})).catch((e=>{g().fire("Oops...",e.message,"error")}))}let H;async function T(){try{i.value.abrirModal(s.value),H=setInterval((()=>{s.value=i.value.getValue()[0],i.value.getValue()[1]||clearInterval(H)}),100)}catch(e){console.log(e),H=void 0}}return(0,o.YP)(s,(()=>{x()})),l.expose({abrirModal:B,datoBorrar:n,selectCliente:V}),{test:C,datoBorrar:n,modalClientes:t,inputBusqueda:s,arrayClientes:d,selectCliente:V,buscar:x,keyboardRef:i,openKeyboard:T,modalNuevoClienteRef:u,clickClienteAtajo:M,activoGlovo:r,activoToGo:c,activoUber:m,clickDelivery:h}}};const F=(0,U.Z)(N,[["render",C],["__scopeId","data-v-22b72710"]]);var I=F}}]);
//# sourceMappingURL=131.1065c077.js.map