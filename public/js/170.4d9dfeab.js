"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[170],{48118:function(a,e,t){t.d(e,{Z:function(){return C}});var o=t(73396),n=t(87139);const l={class:"btn-group"},d={class:"btn-group"},u={class:"btn-group"},s={class:"btn-group"},c=["disabled"],i={class:"btn-group"};function r(a,e,t,r,p,b){return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["btn-group-vertical mt-1",{disabled:t.disabled}])},[(0,o._)("div",l,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[0]||(e[0]=a=>r.addTecla("1"))}," 1 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[1]||(e[1]=a=>r.addTecla("2"))}," 2 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[2]||(e[2]=a=>r.addTecla("3"))}," 3 ")]),(0,o._)("div",d,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[3]||(e[3]=a=>r.addTecla("4"))}," 4 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[4]||(e[4]=a=>r.addTecla("5"))}," 5 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[5]||(e[5]=a=>r.addTecla("6"))}," 6 ")]),(0,o._)("div",u,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[6]||(e[6]=a=>r.addTecla("7"))}," 7 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[7]||(e[7]=a=>r.addTecla("8"))}," 8 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[8]||(e[8]=a=>r.addTecla("9"))}," 9 ")]),(0,o._)("div",s,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[9]||(e[9]=a=>r.deleteTecla())}," < "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[10]||(e[10]=a=>r.addTecla("0"))}," 0 "),(0,o._)("button",{disabled:t.disabledComa,type:"button",class:"btn btn-outline-secondary botonNumpad",onClick:e[11]||(e[11]=a=>r.addTecla("."))}," , ",8,c)]),(0,o._)("div",i,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary botonComa",onClick:e[12]||(e[12]=a=>r.okValue(Number(r.cantidad)))}," OK ")])],2)}t(42492);var p=t(32066),b=t(25994),m=t(44870);const v=(0,p.io)("http://"+b.Z.state.TocGameURL+":5051");var f={props:{useBalanza:{type:Boolean,default:!1},max3EntersDigits:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledComa:{type:Boolean,default:!1}},name:"NumpadComponent",setup(a,{expose:e,emit:t}){const n=(0,m.iH)("0"),l=(0,o.f3)("okValue"),d=(0,m.iH)("5.5rem"),u=(0,m.iH)("5.5rem");(0,o.Fl)((()=>b.Z.state.Weight.lastWeight));function s(){t("activarShake")}function c(e){if(a.max3EntersDigits){let[a,t]=n.value.split("."),o=n.value.includes(".");if(a.length>=3&&!o&&"."!=e)return s();if(t&&t.length>=2)return s();if("."===e&&n.value.includes("."))return s()}"."===e&&n.value.includes(".")||(n.value+=e,"0"==n.value[0]&&(n.value=n.value.slice(1)),t("setValue",n.value))}function i(){n.value=n.value.slice(0,-1),""===n.value&&(n.value="0")}function r(a){n.value=Number(a).toString(),t("setValue",n.value)}return v.on("setBalanzaValue",(e=>{e&&a.useBalanza&&r(e)})),e({cantidad:n,setValor:r}),(0,o.bv)((async()=>{a.useBalanza&&r((await(0,o.Fl)((()=>b.Z.state.Weight.lastWeight))).value)})),{okValue:l,cantidad:n,addTecla:c,deleteTecla:i,setValor:r,anchoTecla:d,altoTecla:u}}},y=t(40089);const _=(0,y.Z)(f,[["render",r],["__scopeId","data-v-7dce7ef7"]]);var C=_},63083:function(a,e,t){t.r(e),t.d(e,{default:function(){return V}});var o=t(73396),n=t(87139),l=t(49242);const d={class:"col-md-4 colJuntitas espacios2"},u={class:"input-group input-group-lg"},s={value:"Entrega Diària",selected:""},c={value:"COMPRAS DE MERCANCIAS"},i={value:"TRANSPORTE"},r={value:"OTROS"},p={key:0,class:"input-group input-group-lg"},b={class:"col-md-5 colJuntitas"},m={class:"col-12 d-flex justify-content-between"},v={class:"col-5"},f={class:"col-4"},y={class:"col-3"},_={class:"w-100"},C={class:"concepto"},g={class:"col-md-3 m-auto"};function w(a,e,t,w,T,k){const B=(0,o.up)("MDBCardHeader"),h=(0,o.up)("MDBCardBody"),D=(0,o.up)("MDBBtn"),R=(0,o.up)("MDBCardFooter"),S=(0,o.up)("MDBCard"),N=(0,o.up)("MDBTable"),z=(0,o.up)("NumpadComponent"),M=(0,o.up)("KeyBoardComponent");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",d,[(0,o.Wm)(S,{text:"center",class:"sizeSalida m-auto mt-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("salida_de_dinero","Salida de dinero")),1)])),_:1}),w.numpadRef&&w.numpadRef.cantidad?((0,o.wg)(),(0,o.j4)(h,{key:0},{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>w.numpadRef.cantidad=a),type:"text",class:"form-control",placeholder:"Introduce la cantidad",disabled:""},null,512),[[l.nr,w.numpadRef.cantidad]])]),(0,o.wy)((0,o._)("select",{class:"form-select form-select-lg mb-3 mt-2","aria-label":".form-select-lg example","onUpdate:modelValue":e[1]||(e[1]=a=>w.concepto=a)},[(0,o._)("option",s,(0,n.zw)(a.$t("entrega_diaria","ENTREGA DIARIA")),1),(0,o._)("option",c,(0,n.zw)(a.$t("compras_de_mercancias","COMPRAS DE MERCANCIAS")),1),(0,o._)("option",i,(0,n.zw)(a.$t("transporte","TRANSPORTE")),1),(0,o._)("option",r,(0,n.zw)(a.$t("otros","OTROS")),1)],512),[[l.bM,w.concepto]]),"OTROS"===w.concepto?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>w.otrosConcepto=a),type:"text",class:"form-control",placeholder:"Introduce el concepto",readonly:"",onClick:e[3]||(e[3]=a=>w.openKeyboard())},null,512),[[l.nr,w.otrosConcepto]])])):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(R,{class:"text-muted text-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{color:"success",size:"lg",onClick:e[4]||(e[4]=a=>w.confirmarSalida())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("confirmar_salida","Confirmar salida")),1)])),_:1})])),_:1})])),_:1})]),(0,o._)("div",b,[(0,o.Wm)(S,{class:"sizeCardListaSalida m-auto mt-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{style:{"text-align":"center"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("listado_de_salidas","Listado de salidas")),1)])),_:1}),(0,o.Wm)(h,{class:"sizeCardBody"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{class:"sizeCardBodyListaSalida"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",m,[(0,o._)("th",v,(0,n.zw)(a.$t("hora","Hora")),1),(0,o._)("th",f,(0,n.zw)(a.$t("concepto","Concepto")),1),(0,o._)("th",y,(0,n.zw)(a.$t("total","Total")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(w.listaSalidas,((a,e)=>((0,o.wg)(),(0,o.iD)("tr",_,[(0,o._)("td",null,(0,n.zw)(w.getTiempo(a._id)),1),(0,o._)("td",C,(0,n.zw)(a.concepto),1),(0,o._)("td",null,(0,n.zw)(a.valor?.toFixed(2))+" €",1)])))),256))])])),_:1})])),_:1})])),_:1})]),(0,o._)("div",g,[(0,o.Wm)(z,{ref:"numpadRef"},null,512)]),(0,o.Wm)(M,{ref:"keyboardRef"},null,512)],64)}var T=t(91076),k=t(74313),B=t(42492),h=t.n(B),D=t(44870),R=t(20065),S=t(48118),N=t(36797),z=t.n(N),M=t(22871),O={name:"SalidaComponent",components:{MDBCard:k.Yl,MDBCardHeader:k.uX,MDBCardBody:k.H7,NumpadComponent:S.Z,MDBBtn:k.$v,MDBCardFooter:k.Rw,MDBTable:k.re,KeyBoardComponent:M.Z},setup(){const a=(0,R.oR)(),e=(0,o.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),t=(0,o.Fl)((()=>a.state.Trabajadores.indexActivo)),n=(0,o.Fl)((()=>e.value&&null!=t.value&&void 0!=t.value&&e.value[t.value]?e.value[t.value]:null)),l=(0,D.iH)(null),d=(0,D.iH)(""),u=(0,D.iH)("Entrega Diària"),s=(0,D.iH)([]),c=(0,D.iH)(null);function i(a){const e=new Date(a);return z()(e).format("HH:mm:ss DD/MM/YYYY")}async function r(){let a;Number(l.value.cantidad)>=200&&(a=await h().fire({title:"¿Estás seguro?",text:"Se va a realizar una salida de dinero superior a 200€",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})),Number(l.value.cantidad)>=200&&!a.isConfirmed||("OTROS"===u.value&&0===d.value.length&&(d.value="OTROS"),T.Z.post("movimientos/nuevoMovimiento",{cantidad:Number(l.value.cantidad),concepto:"OTROS"===u.value?d.value:u.value,idTrabajador:n.value._id,tipo:"SALIDA"}).then((a=>{if(!a.data)throw Error("No se ha podido realizar la salida de dinero");l.value.setValor("0"),l.value.cantidad="0",h().fire("Perfecto","Salida de dinero realizada correctamente","success"),p()})).catch((a=>{h().fire("Oops...",a.message,"error")})))}function p(){T.Z.get("movimientos/getSalidasIntervalo").then((a=>{void 0!=a.data&&null!=a.data&&(s.value=a.data.reverse())})).catch((a=>{h().fire("Oops...","Error al mostrar lista","error")}))}let b;async function m(){try{c.value.abrirModal(d.value),b=setInterval((()=>{const a=c.value.getValue()[0];a!==d.value&&(d.value=a),c.value.getValue()[1]||clearInterval(b)}),100)}catch(a){console.log(a),b=void 0}}return(0,o.bv)((()=>{p()})),(0,o.JJ)("okValue",r),{confirmarSalida:r,numpadRef:l,concepto:u,otrosConcepto:d,listaSalidas:s,getTiempo:i,openKeyboard:m,keyboardRef:c}}},H=t(40089);const E=(0,H.Z)(O,[["render",w],["__scopeId","data-v-6f60e108"]]);var V=E}}]);
//# sourceMappingURL=170.4d9dfeab.js.map