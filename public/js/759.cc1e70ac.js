"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[759],{61562:function(a,e,o){o.d(e,{Z:function(){return p}});var t=o(73396),l=o(87139);const r=["onClick"],n={class:"botonTecladoSpaceDiv"};function s(a,e,o,s,d,i){const u=(0,t.up)("MDBInput"),c=(0,t.up)("MDBModalHeader"),m=(0,t.up)("MDBModalBody"),p=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.j4)(p,{frame:"",position:"bottom",id:"keyBoardModal",tabindex:"-1",labelledby:"keyBoardModal",modelValue:s.keyBoardModal,"onUpdate:modelValue":e[4]||(e[4]=a=>s.keyBoardModal=a)},{default:(0,t.w5)((()=>[s.showInput?((0,t.wg)(),(0,t.j4)(c,{key:0},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{width:"80rem !important"},label:"Texto introducido",modelValue:s.text,"onUpdate:modelValue":e[0]||(e[0]=a=>s.text=a)},null,8,["modelValue"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(m,{class:"mainDiv"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.chars.length,((a,e)=>((0,t.wg)(),(0,t.iD)("div",{key:e},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.chars[a-1],((a,e)=>((0,t.wg)(),(0,t.iD)("div",{class:"btn-group-vertical mt-1 divTecla",key:e},[(0,t._)("button",{type:"button",style:(0,l.j5)([{"text-transform":"none"},s.keyStyle(a)]),class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e=>s.processTecla(a)},(0,l.zw)(a),13,r)])))),128))])))),128)),(0,t._)("div",n,[(0,t._)("button",{style:(0,l.j5)([{"font-size":"1.8rem"},s.keyStyle("âœŽ")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e[1]||(e[1]=a=>s.processTecla("âœŽ"))}," âœŽ ",4),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonTecladoSpace",onClick:e[2]||(e[2]=a=>s.processTecla(" "))}," â£ "),(0,t._)("button",{style:(0,l.j5)([{"font-size":"1.8rem"},s.keyStyle("#")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:e[3]||(e[3]=a=>s.processTecla("#"))}," â…£ ",4)])])),_:1})])),_:1},8,["modelValue"])}var d=o(44870),i=o(74313),u={name:"KeyBoardComponent",components:{MDBIcon:i.vm,MDBModalBody:i.Yz,MDBModal:i.j3,MDBBtn:i.$v,MDBModalHeader:i.ol,MDBModalTitle:i.wo,MDBInput:i.u2,MDBModalFooter:i.ab},props:{value:String,text:String},setup(a,{expose:e}){const o=(0,d.iH)(a.value||""),l=(0,d.iH)(!1),r=(0,d.iH)(!1),n=(0,d.iH)(!1);let s=!1;const i=(0,d.iH)(!1),u=[["q","w","e","r","t","y","u","i","o","p","â†"],["a","s","d","f","g","h","j","k","l","Ã±","â†µ"],["z","x","c","v","b","n","m",",",".","-","â‡ª"]],c=(0,d.iH)([]);function m(a){switch(a){case"â†":M();break;case"â†µ":l.value=!1;break;case"â‡ª":s=!s,o.value.length>0&&(r.value=!r.value),b();break;case"#":n.value=!n.value,b();break;case"âœŽ":i.value=!i.value;break;default:f(a);break}}function p(a){let e=o.value.length<=0&&!s||r.value,t="background-color: #606060 !important; color: white !important;";return n.value&&"#"==a||i.value&&"âœŽ"==a||"â‡ª"==a&&e?t:e?"text-transform: uppercase":"text-transform: none;"}function f(a){let e=o.value.length<=0&&!s||r.value;s=!1,e&&(a=a.toUpperCase()),o.value+=a}function M(){o.value.length>0&&(o.value=o.value.slice(0,-1))}function b(){let a=u;const e=["Ã¡","Ã©","Ã­","Ã³","Ãº","Ã¼","Â¡","Â¿"];if(n.value){let e=[["1","2","3","4","5","6","7","8","9","0","Ã§"]];e=e.concat(u),a=e}c.value=a.map((a=>a.map((a=>e.includes(a)?[a,a.toUpperCase()]:a))))}function v(a=""){void 0===o.value&&(o.value=""),o.value=a,l.value=!0}function w(){return[o.value,l.value]}return e({getValue:w,abrirModal:v}),(0,t.bv)((()=>{b()})),{text:o,addTecla:f,deleteTecla:M,keyBoardModal:l,processTecla:m,upperCase:r,keyStyle:p,buildKeyboard:b,abrirModal:v,showInput:i,chars:c}}},c=o(40089);const m=(0,c.Z)(u,[["render",s],["__scopeId","data-v-c19133e2"]]);var p=m},7759:function(a,e,o){o.r(e),o.d(e,{default:function(){return Z}});var t=o(73396),l=o(87139);const r={class:"row mt-2"},n={class:"textoNombre d-inline-block text-truncate"};function s(a,e,o,s,d,i){const u=(0,t.up)("MDBCardTitle"),c=(0,t.up)("MDBIcon"),m=(0,t.up)("MDBCardBody"),p=(0,t.up)("MDBCard"),f=(0,t.up)("MDBModalTitle"),M=(0,t.up)("MDBModalHeader"),b=(0,t.up)("MDBBtn"),v=(0,t.up)("MDBListGroupItem"),w=(0,t.up)("MDBListGroup"),B=(0,t.up)("MDBModalBody"),h=(0,t.up)("MDBModal"),y=(0,t.up)("ModalLeerQR"),_=(0,t.up)("FichajesModal"),g=(0,t.up)("InformesCajaComponent"),D=(0,t.Q2)("mdb-infinite-scroll");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",r,[(0,t.Wm)(p,{onClick:e[0]||(e[0]=a=>s.modalFichajes.abrirModal()),class:"estiloCard ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("iniciar_turno","Iniciar turno")),1)])),_:1}),(0,t.Wm)(c,{class:"mt-3",icon:"play",iconStyle:"fas",size:"5x"})])),_:1})])),_:1}),(0,t.Wm)(p,{onClick:e[1]||(e[1]=a=>s.descansosModal=!s.descansosModal),class:"estiloCard ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("inPause","GestiÃ³n de descansos")),1)])),_:1}),(0,t.Wm)(c,{class:"mt-3",icon:"mug-hot",iconStyle:"fas",size:"5x"})])),_:1})])),_:1}),(0,t.Wm)(p,{onClick:e[2]||(e[2]=a=>s.preguntarFinalizarTurno()),class:"estiloCard ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("finalizar_turno","Finalizar turno")),1)])),_:1}),(0,t.Wm)(c,{class:"mt-3",icon:"stop",iconStyle:"fas",size:"5x"})])),_:1})])),_:1}),s.esFac_Tena?((0,t.wg)(),(0,t.j4)(p,{key:0,onClick:e[3]||(e[3]=a=>s.ModalLeerQRRef.abrirModal()),class:"estiloCardQR ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("iframe_iterum","Leer QR")),1)])),_:1}),(0,t.Wm)(c,{class:"mt-3",icon:"qrcode",iconStyle:"fas",size:"5x"})])),_:1})])),_:1})):(0,t.kq)("",!0),s.verVentas?((0,t.wg)(),(0,t.j4)(p,{key:1,onClick:e[4]||(e[4]=a=>s.ModalVentasRef.abrirModal()),class:"estiloCardVentas ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("estado_ventas","Estado Ventas")),1)])),_:1}),(0,t.Wm)(c,{class:"mt-3",icon:"book",iconStyle:"fas",size:"5x"})])),_:1})])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(p,{onClick:e[5]||(e[5]=a=>s.apagar_equipo()),class:"estiloCardApagar ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("apagar_equipo","Apagar equipo")),1)])),_:1}),(0,t.Wm)(c,{class:"mt-3",icon:"power-off",iconStyle:"fas",size:"5x"})])),_:1})])),_:1}),s.trabajadorActivo?((0,t.wg)(),(0,t.j4)(p,{key:2,onClick:e[6]||(e[6]=a=>s.activarConsumoPersonal()),class:"estiloCardConsumo ms-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("consumo_personal","Consumo personal")),1)])),_:1}),(0,t.Wm)(c,{class:"mt-3",icon:"carrot",iconStyle:"fas",size:"5x"})])),_:1})])),_:1})):(0,t.kq)("",!0)]),(0,t.Wm)(h,{id:"descansosModal",tabindex:"-1",labelledby:"descansosModal",modelValue:s.descansosModal,"onUpdate:modelValue":e[7]||(e[7]=a=>s.descansosModal=a),staticBackdrop:!0,size:"lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(M,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Uk)("GestiÃ³n de descansos")])),_:1})])),_:1}),(0,t.Wm)(B,null,{default:(0,t.w5)((()=>[s.arrayTrabajadores?.length>0||s.arrayTrabajadoresDescanso?.length>0?(0,t.wy)(((0,t.wg)(),(0,t.j4)(w,{key:0,class:"container",style:{"max-height":"461px","overflow-y":"scroll"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.arrayTrabajadoresDescanso.concat(s.arrayTrabajadores),((e,o)=>((0,t.wg)(),(0,t.j4)(v,{key:a.i,style:{"justify-content":"space-between"},class:"d-flex align-items-center"},{default:(0,t.w5)((()=>[(0,t._)("td",null,[(0,t.Wm)(c,{icon:e.descansando?"bed":"user",size:"2x",class:"me-4"},null,8,["icon"]),(0,t._)("span",n,(0,l.zw)(e.nombre),1)]),(0,t._)("td",null,[(0,t.Wm)(b,{class:"textoFamilia d-inline-block text-truncate text-dark",rounded:"",onClick:a=>e.descansando?s.preguntarFinalDescanso(e._id):s.iniciarDescanso(e._id),color:e.descansando?"info":"secondary"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.descansando?"Finalizar descanso":"Iniciar descanso"),1)])),_:2},1032,["onClick","color"])])])),_:2},1024)))),128))])),_:1})),[[D,a.infiniteScroll]]):(0,t.kq)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(y,{ref:"ModalLeerQRRef"},null,512),(0,t.Wm)(_,{ref:"modalFichajes"},null,512),(0,t.Wm)(g,{ref:"ModalVentasRef"},null,512)],64)}o(57658);var d=o(74834),i=o(61562),u=o(44161);const c=["src"];function m(a,e,o,r,n,s){const d=(0,t.up)("MDBBtn"),i=(0,t.up)("MDBModalFooter"),u=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.j4)(u,{id:"ModalLeerQR",tabindex:"-1",labelledby:"ModalLeerQRLabel",modelValue:r.ModalLeerQR,"onUpdate:modelValue":e[1]||(e[1]=a=>r.ModalLeerQR=a),fullscreen:""},{default:(0,t.w5)((()=>[(0,t._)("iframe",{src:r.url,style:{position:"absolute",height:"90%",width:"90%",border:"none"}},null,8,c),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,{color:"danger",size:"lg",onClick:e[0]||(e[0]=a=>r.ModalLeerQR=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("cerrar","Cerrar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}var p=o(44870),f=o(74313),M={name:"ModalLeerQRComponent",components:{MDBModal:f.j3,MDBModalFooter:f.ab,MDBBtn:f.$v},setup(a,{expose:e}){const o=(0,p.iH)(!1),t=(0,p.iH)("");function l(a){r(),o.value=!0}function r(){t.value="https://silema.web.app/validarQR-trabajador"}return e({abrirModal:l}),{ModalLeerQR:o,abrirModal:l,url:t}}},b=o(40089);const v=(0,b.Z)(M,[["render",m]]);var w=v,B=o(42492),h=o.n(B),y=o(20065),_=o(49242);const g={class:"row"},D={key:0,class:"row mt-2"},C={class:"table table-striped"},k={class:"textoNombre d-inline-block text-truncate"},j={key:1,class:"row"},x={class:"sinResultados position-relative"},T={class:"textoSinResultados position-absolute top-50 start-50 translate-middle"};function W(a,e,o,r,n,s){const d=(0,t.up)("MDBModalTitle"),i=(0,t.up)("MDBModalHeader"),u=(0,t.up)("MDBBtn"),c=(0,t.up)("MDBModalBody"),m=(0,t.up)("MDBModalFooter"),p=(0,t.up)("MDBModal"),f=(0,t.up)("KeyBoardComponent");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(p,{id:"modalFichajes",tabindex:"-1",labelledby:"staticBackdropLabel",modelValue:r.modalFichajes,"onUpdate:modelValue":e[3]||(e[3]=a=>r.modalFichajes=a),size:"xl",modalFichajes:""},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,{id:"staticBackdropLabel"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("fichar","Fichar")),1)])),_:1})])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t.wy)((0,t._)("input",{class:"form-control inputBusqueda w-100",type:"text",placeholder:"Buscar por nombre","aria-label":".form-control-lg example",readonly:"",onClick:e[0]||(e[0]=a=>r.openKeyboard()),"onUpdate:modelValue":e[1]||(e[1]=a=>r.inputBusqueda=a)},null,512),[[_.nr,r.inputBusqueda]])]),r.arrayTrabajadores&&r.arrayTrabajadores.length>0?((0,t.wg)(),(0,t.iD)("div",D,[(0,t._)("table",C,[(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.arrayTrabajadores,((e,o)=>((0,t.wg)(),(0,t.iD)("tr",{key:o},[(0,t._)("td",null,[(0,t._)("span",k,(0,l.zw)(e.nombre),1)]),(0,t._)("td",null,[(0,t.Wm)(u,{color:"primary",size:"lg",onClick:a=>r.fichar(e._id),class:"w-100",style:{height:"3.85rem","font-size":"1.5rem"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("fichar","Fichar")),1)])),_:2},1032,["onClick"])])])))),128))])])])):((0,t.wg)(),(0,t.iD)("div",j,[(0,t._)("div",x,[(0,t._)("span",T,(0,l.zw)(a.$t("sin_resultados","Sin resultados")),1)])]))])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{color:"primary",size:"lg",onClick:e[2]||(e[2]=a=>r.modalFichajes=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("cerrar","Cerrar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(f,{ref:"keyboardRef"},null,512)],64)}var z={name:"FichajesModal",components:{MDBModal:f.j3,MDBModalHeader:f.ol,MDBModalTitle:f.wo,MDBModalBody:f.Yz,MDBModalFooter:f.ab,MDBBtn:f.$v,KeyBoardComponent:i.Z},setup(){const a=(0,p.iH)(null),e=(0,p.iH)([]),o=(0,p.iH)(""),l=(0,p.iH)(""),r=(0,p.iH)(null);function n(){a.value=!0}function s(){u.Z.post("trabajadores/buscar",{busqueda:o.value}).then((a=>{e.value=a.data})).catch((a=>{h().fire("Oops...",a.message,"error")}))}function i(e){u.Z.post("trabajadores/fichar",{idTrabajador:e}).then((e=>{if(!e.data)throw Error("Error, no se ha podido fichar");d.W.cargarTrabajadoresFichados(),a.value=!1})).catch((a=>{h().fire("Oops...",a.message,"error")}))}let c;async function m(){try{r.value.abrirModal(o.value),c=setInterval((()=>{o.value=r.value.getValue()[0],r.value.getValue()[1]||clearInterval(c)}),100)}catch(a){c=void 0}}return(0,t.YP)(o,(()=>{s()})),{modalFichajes:a,abrirModal:n,arrayTrabajadores:e,inputBusqueda:o,fichar:i,inputText:l,keyboardRef:r,openKeyboard:m}}};const F=(0,b.Z)(z,[["render",W],["__scopeId","data-v-41124af1"]]);var H=F,V=o(54455);const R={class:"caja"},L={class:"result"};function S(a,e,o,r,n,s){const d=(0,t.up)("MDBModalHeader"),i=(0,t.up)("MDBBtn"),u=(0,t.up)("MDBModalBody"),c=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.j4)(c,{id:"modalVentas",tabindex:"-1",labelledby:"tituloModalEstadoVentas",modelValue:r.modalVentas,"onUpdate:modelValue":e[1]||(e[1]=a=>r.modalVentas=a),staticBackdrop:"",size:"lg"},{default:(0,t.w5)((()=>[(0,t._)("div",R,[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t._)("h2",null,(0,l.zw)(a.$t("estado_de_la_caja","Estado de la caja")),1)])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{color:"primary",onClick:e[0]||(e[0]=a=>r.toggleCaja())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(a.$t("consultar_estado_de_la_caja","Consultar estado de la caja")),1)])),_:1}),(0,t._)("div",L,(0,l.zw)(a.$t("estado","estado"))+": "+(0,l.zw)(r.emoji),1)])),_:1})])])),_:1},8,["modelValue"])}var U={name:"InformesCajaComponent",components:{MDBBtn:f.$v,MDBCard:f.Yl,MDBModal:f.j3,MDBModalBody:f.Yz,MDBModalHeader:f.ol},setup(a,{expose:e}){const o=(0,p.iH)(!1),l=(0,y.oR)(),r=(0,t.Fl)((()=>l.state.Caja.arrayVentas));let n=0;const s=()=>{m.value=c(),u.Z.post("/movimientos/getPred").then((a=>{m.value=f(a.data)}))};function d(a){return Math.floor(Math.random()*a)}function i(){o.value=!0}function c(){const a=["Consultando con jesus...","Preguntando a los astros...","Mirando en la bola de cristal...","Leyendo el tarot...","Mirando en la barra del bar...","Consultando con el oraculo...","Leyendo el horoscopo...","Mirando en el cafe turco...","Consultando con el espiritu santo...","Lo siento profe no estudie..."];return a[d(a.length)]}e({abrirModal:i});const m=(0,p.iH)(c()),f=(a=[])=>{if(0==a.length||!a)return"No hay datos â“";const e=Number(a[0]?.Import),o=20*e/100,t=50*e/100,l=e,s=125*e/100;return n=0,r.value.forEach((a=>{n+=Number(a.total)})),n<=o?"ðŸ’©":n>o&&n<=t?"ðŸ˜":n>t&&n<=l?"ðŸ˜€":n>l&&n<=s?"ðŸ˜":"ðŸ¤‘"};return s(),{toggleCaja:s,emoji:m,modalVentas:o}}};const I=(0,b.Z)(U,[["render",S],["__scopeId","data-v-ee02c22a"]]);var $=I,q={name:"fichajesView",components:{MDBIcon:f.vm,FichajesModal:H,MDBCard:f.Yl,MDBCardBody:f.H7,MDBCardTitle:f.QM,MDBBadge:f.m_,MDBBtn:f.$v,ModalLeerQR:w,MDBModal:f.j3,MDBListGroupItem:f.FQ,MDBListGroup:f.d8,MDBModalBody:f.Yz,MDBModalHeader:f.ol,MDBModalTitle:f.wo,InformesCajaComponent:$,KeyBoardComponent:i.Z},setup(){const a=(0,y.oR)(),e=a.getters["Configuracion/parametros"],o=(0,p.iH)(null),l=(0,p.iH)(!1),r=(0,p.iH)(null),n=(0,p.iH)([]),s=(0,p.iH)(null),i=(0,p.iH)(!1),c=(0,p.iH)(null),m=(0,p.iH)(!1),f=(0,t.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),M=(0,t.Fl)((()=>a.state.Trabajadores.indexActivo)),b=(0,t.Fl)((()=>f.value&&void 0!=M.value&&null!=M.value&&f.value[M.value]?f.value[M.value]:null)),v=(0,t.Fl)((()=>a.state.Cestas.arrayCestas)),w=(0,t.Fl)((()=>{if(v.value)for(let a=0;a<v.value.length;a++)if(v.value[a]._id==f.value[M.value].idCesta)return v.value[a];return null}));function B(a){s.value=a}function _(){s.value=null}function g(){u.Z.post("trabajadores/desfichar",{idTrabajador:b.value._id}).then((a=>{if(!a.data)throw Error("Error, no se ha podido registrar el fin de turno (backend)");d.W.cargarTrabajadoresFichados(),h().fire("OK","Fin de turno registrado correctamente","success")})).catch((a=>{h().fire("Oops...",a.message,"error")}))}function D(a){for(let e=0;e<n.value.length;e++)if(a===n.value[e]._id)return n.value[e];return null}function C(a){if(a){const e=D(a);e&&h().fire({title:"Por favor, confirma el descanso para: ",html:`${e.nombre}`,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Confirmar"}).then((e=>{e.isConfirmed&&T(a)}))}}function k(){h().fire({title:"Â¿Desea realmente apagar el equipo? ",html:"Â¡Esta funcion apagarÃ¡ instantaneamente su equipo!",showCancelButton:!0,confirmButtonText:"Apagar",cancelButtonText:"Cancelar",confirmButtonColor:"red",cancelButtonColor:"green",iconColor:"red",icon:"warning",backdrop:"rgba(255,0,0,0.4)"}).then((a=>{a.isConfirmed&&u.Z.post("controlTpv/ApagarOrdenador",{}).then((a=>{a.data?h().fire("Â¡Apagando!","Su equipo se apagarÃ¡ en unos instantes...","success"):h().fire("Â¡No hemos podido apagar el equipo!","Si el error se mantiene, pruebe a forzar un apagado!","error")})).catch((a=>{h().fire("Â¡No hemos podido apagar el equipo!","Si el error se mantiene, pruebe a forzar un apagado!"+a,"error")}))}))}async function j(){if(v.value&&w.value)for(let e=0;e<v.value.length;e++)if(v.value[e]._id===w.value._id){await a.dispatch("Cestas/setModoCesta",{modo:"CONSUMO_PERSONAL",index:e}),V.Z.push("/main");break}}function x(){b.value&&h().fire({title:"Confirma. Fin de turno para: ",html:`${b.value.nombre}`,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Confirmar"}).then((a=>{a.isConfirmed&&g()}))}function T(a){u.Z.post("trabajadores/finDescanso",{idTrabajador:a}).then((a=>{if(!a.data)throw Error("Error, no se  ha podido iniciar el descanso");d.W.cargarTrabajadoresFichados(),_(),z(),h().fire("Descanso finalizado","","success")})).catch((a=>{h().fire("Oops...",a.message,"error")}))}function W(a){a?u.Z.post("trabajadores/inicioDescanso",{idTrabajador:a}).then((a=>{if(!a.data)throw Error("Error, no se ha podido iniciar el descanso");z(),d.W.cargarTrabajadoresFichados(),h().fire("OK","Descanso iniciado correctamente","success")})).catch((a=>{h().fire("Oops...",a.message,"error")})):h().fire("Importante....","Es necesario un trabajador activo para realizar esta acciÃ³n","warning")}function z(){u.Z.get("trabajadores/descansando").then((a=>{if(!a.data)throw Error("Error, no se han podido obtener los trabajadores en descanso");n.value=a.data})).catch((a=>{h().fire("Oops...",a.message,"error")}))}return(0,t.bv)((()=>{if(!e?.nombreEmpresa)return V.Z.push("/");z(),"tena"==e?.nombreEmpresa?.toLowerCase()&&(l.value=!0),u.Z.post("/parametros/getParametros").then((a=>{m.value="Si"===a.data?.params.verInformesVentas}))})),{modalFichajes:o,arrayTrabajadoresDescanso:n,arrayTrabajadores:f,idActivoDescanso:s,esFac_Tena:l,setActivo:B,trabajadorActivo:b,finDeTurno:g,iniciarDescanso:W,preguntarFinalDescanso:C,resetidActivoDescansando:_,preguntarFinalizarTurno:x,activarConsumoPersonal:j,descansosModal:i,apagar_equipo:k,ModalLeerQRRef:r,ModalVentasRef:c,verVentas:m}}};const E=(0,b.Z)(q,[["render",s],["__scopeId","data-v-651c6176"]]);var Z=E}}]);
//# sourceMappingURL=759.cc1e70ac.js.map