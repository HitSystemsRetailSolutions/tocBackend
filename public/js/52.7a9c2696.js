"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[52],{86619:function(e,a,l){l.d(a,{Z:function(){return g}});var t=l(73396),n=l(87139);const o={class:"btn-group"},i={class:"btn-group"},d={class:"btn-group"},u={class:"btn-group"},s={class:"btn-group"};function c(e,a,l,c,r,v){return(0,t.wg)(),(0,t.iD)("div",{class:(0,n.C_)(["btn-group-vertical mt-1",{disabled:l.disabled}])},[(0,t._)("div",o,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[0]||(a[0]=e=>c.addTecla("1"))}," 1 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[1]||(a[1]=e=>c.addTecla("2"))}," 2 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[2]||(a[2]=e=>c.addTecla("3"))}," 3 ")]),(0,t._)("div",i,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[3]||(a[3]=e=>c.addTecla("4"))}," 4 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[4]||(a[4]=e=>c.addTecla("5"))}," 5 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[5]||(a[5]=e=>c.addTecla("6"))}," 6 ")]),(0,t._)("div",d,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[6]||(a[6]=e=>c.addTecla("7"))}," 7 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[7]||(a[7]=e=>c.addTecla("8"))}," 8 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[8]||(a[8]=e=>c.addTecla("9"))}," 9 ")]),(0,t._)("div",u,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[9]||(a[9]=e=>c.deleteTecla())}," < "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[10]||(a[10]=e=>c.addTecla("0"))}," 0 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[11]||(a[11]=e=>c.okValue(Number(c.cantidad)))}," OK ")]),(0,t._)("div",s,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonComa",onClick:a[12]||(a[12]=e=>c.addTecla("."))}," , ")])],2)}l(42492);var r=l(32066),v=l(66592),m=l(44870);const p=(0,r.io)("http://"+v.Z.state.TocGameURL+":5051");var b={props:{skipBalanza:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},name:"NumpadComponent",setup(e,{expose:a}){const l=(0,m.iH)("0"),n=(0,t.f3)("okValue"),o=(0,m.iH)("5.5rem"),i=(0,m.iH)("5.5rem");(0,t.Fl)((()=>v.Z.state.Weight.lastWeight));function d(e){"."===e&&(l.value=l.value.replace(".","")),l.value+=e,"0"==l.value[0]&&(l.value=l.value.slice(1))}function u(){l.value=l.value.slice(0,-1),""===l.value&&(l.value="0")}function s(e){l.value=Number(e).toString()}return p.on("setBalanzaValue",(a=>{a&&!e.skipBalanza&&s(a)})),a({cantidad:l,setValor:s}),(0,t.bv)((async()=>{e.skipBalanza||s((await(0,t.Fl)((()=>v.Z.state.Weight.lastWeight))).value)})),{okValue:n,cantidad:l,addTecla:d,deleteTecla:u,setValor:s,anchoTecla:o,altoTecla:i}}},_=l(40089);const f=(0,_.Z)(b,[["render",c],["__scopeId","data-v-ae1efb7e"]]);var g=f},12052:function(e,a,l){l.r(a),l.d(a,{default:function(){return oe}});var t=l(73396),n=l(87139),o=l(49242);const i=e=>((0,t.dD)("data-v-c9321ce2"),e=e(),(0,t.Cn)(),e),d={class:"row p-2",style:{"text-align":"center"}},u=i((()=>(0,t._)("img",{src:"/img/1cts.png",width:"84",height:"84"},null,-1))),s=i((()=>(0,t._)("img",{src:"/img/2cts.png",width:"84",height:"84"},null,-1))),c=i((()=>(0,t._)("img",{src:"/img/5cts.png",width:"84",height:"84"},null,-1))),r=i((()=>(0,t._)("img",{src:"/img/10cts.png",width:"84",height:"84"},null,-1))),v=i((()=>(0,t._)("img",{src:"/img/20cts.png",width:"84",height:"84"},null,-1))),m=i((()=>(0,t._)("img",{src:"/img/50cts.png",width:"84",height:"84"},null,-1))),p=i((()=>(0,t._)("img",{src:"/img/uneuro.png",width:"84",height:"84"},null,-1))),b=i((()=>(0,t._)("img",{src:"/img/doseuros.png",width:"84",height:"84"},null,-1))),_={class:"row mx-auto mt-1"},f=["width"],g=i((()=>(0,t._)("br",null,null,-1))),w=["width"],C=i((()=>(0,t._)("br",null,null,-1))),y=["width"],z=i((()=>(0,t._)("br",null,null,-1))),h=["width"],k=i((()=>(0,t._)("br",null,null,-1))),B=["width"],D=i((()=>(0,t._)("br",null,null,-1))),T=["width"],x=i((()=>(0,t._)("br",null,null,-1))),A=["width"],M=i((()=>(0,t._)("br",null,null,-1))),j={class:"row"},H={class:"col-md-9"},N={key:0,style:{"font-size":"0.5rem",zoom:"0.6"},class:"spinner-border",role:"status"},$=i((()=>(0,t._)("span",{class:"visually-hidden"},"Loading...",-1))),P=[$],W={key:0},S={key:1},U={class:"d-flex"},Z={class:"col-md-3 text-end"},V={class:"row"},F={class:"col"},q={class:"input-group input-group-lg"},E={class:"input-group-text",id:"inputGroup-sizing-lg"},I={class:"row"},R={class:"col text-center"};function G(e,a,l,i,$,G){const O=(0,t.up)("MDBCardTitle"),L=(0,t.up)("MDBIcon"),Y=(0,t.up)("MDBPopover"),J=(0,t.up)("MDBCardText"),K=(0,t.up)("MDBBtn"),Q=(0,t.up)("MDBCardBody"),X=(0,t.up)("MDBCard"),ee=(0,t.up)("NumpadComponent"),ae=(0,t.up)("MDBModalTitle"),le=(0,t.up)("MDBModalHeader"),te=(0,t.up)("MDBModalBody"),ne=(0,t.up)("MDBModalFooter"),oe=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",d,[(0,t._)("div",{class:"col",onClick:a[0]||(a[0]=e=>i.setActivo(0))},[u,(0,t._)("label",{class:(0,n.C_)([{seleccionado:0==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[0])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[1]||(a[1]=e=>i.setActivo(1))},[s,(0,t._)("label",{class:(0,n.C_)([{seleccionado:1==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[1])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[2]||(a[2]=e=>i.setActivo(2))},[c,(0,t._)("label",{class:(0,n.C_)([{seleccionado:2==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[2])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[3]||(a[3]=e=>i.setActivo(3))},[r,(0,t._)("label",{class:(0,n.C_)([{seleccionado:3==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[3])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[4]||(a[4]=e=>i.setActivo(4))},[v,(0,t._)("label",{class:(0,n.C_)([{seleccionado:4==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[4])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[5]||(a[5]=e=>i.setActivo(5))},[m,(0,t._)("label",{class:(0,n.C_)([{seleccionado:5==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[5])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[6]||(a[6]=e=>i.setActivo(6))},[p,(0,t._)("label",{class:(0,n.C_)([{seleccionado:6==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[6])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[7]||(a[7]=e=>i.setActivo(7))},[b,(0,t._)("label",{class:(0,n.C_)([{seleccionado:7==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[7])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)])]),(0,t._)("div",_,[(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[8]||(a[8]=e=>i.setActivo(8))},[(0,t._)("img",{src:"/img/5euros.png",width:i.sizeBilletes},null,8,f),(0,t.Uk)(),g,(0,t._)("label",{class:(0,n.C_)([{seleccionado:8==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[8])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[9]||(a[9]=e=>i.setActivo(9))},[(0,t._)("img",{src:"/img/10euros.png",width:i.sizeBilletes},null,8,w),C,(0,t._)("label",{class:(0,n.C_)([{seleccionado:9==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[9])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[10]||(a[10]=e=>i.setActivo(10))},[(0,t._)("img",{src:"/img/20euros.png",width:i.sizeBilletes},null,8,y),z,(0,t._)("label",{class:(0,n.C_)([{seleccionado:10==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[10])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[11]||(a[11]=e=>i.setActivo(11))},[(0,t._)("img",{src:"/img/50euros.png",width:i.sizeBilletes},null,8,h),k,(0,t._)("label",{class:(0,n.C_)([{seleccionado:11==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[11])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[12]||(a[12]=e=>i.setActivo(12))},[(0,t._)("img",{src:"/img/100euros.png",width:i.sizeBilletes},null,8,B),D,(0,t._)("label",{class:(0,n.C_)([{seleccionado:12==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[12])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[13]||(a[13]=e=>i.setActivo(13))},[(0,t._)("img",{src:"/img/200euros.png",width:i.sizeBilletes},null,8,T),x,(0,t._)("label",{class:(0,n.C_)([{seleccionado:13==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[13])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[14]||(a[14]=e=>i.setActivo(14))},[(0,t._)("img",{src:"/img/500euros.png",width:i.sizeBilletes},null,8,A),M,(0,t._)("label",{class:(0,n.C_)([{seleccionado:14==i.indexActivo},"unidadesSize"])},(0,n.zw)(i.infoDinero[14])+" "+(0,n.zw)(e.$t("unidades","unidades")),3)])]),(0,t._)("div",j,[(0,t._)("div",H,[(0,t.Wm)(X,{class:"sizeInfoCaja"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(O,{class:"estiloTituloInfo"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t("informacion_de_la_caja","Información de la caja")),1)])),_:1}),(0,t.Wm)(J,{class:"estiloInfoCaja sizeCajaInfo"},{default:(0,t.w5)((()=>[(0,t._)("p",null,[(0,t.Wm)(L,{icon:"money-bill"}),(0,t.Uk)("   "+(0,n.zw)(e.$t("total_contado","Total contado"))+": "+(0,n.zw)(i.total)+" € ",1)]),(0,t._)("p",{onMouseover:a[16]||(a[16]=e=>{i.popOverTotalPaytef=!0}),onMouseleave:a[17]||(a[17]=e=>i.popOverTotalPaytef=!1)},[(0,t.Wm)(L,{icon:"credit-card"}),(0,t.Uk)("   "+(0,n.zw)(e.$t("total_paytef","Total Datáfono "))+" : ",1),null==i.totalPaytef?((0,t.wg)(),(0,t.iD)("div",N,P)):(0,t.kq)("",!0),(0,t.Uk)(" "+(0,n.zw)(null==i.totalPaytef?"":i.totalPaytef.toFixed(2)+" €")+"  ",1),null!=i.totalPaytef?((0,t.wg)(),(0,t.j4)(L,{key:1,icon:i.isLanPaytef?"ethernet":"globe"},null,8,["icon"])):(0,t.kq)("",!0),(0,t.Wm)(Y,{modelValue:i.popOverTotalPaytef,"onUpdate:modelValue":a[15]||(a[15]=e=>i.popOverTotalPaytef=e),direction:"right"},{header:(0,t.w5)((()=>[(0,t.Uk)("Ultima conexión")])),body:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(i.hourPaytef),1)])),_:1},8,["modelValue"])],32),i.trabajadorActivo?((0,t.wg)(),(0,t.iD)("p",W,[(0,t.Wm)(L,{icon:"user"}),(0,t.Uk)("   "+(0,n.zw)(e.$t("dependienta_responsable","Dependienta responsable"))+": ",1),(0,t._)("i",null,(0,n.zw)(i.trabajadorActivo.nombre),1)])):(0,t.kq)("",!0),i.trabajadorActivo?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",S,[(0,t.Wm)(L,{icon:"user"}),(0,t._)("i",null,"   "+(0,n.zw)(e.$t("sin_dependienta_responsable","Sin dependienta responsable")),1)])),(0,t._)("div",{class:"d-flex",onClick:a[18]||(a[18]=e=>i.setCambioEmergencia())},[(0,t._)("p",null,[(0,t.Wm)(L,{icon:"box"}),(0,t.Uk)("   "),(0,t._)("span",{class:(0,n.C_)([{seleccionado:i.cambioEmActivo},"border border-2 rounded"])},(0,n.zw)(e.$t("cambio_de_emergencia","Cambio de emergencia"))+": "+(0,n.zw)(i.cambioEmergencia)+" €",3)])])])),_:1}),(0,t._)("div",U,[(0,t.Wm)(K,{color:"primary",class:"w-100",size:"lg",onClick:a[19]||(a[19]=e=>i.confirmarCierre()),disabled:i.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t("cerrar_caja","Cerrar caja")),1)])),_:1},8,["disabled"]),i.estadoTurno?((0,t.wg)(),(0,t.j4)(K,{key:0,onClick:a[20]||(a[20]=e=>i.cambioTurno()),color:"primary",class:"w-50",size:"lg",disabled:i.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t("anular_cambio_turno","Anular cambio turno")),1)])),_:1},8,["disabled"])):((0,t.wg)(),(0,t.j4)(K,{key:1,onClick:a[21]||(a[21]=e=>i.anularTurno()),color:"primary",class:"w-50",size:"lg",disabled:i.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t("cambio_turno","Cambio turno")),1)])),_:1},8,["disabled"]))])])),_:1})])),_:1})]),(0,t._)("div",Z,[(0,t.Wm)(ee,{ref:"numpadRef"},null,512)])]),(0,t.Wm)(oe,{id:"modalConfirmar",tabindex:"-1",labelledby:"modalConfirmarLabel",modelValue:i.modalConfirmar,"onUpdate:modelValue":a[25]||(a[25]=e=>i.modalConfirmar=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(le,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ae,{id:"modalConfirmarLabel"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t("confirmacion_de_cierre","Confirmación de cierre")),1)])),_:1})])),_:1}),(0,t.Wm)(te,null,{default:(0,t.w5)((()=>[(0,t._)("div",V,[(0,t._)("div",F,[(0,t._)("div",q,[(0,t._)("span",E,(0,n.zw)(e.$t("datafono_manual","Datáfono manual")),1),i.numpadRef2?(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",(0,t.dG)({key:0,type:"text",class:"form-control","onUpdate:modelValue":a[22]||(a[22]=e=>i.numpadRef2.cantidad=e)},(0,t.mx)(i.cargarTotal3G(),!0)),null,16)),[[o.nr,i.numpadRef2.cantidad]]):(0,t.kq)("",!0)])])]),(0,t._)("div",I,[(0,t._)("div",R,[(0,t.Wm)(ee,{skipBalanza:!0,ref:"numpadRef2"},null,512)])])])),_:1}),(0,t.Wm)(ne,null,{default:(0,t.w5)((()=>[(0,t.Wm)(K,{color:"secondary",onClick:a[23]||(a[23]=e=>i.modalConfirmar=!1),size:"lg"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t("cerrar","Cerrar")),1)])),_:1}),(0,t.Wm)(K,{color:"primary",size:"lg",onClick:a[24]||(a[24]=e=>i.cerrarCaja())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t("confirmar_cierre","Confirmar cierre")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}l(57658);var O=l(44870),L=l(86619),Y=l(74313),J=l(20065),K=l(42492),Q=l.n(K),X=l(91076),ee=l(22483),ae=l(74834),le={name:"CerrarCajaComponent",components:{NumpadComponent:L.Z,MDBCard:Y.Yl,MDBCardBody:Y.H7,MDBCardTitle:Y.QM,MDBCardText:Y.Pp,MDBPopover:Y.SW,MDBBtn:Y.$v,MDBCheckbox:Y.IH,MDBModal:Y.j3,MDBModalHeader:Y.ol,MDBModalTitle:Y.wo,MDBModalBody:Y.Yz,MDBModalFooter:Y.ab,MDBIcon:Y.vm,MDBLoading:Y.J$},setup(){const e=(0,O.iH)(0),a="140",l=(0,O.iH)(0),n=(0,O.iH)(!0),o=(0,O.iH)(null),i=(0,O.iH)(null),d=(0,J.oR)(),u=(0,O.iH)(null),s=(0,ee.tv)(),c=(0,O.iH)([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r=(0,O.iH)("Cerrar"),v=(0,O.iH)(null),m=(0,O.iH)(null),p=(0,O.iH)(0),b=(0,O.iH)(!1),_=(0,O.iH)(!1),f=(0,O.iH)(!1),g=(0,O.iH)(!1),w=((0,O.iH)(null),(0,O.iH)(null),(0,O.iH)(null),(0,t.Fl)((()=>d.state.Caja.arrayVentas)),(0,t.Fl)((()=>d.state.Trabajadores.arrayTrabajadores))),C=(0,t.Fl)((()=>d.state.Trabajadores.indexActivo)),y=(0,t.Fl)((()=>w.value&&null!=C.value&&void 0!=C.value&&w.value[C.value]?w.value[C.value]:null)),z=(0,t.Fl)((()=>d.state.BtnMenuPrincipal.botonesBloqueados)),h=(0,O.iH)(0),k=(0,O.iH)(0);let B=(0,O.iH)(0);const D=(0,O.iH)(!1),T=(0,O.iH)(!1);function x(a){_.value&&(_.value=!1),e.value=a,o.value.setValor(c.value[a])}function A(){e.value=null,_.value=!0,o.value.setValor(p.value)}const M=(0,t.Fl)((()=>{let e=0;return e+=.01*c.value[0],e+=.02*c.value[1],e+=.05*c.value[2],e+=.1*c.value[3],e+=.2*c.value[4],e+=.5*c.value[5],e+=1*c.value[6],e+=2*c.value[7],e+=5*c.value[8],e+=10*c.value[9],e+=20*c.value[10],e+=50*c.value[11],e+=100*c.value[12],e+=200*c.value[13],e+=500*c.value[14],e+=Number(p.value.toString()),e=Number(e.toFixed(2)),e}));function j(){const e=[{_id:"0.01",valor:.01*c.value[0],unidades:c.value[0]},{_id:"0.02",valor:.02*c.value[1],unidades:c.value[1]},{_id:"0.05",valor:.05*c.value[2],unidades:c.value[2]},{_id:"0.10",valor:.1*c.value[3],unidades:c.value[3]},{_id:"0.20",valor:.2*c.value[4],unidades:c.value[4]},{_id:"0.50",valor:.5*c.value[5],unidades:c.value[5]},{_id:"1",valor:1*c.value[6],unidades:c.value[6]},{_id:"2",valor:2*c.value[7],unidades:c.value[7]},{_id:"5",valor:5*c.value[8],unidades:c.value[8]},{_id:"10",valor:10*c.value[9],unidades:c.value[9]},{_id:"20",valor:20*c.value[10],unidades:c.value[10]},{_id:"50",valor:50*c.value[11],unidades:c.value[11]},{_id:"100",valor:100*c.value[12],unidades:c.value[12]},{_id:"200",valor:200*c.value[13],unidades:c.value[13]},{_id:"500",valor:500*c.value[14],unidades:c.value[14]}];return e}async function H(){if(null!=y.value&&void 0!=y.value)try{const e=await X.Z.post("caja/cerrarCaja",{total:M.value,detalleMonedas:j(),infoDinero:c.value,cantidad3G:Number(i.value.cantidad),cantidadPaytef:m.value,idDependienta:y.value._id,cambioEmergencia:Number(p.value.toString()),cantidad3GAutomatizado:k.value});if(!e.data)throw Error("No se ha podido cerrar la caja");d.dispatch("BtnMenuPrincipal/bloquearBotones"),Q().fire({backdrop:!1,title:"Caja cerrada correctamente",icon:"success",confirmButtonText:"Continuar"}).then((e=>{e.isConfirmed&&(d.dispatch("BtnMenuPrincipal/desbloquearBotones"),s.push("/abrirCaja"))}))}catch(e){Q().fire("Oops...",e.message,"error")}else Q().fire("Oops...","Necesitas seleccionar un trabajador para poder cerrar","error")}function N(){B.value++;const e=[{condition:()=>M.value>180,title:"Hay más de 180€ en la caja"},{condition:()=>!D.value,title:"No se han hecho devoluciones"},{condition:()=>!T.value,title:"No se han hecho salidas de entregas diarias"}];if(B.value<=e.length){const a=e[B.value-1];a.condition()?$(a):N()}else n.value=!0,v.value=!0,B.value=0}function $(e){Q().fire({title:e.title,icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Continuar cierre",denyButtonText:"Cancelar",reverseButtons:!0}).then((e=>{e.isConfirmed?N():e.isDenied&&(B.value=0)}))}function P(){X.Z.post("/caja/cambioTurno").then((e=>{null!=e&&(g.value=!1)}))}function W(){X.Z.post("caja/anularTurno").then((e=>{null!=e&&(g.value=!0)}))}const S=(0,t.Fl)((()=>o.value?Number(o.value.cantidad):null));function U(e,a,l){const t=new Date;t.setTime(t.getTime()+24*l*60*60*1e3);let n="expires="+t.toUTCString();document.cookie=e+"="+a+";"+n+";path=/"}function Z(){n.value&&(n.value=!1,i.value.setValor(h.value))}return(0,t.YP)(S,(()=>{null!=e.value&&void 0!=e.value?(c.value[e.value]=S.value,U("datosCierre",JSON.stringify(c.value),7)):null!=_.value&&void 0!=_.value&&(p.value=S.value)})),(0,t.YP)(p,(async()=>{if(p.value||0===p.value)try{X.Z.post("caja/setCambioEmActual",{valor:0===p.value?0:Number(p.value.toFixed(2))})}catch(e){}})),(0,t.YP)(c,(async()=>{try{const e=j();X.Z.post("caja/setDetalleActual",{detalleActual:e})}catch(e){}}),{deep:!0}),(0,t.bv)((async()=>{X.Z.post("/paytef/totalPaytefHour").then((e=>{u.value=e.data})),ae.W.cargarVentas(),X.Z.post("/caja/comprovarTurno").then((e=>{g.value=e.data.info.estado}));let e=(await X.Z.post("/parametros/totalPaytef")).data;m.value=e[0]?e[0]:0,f.value=!!e[1]&&e[1],X.Z.get("tickets/getTotalDatafono3G").then((e=>{e.data&&(k.value=e.data,h.value=e.data)})),X.Z.get("caja/getCambioEmActual").then((e=>{"number"!==typeof e.data||Number.isNaN(e.data)?p.value=0:p.value=e.data})).catch((e=>{p.value=0})),X.Z.get("caja/getDetalleActual").then((e=>{if(e.data)for(const a in e.data)c.value[a]=e.data[a].unidades})).catch((e=>{p.value=0})),X.Z.get("devoluciones/verifyCurrentBoxReturns").then((e=>{console.log("devoluciones",e.data),D.value=e.data})).catch((e=>{D.value=!1})),X.Z.get("movimientos/verifyCurrentBoxEntregaDiaria").then((e=>{console.log("movimientos",e.data),T.value=e.data})).catch((e=>{T.value=!1}))})),(0,t.JJ)("okValue",(()=>v.value?H():N())),{infoDinero:c,setActivo:x,indexActivo:e,sizeBilletes:a,total:M,numpadRef:o,cerrarCaja:H,modo:r,trabajadorActivo:y,modalConfirmar:v,confirmarCierre:N,cantidad3G:l,numpadRef2:i,estadoTurno:g,cambioTurno:P,popOverTotalPaytef:b,hourPaytef:u,anularTurno:W,totalPaytef:m,isLanPaytef:f,cargarTotal3G:Z,itsMyFirstTimePleaseBeCareful:n,cambioEmergencia:p,setCambioEmergencia:A,cambioEmActivo:_,botonesBloqueados:z}}},te=l(40089);const ne=(0,te.Z)(le,[["render",G],["__scopeId","data-v-c9321ce2"]]);var oe=ne}}]);
//# sourceMappingURL=52.7a9c2696.js.map