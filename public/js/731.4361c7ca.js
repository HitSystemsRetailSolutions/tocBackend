"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[731],{61837:function(a,e,l){l.d(e,{Z:function(){return g}});var t=l(73396);const o={class:"btn-group-vertical mt-1"},n={class:"btn-group"},i={class:"btn-group"},d={class:"btn-group"},u={class:"btn-group"},s={class:"btn-group"};function c(a,e,l,c,r,v){return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",n,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[0]||(e[0]=a=>c.addTecla("1"))}," 1 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[1]||(e[1]=a=>c.addTecla("2"))}," 2 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[2]||(e[2]=a=>c.addTecla("3"))}," 3 ")]),(0,t._)("div",i,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[3]||(e[3]=a=>c.addTecla("4"))}," 4 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[4]||(e[4]=a=>c.addTecla("5"))}," 5 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[5]||(e[5]=a=>c.addTecla("6"))}," 6 ")]),(0,t._)("div",d,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[6]||(e[6]=a=>c.addTecla("7"))}," 7 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[7]||(e[7]=a=>c.addTecla("8"))}," 8 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[8]||(e[8]=a=>c.addTecla("9"))}," 9 ")]),(0,t._)("div",u,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[9]||(e[9]=a=>c.deleteTecla())}," < "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[10]||(e[10]=a=>c.addTecla("0"))}," 0 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[11]||(e[11]=a=>c.okValue(Number(c.cantidad)))}," OK ")]),(0,t._)("div",s,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonComa",onClick:e[12]||(e[12]=a=>c.addTecla("."))}," , ")])])}l(42492);var r=l(32066),v=l(17555),m=l(44870);const p=(0,r.io)("http://"+v.Z.state.TocGameURL+":5051");var b={props:{skipBalanza:{type:Boolean,default:!1}},name:"NumpadComponent",setup(a,{expose:e}){const l=(0,m.iH)("0"),o=(0,t.f3)("okValue"),n=(0,m.iH)("5.5rem"),i=(0,m.iH)("5.5rem");(0,t.Fl)((()=>v.Z.state.Weight.lastWeight));function d(a){"."===a&&(l.value=l.value.replace(".","")),l.value+=a,"0"==l.value[0]&&(l.value=l.value.slice(1))}function u(){l.value=l.value.slice(0,-1),""===l.value&&(l.value="0")}function s(a){l.value=Number(a).toString()}return p.on("setBalanzaValue",(e=>{e&&!a.skipBalanza&&s(e)})),e({cantidad:l,setValor:s}),(0,t.bv)((async()=>{a.skipBalanza||s((await(0,t.Fl)((()=>v.Z.state.Weight.lastWeight))).value)})),{okValue:o,cantidad:l,addTecla:d,deleteTecla:u,setValor:s,anchoTecla:n,altoTecla:i}}},_=l(40089);const f=(0,_.Z)(b,[["render",c],["__scopeId","data-v-6fec6be8"]]);var g=f},94731:function(a,e,l){l.r(e),l.d(e,{default:function(){return na}});var t=l(73396),o=l(87139),n=l(49242);const i=a=>((0,t.dD)("data-v-ef06312a"),a=a(),(0,t.Cn)(),a),d={class:"row p-2",style:{"text-align":"center"}},u=i((()=>(0,t._)("img",{src:"/img/1cts.png",width:"84",height:"84"},null,-1))),s=i((()=>(0,t._)("img",{src:"/img/2cts.png",width:"84",height:"84"},null,-1))),c=i((()=>(0,t._)("img",{src:"/img/5cts.png",width:"84",height:"84"},null,-1))),r=i((()=>(0,t._)("img",{src:"/img/10cts.png",width:"84",height:"84"},null,-1))),v=i((()=>(0,t._)("img",{src:"/img/20cts.png",width:"84",height:"84"},null,-1))),m=i((()=>(0,t._)("img",{src:"/img/50cts.png",width:"84",height:"84"},null,-1))),p=i((()=>(0,t._)("img",{src:"/img/uneuro.png",width:"84",height:"84"},null,-1))),b=i((()=>(0,t._)("img",{src:"/img/doseuros.png",width:"84",height:"84"},null,-1))),_={class:"row mx-auto mt-1"},f=["width"],g=i((()=>(0,t._)("br",null,null,-1))),w=["width"],y=i((()=>(0,t._)("br",null,null,-1))),C=["width"],z=i((()=>(0,t._)("br",null,null,-1))),h=["width"],k=i((()=>(0,t._)("br",null,null,-1))),D=["width"],B=i((()=>(0,t._)("br",null,null,-1))),T=["width"],A=i((()=>(0,t._)("br",null,null,-1))),x=["width"],M=i((()=>(0,t._)("br",null,null,-1))),j={class:"row"},N={class:"col-md-9"},P={key:0,style:{"font-size":"0.5rem",zoom:"0.6"},class:"spinner-border",role:"status"},$=i((()=>(0,t._)("span",{class:"visually-hidden"},"Loading...",-1))),H=[$],W={key:0},S={key:1},U={class:"d-flex"},Z={class:"col-md-3 text-end"},V={class:"row"},F={class:"col"},E={class:"input-group input-group-lg"},O={class:"input-group-text",id:"inputGroup-sizing-lg"},G={class:"row"},q={class:"col text-center"};function I(a,e,l,i,$,I){const R=(0,t.up)("MDBCardTitle"),L=(0,t.up)("MDBIcon"),Y=(0,t.up)("MDBPopover"),J=(0,t.up)("MDBCardText"),K=(0,t.up)("MDBBtn"),Q=(0,t.up)("MDBCardBody"),X=(0,t.up)("MDBCard"),aa=(0,t.up)("NumpadComponent"),ea=(0,t.up)("MDBModalTitle"),la=(0,t.up)("MDBModalHeader"),ta=(0,t.up)("MDBModalBody"),oa=(0,t.up)("MDBModalFooter"),na=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",d,[(0,t._)("div",{class:"col",onClick:e[0]||(e[0]=a=>i.setActivo(0))},[u,(0,t._)("label",{class:(0,o.C_)([{seleccionado:0==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[0])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:e[1]||(e[1]=a=>i.setActivo(1))},[s,(0,t._)("label",{class:(0,o.C_)([{seleccionado:1==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[1])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:e[2]||(e[2]=a=>i.setActivo(2))},[c,(0,t._)("label",{class:(0,o.C_)([{seleccionado:2==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[2])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:e[3]||(e[3]=a=>i.setActivo(3))},[r,(0,t._)("label",{class:(0,o.C_)([{seleccionado:3==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[3])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:e[4]||(e[4]=a=>i.setActivo(4))},[v,(0,t._)("label",{class:(0,o.C_)([{seleccionado:4==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[4])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:e[5]||(e[5]=a=>i.setActivo(5))},[m,(0,t._)("label",{class:(0,o.C_)([{seleccionado:5==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[5])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:e[6]||(e[6]=a=>i.setActivo(6))},[p,(0,t._)("label",{class:(0,o.C_)([{seleccionado:6==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[6])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:e[7]||(e[7]=a=>i.setActivo(7))},[b,(0,t._)("label",{class:(0,o.C_)([{seleccionado:7==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[7])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)])]),(0,t._)("div",_,[(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:e[8]||(e[8]=a=>i.setActivo(8))},[(0,t._)("img",{src:"/img/5euros.png",width:i.sizeBilletes},null,8,f),(0,t.Uk)(),g,(0,t._)("label",{class:(0,o.C_)([{seleccionado:8==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[8])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:e[9]||(e[9]=a=>i.setActivo(9))},[(0,t._)("img",{src:"/img/10euros.png",width:i.sizeBilletes},null,8,w),y,(0,t._)("label",{class:(0,o.C_)([{seleccionado:9==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[9])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:e[10]||(e[10]=a=>i.setActivo(10))},[(0,t._)("img",{src:"/img/20euros.png",width:i.sizeBilletes},null,8,C),z,(0,t._)("label",{class:(0,o.C_)([{seleccionado:10==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[10])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:e[11]||(e[11]=a=>i.setActivo(11))},[(0,t._)("img",{src:"/img/50euros.png",width:i.sizeBilletes},null,8,h),k,(0,t._)("label",{class:(0,o.C_)([{seleccionado:11==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[11])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:e[12]||(e[12]=a=>i.setActivo(12))},[(0,t._)("img",{src:"/img/100euros.png",width:i.sizeBilletes},null,8,D),B,(0,t._)("label",{class:(0,o.C_)([{seleccionado:12==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[12])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:e[13]||(e[13]=a=>i.setActivo(13))},[(0,t._)("img",{src:"/img/200euros.png",width:i.sizeBilletes},null,8,T),A,(0,t._)("label",{class:(0,o.C_)([{seleccionado:13==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[13])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:e[14]||(e[14]=a=>i.setActivo(14))},[(0,t._)("img",{src:"/img/500euros.png",width:i.sizeBilletes},null,8,x),M,(0,t._)("label",{class:(0,o.C_)([{seleccionado:14==i.indexActivo},"unidadesSize"])},(0,o.zw)(i.infoDinero[14])+" "+(0,o.zw)(a.$t("unidades","unidades")),3)])]),(0,t._)("div",j,[(0,t._)("div",N,[(0,t.Wm)(X,{class:"sizeInfoCaja"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(R,{class:"estiloTituloInfo"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.$t("informacion_de_la_caja","Información de la caja")),1)])),_:1}),(0,t.Wm)(J,{class:"estiloInfoCaja sizeCajaInfo"},{default:(0,t.w5)((()=>[(0,t._)("p",null,[(0,t.Wm)(L,{icon:"money-bill"}),(0,t.Uk)("   "+(0,o.zw)(a.$t("total_contado","Total contado"))+": "+(0,o.zw)(i.total)+" € ",1)]),(0,t._)("p",{onMouseover:e[16]||(e[16]=a=>{i.popOverTotalPaytef=!0}),onMouseleave:e[17]||(e[17]=a=>i.popOverTotalPaytef=!1)},[(0,t.Wm)(L,{icon:"credit-card"}),(0,t.Uk)("   "+(0,o.zw)(a.$t("total_paytef","Total Datáfono "))+" : ",1),null==i.totalPaytef?((0,t.wg)(),(0,t.iD)("div",P,H)):(0,t.kq)("",!0),(0,t.Uk)(" "+(0,o.zw)(null==i.totalPaytef?"":i.totalPaytef.toFixed(2)+" €")+"  ",1),null!=i.totalPaytef?((0,t.wg)(),(0,t.j4)(L,{key:1,icon:i.isLanPaytef?"ethernet":"globe"},null,8,["icon"])):(0,t.kq)("",!0),(0,t.Wm)(Y,{modelValue:i.popOverTotalPaytef,"onUpdate:modelValue":e[15]||(e[15]=a=>i.popOverTotalPaytef=a),direction:"right"},{header:(0,t.w5)((()=>[(0,t.Uk)("Ultima conexión")])),body:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(i.hourPaytef),1)])),_:1},8,["modelValue"])],32),i.trabajadorActivo?((0,t.wg)(),(0,t.iD)("p",W,[(0,t.Wm)(L,{icon:"user"}),(0,t.Uk)("   "+(0,o.zw)(a.$t("dependienta_responsable","Dependienta responsable"))+": ",1),(0,t._)("i",null,(0,o.zw)(i.trabajadorActivo.nombre),1)])):(0,t.kq)("",!0),i.trabajadorActivo?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",S,[(0,t.Wm)(L,{icon:"user"}),(0,t._)("i",null,"   "+(0,o.zw)(a.$t("sin_dependienta_responsable","Sin dependienta responsable")),1)])),(0,t._)("div",{class:"d-flex",onClick:e[18]||(e[18]=a=>i.setCambioEmergencia())},[(0,t._)("p",null,[(0,t.Wm)(L,{icon:"box"}),(0,t.Uk)("   "),(0,t._)("span",{class:(0,o.C_)([{seleccionado:i.cambioEmActivo},"border border-2 rounded"])},(0,o.zw)(a.$t("cambio_de_emergencia","Cambio de emergencia"))+": "+(0,o.zw)(i.cambioEmergencia)+" €",3)])])])),_:1}),(0,t._)("div",U,[(0,t.Wm)(K,{color:"primary",class:"w-100",size:"lg",onClick:e[19]||(e[19]=a=>i.confirmarCierre()),disabled:i.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.$t("cerrar_caja","Cerrar caja")),1)])),_:1},8,["disabled"]),i.estadoTurno?((0,t.wg)(),(0,t.j4)(K,{key:0,onClick:e[20]||(e[20]=a=>i.cambioTurno()),color:"primary",class:"w-50",size:"lg",disabled:i.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.$t("anular_cambio_turno","Anular cambio turno")),1)])),_:1},8,["disabled"])):((0,t.wg)(),(0,t.j4)(K,{key:1,onClick:e[21]||(e[21]=a=>i.anularTurno()),color:"primary",class:"w-50",size:"lg",disabled:i.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.$t("cambio_turno","Cambio turno")),1)])),_:1},8,["disabled"]))])])),_:1})])),_:1})]),(0,t._)("div",Z,[(0,t.Wm)(aa,{ref:"numpadRef"},null,512)])]),(0,t.Wm)(na,{id:"modalConfirmar",tabindex:"-1",labelledby:"modalConfirmarLabel",modelValue:i.modalConfirmar,"onUpdate:modelValue":e[25]||(e[25]=a=>i.modalConfirmar=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(la,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ea,{id:"modalConfirmarLabel"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.$t("confirmacion_de_cierre","Confirmación de cierre")),1)])),_:1})])),_:1}),(0,t.Wm)(ta,null,{default:(0,t.w5)((()=>[(0,t._)("div",V,[(0,t._)("div",F,[(0,t._)("div",E,[(0,t._)("span",O,(0,o.zw)(a.$t("datafono_manual","Datáfono manual")),1),i.numpadRef2?(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",(0,t.dG)({key:0,type:"text",class:"form-control","onUpdate:modelValue":e[22]||(e[22]=a=>i.numpadRef2.cantidad=a)},(0,t.mx)(i.cargarTotal3G(),!0)),null,16)),[[n.nr,i.numpadRef2.cantidad]]):(0,t.kq)("",!0)])])]),(0,t._)("div",G,[(0,t._)("div",q,[(0,t.Wm)(aa,{skipBalanza:!0,ref:"numpadRef2"},null,512)])])])),_:1}),(0,t.Wm)(oa,null,{default:(0,t.w5)((()=>[(0,t.Wm)(K,{color:"secondary",onClick:e[23]||(e[23]=a=>i.modalConfirmar=!1),size:"lg"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.$t("cerrar","Cerrar")),1)])),_:1}),(0,t.Wm)(K,{color:"primary",size:"lg",onClick:e[24]||(e[24]=a=>i.cerrarCaja())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.$t("confirmar_cierre","Confirmar cierre")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}l(57658);var R=l(44870),L=l(61837),Y=l(74313),J=l(20065),K=l(42492),Q=l.n(K),X=l(44161),aa=l(22483),ea=l(74834),la={name:"CerrarCajaComponent",components:{NumpadComponent:L.Z,MDBCard:Y.Yl,MDBCardBody:Y.H7,MDBCardTitle:Y.QM,MDBCardText:Y.Pp,MDBPopover:Y.SW,MDBBtn:Y.$v,MDBCheckbox:Y.IH,MDBModal:Y.j3,MDBModalHeader:Y.ol,MDBModalTitle:Y.wo,MDBModalBody:Y.Yz,MDBModalFooter:Y.ab,MDBIcon:Y.vm,MDBLoading:Y.J$},setup(){const a=(0,R.iH)(0),e="140",l=(0,R.iH)(0),o=(0,R.iH)(!0),n=(0,R.iH)(null),i=(0,R.iH)(null),d=(0,J.oR)(),u=(0,R.iH)(null),s=(0,aa.tv)(),c=(0,R.iH)([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r=(0,R.iH)("Cerrar"),v=(0,R.iH)(null),m=(0,R.iH)(null),p=(0,R.iH)(0),b=(0,R.iH)(!1),_=(0,R.iH)(!1),f=(0,R.iH)(!1),g=(0,R.iH)(!1),w=(0,R.iH)(null),y=(0,R.iH)(null),C=(0,R.iH)(null),z=(0,t.Fl)((()=>d.state.Caja.arrayVentas)),h=(0,t.Fl)((()=>d.state.Trabajadores.arrayTrabajadores)),k=(0,t.Fl)((()=>d.state.Trabajadores.indexActivo)),D=(0,t.Fl)((()=>h.value&&null!=k.value&&void 0!=k.value&&h.value[k.value]?h.value[k.value]:null)),B=(0,t.Fl)((()=>d.state.BtnMenuPrincipal.botonesBloqueados)),T=(0,R.iH)(null);function A(e){_.value&&(_.value=!1),a.value=e,n.value.setValor(c.value[e])}function x(){a.value=null,_.value=!0,n.value.setValor(p.value)}const M=(0,t.Fl)((()=>{let a=0;return a+=.01*c.value[0],a+=.02*c.value[1],a+=.05*c.value[2],a+=.1*c.value[3],a+=.2*c.value[4],a+=.5*c.value[5],a+=1*c.value[6],a+=2*c.value[7],a+=5*c.value[8],a+=10*c.value[9],a+=20*c.value[10],a+=50*c.value[11],a+=100*c.value[12],a+=200*c.value[13],a+=500*c.value[14],a+=Number(p.value.toString()),a}));function j(){const a=[{_id:"0.01",valor:.01*c.value[0],unidades:c.value[0]},{_id:"0.02",valor:.02*c.value[1],unidades:c.value[1]},{_id:"0.05",valor:.05*c.value[2],unidades:c.value[2]},{_id:"0.10",valor:.1*c.value[3],unidades:c.value[3]},{_id:"0.20",valor:.2*c.value[4],unidades:c.value[4]},{_id:"0.50",valor:.5*c.value[5],unidades:c.value[5]},{_id:"1",valor:1*c.value[6],unidades:c.value[6]},{_id:"2",valor:2*c.value[7],unidades:c.value[7]},{_id:"5",valor:5*c.value[8],unidades:c.value[8]},{_id:"10",valor:10*c.value[9],unidades:c.value[9]},{_id:"20",valor:20*c.value[10],unidades:c.value[10]},{_id:"50",valor:50*c.value[11],unidades:c.value[11]},{_id:"100",valor:100*c.value[12],unidades:c.value[12]},{_id:"200",valor:200*c.value[13],unidades:c.value[13]},{_id:"500",valor:500*c.value[14],unidades:c.value[14]}];return a}async function N(){if(null!=D.value&&void 0!=D.value)try{const a=await X.Z.post("caja/cerrarCaja",{total:M.value,detalleMonedas:j(),infoDinero:c.value,cantidad3G:Number(i.value.cantidad),cantidadPaytef:m.value,idDependienta:D.value._id,cambioEmergencia:Number(p.value.toString()),cantidad3GAutomatizado:T.value});if(!a.data)throw Error("No se ha podido cerrar la caja");d.dispatch("BtnMenuPrincipal/bloquearBotones"),Q().fire({backdrop:!1,title:"Caja cerrada correctamente",icon:"success",confirmButtonText:"Continuar"}).then((a=>{a.isConfirmed&&(d.dispatch("BtnMenuPrincipal/desbloquearBotones"),s.push("/abrirCaja"))}))}catch(a){Q().fire("Oops...",a.message,"error")}else Q().fire("Oops...","Necesitas seleccionar un trabajador para poder cerrar","error")}function P(){o.value=!0,v.value=!0}function $(){X.Z.post("/caja/cambioTurno").then((a=>{null!=a&&(g.value=!1)}))}function H(){X.Z.post("caja/anularTurno").then((a=>{null!=a&&(g.value=!0)}))}const W=(0,t.Fl)((()=>n.value?Number(n.value.cantidad):null));function S(a,e,l){const t=new Date;t.setTime(t.getTime()+24*l*60*60*1e3);let o="expires="+t.toUTCString();document.cookie=a+"="+e+";"+o+";path=/"}function U(){if(!o.value)return;o.value=!1;let a=0;const e=C.value.reduce(((a,e)=>(a[e.idTicket]=e,a)),{});z&&z.value?.length>0&&z.value.forEach((l=>{const t=l._id,o=y.value[t],n=e[t];if(!n&&o&&(l.tipoPago.includes("DATAFONO_3G")||l.datafono3G))a+=l.total-o.valor;else if(!n&&l.tipoPago.includes("DATAFONO_3G")||l.anulado&&l.datafono3G)for(const e of l.cesta.lista)e?.pagado||(a+=e.subtotal)})),C.value.forEach((e=>{a+=e.valor})),T.value=Number(a.toFixed(2)),i.value.setValor(a.toFixed(2))}function Z(){X.Z.get("movimientos/getMovTkrsSinExcIntervalo").then((a=>{void 0!=a.data&&null!=a.data&&(w.value=a.data,y.value=w.value.reduce(((a,e)=>(a[e.idTicket]=e,a)),{}))})).catch((a=>{Q().fire("Oops...","Error al mostrar lista","error")})),X.Z.get("movimientos/getDat3GDeudaPagada").then((a=>{void 0!=a.data&&null!=a.data&&(C.value=a.data)}))}return(0,t.YP)(W,(()=>{null!=a.value&&void 0!=a.value?(c.value[a.value]=W.value,S("datosCierre",JSON.stringify(c.value),7)):null!=_.value&&void 0!=_.value&&(p.value=W.value)})),(0,t.YP)(p,(async()=>{if(p.value||0===p.value)try{X.Z.post("caja/setCambioEmActual",{valor:0===p.value?0:Number(p.value.toFixed(2))})}catch(a){}})),(0,t.YP)(c,(async()=>{try{const a=j();X.Z.post("caja/setDetalleActual",{detalleActual:a})}catch(a){}}),{deep:!0}),(0,t.bv)((async()=>{X.Z.post("/paytef/calcularPaytef").then((a=>{})),X.Z.post("/paytef/totalPaytefHour").then((a=>{u.value=a.data})),ea.W.cargarVentas(),X.Z.post("/caja/comprovarTurno").then((a=>{g.value=a.data.info.estado}));let a=(await X.Z.post("/parametros/totalPaytef")).data;m.value=a[0]?a[0]:0,f.value=!!a[1]&&a[1],Z(),X.Z.get("caja/getCambioEmActual").then((a=>{"number"!==typeof a.data||Number.isNaN(a.data)?p.value=0:p.value=a.data})).catch((a=>{p.value=0})),X.Z.get("caja/getDetalleActual").then((a=>{if(a.data)for(const e in a.data)c.value[e]=a.data[e].unidades})).catch((a=>{p.value=0}))})),(0,t.JJ)("okValue",(()=>v.value?N():P())),{infoDinero:c,setActivo:A,indexActivo:a,sizeBilletes:e,total:M,numpadRef:n,cerrarCaja:N,modo:r,trabajadorActivo:D,modalConfirmar:v,confirmarCierre:P,cantidad3G:l,numpadRef2:i,estadoTurno:g,cambioTurno:$,popOverTotalPaytef:b,hourPaytef:u,anularTurno:H,totalPaytef:m,isLanPaytef:f,cargarTotal3G:U,itsMyFirstTimePleaseBeCareful:o,cambioEmergencia:p,setCambioEmergencia:x,cambioEmActivo:_,botonesBloqueados:B}}},ta=l(40089);const oa=(0,ta.Z)(la,[["render",I],["__scopeId","data-v-ef06312a"]]);var na=oa}}]);
//# sourceMappingURL=731.4361c7ca.js.map