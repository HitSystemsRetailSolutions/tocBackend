"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[49],{3449:function(e,a,t){t.d(a,{O:function(){return u}});var l=t(73396),o=t(20065),n=t(91076),i=t(42492),s=t.n(i);function u(){const e=(0,o.oR)(),a=(0,l.Fl)((()=>e.state.Trabajadores.arrayTrabajadores)),t=(0,l.Fl)((()=>e.state.Trabajadores.indexActivo)),i=(0,l.Fl)((()=>a.value&&void 0!=t.value&&null!=t.value&&a.value[t.value]?a.value[t.value]:null)),u=(0,l.Fl)((()=>e.state.Cestas.arrayCestas));async function d(e){try{const a=await n.Z.post("clientes/getClienteById",{idCliente:e});if(a.data)return c(a.data);throw new Error("No se ha podido obtener la información del cliente desde el backend")}catch(a){return s().fire("Oops...",a.message,"error"),!1}}async function c(a){const{id:t,nombre:l,albaran:o,vip:s,descuento:d}=a;if(u.value)for(let c=0;c<u.value.length;c++)if(i.value.idCesta===u.value[c]._id){await e.dispatch("Cestas/setClienteCesta",{index:c,idCliente:t,albaran:o,nombreCliente:l,vip:s});e.dispatch("EstadoDinamico/setVistaCliente",!0);const a=o||s||!d?0:d;return e.dispatch("Cestas/setDescuentoAction",Number(a)/100),n.Z.post("cestas/recalcularIvas",{idCesta:u.value[c]._id}),!0}return!1}return{findCliente:d}}},61562:function(e,a,t){t.d(a,{Z:function(){return b}});var l=t(73396),o=t(87139);const n=["onClick"],i={class:"botonTecladoSpaceDiv"};function s(e,a,t,s,u,d){const c=(0,l.up)("MDBInput"),r=(0,l.up)("MDBModalHeader"),p=(0,l.up)("MDBModalBody"),b=(0,l.up)("MDBModal");return(0,l.wg)(),(0,l.j4)(b,{frame:"",position:"bottom",id:"keyBoardModal",tabindex:"-1",labelledby:"keyBoardModal",modelValue:s.keyBoardModal,"onUpdate:modelValue":a[4]||(a[4]=e=>s.keyBoardModal=e)},{default:(0,l.w5)((()=>[s.showInput?((0,l.wg)(),(0,l.j4)(r,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{style:{width:"80rem !important"},label:"Texto introducido",modelValue:s.text,"onUpdate:modelValue":a[0]||(a[0]=e=>s.text=e)},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(p,{class:"mainDiv"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.chars.length,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.chars[e-1],((e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"btn-group-vertical mt-1 divTecla",key:a},[(0,l._)("button",{type:"button",style:(0,o.j5)([{"text-transform":"none"},s.keyStyle(e)]),class:"btn btn-outline-secondary py-3 botonTeclado",onClick:a=>s.processTecla(e)},(0,o.zw)(e),13,n)])))),128))])))),128)),(0,l._)("div",i,[(0,l._)("button",{style:(0,o.j5)([{"font-size":"1.8rem"},s.keyStyle("✎")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:a[1]||(a[1]=e=>s.processTecla("✎"))}," ✎ ",4),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonTecladoSpace",onClick:a[2]||(a[2]=e=>s.processTecla(" "))}," ␣ "),(0,l._)("button",{style:(0,o.j5)([{"font-size":"1.8rem"},s.keyStyle("#")]),type:"button",class:"btn btn-outline-secondary py-3 botonTeclado",onClick:a[3]||(a[3]=e=>s.processTecla("#"))}," Ⅳ ",4)])])),_:1})])),_:1},8,["modelValue"])}var u=t(44870),d=t(74313),c={name:"KeyBoardComponent",components:{MDBIcon:d.vm,MDBModalBody:d.Yz,MDBModal:d.j3,MDBBtn:d.$v,MDBModalHeader:d.ol,MDBModalTitle:d.wo,MDBInput:d.u2,MDBModalFooter:d.ab},props:{value:String,text:String},setup(e,{expose:a}){const t=(0,u.iH)(e.value||""),o=(0,u.iH)(!1),n=(0,u.iH)(!1),i=(0,u.iH)(!1);let s=!1;const d=(0,u.iH)(!1),c=[["q","w","e","r","t","y","u","i","o","p","←"],["a","s","d","f","g","h","j","k","l","ñ","↵"],["z","x","c","v","b","n","m",",",".","-","⇪"]],r=(0,u.iH)([]);function p(e){switch(e){case"←":m();break;case"↵":o.value=!1;break;case"⇪":s=!s,t.value.length>0&&(n.value=!n.value),y();break;case"#":i.value=!i.value,y();break;case"✎":d.value=!d.value;break;default:v(e);break}}function b(e){let a=t.value.length<=0&&!s||n.value,l="background-color: #606060 !important; color: white !important;";return i.value&&"#"==e||d.value&&"✎"==e||"⇪"==e&&a?l:a?"text-transform: uppercase":"text-transform: none;"}function v(e){let a=t.value.length<=0&&!s||n.value;s=!1,a&&(e=e.toUpperCase()),t.value+=e}function m(){t.value.length>0&&(t.value=t.value.slice(0,-1))}function y(){let e=c;const a=["á","é","í","ó","ú","ü","¡","¿"];if(i.value){let a=[["1","2","3","4","5","6","7","8","9","0","ç"]];a=a.concat(c),e=a}r.value=e.map((e=>e.map((e=>a.includes(e)?[e,e.toUpperCase()]:e))))}function f(e=""){void 0===t.value&&(t.value=""),t.value=e,o.value=!0}function C(){return[t.value,o.value]}return a({getValue:C,abrirModal:f}),(0,l.bv)((()=>{y()})),{text:t,addTecla:v,deleteTecla:m,keyBoardModal:o,processTecla:p,upperCase:n,keyStyle:b,buildKeyboard:y,abrirModal:f,showInput:d,chars:r}}},r=t(40089);const p=(0,r.Z)(c,[["render",s],["__scopeId","data-v-c19133e2"]]);var b=p},86619:function(e,a,t){t.d(a,{Z:function(){return C}});var l=t(73396),o=t(87139);const n={class:"btn-group"},i={class:"btn-group"},s={class:"btn-group"},u={class:"btn-group"},d={class:"btn-group"};function c(e,a,t,c,r,p){return(0,l.wg)(),(0,l.iD)("div",{class:(0,o.C_)(["btn-group-vertical mt-1",{disabled:t.disabled}])},[(0,l._)("div",n,[(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[0]||(a[0]=e=>c.addTecla("1"))}," 1 "),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[1]||(a[1]=e=>c.addTecla("2"))}," 2 "),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[2]||(a[2]=e=>c.addTecla("3"))}," 3 ")]),(0,l._)("div",i,[(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[3]||(a[3]=e=>c.addTecla("4"))}," 4 "),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[4]||(a[4]=e=>c.addTecla("5"))}," 5 "),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[5]||(a[5]=e=>c.addTecla("6"))}," 6 ")]),(0,l._)("div",s,[(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[6]||(a[6]=e=>c.addTecla("7"))}," 7 "),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[7]||(a[7]=e=>c.addTecla("8"))}," 8 "),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[8]||(a[8]=e=>c.addTecla("9"))}," 9 ")]),(0,l._)("div",u,[(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[9]||(a[9]=e=>c.deleteTecla())}," < "),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[10]||(a[10]=e=>c.addTecla("0"))}," 0 "),(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[11]||(a[11]=e=>c.okValue(Number(c.cantidad)))}," OK ")]),(0,l._)("div",d,[(0,l._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonComa",onClick:a[12]||(a[12]=e=>c.addTecla("."))}," , ")])],2)}t(42492);var r=t(32066),p=t(25360),b=t(44870);const v=(0,r.io)("http://"+p.Z.state.TocGameURL+":5051");var m={props:{skipBalanza:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},name:"NumpadComponent",setup(e,{expose:a}){const t=(0,b.iH)("0"),o=(0,l.f3)("okValue"),n=(0,b.iH)("5.5rem"),i=(0,b.iH)("5.5rem");(0,l.Fl)((()=>p.Z.state.Weight.lastWeight));function s(e){"."===e&&(t.value=t.value.replace(".","")),t.value+=e,"0"==t.value[0]&&(t.value=t.value.slice(1))}function u(){t.value=t.value.slice(0,-1),""===t.value&&(t.value="0")}function d(e){t.value=Number(e).toString()}return v.on("setBalanzaValue",(a=>{a&&!e.skipBalanza&&d(a)})),a({cantidad:t,setValor:d}),(0,l.bv)((async()=>{e.skipBalanza||d((await(0,l.Fl)((()=>p.Z.state.Weight.lastWeight))).value)})),{okValue:o,cantidad:t,addTecla:s,deleteTecla:u,setValor:d,anchoTecla:n,altoTecla:i}}},y=t(40089);const f=(0,y.Z)(m,[["render",c],["__scopeId","data-v-ae1efb7e"]]);var C=f},62189:function(e,a,t){t.d(a,{Z:function(){return W}});var l=t(73396),o=t(87139),n=t(49242);const i={class:"row"},s={class:"d-inline-block text-center"},u={class:"row mt-1 p-4"},d={class:"col-md-8"},c={class:"col-md-4"},r={key:0,class:"row"},p={class:"col"},b={class:"table-responsive w-100",style:{height:"400px"}},v={class:"table table-striped mt-1"},m={class:"nameDiv"},y={class:"textoNombre d-inline-block text-truncate"},f={key:1,class:"row"},C={class:"sinResultados position-relative"},k={class:"textoSinResultados position-absolute top-50 start-50 translate-middle"};function g(e,a,t,g,B,_){const w=(0,l.up)("MDBBtn"),M=(0,l.up)("MDBBadge"),h=(0,l.up)("MDBicon"),D=(0,l.up)("MDBModalBody"),T=(0,l.up)("MDBModal"),V=(0,l.up)("ModalNuevoCliente"),x=(0,l.up)("KeyBoardComponentVue");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(T,{id:"modalClientes",tabindex:"-1",labelledby:"tituloModalClientes",modelValue:g.modalClientes,"onUpdate:modelValue":a[8]||(a[8]=e=>g.modalClientes=e),staticBackdrop:"",size:"xl"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",s,[(0,l.Wm)(w,{color:"warning",class:"sizeBotones",onClick:a[0]||(a[0]=e=>g.clickDelivery("Glovo")),disabled:!g.activoGlovo},{default:(0,l.w5)((()=>[(0,l.Uk)("Glovo")])),_:1},8,["disabled"]),(0,l.Wm)(w,{color:"dark",class:"ms-2 sizeBotones",disabled:!g.activoUber,onClick:a[1]||(a[1]=e=>g.clickDelivery("Uber"))},{default:(0,l.w5)((()=>[(0,l.Uk)("Uber")])),_:1},8,["disabled"]),(0,l.Wm)(w,{color:"primary",class:"ms-2 sizeBotones",disabled:!g.activoToGo,onClick:a[2]||(a[2]=e=>g.clickDelivery("TooGoodToGo"))},{default:(0,l.w5)((()=>[(0,l.Uk)("To Go")])),_:1},8,["disabled"]),(0,l.Wm)(w,{color:"success",class:"ms-2 sizeBotones",onClick:a[3]||(a[3]=e=>g.modalNuevoClienteRef.abrirModal())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("nuevo","Nuevo")),1)])),_:1}),(0,l.Wm)(w,{color:"danger",class:"ms-2 sizeBotones",onClick:a[4]||(a[4]=e=>g.modalClientes=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("salir","Salir")),1)])),_:1})])]),(0,l._)("div",u,[(0,l._)("div",d,[(0,l.wy)((0,l._)("input",{class:"form-control inputBusqueda w-100",type:"text",placeholder:"Buscar por nombre","aria-label":".form-control-lg example","onUpdate:modelValue":a[5]||(a[5]=e=>g.inputBusqueda=e),onClick:a[6]||(a[6]=e=>g.openKeyboard()),readonly:""},null,512),[[n.nr,g.inputBusqueda]])]),(0,l._)("div",c,[(0,l.Wm)(w,{color:"secondary",class:"botonBusqueda w-100",onClick:a[7]||(a[7]=e=>g.buscar())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("buscar","Buscar")),1)])),_:1})])]),g.arrayClientes?.length>0?((0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",p,[(0,l._)("div",b,[(0,l._)("table",v,[(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.arrayClientes,((a,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("td",null,[(0,l._)("div",m,[(0,l._)("span",y,(0,o.zw)(a.nombre),1),(0,l.Uk)("  "),a.albaran?((0,l.wg)(),(0,l.j4)(M,{key:0,badge:"info",class:"text-dark textoAlbaran",pill:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Albaran")])),_:1})):a?.vip?((0,l.wg)(),(0,l.j4)(M,{key:1,badge:"info",class:"text-dark textoAlbaran",pill:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Vip")])),_:1})):(0,l.kq)("",!0)])]),(0,l._)("td",null,[(0,l.Wm)(w,{color:"primary",size:"lg",onClick:e=>g.selectCliente(a.id),class:"w-100",style:{height:"3.85rem","font-size":"1.5rem"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("elegir","Elegir")),1),(0,l.Wm)(h,{icon:""})])),_:2},1032,["onClick"])])])))),128))])])])])])):((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("div",C,[(0,l._)("span",k,(0,o.zw)(e.$t("sin_resultados","Sin resultados")),1)])]))])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(V,{ref:"modalNuevoClienteRef"},null,512),(0,l.Wm)(x,{ref:"keyboardRef"},null,512)],64)}var B=t(91076),_=t(74313),w=t(42492),M=t.n(w),h=t(44870),D=t(20065),T=t(62492),V=t(61562),x=t(3449),H={name:"ModalClientesComponent",components:{MDBModal:_.j3,MDBModalBody:_.Yz,MDBBtn:_.$v,ModalNuevoCliente:T.Z,MDBIcon:_.vm,MDBBadge:_.m_,KeyBoardComponentVue:V.Z},setup(e,a){const t=(0,D.oR)(),o=(0,h.iH)(!1),n=(0,h.iH)(0),i=(0,h.iH)(null),s=(0,h.iH)(""),u=(0,h.iH)(),d=(0,h.iH)(null),c=(0,h.iH)(!0),r=(0,h.iH)(!0),p=(0,h.iH)(!0),b=(0,l.f3)("actualizarPuntos"),v=(0,l.Fl)((()=>t.state.Trabajadores.arrayTrabajadores)),m=(0,l.Fl)((()=>t.state.Trabajadores.indexActivo)),{findCliente:y}=((0,l.Fl)((()=>v.value&&void 0!=m.value&&null!=m.value&&v.value[m.value]?v.value[m.value]:null)),(0,l.Fl)((()=>t.state.Cestas.arrayCestas)),(0,x.O)());function f(){o.value=!0,g()}function C(){n.value++}function k(e){B.Z.post("clientes/getClienteById",{idCliente:e}).then((a=>{if(!a.data)throw Error("No se ha podido obtener la información del cliente. backend");w(e,a.data.nombre,a.data.albaran,a.data.vip)})).catch((e=>{M().fire("Oops...",e.message,"error")}))}const g=async()=>{const e=await B.Z.post("clientes/getServiciosTienda");e.data?(c.value=!!e.data.includes("Glovo"),r.value=!!e.data.includes("TooGoodToGo"),p.value=!!e.data.includes("Uber")):(c.value=!1,r.value=!1,p.value=!1)},_=async e=>{const a=await B.Z.post("clientes/getClienteByServicio",{servicio:e});if(!a.data)throw Error("No se ha podido obtener la información del cliente. backend");k(a.data)};async function w(e){const a=await y(e);a&&(b(),T())}function T(){o.value=!1}function V(){B.Z.post("clientes/buscar",{busqueda:s.value}).then((e=>{u.value=e.data})).catch((e=>{M().fire("Oops...",e.message,"error")}))}let H;async function N(){try{i.value.abrirModal(s.value),H=setInterval((()=>{s.value=i.value.getValue()[0],i.value.getValue()[1]||clearInterval(H)}),100)}catch(e){console.log(e),H=void 0}}return(0,l.YP)(s,(()=>{V()})),a.expose({abrirModal:f,datoBorrar:n,selectCliente:w}),(0,l.JJ)("cerrarModalClientes",T),{test:C,datoBorrar:n,modalClientes:o,inputBusqueda:s,arrayClientes:u,selectCliente:w,buscar:V,keyboardRef:i,openKeyboard:N,modalNuevoClienteRef:d,clickClienteAtajo:k,activoGlovo:c,activoToGo:r,activoUber:p,clickDelivery:_}}},N=t(40089);const U=(0,N.Z)(H,[["render",g],["__scopeId","data-v-26b34fc2"]]);var W=U},62492:function(e,a,t){t.d(a,{Z:function(){return g}});var l=t(73396),o=t(87139);const n={class:"row"},i={class:"col w-50"},s={class:"col w-50 datos"},u={key:0,class:"spinner"},d={key:1};function c(e,a,t,c,r,p){const b=(0,l.up)("MDBModalHeader"),v=(0,l.up)("MDBInput"),m=(0,l.up)("MDBModalBody"),y=(0,l.up)("MDBBtn"),f=(0,l.up)("MDBModalFooter"),C=(0,l.up)("MDBModal");return(0,l.wg)(),(0,l.j4)(C,{id:"modalFichaCliente",tabindex:"-1",labelledby:"tituloModalFichaCliente",modelValue:c.modalFichaCliente,"onUpdate:modelValue":a[9]||(a[9]=e=>c.modalFichaCliente=e),staticBackdrop:"",size:"xl"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l._)("h2",null,"Ficha de "+(0,o.zw)(c.nombre),1)])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l._)("div",i,[(0,l.Wm)(v,{label:"Nombre",modelValue:c.nombre,"onUpdate:modelValue":a[0]||(a[0]=e=>c.nombre=e),style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,l.Wm)(v,{label:"Telefono",modelValue:c.telefono,"onUpdate:modelValue":a[1]||(a[1]=e=>c.telefono=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,l.Wm)(v,{label:"email",modelValue:c.email,"onUpdate:modelValue":a[2]||(a[2]=e=>c.email=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,l.Wm)(v,{label:"direccion",modelValue:c.direccion,"onUpdate:modelValue":a[3]||(a[3]=e=>c.direccion=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"])]),(0,l._)("div",s,[(0,l.Wm)(v,{label:"Tarjeta Cliente",modelValue:c.tarjeta,"onUpdate:modelValue":a[4]||(a[4]=e=>c.tarjeta=e),class:"datos",style:{"margin-top":"10px"},"aria-required":"true"},null,8,["modelValue"]),(0,l.Wm)(v,{label:"Nif",modelValue:c.nif,"onUpdate:modelValue":a[5]||(a[5]=e=>c.nif=e),class:"datos",style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,l.Wm)(v,{label:"descuento",modelValue:c.descuento,"onUpdate:modelValue":a[6]||(a[6]=e=>c.descuento=e),type:"number",min:"0",max:"100",class:"datos",style:{"margin-top":"10px"},onChange:c.validateDescuento},null,8,["modelValue","onChange"])])])])),_:1}),(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{color:"primary",onClick:a[7]||(a[7]=e=>c.guardarCliente()),disabled:c.loading,class:"btnSpinner d-flex align-items-center justify-content-center"},{default:(0,l.w5)((()=>[c.loading?((0,l.wg)(),(0,l.iD)("span",u)):((0,l.wg)(),(0,l.iD)("span",d,"Guardar"))])),_:1},8,["disabled"]),(0,l.Wm)(y,{color:"danger",onClick:a[8]||(a[8]=e=>c.modalFichaCliente=!1),ref:"salirBoton",disabled:c.loading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Salir ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["modelValue"])}var r=t(74313),p=t(44870),b=t(91076),v=t(42492),m=t.n(v),y=t(3449),f={name:"ModalFichaClienteComponent",props:["callback"],components:{MDBBtn:r.$v,MDBInput:r.u2,MDBModal:r.j3,MDBModalBody:r.Yz,MDBModalFooter:r.ab,MDBModalHeader:r.ol},setup(e,{expose:a}){const t=(0,p.iH)(!1),o=(0,p.iH)(""),n=(0,p.iH)(""),i=(0,p.iH)(""),s=(0,p.iH)(""),u=(0,p.iH)(""),d=(0,p.iH)(""),c=(0,p.iH)("0"),r=((0,p.iH)(null),(0,p.iH)(null)),v=(0,l.f3)("cerrarModalClientes"),f=(0,p.iH)(!1),{findCliente:C}=(0,y.O)(),k=(0,l.f3)("actualizarPuntos"),g=async()=>{""!=o.value?isNaN(Number(c.value))?m().fire({title:"Vaya...",text:"El descuento tiene que ser un número",icon:"error",confirmButtonText:"Aceptar"}):(f.value=!0,b.Z.post("clientes/crearNuevoCliente",{nombre:o.value,telefono:n.value,email:i.value,direccion:s.value,tarjetaCliente:u.value,nif:d.value,descuento:c.value}).then((async e=>{if(e.data.success){m().fire({title:"Cliente creado",icon:"success",confirmButtonText:"Aceptar"});const a=await C(e.data.idCliente);a&&k(),f.value=!1,t.value=!1,v&&"function"===typeof v&&v()}else m().fire({title:"Vaya...",text:e.data.message,icon:"error",confirmButtonText:"Aceptar"}),f.value=!1})).catch((e=>{console.log(e),m().fire({title:"Vaya...",text:"Error al crear el cliente",icon:"error",confirmButtonText:"Aceptar"}),f.value=!1}))):m().fire({title:"Vaya...",text:"El campo de nombre y de tarjeta son obligatorios",icon:"error",confirmButtonText:"Aceptar"})};function B(e=""){o.value="",n.value="",i.value="",s.value="",u.value=e,d.value="",c.value="",t.value=!0}function _(e){const a=e.target.value,t=a.replace(/[^0-9.]/g,""),[l,o]=t.split("."),n=o&&o.length>2?o.slice(0,2):o,i=l+(n?`.${n}`:""),s=parseFloat(i);isNaN(s)?c.value="":c.value=s<0?"0":s>100?"100":i}return a({abrirModal:B}),{modalFichaCliente:t,guardarCliente:g,nombre:o,telefono:n,email:i,direccion:s,tarjeta:u,nif:d,descuento:c,salirBoton:r,loading:f,validateDescuento:_}}},C=t(40089);const k=(0,C.Z)(f,[["render",c],["__scopeId","data-v-085c5614"]]);var g=k}}]);
//# sourceMappingURL=49.6ab8a8fa.js.map