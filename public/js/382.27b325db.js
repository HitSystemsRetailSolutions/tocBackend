"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[382],{33727:function(t,a,e){e.d(a,{Z:function(){return f}});var n=e(73396),o=e(87139);const l={class:"btn-group"},d={class:"btn-group"},u={class:"btn-group"},c={class:"btn-group"},r={class:"btn-group"};function s(t,a,e,s,i,p){return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(["btn-group-vertical mt-1",{disabled:e.disabled}])},[(0,n._)("div",l,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[0]||(a[0]=t=>s.addTecla("1"))}," 1 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[1]||(a[1]=t=>s.addTecla("2"))}," 2 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[2]||(a[2]=t=>s.addTecla("3"))}," 3 ")]),(0,n._)("div",d,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[3]||(a[3]=t=>s.addTecla("4"))}," 4 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[4]||(a[4]=t=>s.addTecla("5"))}," 5 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[5]||(a[5]=t=>s.addTecla("6"))}," 6 ")]),(0,n._)("div",u,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[6]||(a[6]=t=>s.addTecla("7"))}," 7 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[7]||(a[7]=t=>s.addTecla("8"))}," 8 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[8]||(a[8]=t=>s.addTecla("9"))}," 9 ")]),(0,n._)("div",c,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[9]||(a[9]=t=>s.deleteTecla())}," < "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[10]||(a[10]=t=>s.addTecla("0"))}," 0 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary botonNumpad",onClick:a[11]||(a[11]=t=>s.addTecla("."))}," , ")]),(0,n._)("div",r,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary botonComa",onClick:a[12]||(a[12]=t=>s.okValue(Number(s.cantidad)))}," OK ")])],2)}e(42492);var i=e(32066),p=e(43666),b=e(44870);const m=(0,i.io)("http://"+p.Z.state.TocGameURL+":5051");var v={props:{skipBalanza:{type:Boolean,default:!1},max3EntersDigits:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},name:"NumpadComponent",setup(t,{expose:a,emit:e}){const o=(0,b.iH)("0"),l=(0,n.f3)("okValue"),d=(0,b.iH)("5.5rem"),u=(0,b.iH)("5.5rem");(0,n.Fl)((()=>p.Z.state.Weight.lastWeight));function c(){e("activarShake")}function r(a){if(t.max3EntersDigits){let[t,e]=o.value.split("."),n=o.value.includes(".");if(t.length>=3&&!n&&"."!=a)return c();if(e&&e.length>=2)return c();if("."===a&&o.value.includes("."))return c()}"."===a&&o.value.includes(".")||(o.value+=a,"0"==o.value[0]&&(o.value=o.value.slice(1)),e("setValue",o.value))}function s(){o.value=o.value.slice(0,-1),""===o.value&&(o.value="0")}function i(t){o.value=Number(t).toString(),e("setValue",o.value)}return m.on("setBalanzaValue",(a=>{a&&!t.skipBalanza&&i(a)})),a({cantidad:o,setValor:i}),(0,n.bv)((async()=>{t.skipBalanza||i((await(0,n.Fl)((()=>p.Z.state.Weight.lastWeight))).value)})),{okValue:l,cantidad:o,addTecla:r,deleteTecla:s,setValor:i,anchoTecla:d,altoTecla:u}}},y=e(40089);const _=(0,y.Z)(v,[["render",s],["__scopeId","data-v-2468ee80"]]);var f=_},71350:function(t,a,e){e.r(a),e.d(a,{default:function(){return H}});var n=e(73396),o=e(87139),l=e(49242);const d={class:"col-md-4 colJuntitas"},u={class:"input-group input-group-lg"},c={class:"input-group input-group-lg mt-2"},r={class:"col-md-5 colJuntitas"},s={class:"col-12 d-flex justify-content-between"},i={class:"col-5"},p={class:"col-4"},b={class:"col-3"},m={class:"w-100"},v={class:"concepto"},y={class:"col-md-3 m-auto"};function _(t,a,e,_,f,g){const C=(0,n.up)("MDBCardHeader"),k=(0,n.up)("MDBCardBody"),w=(0,n.up)("MDBBtn"),B=(0,n.up)("MDBCardFooter"),T=(0,n.up)("MDBCard"),h=(0,n.up)("MDBTable"),D=(0,n.up)("NumpadComponent"),N=(0,n.up)("KeyBoardComponent");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",d,[(0,n.Wm)(T,{text:"center",class:"sizeSalida m-auto mt-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.$t("entrada_de_dinero","Entrada de dinero")),1)])),_:1}),_.numpadRef&&_.numpadRef.cantidad?((0,n.wg)(),(0,n.j4)(k,{key:0},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>_.numpadRef.cantidad=t),type:"text",class:"form-control",placeholder:"Introduce la cantidad",disabled:""},null,512),[[l.nr,_.numpadRef.cantidad]])]),(0,n._)("div",c,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>_.concepto=t),type:"text",class:"form-control",placeholder:"Concepto",readonly:"",onClick:a[2]||(a[2]=t=>_.openKeyboard())},null,512),[[l.nr,_.concepto]])])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(B,{class:"text-muted text-end"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{color:"success",size:"lg",onClick:a[3]||(a[3]=t=>_.confirmarEntrada())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.$t("confirmar_entrada","Confirmar entrada")),1)])),_:1})])),_:1})])),_:1})]),(0,n._)("div",r,[(0,n.Wm)(T,{class:"sizeCardListaEntrada m-auto mt-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{style:{"text-align":"center"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.$t("listado_de_entradas","Listado de entradas")),1)])),_:1}),(0,n.Wm)(k,{class:"sizeCardBody"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"sizeCardBodyListaEntrada"},{default:(0,n.w5)((()=>[(0,n._)("thead",null,[(0,n._)("tr",s,[(0,n._)("th",i,(0,o.zw)(t.$t("hora","Hora")),1),(0,n._)("th",p,(0,o.zw)(t.$t("concepto","Concepto")),1),(0,n._)("th",b,(0,o.zw)(t.$t("total","Total")),1)])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(_.listaEntradas,((t,a)=>((0,n.wg)(),(0,n.iD)("tr",m,[(0,n._)("td",null,(0,o.zw)(_.getTiempo(t._id)),1),(0,n._)("td",v,(0,o.zw)(t.concepto),1),(0,n._)("td",null,(0,o.zw)(t.valor?.toFixed(2))+" â‚¬",1)])))),256))])])),_:1})])),_:1})])),_:1})]),(0,n._)("div",y,[(0,n.Wm)(D,{ref:"numpadRef"},null,512)]),(0,n.Wm)(N,{ref:"keyboardRef"},null,512)],64)}var f=e(91076),g=e(74313),C=e(42492),k=e.n(C),w=e(44870),B=e(20065),T=e(33727),h=e(36797),D=e.n(h),N=e(78400),z={name:"EntradaComponent",components:{MDBCard:g.Yl,MDBCardHeader:g.uX,MDBCardBody:g.H7,NumpadComponent:T.Z,MDBBtn:g.$v,MDBCardFooter:g.Rw,MDBTable:g.re,KeyBoardComponent:N.Z},setup(){const t=(0,B.oR)(),a=(0,n.Fl)((()=>t.state.Trabajadores.arrayTrabajadores)),e=(0,n.Fl)((()=>t.state.Trabajadores.indexActivo)),o=(0,n.Fl)((()=>a.value&&null!=e.value&&void 0!=e.value&&a.value[e.value]?a.value[e.value]:null)),l=(0,w.iH)(null),d=(0,w.iH)(""),u=(0,w.iH)([]),c=(0,w.iH)(null);function r(t){const a=new Date(t);return D()(a).format("HH:mm:ss DD/MM/YYYY")}function s(){""==d.value&&(d.value="Entrada"),f.Z.post("movimientos/nuevoMovimiento",{cantidad:Number(l.value.cantidad),concepto:d.value,idTrabajador:o.value._id,tipo:"ENTRADA_DINERO"}).then((t=>{if(!t.data)throw Error("No se ha podido realizar la entrada de dinero");l.value.setValor("0"),k().fire("Perfecto","Entrada de dinero realizada correctamente","success"),i()})).catch((t=>{k().fire("Oops...",t.message,"error")}))}function i(){f.Z.get("movimientos/getEntradasIntervalo").then((t=>{void 0!=t.data&&null!=t.data&&(u.value=t.data.reverse())})).catch((t=>{k().fire("Oops...","Error al mostrar lista","error")}))}let p;async function b(){try{c.value.abrirModal(d.value),p=setInterval((()=>{const t=c.value.getValue()[0];t!==d.value&&(d.value=t),c.value.getValue()[1]||clearInterval(p)}),100)}catch(t){console.log(t),p=void 0}}return(0,n.bv)((()=>{i()})),(0,n.JJ)("okValue",s),{confirmarEntrada:s,numpadRef:l,concepto:d,listaEntradas:u,getEntradas:i,getTiempo:r,openKeyboard:b,keyboardRef:c}}},E=e(40089);const M=(0,E.Z)(z,[["render",_],["__scopeId","data-v-40b44fa4"]]);var H=M}}]);
//# sourceMappingURL=382.27b325db.js.map