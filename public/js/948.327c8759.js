"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[948],{34730:function(e,a,n){n.d(a,{HB:function(){return s},i_:function(){return d},re:function(){return c}});var t=n(91076),o=n(13150),i=n(16683),l=n(2001);n(12281);let r=l.Z;function u(){return r.state.Trabajadores.arrayTrabajadores&&null!=r.state.Trabajadores.indexActivo?r.state.Trabajadores.arrayTrabajadores[r.state.Trabajadores.indexActivo]??null:null}async function d(e,a,n){null!=e&&e>0&&t.Z.post("movimientos/nuevoMovimiento",{cantidad:e,concepto:a,idTrabajador:u()._id,tipo:n})}async function c(){return o.Z.activado()}async function s(){if(!await o.Z.activado())return null;let e=await o.Z.get_estado();if(e.err)return{err:e.err};let a=(0,i.li)();const n=e=>{(0,i.eh)(e).forEach((({mob:e,den:n,value:t})=>{a[e][n]=(a[e][n]??0)+t}))};n(e.cantidad_recicladores_pd),n(e.cantidad_stacker_pd),n(e.cantidad_caja_fuerte_pd);let t=[];const l={monedas:[1,2,5,10,20,50,100,200],billetes:[500,1e3,2e3,5e3,1e4,2e4,5e4]};for(let o=0;o<l.monedas.length+l.billetes.length;o++)o<l.monedas.length?t[o]=a.monedas[l.monedas[o]]??0:t[o]=a.billetes[l.billetes[o-l.monedas.length]]??0;return{infoDinero:t}}},13150:function(e,a,n){var t=n(91076);function o(e,a){return arguments.length<2?t.Z.get(e).then((e=>e.data)):t.Z.post(e,a,{headers:{"Content-Type":"application/json"}}).then((e=>e.data))}function i(e,a){return arguments[0]="cashlogy/"+arguments[0],o(...arguments)}function l(){return i("activado")}function r(e,a){return i("saveGrupoProcesos",{grupo:e,info:a})}function u(){return i("get_procesoPrevioInterrumpido")}function d(e){return i("aceptar_procesoPrevioInterrumpido",e)}function c(e){return i("importe_entrado_manualmente_en_cobrar",e)}function s(e,a=!0){return i("cobrar",{importe_a_cobrar:e,auto_aceptar:a})}function v(e){return i("anadir_cambios_y_devolver",e)}function _(){return i("anadir_cambios")}function m(e){return i("solo_dispensar",e)}function p(){return i("dar_cambio_entrada")}function f(e,a){return i("dispensar_por_denominacion",{cantidad_retirar_pd:e,destino_billetes:a})}function b(e,a,n){return i("vaciado_completo",{solo_monedas:e,denominaciones_vaciar:a,destino_billetes:n})}function g(e=!1){return i("consulta_todas_denominaciones",e)}function w(){return i("recaudar")}function y(e){return i("mantenimiento",e)}function C(){return i("poner_a_cero")}function h(){return i("resolver_incidencias")}function z(){return i("get_niveles")}function k(e){return i("get_errores",e)}function D(){return i("get_estado")}function T(e){return i("boton_pulsar",e)}function B(){return i("loadFondoCaja")}function A(e){return i("saveFondoCaja",e)}a["Z"]={activado:l,saveGrupoProcesos:r,get_procesoPrevioInterrumpido:u,aceptar_procesoPrevioInterrumpido:d,importe_entrado_manualmente_en_cobrar:c,cobrar:s,anadir_cambios_y_devolver:v,anadir_cambios:_,solo_dispensar:m,dar_cambio_entrada:p,dispensar_por_denominacion:f,vaciado_completo:b,consulta_todas_denominaciones:g,recaudar:w,mantenimiento:y,poner_a_cero:C,resolver_incidencias:h,get_niveles:z,get_errores:k,get_estado:D,boton_pulsar:T,loadFondoCaja:B,saveFondoCaja:A}},16683:function(e,a,n){n.d(a,{Cq:function(){return b},JQ:function(){return p},R_:function(){return r},XX:function(){return g},bW:function(){return f},c:function(){return c},eh:function(){return v},iX:function(){return u},j9:function(){return m},kJ:function(){return _},li:function(){return s},ul:function(){return w},uz:function(){return l},vg:function(){return i}});n(57658);var t=n(73396),o=n(44870);function i(e,a=!1){return e.toFixed(2)+(a?" €":"")}function l(e){return new Promise((a=>{setTimeout(a,e)}))}async function r(...e){function a(){return e.every((e=>e.value))}if(a())return;let n,o=(0,t.YP)(e,(()=>{n?.()}));do{let e=new Promise((e=>{n=e}));await e}while(!a());o?.()}const u=["billetes","monedas"],d=["monedas","billetes"];function c(e){let a,n=e.denominaciones_dispensables,t={header:{cols:["Cantidad reciclador","Cantidad introducida"]},body:[]};for(let o of u)for(let i=n[o].length-1;i>=0;i--){let l=n[o][i];a={mob:o,den_cents:l,cols:[{value:e.cantidad_recicladores_pd[o][l]},{value:e.cantidad_entrado_pd[o][l]}]},t.body.push(a)}return t}function s(){return{monedas:{},billetes:{}}}function v(e){let a=[];if(!e)return a;for(let n of d)e[n]&&Object.keys(e[n]).map((e=>parseInt(e))).sort(((e,a)=>e-a)).forEach((t=>{a.push({mob:n,den:t,value:e[n][t]})}));return a}function _(e){return 0==v(e).length}function m(e){let a=s();return v(e).forEach((({mob:e,den:n,value:t})=>{a[e][n]=t})),a}function p(e,a,n){let t;this.start=function(i){(0,o.dq)(a)?a.value=!1:arguments.length<=2&&(n=a);let l=e?.(i);return new Promise((e=>{t=e})).then((e=>(l&&l(e),n?.(e),(0,o.dq)(a)&&(a.value=!0),e)))},this.R=function(e){t(e)}}function f(e){return"CAJA_FUERTE"==e?"CAJA FUERTE":e}function b(e,a){let n="";return n=a<100?`${a}cts`:100==a?"uneuro":200==a?"doseuros":a/100+"euros",n=`/img/${n}.png`,n}function g(e){return Math.round(100*e)}function w(e){return e/100}},61837:function(e,a,n){n.d(a,{Z:function(){return g}});var t=n(73396);const o={class:"btn-group-vertical mt-1"},i={class:"btn-group"},l={class:"btn-group"},r={class:"btn-group"},u={class:"btn-group"},d={class:"btn-group"};function c(e,a,n,c,s,v){return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",i,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[0]||(a[0]=e=>c.addTecla("1"))}," 1 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[1]||(a[1]=e=>c.addTecla("2"))}," 2 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[2]||(a[2]=e=>c.addTecla("3"))}," 3 ")]),(0,t._)("div",l,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[3]||(a[3]=e=>c.addTecla("4"))}," 4 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[4]||(a[4]=e=>c.addTecla("5"))}," 5 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[5]||(a[5]=e=>c.addTecla("6"))}," 6 ")]),(0,t._)("div",r,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[6]||(a[6]=e=>c.addTecla("7"))}," 7 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[7]||(a[7]=e=>c.addTecla("8"))}," 8 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[8]||(a[8]=e=>c.addTecla("9"))}," 9 ")]),(0,t._)("div",u,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[9]||(a[9]=e=>c.deleteTecla())}," < "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[10]||(a[10]=e=>c.addTecla("0"))}," 0 "),(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[11]||(a[11]=e=>c.okValue(Number(c.cantidad)))}," OK ")]),(0,t._)("div",d,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonComa",onClick:a[12]||(a[12]=e=>c.addTecla("."))}," , ")])])}n(42492);var s=n(32066),v=n(2001),_=n(44870);const m=(0,s.io)("http://"+v.Z.state.TocGameURL+":5051");var p={props:{skipBalanza:{type:Boolean,default:!1}},name:"NumpadComponent",setup(e,{expose:a}){const n=(0,_.iH)("0"),o=(0,t.f3)("okValue"),i=(0,_.iH)("5.5rem"),l=(0,_.iH)("5.5rem");(0,t.Fl)((()=>v.Z.state.Weight.lastWeight));function r(e){"."===e&&(n.value=n.value.replace(".","")),n.value+=e,"0"==n.value[0]&&(n.value=n.value.slice(1))}function u(){n.value=n.value.slice(0,-1),""===n.value&&(n.value="0")}function d(e){n.value=Number(e).toString()}return m.on("setBalanzaValue",(a=>{a&&!e.skipBalanza&&d(a)})),a({cantidad:n,setValor:d}),(0,t.bv)((async()=>{e.skipBalanza||d((await(0,t.Fl)((()=>v.Z.state.Weight.lastWeight))).value)})),{okValue:o,cantidad:n,addTecla:r,deleteTecla:u,setValor:d,anchoTecla:i,altoTecla:l}}},f=n(40089);const b=(0,f.Z)(p,[["render",c],["__scopeId","data-v-6fec6be8"]]);var g=b},93948:function(e,a,n){n.r(a),n.d(a,{default:function(){return re}});var t=n(73396),o=n(87139),i=n(49242);const l=e=>((0,t.dD)("data-v-08e15f13"),e=e(),(0,t.Cn)(),e),r={class:"row p-2",style:{"text-align":"center"}},u=l((()=>(0,t._)("img",{src:"/img/1cts.png",width:"84",height:"84"},null,-1))),d=l((()=>(0,t._)("img",{src:"/img/2cts.png",width:"84",height:"84"},null,-1))),c=l((()=>(0,t._)("img",{src:"/img/5cts.png",width:"84",height:"84"},null,-1))),s=l((()=>(0,t._)("img",{src:"/img/10cts.png",width:"84",height:"84"},null,-1))),v=l((()=>(0,t._)("img",{src:"/img/20cts.png",width:"84",height:"84"},null,-1))),_=l((()=>(0,t._)("img",{src:"/img/50cts.png",width:"84",height:"84"},null,-1))),m=l((()=>(0,t._)("img",{src:"/img/uneuro.png",width:"84",height:"84"},null,-1))),p=l((()=>(0,t._)("img",{src:"/img/doseuros.png",width:"84",height:"84"},null,-1))),f={class:"row mx-auto mt-1"},b=["width"],g=l((()=>(0,t._)("br",null,null,-1))),w=["width"],y=l((()=>(0,t._)("br",null,null,-1))),C=["width"],h=l((()=>(0,t._)("br",null,null,-1))),z=["width"],k=l((()=>(0,t._)("br",null,null,-1))),D=["width"],T=l((()=>(0,t._)("br",null,null,-1))),B=["width"],A=l((()=>(0,t._)("br",null,null,-1))),j=["width"],x=l((()=>(0,t._)("br",null,null,-1))),M={class:"row"},P={class:"col-md-9"},H={key:0},$={key:0,style:{"font-size":"0.5rem",zoom:"0.6"},class:"spinner-border",role:"status"},N=l((()=>(0,t._)("span",{class:"visually-hidden"},"Loading...",-1))),W=[N],Z={key:0},U={key:1},F={class:"d-flex"},S={class:"col-md-3 text-end"},V={class:"row"},E={class:"col"},q={class:"input-group input-group-lg"},I={class:"input-group-text",id:"inputGroup-sizing-lg"},R={class:"row"},G={class:"col text-center"};function O(e,a,n,l,N,O){const J=(0,t.up)("MDBCardTitle"),L=(0,t.up)("MDBIcon"),Y=(0,t.up)("MDBPopover"),X=(0,t.up)("MDBCardText"),Q=(0,t.up)("MDBBtn"),K=(0,t.up)("MDBCardBody"),ee=(0,t.up)("MDBCard"),ae=(0,t.up)("NumpadComponent"),ne=(0,t.up)("MDBModalTitle"),te=(0,t.up)("MDBModalHeader"),oe=(0,t.up)("MDBModalBody"),ie=(0,t.up)("MDBModalFooter"),le=(0,t.up)("MDBModal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",r,[(0,t._)("div",{class:"col",onClick:a[0]||(a[0]=e=>l.setActivo(0))},[u,(0,t._)("label",{class:(0,o.C_)([{seleccionado:0==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[0])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[1]||(a[1]=e=>l.setActivo(1))},[d,(0,t._)("label",{class:(0,o.C_)([{seleccionado:1==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[1])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[2]||(a[2]=e=>l.setActivo(2))},[c,(0,t._)("label",{class:(0,o.C_)([{seleccionado:2==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[2])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[3]||(a[3]=e=>l.setActivo(3))},[s,(0,t._)("label",{class:(0,o.C_)([{seleccionado:3==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[3])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[4]||(a[4]=e=>l.setActivo(4))},[v,(0,t._)("label",{class:(0,o.C_)([{seleccionado:4==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[4])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[5]||(a[5]=e=>l.setActivo(5))},[_,(0,t._)("label",{class:(0,o.C_)([{seleccionado:5==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[5])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[6]||(a[6]=e=>l.setActivo(6))},[m,(0,t._)("label",{class:(0,o.C_)([{seleccionado:6==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[6])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",onClick:a[7]||(a[7]=e=>l.setActivo(7))},[p,(0,t._)("label",{class:(0,o.C_)([{seleccionado:7==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[7])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)])]),(0,t._)("div",f,[(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[8]||(a[8]=e=>l.setActivo(8))},[(0,t._)("img",{src:"/img/5euros.png",width:l.sizeBilletes},null,8,b),(0,t.Uk)(),g,(0,t._)("label",{class:(0,o.C_)([{seleccionado:8==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[8])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[9]||(a[9]=e=>l.setActivo(9))},[(0,t._)("img",{src:"/img/10euros.png",width:l.sizeBilletes},null,8,w),y,(0,t._)("label",{class:(0,o.C_)([{seleccionado:9==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[9])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[10]||(a[10]=e=>l.setActivo(10))},[(0,t._)("img",{src:"/img/20euros.png",width:l.sizeBilletes},null,8,C),h,(0,t._)("label",{class:(0,o.C_)([{seleccionado:10==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[10])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[11]||(a[11]=e=>l.setActivo(11))},[(0,t._)("img",{src:"/img/50euros.png",width:l.sizeBilletes},null,8,z),k,(0,t._)("label",{class:(0,o.C_)([{seleccionado:11==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[11])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[12]||(a[12]=e=>l.setActivo(12))},[(0,t._)("img",{src:"/img/100euros.png",width:l.sizeBilletes},null,8,D),T,(0,t._)("label",{class:(0,o.C_)([{seleccionado:12==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[12])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[13]||(a[13]=e=>l.setActivo(13))},[(0,t._)("img",{src:"/img/200euros.png",width:l.sizeBilletes},null,8,B),A,(0,t._)("label",{class:(0,o.C_)([{seleccionado:13==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[13])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)]),(0,t._)("div",{class:"col",style:{"text-align":"center"},onClick:a[14]||(a[14]=e=>l.setActivo(14))},[(0,t._)("img",{src:"/img/500euros.png",width:l.sizeBilletes},null,8,j),x,(0,t._)("label",{class:(0,o.C_)([{seleccionado:14==l.indexActivo},"unidadesSize"])},(0,o.zw)(l.infoDinero[14])+" "+(0,o.zw)(e.$t("unidades","unidades")),3)])]),(0,t._)("div",M,[(0,t._)("div",P,[(0,t.Wm)(ee,{class:"sizeInfoCaja"},{default:(0,t.w5)((()=>[(0,t.Wm)(K,null,{default:(0,t.w5)((()=>[(0,t.Wm)(J,{class:"estiloTituloInfo"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("informacion_de_la_caja","Información de la caja")),1)])),_:1}),(0,t.Wm)(X,{class:"estiloInfoCaja sizeCajaInfo"},{default:(0,t.w5)((()=>[(0,t._)("p",null,[(0,t.Wm)(L,{icon:"money-bill"}),(0,t.Uk)("   "+(0,o.zw)(e.$t("total_contado","Total contado"))+": "+(0,o.zw)(l.total)+" € ",1),l.conectandoConCashlogy?((0,t.wg)(),(0,t.iD)("span",H,"   Conectando con Cashlogy. Espere...")):(0,t.kq)("",!0)]),(0,t._)("p",{onMouseover:a[16]||(a[16]=e=>{l.popOverTotalPaytef=!0}),onMouseleave:a[17]||(a[17]=e=>l.popOverTotalPaytef=!1)},[(0,t.Wm)(L,{icon:"credit-card"}),(0,t.Uk)("   "+(0,o.zw)(e.$t("total_paytef","Total Datáfono "))+" : ",1),null==l.totalPaytef?((0,t.wg)(),(0,t.iD)("div",$,W)):(0,t.kq)("",!0),(0,t.Uk)(" "+(0,o.zw)(null==l.totalPaytef?"":l.totalPaytef.toFixed(2)+" €")+"  ",1),null!=l.totalPaytef?((0,t.wg)(),(0,t.j4)(L,{key:1,icon:l.isLanPaytef?"ethernet":"globe"},null,8,["icon"])):(0,t.kq)("",!0),(0,t.Wm)(Y,{modelValue:l.popOverTotalPaytef,"onUpdate:modelValue":a[15]||(a[15]=e=>l.popOverTotalPaytef=e),direction:"right"},{header:(0,t.w5)((()=>[(0,t.Uk)("Ultima conexión")])),body:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.hourPaytef),1)])),_:1},8,["modelValue"])],32),l.trabajadorActivo?((0,t.wg)(),(0,t.iD)("p",Z,[(0,t.Wm)(L,{icon:"user"}),(0,t.Uk)("   "+(0,o.zw)(e.$t("dependienta_responsable","Dependienta responsable"))+": ",1),(0,t._)("i",null,(0,o.zw)(l.trabajadorActivo.nombre),1)])):(0,t.kq)("",!0),l.trabajadorActivo?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",U,[(0,t.Wm)(L,{icon:"user"}),(0,t._)("i",null,"   "+(0,o.zw)(e.$t("sin_dependienta_responsable","Sin dependienta responsable")),1)])),(0,t._)("div",{class:"d-flex",onClick:a[18]||(a[18]=e=>l.setCambioEmergencia())},[(0,t._)("p",null,[(0,t.Wm)(L,{icon:"box"}),(0,t.Uk)("   "),(0,t._)("span",{class:(0,o.C_)([{seleccionado:l.cambioEmActivo},"border border-2 rounded"])},(0,o.zw)(e.$t("cambio_de_emergencia","Cambio de emergencia"))+": "+(0,o.zw)(l.cambioEmergencia)+" €",3)])])])),_:1}),(0,t._)("div",F,[(0,t.Wm)(Q,{color:"primary",class:"w-100",size:"lg",onClick:a[19]||(a[19]=e=>l.confirmarCierre()),disabled:l.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("cerrar_caja","Cerrar caja")),1)])),_:1},8,["disabled"]),l.estadoTurno?((0,t.wg)(),(0,t.j4)(Q,{key:0,onClick:a[20]||(a[20]=e=>l.cambioTurno()),color:"primary",class:"w-50",size:"lg",disabled:l.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("anular_cambio_turno","Anular cambio turno")),1)])),_:1},8,["disabled"])):((0,t.wg)(),(0,t.j4)(Q,{key:1,onClick:a[21]||(a[21]=e=>l.anularTurno()),color:"primary",class:"w-50",size:"lg",disabled:l.botonesBloqueados},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("cambio_turno","Cambio turno")),1)])),_:1},8,["disabled"]))])])),_:1})])),_:1})]),(0,t._)("div",S,[(0,t.Wm)(ae,{ref:"numpadRef"},null,512)])]),(0,t.Wm)(le,{id:"modalConfirmar",tabindex:"-1",labelledby:"modalConfirmarLabel",modelValue:l.modalConfirmar,"onUpdate:modelValue":a[25]||(a[25]=e=>l.modalConfirmar=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(te,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ne,{id:"modalConfirmarLabel"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("confirmacion_de_cierre","Confirmación de cierre")),1)])),_:1})])),_:1}),(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[(0,t._)("div",V,[(0,t._)("div",E,[(0,t._)("div",q,[(0,t._)("span",I,(0,o.zw)(e.$t("datafono_manual","Datáfono manual")),1),l.numpadRef2?(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",(0,t.dG)({key:0,type:"text",class:"form-control","onUpdate:modelValue":a[22]||(a[22]=e=>l.numpadRef2.cantidad=e)},(0,t.mx)(l.cargarTotal3G(),!0)),null,16)),[[i.nr,l.numpadRef2.cantidad]]):(0,t.kq)("",!0)])])]),(0,t._)("div",R,[(0,t._)("div",G,[(0,t.Wm)(ae,{skipBalanza:!0,ref:"numpadRef2"},null,512)])])])),_:1}),(0,t.Wm)(ie,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{color:"secondary",onClick:a[23]||(a[23]=e=>l.modalConfirmar=!1),size:"lg"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("cerrar","Cerrar")),1)])),_:1}),(0,t.Wm)(Q,{color:"primary",size:"lg",onClick:a[24]||(a[24]=e=>l.cerrarCaja())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("confirmar_cierre","Confirmar cierre")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}n(57658);var J=n(44870),L=n(61837),Y=n(74313),X=n(20065),Q=n(42492),K=n.n(Q),ee=n(91076),ae=n(22483),ne=n(74834),te=n(34730),oe={name:"CerrarCajaComponent",components:{NumpadComponent:L.Z,MDBCard:Y.Yl,MDBCardBody:Y.H7,MDBCardTitle:Y.QM,MDBCardText:Y.Pp,MDBPopover:Y.SW,MDBBtn:Y.$v,MDBCheckbox:Y.IH,MDBModal:Y.j3,MDBModalHeader:Y.ol,MDBModalTitle:Y.wo,MDBModalBody:Y.Yz,MDBModalFooter:Y.ab,MDBIcon:Y.vm,MDBLoading:Y.J$},setup(){const e=(0,J.iH)(0),a="140",n=(0,J.iH)(0),o=(0,J.iH)(!0),i=(0,J.iH)(null),l=(0,J.iH)(null),r=(0,X.oR)(),u=(0,J.iH)(null),d=(0,ae.tv)(),c=(0,J.iH)([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=(0,J.iH)("Cerrar"),v=(0,J.iH)(null),_=(0,J.iH)(null),m=(0,J.iH)(0),p=(0,J.iH)(!1),f=(0,J.iH)(!1),b=(0,J.iH)(!1),g=(0,J.iH)(!1),w=((0,J.iH)(null),(0,J.iH)(null),(0,J.iH)(null),(0,t.Fl)((()=>r.state.Caja.arrayVentas)),(0,t.Fl)((()=>r.state.Trabajadores.arrayTrabajadores))),y=(0,t.Fl)((()=>r.state.Trabajadores.indexActivo)),C=(0,t.Fl)((()=>w.value&&null!=y.value&&void 0!=y.value&&w.value[y.value]?w.value[y.value]:null)),h=(0,t.Fl)((()=>r.state.BtnMenuPrincipal.botonesBloqueados)),z=(0,J.iH)(0),k=(0,J.iH)(0);function D(a){f.value&&(f.value=!1),e.value=a,i.value.setValor(c.value[a])}function T(){e.value=null,f.value=!0,i.value.setValor(m.value)}const B=(0,t.Fl)((()=>{let e=0;return e+=.01*c.value[0],e+=.02*c.value[1],e+=.05*c.value[2],e+=.1*c.value[3],e+=.2*c.value[4],e+=.5*c.value[5],e+=1*c.value[6],e+=2*c.value[7],e+=5*c.value[8],e+=10*c.value[9],e+=20*c.value[10],e+=50*c.value[11],e+=100*c.value[12],e+=200*c.value[13],e+=500*c.value[14],e+=Number(m.value.toString()),e=Number(e.toFixed(2)),e})),A=(0,J.iH)(!1);let j=!1;function x(){const e=[{_id:"0.01",valor:.01*c.value[0],unidades:c.value[0]},{_id:"0.02",valor:.02*c.value[1],unidades:c.value[1]},{_id:"0.05",valor:.05*c.value[2],unidades:c.value[2]},{_id:"0.10",valor:.1*c.value[3],unidades:c.value[3]},{_id:"0.20",valor:.2*c.value[4],unidades:c.value[4]},{_id:"0.50",valor:.5*c.value[5],unidades:c.value[5]},{_id:"1",valor:1*c.value[6],unidades:c.value[6]},{_id:"2",valor:2*c.value[7],unidades:c.value[7]},{_id:"5",valor:5*c.value[8],unidades:c.value[8]},{_id:"10",valor:10*c.value[9],unidades:c.value[9]},{_id:"20",valor:20*c.value[10],unidades:c.value[10]},{_id:"50",valor:50*c.value[11],unidades:c.value[11]},{_id:"100",valor:100*c.value[12],unidades:c.value[12]},{_id:"200",valor:200*c.value[13],unidades:c.value[13]},{_id:"500",valor:500*c.value[14],unidades:c.value[14]}];return e}async function M(){if(null!=C.value&&void 0!=C.value)try{const e=await ee.Z.post("caja/cerrarCaja",{total:B.value,detalleMonedas:x(),infoDinero:c.value,cantidad3G:Number(l.value.cantidad),cantidadPaytef:_.value,idDependienta:C.value._id,cambioEmergencia:Number(m.value.toString()),cantidad3GAutomatizado:k.value});if(!e.data)throw Error("No se ha podido cerrar la caja");r.dispatch("BtnMenuPrincipal/bloquearBotones"),K().fire({backdrop:!1,title:"Caja cerrada correctamente",icon:"success",confirmButtonText:"Continuar"}).then((e=>{e.isConfirmed&&(r.dispatch("BtnMenuPrincipal/desbloquearBotones"),d.push("/abrirCaja"))}))}catch(e){K().fire("Oops...",e.message,"error")}else K().fire("Oops...","Necesitas seleccionar un trabajador para poder cerrar","error")}function P(){o.value=!0,v.value=!0}function H(){ee.Z.post("/caja/cambioTurno").then((e=>{null!=e&&(g.value=!1)}))}function $(){ee.Z.post("caja/anularTurno").then((e=>{null!=e&&(g.value=!0)}))}(0,t.Ah)((()=>{j=!0})),(0,t.bv)((async()=>{if(A.value=!1,(0,te.re)()){A.value=!0;while(1){let e=await(0,te.HB)();if(null==e)break;if(j)break;if(e.infoDinero){c.value=e.infoDinero;break}e.err}A.value=!1}}));const N=(0,t.Fl)((()=>i.value?Number(i.value.cantidad):null));function W(e,a,n){const t=new Date;t.setTime(t.getTime()+24*n*60*60*1e3);let o="expires="+t.toUTCString();document.cookie=e+"="+a+";"+o+";path=/"}function Z(){o.value&&(o.value=!1,l.value.setValor(z.value))}return(0,t.YP)(N,(()=>{null!=e.value&&void 0!=e.value?(c.value[e.value]=N.value,W("datosCierre",JSON.stringify(c.value),7)):null!=f.value&&void 0!=f.value&&(m.value=N.value)})),(0,t.YP)(m,(async()=>{if(m.value||0===m.value)try{ee.Z.post("caja/setCambioEmActual",{valor:0===m.value?0:Number(m.value.toFixed(2))})}catch(e){}})),(0,t.YP)(c,(async()=>{try{const e=x();ee.Z.post("caja/setDetalleActual",{detalleActual:e})}catch(e){}}),{deep:!0}),(0,t.bv)((async()=>{ee.Z.post("/paytef/totalPaytefHour").then((e=>{u.value=e.data})),ne.W.cargarVentas(),ee.Z.post("/caja/comprovarTurno").then((e=>{g.value=e.data.info.estado}));let e=(await ee.Z.post("/parametros/totalPaytef")).data;_.value=e[0]?e[0]:0,b.value=!!e[1]&&e[1],ee.Z.get("tickets/getTotalDatafono3G").then((e=>{e.data&&(k.value=e.data,z.value=e.data)})),ee.Z.get("caja/getCambioEmActual").then((e=>{"number"!==typeof e.data||Number.isNaN(e.data)?m.value=0:m.value=e.data})).catch((e=>{m.value=0})),ee.Z.get("caja/getDetalleActual").then((e=>{if(e.data)for(const a in e.data)c.value[a]=e.data[a].unidades})).catch((e=>{m.value=0}))})),(0,t.JJ)("okValue",(()=>v.value?M():P())),{infoDinero:c,setActivo:D,indexActivo:e,sizeBilletes:a,total:B,numpadRef:i,cerrarCaja:M,modo:s,trabajadorActivo:C,modalConfirmar:v,confirmarCierre:P,cantidad3G:n,numpadRef2:l,estadoTurno:g,cambioTurno:H,popOverTotalPaytef:p,hourPaytef:u,anularTurno:$,totalPaytef:_,isLanPaytef:b,cargarTotal3G:Z,itsMyFirstTimePleaseBeCareful:o,cambioEmergencia:m,setCambioEmergencia:T,cambioEmActivo:f,botonesBloqueados:h,conectandoConCashlogy:A}}},ie=n(40089);const le=(0,ie.Z)(oe,[["render",O],["__scopeId","data-v-08e15f13"]]);var re=le}}]);
//# sourceMappingURL=948.327c8759.js.map