"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[278],{61837:function(a,t,e){e.d(t,{Z:function(){return f}});var o=e(73396);const n={class:"btn-group-vertical mt-1"},l={class:"btn-group"},d={class:"btn-group"},c={class:"btn-group"},u={class:"btn-group"},s={class:"btn-group"};function i(a,t,e,i,r,p){return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",l,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[0]||(t[0]=a=>i.addTecla("1"))}," 1 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[1]||(t[1]=a=>i.addTecla("2"))}," 2 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[2]||(t[2]=a=>i.addTecla("3"))}," 3 ")]),(0,o._)("div",d,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[3]||(t[3]=a=>i.addTecla("4"))}," 4 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[4]||(t[4]=a=>i.addTecla("5"))}," 5 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[5]||(t[5]=a=>i.addTecla("6"))}," 6 ")]),(0,o._)("div",c,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[6]||(t[6]=a=>i.addTecla("7"))}," 7 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[7]||(t[7]=a=>i.addTecla("8"))}," 8 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[8]||(t[8]=a=>i.addTecla("9"))}," 9 ")]),(0,o._)("div",u,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[9]||(t[9]=a=>i.deleteTecla())}," < "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[10]||(t[10]=a=>i.addTecla("0"))}," 0 "),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:t[11]||(t[11]=a=>i.okValue(Number(i.cantidad)))}," OK ")]),(0,o._)("div",s,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonComa",onClick:t[12]||(t[12]=a=>i.addTecla("."))}," , ")])])}e(42492);var r=e(32066),p=e(17555),b=e(44870);const m=(0,r.io)("http://"+p.Z.state.TocGameURL+":5051");var v={props:{skipBalanza:{type:Boolean,default:!1}},name:"NumpadComponent",setup(a,{expose:t}){const e=(0,b.iH)("0"),n=(0,o.f3)("okValue"),l=(0,b.iH)("5.5rem"),d=(0,b.iH)("5.5rem");(0,o.Fl)((()=>p.Z.state.Weight.lastWeight));function c(a){"."===a&&(e.value=e.value.replace(".","")),e.value+=a,"0"==e.value[0]&&(e.value=e.value.slice(1))}function u(){e.value=e.value.slice(0,-1),""===e.value&&(e.value="0")}function s(a){e.value=Number(a).toString()}return m.on("setBalanzaValue",(t=>{t&&!a.skipBalanza&&s(t)})),t({cantidad:e,setValor:s}),(0,o.bv)((async()=>{a.skipBalanza||s((await(0,o.Fl)((()=>p.Z.state.Weight.lastWeight))).value)})),{okValue:n,cantidad:e,addTecla:c,deleteTecla:u,setValor:s,anchoTecla:l,altoTecla:d}}},_=e(40089);const y=(0,_.Z)(v,[["render",i],["__scopeId","data-v-6fec6be8"]]);var f=y},98278:function(a,t,e){e.r(t),e.d(t,{default:function(){return O}});var o=e(73396),n=e(87139),l=e(49242);const d={class:"col-md-4 colJuntitas espacios2"},c={class:"input-group input-group-lg"},u={value:"Entrega Diària",selected:""},s={value:"COMPRAS"},i={value:"OTROS"},r={key:0,class:"input-group input-group-lg"},p={class:"col-md-5 colJuntitas"},b={class:"col-12 d-flex justify-content-between"},m={class:"col-5"},v={class:"col-4"},_={class:"col-3"},y={class:"w-100"},f={class:"concepto"},C={class:"col-md-3 m-auto"};function w(a,t,e,w,g,k){const T=(0,o.up)("MDBCardHeader"),B=(0,o.up)("MDBCardBody"),z=(0,o.up)("MDBBtn"),D=(0,o.up)("MDBCardFooter"),h=(0,o.up)("MDBCard"),N=(0,o.up)("MDBTable"),S=(0,o.up)("NumpadComponent");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",d,[(0,o.Wm)(h,{text:"center",class:"sizeSalida m-auto mt-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("salida_de_dinero","Salida de dinero")),1)])),_:1}),w.numpadRef&&w.numpadRef.cantidad?((0,o.wg)(),(0,o.j4)(B,{key:0},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>w.numpadRef.cantidad=a),type:"text",class:"form-control",placeholder:"Introduce la cantidad",disabled:""},null,512),[[l.nr,w.numpadRef.cantidad]])]),(0,o.wy)((0,o._)("select",{class:"form-select form-select-lg mb-3 mt-2","aria-label":".form-select-lg example","onUpdate:modelValue":t[1]||(t[1]=a=>w.concepto=a)},[(0,o._)("option",u,(0,n.zw)(a.$t("entrega_diaria","ENTREGA DIARIA")),1),(0,o._)("option",s,(0,n.zw)(a.$t("compras","COMPRAS")),1),(0,o._)("option",i,(0,n.zw)(a.$t("otros","OTROS")),1)],512),[[l.bM,w.concepto]]),"OTROS"===w.concepto?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>w.otrosConcepto=a),type:"text",class:"form-control",placeholder:"Introduce el concepto"},null,512),[[l.nr,w.otrosConcepto]])])):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(D,{class:"text-muted text-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{color:"success",size:"lg",onClick:t[3]||(t[3]=a=>w.confirmarSalida())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("confirmar_salida","Confirmar salida")),1)])),_:1})])),_:1})])),_:1})]),(0,o._)("div",p,[(0,o.Wm)(h,{class:"sizeCardListaSalida m-auto mt-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{style:{"text-align":"center"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(a.$t("listado_de_salidas","Listado de salidas")),1)])),_:1}),(0,o.Wm)(B,{class:"sizeCardBody"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{class:"sizeCardBodyListaSalida"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",b,[(0,o._)("th",m,(0,n.zw)(a.$t("hora","Hora")),1),(0,o._)("th",v,(0,n.zw)(a.$t("concepto","Concepto")),1),(0,o._)("th",_,(0,n.zw)(a.$t("total","Total")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(w.listaSalidas,((a,t)=>((0,o.wg)(),(0,o.iD)("tr",y,[(0,o._)("td",null,(0,n.zw)(w.getTiempo(a._id)),1),(0,o._)("td",f,(0,n.zw)(a.concepto),1),(0,o._)("td",null,(0,n.zw)(a.valor?.toFixed(2))+" €",1)])))),256))])])),_:1})])),_:1})])),_:1})]),(0,o._)("div",C,[(0,o.Wm)(S,{ref:"numpadRef"},null,512)])],64)}var g=e(44161),k=e(74313),T=e(42492),B=e.n(T),z=e(44870),D=e(20065),h=e(61837),N=e(36797),S=e.n(N),M={name:"SalidaComponent",components:{MDBCard:k.Yl,MDBCardHeader:k.uX,MDBCardBody:k.H7,NumpadComponent:h.Z,MDBBtn:k.$v,MDBCardFooter:k.Rw,MDBTable:k.re},setup(){const a=(0,D.oR)(),t=(0,o.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),e=(0,o.Fl)((()=>a.state.Trabajadores.indexActivo)),n=(0,o.Fl)((()=>t.value&&null!=e.value&&void 0!=e.value&&t.value[e.value]?t.value[e.value]:null)),l=(0,z.iH)(null),d=(0,z.iH)(""),c=(0,z.iH)("Entrega Diària"),u=(0,z.iH)([]);function s(a){const t=new Date(a);return S()(t).format("HH:mm:ss DD/MM/YYYY")}async function i(){let a;Number(l.value.cantidad)>=200&&(a=await B().fire({title:"¿Estás seguro?",text:"Se va a realizar una salida de dinero superior a 200€",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})),Number(l.value.cantidad)>=200&&!a.isConfirmed||g.Z.post("movimientos/nuevoMovimiento",{cantidad:Number(l.value.cantidad),concepto:"OTROS"===c.value?d.value:c.value,idTrabajador:n.value._id,tipo:"SALIDA"}).then((a=>{if(!a.data)throw Error("No se ha podido realizar la salida de dinero");l.value.setValor("0"),l.value.cantidad="0",B().fire("Perfecto","Salida de dinero realizada correctamente","success"),r()})).catch((a=>{B().fire("Oops...",a.message,"error")}))}function r(){g.Z.get("movimientos/getSalidasIntervalo").then((a=>{void 0!=a.data&&null!=a.data&&(u.value=a.data.reverse())})).catch((a=>{B().fire("Oops...","Error al mostrar lista","error")}))}return(0,o.bv)((()=>{r()})),(0,o.JJ)("okValue",i),{confirmarSalida:i,numpadRef:l,concepto:c,otrosConcepto:d,listaSalidas:u,getTiempo:s}}},R=e(40089);const H=(0,R.Z)(M,[["render",w],["__scopeId","data-v-562129bf"]]);var O=H}}]);
//# sourceMappingURL=278.492cf63e.js.map