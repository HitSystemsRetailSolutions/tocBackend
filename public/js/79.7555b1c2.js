"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[79],{68079:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});var o=a(73396),i=a(87139);const n=e=>((0,o.dD)("data-v-fbd8aea0"),e=e(),(0,o.Cn)(),e),l={key:0,class:"row mt-1"},u=n((()=>(0,o._)("h1",{class:"titulo text-center",style:{"font-weight":"bold"}}," Estamos cargando la información con los equipos conectados ",-1))),r={style:{display:"flex","justify-content":"center",padding:"2%",zoom:"1.6"}},s={key:0},c=n((()=>(0,o._)("div",{style:{"margin-top":"2%"}},null,-1))),d=n((()=>(0,o._)("div",{style:{display:"flex","flex-direction":"column","align-items":"center"}},[(0,o._)("h1",{style:{"font-weight":"bold","font-size":"3.5rem","margin-bottom":"2%"}}," ¡Upss! "),(0,o._)("p",{class:"subtitulo"}," Parece que falta configurar los dispositivos externos. "),(0,o._)("p",{class:"subtitulo"}," El autoconfigurado te ayudará a configurar los dispositivos con unas simples preguntas. "),(0,o._)("i",{class:"fas fa-bug",style:{"font-size":"3rem",padding:"2%",color:"indianred"}})],-1))),p=[c,d],v={key:1},f=n((()=>(0,o._)("div",{style:{"margin-top":"3%"}},null,-1))),m={class:"subtitulo2"},g={key:0,class:"subtitulo3"},y={key:1,style:{display:"flex","justify-content":"center",padding:"2%",zoom:"1.6"}},w={key:2,style:{display:"flex","justify-content":"space-evenly"}},k={key:3,style:{display:"flex","justify-content":"space-evenly"}},S=n((()=>(0,o._)("hr",null,null,-1))),h={key:2},B=n((()=>(0,o._)("div",{style:{"margin-top":"3%"}},null,-1))),D={class:"subtitulo2"},_={key:0,class:"subtitulo3"},M={key:1,style:{display:"flex","justify-content":"center",padding:"2%",zoom:"1.6"}},x={key:2,style:{display:"flex","justify-content":"space-evenly"}},P=n((()=>(0,o._)("hr",null,null,-1))),z={key:3},b=n((()=>(0,o._)("div",{style:{"margin-top":"2%"}},null,-1))),C=n((()=>(0,o._)("div",{style:{display:"flex","flex-direction":"column","align-items":"center"}},[(0,o._)("h1",{style:{"font-weight":"bold","font-size":"3.5rem","margin-bottom":"2%"}}," ¡Finalizado! "),(0,o._)("p",{class:"subtitulo"}," Los datos introducidos se han guardado correctamente. "),(0,o._)("p",{class:"subtitulo"},"Puedes reiniciar la configuración o salir."),(0,o._)("i",{class:"fas fa-bug",style:{"font-size":"3rem",padding:"2%",color:"indianred"}})],-1))),T=[b,C];function W(e,t,a,n,c,d){const b=(0,o.up)("MDBSpinner"),C=(0,o.up)("MDBModalTitle"),W=(0,o.up)("MDBModalHeader"),U=(0,o.up)("MDBIcon"),I=(0,o.up)("MDBStepperHead"),q=(0,o.up)("MDBStepperStep"),H=(0,o.up)("MDBStepper"),R=(0,o.up)("MDBBtn"),V=(0,o.up)("MDBProgressBar"),L=(0,o.up)("MDBProgress"),Z=(0,o.up)("MDBModalBody"),j=(0,o.up)("MDBModalFooter"),E=(0,o.up)("MDBModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n.openConfigurator?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",l,[u,(0,o._)("div",r,[(0,o.Wm)(b)])])),(0,o.Wm)(E,{id:"infoTPVmodal",tabindex:"-1",labelledby:"infoTPVmodal",modelValue:n.openConfigurator,"onUpdate:modelValue":t[8]||(t[8]=e=>n.openConfigurator=e),size:"xl",staticBackdrop:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{close:!1},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{id:"infoTPVmodal"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.$t("title_config_printer","Configurador de dispositivos")),1)])),_:1})])),_:1}),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(H,{ref:"btnStepper",disableStepperHeadClick:"true"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{active:""},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{icon:"1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(n.menuTextList[0])+"    ",1),(0,o.Wm)(U,{icon:"book-open"})])),_:1})])),_:1}),(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I,{icon:"2"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(n.menuTextList[1])+"   ",1),(0,o.Wm)(U,{icon:"print"})])),_:1})])),_:1}),(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I,{icon:"3"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(n.menuTextList[2])+"   ",1),(0,o.Wm)(U,{icon:"desktop"})])),_:1})])),_:1}),(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I,{icon:"5"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(n.menuTextList[3])+"   ",1),(0,o.Wm)(U,{icon:"flag"})])),_:1})])),_:1})])),_:1},512),0==n.configuratorStep?((0,o.wg)(),(0,o.iD)("div",s,p)):(0,o.kq)("",!0),2==n.configuratorStep?((0,o.wg)(),(0,o.iD)("div",v,[f,(0,o._)("div",null,[(0,o._)("p",m,(0,i.zw)(n.textList[n.textI]),1),null!=n.printType?((0,o.wg)(),(0,o.iD)("p",g," Configuración actual: "+(0,i.zw)(n.Ports[n.printType][n.checkPrinterStep]["name"]),1)):(0,o.kq)("",!0),0==n.Step||2==n.Step&&!n.confirmButtons?((0,o.wg)(),(0,o.iD)("div",y,[(0,o.Wm)(b)])):(0,o.kq)("",!0),n.confirmButtons?((0,o.wg)(),(0,o.iD)("div",w,[(0,o.Wm)(R,{outline:"danger",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[0]||(t[0]=e=>n.initConfigurator())},{default:(0,o.w5)((()=>[(0,o.Uk)("No ha impreso")])),_:1}),(0,o.Wm)(R,{outline:"success",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[1]||(t[1]=e=>{n.Step=4,n.initConfigurator()})},{default:(0,o.w5)((()=>[(0,o.Uk)("Ha impreso")])),_:1})])):(0,o.kq)("",!0),1==n.Step?((0,o.wg)(),(0,o.iD)("div",k,[(0,o.Wm)(R,{outline:"secondary",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[2]||(t[2]=e=>{n.printType=0,n.Step+=1,n.textI+=1,n.initConfigurator()})},{default:(0,o.w5)((()=>[(0,o.Uk)("USB")])),_:1}),(0,o.Wm)(R,{outline:"secondary",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[3]||(t[3]=e=>{n.printType=1,n.textI+=1,n.Step+=1,n.initConfigurator()})},{default:(0,o.w5)((()=>[(0,o.Uk)("SERIAL")])),_:1})])):(0,o.kq)("",!0),S,(0,o.Wm)(L,{height:15},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{value:n.StepPorcentage},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(n.StepPorcentage)+"% ",1)])),_:1},8,["value"])])),_:1})])])):(0,o.kq)("",!0),3==n.configuratorStep?((0,o.wg)(),(0,o.iD)("div",h,[B,(0,o._)("div",null,[(0,o._)("p",D,(0,i.zw)(n.textList[n.textI]),1),-1!=n.checkVisorStep?((0,o.wg)(),(0,o.iD)("p",_," Configuración actual: "+(0,i.zw)(n.Ports[n.printType][n.checkVisorStep]["name"]),1)):(0,o.kq)("",!0),0==n.Step||1==n.Step&&!n.confirmButtons?((0,o.wg)(),(0,o.iD)("div",M,[(0,o.Wm)(b)])):(0,o.kq)("",!0),n.confirmButtons?((0,o.wg)(),(0,o.iD)("div",x,[(0,o.Wm)(R,{outline:"danger",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[4]||(t[4]=e=>n.VisorManager())},{default:(0,o.w5)((()=>[(0,o.Uk)("No ha cambiado")])),_:1}),(0,o.Wm)(R,{outline:"success",size:"lg",style:{"font-size":"1.7rem",height:"200px",width:"200px"},onClick:t[5]||(t[5]=e=>{n.Step=3,n.VisorManager()})},{default:(0,o.w5)((()=>[(0,o.Uk)("Ha cambiado")])),_:1})])):(0,o.kq)("",!0),P,(0,o.Wm)(L,{height:15},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{value:n.StepPorcentage},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(n.StepPorcentage)+"% ",1)])),_:1},8,["value"])])),_:1})])])):(0,o.kq)("",!0),4==n.configuratorStep?((0,o.wg)(),(0,o.iD)("div",z,T)):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[0!=n.Step&&(2!=n.Step||n.confirmButtons)||0==n.configuratorStep||4==n.configuratorStep?((0,o.wg)(),(0,o.j4)(R,{key:0,color:"danger",size:"lg",onClick:t[6]||(t[6]=e=>n.exitBtn())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)([0,4].includes(n.configuratorStep)?0==n.configuratorStep?"Salir":"Reiniciar":"Continuar sin "+n.menuTextList[n.configuratorStep-1]),1)])),_:1})):(0,o.kq)("",!0),[0,4].includes(n.configuratorStep)?((0,o.wg)(),(0,o.j4)(R,{key:1,color:"success",size:"lg",onClick:t[7]||(t[7]=e=>n.continueBtn())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(0==n.configuratorStep?"Iniciar Configuración ":"Guardar y finalizar"),1)])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])],64)}a(57658);var U=a(44870),I=a(91076),q=a(16797),H=a(42492),R=a.n(H),V=a(74313),L=(a(74834),a(50085)),Z=(a(29564),{name:"InstallWizard",components:{MDBCard:V.Yl,MDBCardBody:V.H7,MDBCardText:V.Pp,MDBIcon:V.vm,QrcodeVue:L.Z,MDBInput:V.u2,MDBSpinner:V.JL,MDBModal:V.j3,MDBModalHeader:V.ol,MDBRow:V.uZ,MDBModalTitle:V.wo,MDBDropdown:V.H6,MDBContainer:V.L5,MDBCol:V.TK,MDBModalBody:V.Yz,MDBPopover:V.SW,MDBModalFooter:V.ab,MDBBtn:V.$v,MDBProgressBar:V.F5,MDBDropdownToggle:V.CU,MDBDropdownItem:V.i2,MDBDropdownMenu:V.Ed,MDBProgress:V.g9,MDBStepper:V.QI,MDBStepperHead:V.Jv,MDBStepperStep:V.x9,MDBStepperContent:V.AC},setup(){const e=(0,U.iH)(!1),t=(0,U.iH)(-1),a=(0,U.iH)(-1),i=(0,U.iH)(null),n={printerPort:"",printerRate:0,printerType:0,visorPort:"",visorRate:0},l=["Introucción","Impresora","Visor","Finalizar"],u=["Estamos recuperando tu información de la impresora..","Indique el tipo de impresora que tiene conectada","Iniciando configuración de la impresora...","Indique si la impresora ha impreso correctamente","Configuración finalizada con éxito, guardando datos...","No hemos podido configurar la impresora, inténtelo de nuevo","Estamos recuperando tu información del visor..","Iniciando configuración del visor...","Indique si el visor ha cambiado correctamente"],r=(0,U.iH)(0),s=[[{name:"Puerto 1",value:"USB1",rate:0}],[{name:"Puerto 1 | Rate 1",value:"ttyS0",rate:9600},{name:"Puerto 1 | Rate 2",value:"ttyS0",rate:115200},{name:"Puerto 1 | Rate 3",value:"ttyS0",rate:38400},{name:"Puerto 2 | Rate 1",value:"ttyS1",rate:9600},{name:"Puerto 2 | Rate 2",value:"ttyS1",rate:115200},{name:"Puerto 2 | Rate 3",value:"ttyS1",rate:38400}],[{name:"Puerto 1",value:"ttyUSB0",rate:9600},{name:"Puerto 2",value:"ttyUSB1",rate:9600},{name:"Puerto 3",value:"ttyUSB2",rate:9600}],[{name:"Puerto 1 | Rate 1",value:"ttyS0",rate:9600},{name:"Puerto 1 | Rate 2",value:"ttyS0",rate:115200},{name:"Puerto 1 | Rate 3",value:"ttyS0",rate:38400},{name:"Puerto 2 | Rate 1",value:"ttyS1",rate:9600},{name:"Puerto 2 | Rate 2",value:"ttyS1",rate:115200},{name:"Puerto 2 | Rate 3",value:"ttyS1",rate:38400}]],c=(0,U.iH)(0),d=(0,U.iH)(0),p=(0,U.iH)(null),v=(0,U.iH)(0),f=(0,U.iH)(!1);function m(){setTimeout((()=>{f.value=!0}),1e3)}async function g(){switch(c.value){case 0:d.value=5,setTimeout((()=>{d.value=15,c.value+=1,r.value+=1}),1200);break;case 2:if(!(t.value<s[i.value].length-1)){c.value+=1,g();break}t.value+=1,e.value=!1,r.value=2,console.log(s[i.value]),await I.Z.post("/instalador/sendTestPrint",{type:i.value,value:s[i.value][t.value].value,rate:s[i.value][t.value].rate}).then((e=>{setTimeout((()=>{h()}),500)}));break;case 3:d.value=50,r.value=5,e.value=!1,setTimeout((()=>{r.value=6,v.value=3,c.value=0,p?.value.changeStep(v.value),k()}),1e3);break;case 4:d.value=50,r.value=4,e.value=!1,n.printerPort=s[i.value][t.value].value,n.printerRate=s[i.value][t.value].rate,setTimeout((()=>{r.value=6,v.value=3,c.value=0,p?.value.changeStep(v.value),k()}),1e3);break}}function y(){if(console.log(v.value),0==v.value)q.Z.push("/");else{if([0,4].includes(v.value))return void q.Z.go(0);2==v.value?(c.value=3,g()):(c.value=2,k())}}function w(){0==v.value?D():S()}async function k(){switch(c.value){case 0:setTimeout((()=>{d.value+=5,c.value+=1,i.value=2,r.value+=1,k()}),1200);break;case 1:if(!(a.value<s[i.value].length-1)){c.value+=1,k();break}a.value+=1,e.value=!1,r.value=2,console.log(s[i.value]),await I.Z.post("/instalador/sendTestVisor",{value:s[i.value][a.value].value,rate:s[i.value][a.value].rate}).then((e=>{setTimeout((()=>{B()}),500)}));break;case 2:d.value=100,r.value=5,e.value=!1,setTimeout((()=>{r.value=6,v.value=4,c.value=0,p?.value.changeStep(v.value)}),1e3);break;case 3:console.log("entru"),d.value=100,r.value=4,e.value=!1,setTimeout((()=>{r.value=6,v.value=4,c.value=0,n.visorPort=s[i.value][a.value].value,n.visorRate=s[i.value][a.value].rate,p?.value.changeStep(v.value)}),1e3);break}}function S(){I.Z.post("/instalador/saveData",{data:n}).then((e=>{e.data?R().fire({title:"Configuración finalizada",text:"Los datos se han guardado correctamente",icon:"success",confirmButtonText:"Aceptar"}).then((()=>{q.Z.push("/")})):R().fire({title:"Error",text:"No se han podido guardar los datos",icon:"error",confirmButtonText:"Aceptar"}).then((()=>{q.Z.push("/")}))}))}function h(){r.value=3,e.value=!0,d.value+=5}function B(){r.value=8,e.value=!0,d.value+=5}function D(){v.value=2,g(),p?.value.changeStep(v.value)}return(0,o.bv)((()=>{m()})),{openConfigurator:f,configuratorStepModule:D,btnStepper:p,configuratorStep:v,printType:i,Ports:s,initConfigurator:g,textI:r,confirmButtons:e,checkVisorStep:a,VisorManager:k,textList:u,StepPorcentage:d,exitBtn:y,continueBtn:w,Step:c,CheckPrint:h,menuTextList:l,checkPrinterStep:t,init:m}}}),j=a(40089);const E=(0,j.Z)(Z,[["render",W],["__scopeId","data-v-fbd8aea0"]]);var F=E}}]);
//# sourceMappingURL=79.7555b1c2.js.map