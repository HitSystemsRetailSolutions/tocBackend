"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[30],{36852:function(e,t,a){a.d(t,{U:function(){return n}});const n="4.25.29"},18763:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(73396),i=a(87139);const o={class:"input-group position-absolute bottom-0 start-0"};function r(e,t,a,r,s,l){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("button",{onClick:t[0]||(t[0]=e=>r.volver()),class:"btn btn-warning ms-2",style:{"font-size":"27px","margin-bottom":"0.5rem"}},(0,i.zw)(e.$t("volver","VOLVER")),1)])}var s=a(44918),l={name:"VolverComponent",setup(){function e(){s.Z.back()}return{volver:e}}},u=a(40089);const c=(0,u.Z)(l,[["render",r]]);var d=c},66720:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(73396),i=a(44870),o=a(87139),r=a(74313),s=a(16683);const l={style:{display:"grid","grid-template-columns":"repeat(4,1fr)","grid-template-rows":"repeat(4,1fr)"}};var u={__name:"CashlogyTecladoNumerico",props:{tipo_importe:Boolean},emits:["click-key"],setup(e,{emit:t}){const a=e;let u=(0,s.vg)(1.23).charAt(1);const c=[[7,8,9,{value:"C",style:"grid-row:1/5;grid-column:4"}],[4,5,6],[1,2,3],[{value:0,style:"grid-row:4;grid-column:1/4"}]],d=[[7,8,9,{value:"C",style:"grid-row:1/5;grid-column:4"}],[4,5,6],[1,2,3],[{value:0,style:"grid-row:4;grid-column:1/3"},u]];function f(e){t("click-key",e)}return(e,t)=>((0,n.wg)(),(0,n.iD)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.tipo_importe?d:c,(e=>((0,n.wg)(),(0,n.iD)(n.HY,null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,(e=>((0,n.wg)(),(0,n.j4)((0,i.SU)(r.$v),{onClick:()=>f("object"==typeof e?e.value:e),style:(0,o.j5)(["object"==typeof e?e.style:"",{margin:"1px"}]),color:"info",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)("object"==typeof e?e.value:e),1)])),_:2},1032,["onClick","style"])))),256))],64)))),256))]))}},c=a(40089);const d=(0,c.Z)(u,[["__scopeId","data-v-1845037f"]]);var f=d},79066:function(e,t,a){a.d(t,{Z:function(){return y}});var n=a(73396),i=a(87139);const o={class:"row mt-2"},r={class:"col-md-3"},s={key:0,class:"sizeLetrasCambio"},l={class:"sizeLetrasCambio"},u={key:1,class:"estiloFalta sizeLetrasCambio"},c={key:2,class:"estiloPerfecto sizeLetrasCambio"},d={key:3,class:"estiloSobra sizeLetrasCambio"},f={class:"col-md-9"},v={class:"row"},m={class:"col text-end"},p={class:"row mt-2"},g={class:"col text-end"};function h(e,t,a,h,w,_){const b=(0,n.up)("MDBCardTitle"),C=(0,n.up)("MDBCardText"),k=(0,n.up)("MDBBtn"),y=(0,n.up)("MDBCardBody"),D=(0,n.up)("MDBCard");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",r,[(0,n.Wm)(D,{class:"cardInfoCambio"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("informacion_cambio","Información cambio")),1)])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[null!=h.cantidadTkrs&&void 0!=h.cantidadTkrs?((0,n.wg)(),(0,n.iD)("li",s,(0,i.zw)(e.$t("dinero_recibido","Dinero recibido:"))+" "+(0,i.zw)(Number(h.totalRecibido+h.cantidadTkrs).toFixed(2))+" € ",1)):(0,n.kq)("",!0),(0,n._)("li",l,(0,i.zw)(e.$t("dinero_a_pagar","Dinero a pagar:"))+" "+(0,i.zw)((Math.round(100*h.aPagar)/100).toFixed(2))+" € ",1),null!=h.cuenta&&void 0!=h.cuenta&&h.cuenta>0?((0,n.wg)(),(0,n.iD)("li",u,(0,i.zw)(e.$t("faltan","Faltan"))+" "+(0,i.zw)((Math.round(100*h.cuenta)/100).toFixed(2))+" € ",1)):(0,n.kq)("",!0),null!=h.cuenta&&void 0!=h.cuenta&&0==h.cuenta?((0,n.wg)(),(0,n.iD)("li",c,(0,i.zw)(e.$t("cambio_perfecto","Cambio perfecto")),1)):(0,n.kq)("",!0),null!=h.cuenta&&void 0!=h.cuenta&&h.cuenta<0?((0,n.wg)(),(0,n.iD)("li",d,(0,i.zw)(e.$t("sobran","Sobran"))+" "+(0,i.zw)((Math.round(100*(h.aPagar-h.totalRecibido))/100).toFixed(2))+" € ",1)):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(k,{size:"lg",color:"warning",onClick:t[0]||(t[0]=e=>h.deshacer()),class:"sizeBotones"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("desahcer","Deshacer")),1)])),_:1}),(0,n.Wm)(k,{size:"lg",color:"danger",class:"sizeBotones",onClick:t[1]||(t[1]=e=>h.limpiar())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("limpiar","Limpiar")),1)])),_:1})])),_:1})])),_:1})]),(0,n._)("div",f,[(0,n._)("div",v,[(0,n._)("div",m,[(0,n._)("img",{src:"/img/1cts.png",class:"sizeMonedas",onClick:t[2]||(t[2]=e=>h.sumar(.01))}),(0,n._)("img",{src:"/img/2cts.png",class:"sizeMonedas",onClick:t[3]||(t[3]=e=>h.sumar(.02))}),(0,n._)("img",{src:"/img/5cts.png",class:"sizeMonedas",onClick:t[4]||(t[4]=e=>h.sumar(.05))}),(0,n._)("img",{src:"/img/10cts.png",class:"sizeMonedas",onClick:t[5]||(t[5]=e=>h.sumar(.1))}),(0,n._)("img",{src:"/img/20cts.png",class:"sizeMonedas",onClick:t[6]||(t[6]=e=>h.sumar(.2))}),(0,n._)("img",{src:"/img/50cts.png",class:"sizeMonedas",onClick:t[7]||(t[7]=e=>h.sumar(.5))}),(0,n._)("img",{src:"/img/uneuro.png",class:"sizeMonedas",onClick:t[8]||(t[8]=e=>h.sumar(1))}),(0,n._)("img",{src:"/img/doseuros.png",class:"sizeMonedas",onClick:t[9]||(t[9]=e=>h.sumar(2))})])]),(0,n._)("div",p,[(0,n._)("div",g,[(0,n._)("img",{src:"/img/5euros.png",class:"sizeBilletes",onClick:t[10]||(t[10]=e=>h.sumar(5))}),(0,n._)("img",{src:"/img/10euros.png",class:"sizeBilletes",onClick:t[11]||(t[11]=e=>h.sumar(10))}),(0,n._)("img",{src:"/img/20euros.png",class:"sizeBilletes",onClick:t[12]||(t[12]=e=>h.sumar(20))}),(0,n._)("img",{src:"/img/50euros.png",class:"sizeBilletes",onClick:t[13]||(t[13]=e=>h.sumar(50))}),(0,n._)("img",{src:"/img/100euros.png",class:"sizeBilletes",onClick:t[14]||(t[14]=e=>h.sumar(100))}),(0,n._)("img",{src:"/img/200euros.png",class:"sizeBilletes",onClick:t[15]||(t[15]=e=>h.sumar(200))}),(0,n._)("img",{src:"/img/500euros.png",class:"sizeBilletes",onClick:t[16]||(t[16]=e=>h.sumar(500))})])])])])}a(57658);var w=a(44870),_=a(74313),b={name:"CambioComponent",components:{MDBCard:_.Yl,MDBCardBody:_.H7,MDBCardTitle:_.QM,MDBCardText:_.Pp,MDBBtn:_.$v},setup(e,{expose:t}){const a=(0,w.iH)(0),i=(0,n.f3)("total"),o=(0,w.iH)(i),r=(0,w.iH)([]),s=(0,w.iH)(0),l=(0,n.Fl)((()=>o.value-s.value<0?0:o.value-(a.value+s.value)));function u(e){a.value+=e,r.value.push(e)}function c(){r.value.pop();let e=0;r.value.forEach((t=>{e+=t})),a.value=e}function d(){a.value=0,r.value=[]}function f(e){s.value=Number(e)}return t({setTkrs:f}),{sumar:u,totalRecibido:a,aPagar:o,deshacer:c,limpiar:d,cantidadTkrs:s,cuenta:l}}},C=a(40089);const k=(0,C.Z)(b,[["render",h],["__scopeId","data-v-0e9fd9d8"]]);var y=k},29665:function(e,t,a){a.d(t,{Z:function(){return p}});var n=a(73396),i=a(87139);const o={key:0,class:"cantidad text-center"},r={class:"row mt-2"},s={class:"col text-center"};function l(e,t,a,l,u,c){const d=(0,n.up)("MDBModalTitle"),f=(0,n.up)("MDBModalHeader"),v=(0,n.up)("NumpadComponent"),m=(0,n.up)("MDBModalBody"),p=(0,n.up)("MDBBtn"),g=(0,n.up)("MDBModalFooter"),h=(0,n.up)("MDBModal");return(0,n.wg)(),(0,n.j4)(h,{id:"modalTkrs",tabindex:"-1",labelledby:"modalTkrsLabel",modelValue:l.modalTkrs,"onUpdate:modelValue":t[1]||(t[1]=e=>l.modalTkrs=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{id:"modalTkrsLabel"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("introduce_la_cantidad_del_tiquet_restaurante","Introduce la cantidad del tiquet restaurante")),1)])),_:1})])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n._)("div",{class:(0,i.C_)(["row",{shake:l.activarShake}])},[l.numPadRef?((0,n.wg)(),(0,n.iD)("span",o,(0,i.zw)(l.numPadRef.cantidad),1)):(0,n.kq)("",!0)],2),(0,n._)("div",r,[(0,n._)("div",s,[(0,n.Wm)(v,{max3EntersDigits:!0,onActivarShake:l.handleShake,ref:"numPadRef"},null,8,["onActivarShake"])])])])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{color:"danger",size:"lg",onClick:t[0]||(t[0]=e=>l.modalTkrs=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("cerrar","Cerrar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}var u=a(74313),c=a(48118),d=a(44870),f={name:"ModalTkrsComponent",components:{MDBModal:u.j3,MDBModalHeader:u.ol,MDBModalTitle:u.wo,MDBModalBody:u.Yz,MDBModalFooter:u.ab,MDBBtn:u.$v,NumpadComponent:c.Z},setup(e,{expose:t}){const a=(0,d.iH)(!1),i=(0,d.iH)(null),o=(0,n.f3)("setTkrs"),r=(0,d.iH)(!1);function s(){a.value=!0}function l(){a.value=!1,o(i.value.cantidad)}function u(){r.value=!0,setTimeout((()=>{r.value=!1}),500)}return(0,n.JJ)("okValue",l),t({abrirModal:s}),{modalTkrs:a,numPadRef:i,okValue:l,activarShake:r,handleShake:u}}},v=a(40089);const m=(0,v.Z)(f,[["render",l],["__scopeId","data-v-36c7c8c6"]]);var p=m},50030:function(e,t,a){a.d(t,{Z:function(){return rt}});var n=a(73396),i=a(87139);const o=e=>((0,n.dD)("data-v-0dd29e1c"),e=e(),(0,n.Cn)(),e),r={class:"row"},s={class:"row mt-2"},l={class:"col-md-3"},u={class:"contencionTicket"},c={class:"text-center"},d={class:"mt-3"},f={id:"detalleTicket"},v={key:0,class:"table"},m={class:"titulosTicket"},p={class:"titulosTicket"},g={class:"titulosTicket"},h={key:1},w={class:"text-center"},_={class:"table mt-3"},b={class:"titulosTicket"},C={class:"titulosTicket"},k={class:"titulosTicket"},y=o((()=>(0,n._)("hr",null,null,-1))),D={class:"sizeLetrasCambio"},E={key:0,class:"sizeLetrasCambio"},A={key:1,class:"estiloParcial sizeLetrasCambio"},N={key:2,class:"estiloFalta sizeLetrasCambio"},T={key:3,class:"estiloPerfecto sizeLetrasCambio"},M={key:4,class:"estiloSobra sizeLetrasCambio"},O={key:5,class:"estiloSobra sizeLetrasCambio"},x={key:6,class:"estiloPendiente sizeLetrasCambio"},P={class:"col-md-9",style:{"padding-left":"4vmin"}},z={class:"row"},R={class:"col text-end",style:{"margin-top":"2vmin"}},B=["src","onClick"],F={class:"row mt-2"},I={class:"col text-end",style:{"margin-top":"2vmin"}},S=["src","onClick"],Z={class:"row"},j={class:"col mt-4"},U={class:"divBotones"},V=["disabled"],H=["disabled"],q=["disabled"],L=["disabled"],$={class:"row"},W={class:"cantidad text-center"},G={class:"row mt-2"},J={class:"col text-center"},K={key:0,class:"estadoPaytef"},Y=o((()=>(0,n._)("h3",null,"Estado:",-1))),Q={style:{"margin-top":"1vm","font-weight":"300",color:"orangered","font-size":"1.3em"}},X={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function ee(e,t,a,o,ee,te){const ae=(0,n.up)("MDBCardTitle"),ne=(0,n.up)("MDBCardText"),ie=(0,n.up)("MDBBtn"),oe=(0,n.up)("MDBCardBody"),re=(0,n.up)("MDBCard"),se=(0,n.up)("ModalTkrsComponent"),le=(0,n.up)("NumpadComponent"),ue=(0,n.up)("MDBModalBody"),ce=(0,n.up)("MDBModal"),de=(0,n.up)("MDBIcon"),fe=(0,n.up)("CashlogyCobroView");return(0,n.wg)(),(0,n.j4)(ce,{id:"modalCobro",tabindex:"-1",labelledby:"modalCobro",modelValue:o.modalCobro,"onUpdate:modelValue":t[9]||(t[9]=e=>o.modalCobro=e),staticBackdrop:!0,animation:!1,fullscreen:""},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,{style:{"background-color":"#fff5e9"}},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n._)("div",s,[(0,n._)("div",l,[(0,n.Wm)(re,{class:"cardInfoCambio",style:{height:"80vmin"}},{default:(0,n.w5)((()=>[(0,n.Wm)(oe,{style:{display:"flex","flex-direction":"column","justify-content":"space-evenly"}},{default:(0,n.w5)((()=>[(0,n._)("div",u,["PAGO DEUDA"!=o.modoCesta?((0,n.wg)(),(0,n.j4)(ae,{key:0},{default:(0,n.w5)((()=>[(0,n._)("h2",c,(0,i.zw)(e.$t("ticket","Ticket"))+":",1)])),_:1})):(0,n.kq)("",!0),(0,n._)("div",d,[(0,n._)("div",f,[(0,n._)("div",null,["PAGO DEUDA"!=o.modoCesta?((0,n.wg)(),(0,n.iD)("table",v,[(0,n._)("tr",null,[(0,n._)("th",m,(0,i.zw)(e.$t("producto","Producto")),1),(0,n._)("th",p,(0,i.zw)(e.$t("subtotal","Subtotal")),1),(0,n._)("th",g,(0,i.zw)(e.$t("unidades","Unidades")),1)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.productos,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t,style:(0,i.j5)(e.pagado?"text-decoration: line-through":"")},[(0,n._)("td",null,(0,i.zw)(e.nombre),1),(0,n._)("td",null,(0,i.zw)(o.calcularImporteItem(e))+"€",1),(0,n._)("td",null,(0,i.zw)(e.unidades),1)],4)))),128))])):(0,n.kq)("",!0),o.mostrarListaDeudas?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("h2",w,(0,i.zw)(e.$t("deuda","Deuda"))+"/s: ",1),(0,n._)("table",_,[(0,n._)("tr",null,[(0,n._)("th",b,(0,i.zw)(e.$t("producto","Producto")),1),(0,n._)("th",C,(0,i.zw)(e.$t("subtotal","Subtotal")),1),(0,n._)("th",k,(0,i.zw)(e.$t("unidades","Unidades")),1)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.productosDeuda,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t,style:(0,i.j5)(e.pagado?"text-decoration: line-through":"")},[(0,n._)("td",null,(0,i.zw)(e.nombre),1),(0,n._)("td",null,(0,i.zw)(e.subtotal.toFixed(2))+" € ",1),(0,n._)("td",null,(0,i.zw)(e.unidades),1)],4)))),128))])])):(0,n.kq)("",!0)])])])]),y,(0,n.Wm)(ne,null,{default:(0,n.w5)((()=>[(0,n._)("li",D,(0,i.zw)(e.$t("dinero_a_pagar","Dinero a pagar:"))+" "+(0,i.zw)((Math.round(100*o.aPagar)/100).toFixed(2))+" € ",1),null!=o.cantidadTkrs&&void 0!=o.cantidadTkrs?((0,n.wg)(),(0,n.iD)("li",E,(0,i.zw)(e.$t("dinero_recibido","Dinero recibido:"))+" "+(0,i.zw)(Number(o.totalRecibido+o.cantidadTkrs+o.dejaCuenta).toFixed(2))+" € ",1)):(0,n.kq)("",!0),o.deudasSeleccionadas.length>0&&o.montoDeuda>0?((0,n.wg)(),(0,n.iD)("li",A,(0,i.zw)(e.$t("pago_parcial","Pago parcial"))+": "+(0,i.zw)(o.montoDeuda)+"€ ",1)):(0,n.kq)("",!0),null!=o.cuenta&&void 0!=o.cuenta&&o.cuenta>0?((0,n.wg)(),(0,n.iD)("li",N,(0,i.zw)(e.$t("faltan","Faltan"))+" "+(0,i.zw)((Math.round(100*o.cuenta)/100).toFixed(2))+" € ",1)):(0,n.kq)("",!0),null!=o.cuenta&&void 0!=o.cuenta&&0==o.cuenta?((0,n.wg)(),(0,n.iD)("li",T,(0,i.zw)(e.$t("cambio_perfecto","Cambio perfecto")),1)):(0,n.kq)("",!0),null!=o.cuenta&&void 0!=o.cuenta&&o.cuenta<0&&!(o.deudasSeleccionadas.length>0&&o.montoDeuda>0)?((0,n.wg)(),(0,n.iD)("li",M,(0,i.zw)(e.$t("sobran","Sobran"))+" "+(0,i.zw)(o.valorSobra())+" € ",1)):(0,n.kq)("",!0),null!=o.cuenta&&void 0!=o.cuenta&&o.cuenta<0&&o.deudasSeleccionadas.length>0&&o.montoDeuda>0?((0,n.wg)(),(0,n.iD)("li",O,(0,i.zw)(e.$t("sobran","Sobran"))+" "+(0,i.zw)(o.valorSobra())+" € ",1)):(0,n.kq)("",!0),o.deudasSeleccionadas.length>0&&o.montoDeuda>0?((0,n.wg)(),(0,n.iD)("li",x,(0,i.zw)(e.$t("saldo_pendiente","Saldo pendiente"))+": "+(0,i.zw)((Math.round(100*(o.aPagar-o.montoDeuda-o.dejaCuenta))/100).toFixed(2))+"€ ",1)):(0,n.kq)("",!0)])),_:1}),(0,n._)("div",null,[(0,n.Wm)(ie,{size:"lg",color:"warning",onClick:t[0]||(t[0]=e=>o.deshacer()),class:"sizeBotones"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("desahcer","Deshacer")),1)])),_:1}),(0,n.Wm)(ie,{size:"lg",color:"danger",class:"sizeBotones",onClick:t[1]||(t[1]=e=>o.limpiar())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("limpiar","Limpiar")),1)])),_:1})])])),_:1})])),_:1})]),(0,n._)("div",P,[(0,n._)("div",z,[(0,n._)("div",R,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([.01,.02,.05,.1,.2,.5,1,2],(e=>(0,n._)("img",{src:"/img/"+(e<1?100*e+"cts":1==e?"uneuro":"doseuros")+".png",class:"sizeMonedas",onClick:t=>o.sumar(e)},null,8,B))),64))])]),(0,n._)("div",F,[(0,n._)("div",I,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([5,10,20,50,100,200,500],(e=>(0,n._)("img",{src:"/img/"+e+"euros.png",class:"sizeBilletes",onClick:t=>o.sumar(e)},null,8,S))),64))])]),(0,n._)("div",Z,[(0,n._)("div",j,[(0,n._)("div",U,[(0,n._)("img",{disabled:o.loading,src:"img/img-efectivo.png",onClick:t[2]||(t[2]=e=>o.setFormaPago("EFECTIVO")),style:(0,i.j5)(["EFECTIVO"===o.formaPago?"zoom: 1.3;":"filter: grayscale(1);",Math.round(100*o.aPagar)/100-o.dejaCuenta>=1e3&&"EFECTIVO"==o.formaPago?"filter: grayscale(1);opacity:0.5;":""]),width:"300",alt:"Seleccionar pago con EFECTIVO"},null,12,V),o.modalTkrsRef&&!o.prohibirTkRestaurant?((0,n.wg)(),(0,n.iD)("img",{key:0,disabled:o.loading,src:"img/img-tkrs.png",onClick:t[3]||(t[3]=e=>o.loading?null:o.modalTkrsRef.abrirModal()),style:(0,i.j5)("TKRS"===o.formaPago?"zoom: 1.3;":"filter: grayscale(1);"),width:"300",alt:"Seleccionar pago con ticket restaurante"},null,12,H)):(0,n.kq)("",!0),0===o.tipoDatafono3G?((0,n.wg)(),(0,n.iD)("img",{key:1,disabled:o.loading,src:"img/img-tarjetas.png",onClick:t[4]||(t[4]=e=>o.setFormaPago("TARJETA")),style:(0,i.j5)("TARJETA"===o.formaPago?"zoom: 1.3;":"filter: grayscale(1);"),width:"300",alt:"Seleccionar pago con TARJETA"},null,12,q)):(0,n.kq)("",!0),1===o.tipoDatafono3G?((0,n.wg)(),(0,n.iD)("img",{key:2,disabled:o.loading,src:"img/img-3g.png",onClick:t[5]||(t[5]=e=>o.setFormaPago("DATAFONO_3G")),style:(0,i.j5)("DATAFONO_3G"===o.formaPago?"zoom: 1.3;":"filter: grayscale(1);"),width:"300",alt:"Seleccionar pago con DATAFONO 3G"},null,12,L)):(0,n.kq)("",!0)])])])])])]),(0,n.Wm)(se,{ref:"modalTkrsRef"},null,512),(0,n.Wm)(ce,{id:"modalNumpad",tabindex:"-1",labelledby:"modalTkrsLabel",modelValue:o.modalNumpad,"onUpdate:modelValue":t[6]||(t[6]=e=>o.modalNumpad=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,null,{default:(0,n.w5)((()=>[(0,n._)("div",$,[(0,n._)("span",W,(0,i.zw)(),1)]),(0,n._)("div",G,[(0,n._)("div",J,[(0,n.Wm)(le,{ref:"numPadRef"},null,512)])])])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(ie,{class:"ms-2 botoncicos-abajo volver",disabled:o.loading,color:"warning",onClick:t[7]||(t[7]=e=>o.cancelarVenta())},{default:(0,n.w5)((()=>[(0,n.Wm)(de,{icon:"arrow-left"})])),_:1},8,["disabled"]),o.loading?((0,n.wg)(),(0,n.iD)("div",K,[(0,n._)("div",null,[Y,(0,n._)("span",Q,(0,i.zw)(o.procesoDatafono),1)])])):(0,n.kq)("",!0),(0,n.Wm)(ie,{class:"botonCobrar botoncicos-abajo",color:"primary",style:(0,i.j5)([Math.round(100*o.aPagar)/100-o.dejaCuenta>=3e3&&!o.cesta?.idCliente?"color: smoke; background-color: gray;opacity:0.7;":"",{right:"4vmin"}]),disabled:o.loading,onClick:t[8]||(t[8]=e=>o.cobrar())},{default:(0,n.w5)((()=>[o.loading?((0,n.wg)(),(0,n.iD)("span",X)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,i.zw)(e.$t("pagar","Pagar")),1)])),_:1},8,["style","disabled"]),(0,n.Wm)(fe,{ref:"CashlogyCobroViewRef"},null,512)])),_:1})])),_:1},8,["modelValue"])}a(57658);var te=a(44870),ae=a(79066),ne=a(18763),ie=a(29665),oe=a(42492),re=a.n(oe),se=a(48118),le=a(49242),ue=a(74313),ce=a(92136),de=a(12195),fe=a(74025),ve=a(66720),me=a(68315),pe=a(13150),ge=a(16683),he=a(34730),we=a(88807);const _e=e=>((0,n.dD)("data-v-98d6db00"),e=e(),(0,n.Cn)(),e),be={key:0,class:"w-100 h-100"},Ce={key:0,class:"d-flex flex-column w-100 h-100",style:{"justify-content":"start"}},ke=["src","onClick"],ye=["src","onClick"],De={class:"frame-Cashlogy",style:{flex:"1 1 auto"}},Ee={class:"col-9 h-100"},Ae={class:"frame-Cashlogy flex-column",style:{"justify-content":"start"}},Ne={style:{"text-align":"start","padding-top":"4rem"}},Te=_e((()=>(0,n._)("br",null,null,-1))),Me={key:0},Oe={key:1},xe={key:2},Pe={class:"col h-100"},ze={class:"frame-Cashlogy flex-column"},Re=_e((()=>(0,n._)("label",null,"Importe entrada manual",-1))),Be=_e((()=>(0,n._)("br",null,null,-1))),Fe={key:0,style:{flex:"0 0 20%"},class:"items-Cashlogy"},Ie={key:1,style:{flex:"0 0 20%"},class:"items-Cashlogy"},Se={key:1,class:"frame-Cashlogy flex-column"},Ze=_e((()=>(0,n._)("br",null,null,-1))),je={key:2,class:"frame-Cashlogy flex-column"},Ue=_e((()=>(0,n._)("br",null,null,-1))),Ve={key:1,class:"frame-Cashlogy flex-column"},He={class:"d-flex flex-column",style:{gap:"2px"}},qe=_e((()=>(0,n._)("span",null,"Falta cambios para la devolución",-1))),Le={key:2,class:"frame-Cashlogy flex-column"},$e={class:"d-flex flex-column",style:{gap:"2px"}},We={key:3,class:"frame-Cashlogy flex-column"},Ge=_e((()=>(0,n._)("br",null,null,-1)));var Je={__name:"CashlogyCobroView",setup(e,{expose:t}){const a=(0,te.iH)(null),o=(0,te.iH)(null),r=(0,te.iH)(""),s=(0,te.iH)(""),l=(0,te.iH)(""),u=(0,te.iH)(""),c=(0,te.iH)(""),d=(0,te.iH)(""),f=(0,te.iH)(!1),v=(0,te.iH)(!1),m=(0,te.iH)(!1),p=((0,te.iH)(!1),(0,te.iH)(!1)),g=(0,te.iH)("Dispensando");function h(e){return e?"CANCELAR MANUALMENTE":"DEVOLUCIÓN MANUAL"}async function w(){return pe.Z.activado()}const _=(0,te.iH)({});function b(){v.value=!0,pe.Z.boton_pulsar("BOT_CANCELAR")}const C=(0,te.iH)(!1);function k(){C.value=!0,D.value=(0,ge.vg)(E)}function y(e){E=(0,ge.ul)((0,ge.XX)(T())+e),D.value=(0,ge.vg)(E)}const D=(0,te.iH)("");let E=0,A=(0,ge.vg)(1.23).charAt(1),N=2;function T(){if(!D.value)return 0;let e=D.value,[t,a]=e.split(A);t||(t="0"),a||(a="0");while(a.length<N)a+="0";let n=100*parseInt(t,10)+parseInt(a,10);return n/100}function M(e){let t=D.value,[a,n]=t.split(A);if("number"==typeof e){if(null!=n){if(n.length>=N)return}else if(a.length>=8)return;"0"==t&&(t=""),t+=e.toString(),D.value=t}else if("C"==e)t="",D.value=t;else if(e==A){if(null!=n)return;""==t&&(t="0"),t+=e,D.value=t}E=T()}function O(){C.value=!1,E=T(),pe.Z.importe_entrado_manualmente_en_cobrar(E)}function x(){C.value=!1}const P=(0,te.iH)(""),z=new ge.JQ((e=>{l.value=(0,ge.vg)(e.importe_falta_devolver,!0),p.value=e.opcion_cancelar,P.value=h(e.cancelando),F.value="PANTALLA_FALTA_CAMBIO_DEVOLUCION"}));function R(){m.value=!0,pe.Z.boton_pulsar("BOT_ACEPTAR")}const B=(0,te.iH)(),F=(0,te.iH)(null);function I(e){ce.socket[e]("Cashlogy.update",S)}function S(e){switch(F.value=e.proceso,e.proceso){case"COBRAR":switch(B.value=e.state,e.state){case"ENTRADA":r.value=(0,ge.vg)(e.importe_entrado,!0),f.value=e.importe_pendiente<0,f.value?l.value=(0,ge.vg)(-e.importe_pendiente,!0):s.value=(0,ge.vg)(e.importe_pendiente,!0),d.value=(0,ge.vg)(e.importe_entrado_manualmente,!0);break;case"VUELTA":case"CANCELAR":l.value=(0,ge.vg)(e.importe_a_devolver,!0);break}break;case"AÑADIR_CAMBIOS":_.value=(0,ge.c)(e),u.value=(0,ge.vg)(e.importe_entrado,!0),c.value=(0,ge.vg)(e.importe_recicladores,!0);break;case"SOLO_DISPENSAR":l.value=(0,ge.vg)(e.importe_a_devolver,!0);break}}let Z=!1;async function j(e,t,n){let i;if(Z=!0,F.value=null,we.Z.Info({importe_a_cobrar:e,totalRecibido:t,cantidadTkrs:n},"CashlogyCobroView","run-in"),await(0,ge.R_)(a),a.value.texto_botones_para_abort("COBRAR MANUALMENTE","CANCELAR COBRO"),i=await a.value.start(),i)return we.Z.Info(i,"CashlogyCobroView","run-out"),Z=!1,i;I("on");try{await pe.Z.saveGrupoProcesos("COBRAR",{importe_a_cobrar:e}),v.value=!1,E=t+n,await pe.Z.importe_entrado_manualmente_en_cobrar(E);let r=await pe.Z.cobrar(e);if(null!=r.importe_entrado&&(a.value.texto_botones_para_abort(h(r.operativa_cancelar)),await pe.Z.saveGrupoProcesos(null,{importe_entrado:r.importe_entrado})),i=await(a.value?.informacionAbort_y_cancel(r)),!i){i=null;let e=r.importe_falta_devolver??0,t=0,n=r.error_en_la_devolucion,s=r.operativa_cancelar;g.value=s?"Cancelando":"Dispensando";while(!i){if(F.value="ERROR_DEVOLUCION",await(0,ge.R_)(o),await o.value.run({error_en_la_devolucion:n}),0==e){i={cancelado:s,importe_falta_devolver:0,importe_anadido_en_cambios:t};break}let[l,u]=await a.value.startPantalla_withReset(z,{importe_falta_devolver:e,opcion_cancelar:!s&&0==r.importe_devuelto&&e==r.importe_falta_devolver,cancelando:s});if(u)i=u;else if("AÑADIR"==l){F.value=null,m.value=!1;let o=await pe.Z.anadir_cambios_y_devolver(e);i=await(a.value?.informacionAbort_y_cancel(o)),i?i.importe_falta_devolver=e:(n=o.error_en_la_devolucion,e=o.importe_falta_devolver,t+=o.importe_anadido_en_cambios,await pe.Z.saveGrupoProcesos(null,{importe_anadido_en_cambios:t}))}else if("CANCELAR"==l){s=!0,a.value.texto_botones_para_abort(h(!0)),e=r.importe_entrado,g.value="Cancelando";let t=await pe.Z.solo_dispensar(e);i=await(a.value?.informacionAbort_y_cancel(t)),i?i.importe_falta_devolver=e:(n=t.error_en_la_devolucion,e=t.importe_falta_devolver)}else i={cancelado:s,importe_falta_devolver:e,importe_anadido_en_cambios:t}}}i.abort_id||(await pe.Z.saveGrupoProcesos(null),await(0,he.i_)(i.importe_anadido_en_cambios,"Añadir Cambios","ENTRADA_DINERO"))}catch(r){console.log(r),i={cancelado:!0}}return I("off"),a.value?.end(),we.Z.Info(i,"CashlogyCobroView","run-out"),Z=!1,i}return(0,n.Ah)((()=>{Z&&pe.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),t({run:j,activado:w}),(e,t)=>((0,n.wg)(),(0,n.j4)(me.Z,{enProceso:null!=F.value,ref_key:"CashlogyPantalla_ref",ref:a},{default:(0,n.w5)((()=>["COBRAR"==F.value?((0,n.wg)(),(0,n.iD)("div",be,["ENTRADA"==B.value?((0,n.wg)(),(0,n.iD)("div",Ce,[(0,n._)("div",{class:"text-end",style:(0,i.j5)({visibility:C.value?"visible":"hidden"})},[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([1,2,5,10,20,50,100,200],(e=>(0,n._)("img",{src:(0,te.SU)(ge.Cq)("monedas",e),class:"sizeMonedas",onClick:t=>y(e)},null,8,ke))),64))],4),(0,n._)("div",{class:"text-end",style:(0,i.j5)([{"margin-top":"2vmin"},{visibility:C.value?"visible":"hidden"}])},[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([500,1e3,2e3,5e3,1e4,2e4,5e4],(e=>(0,n._)("img",{src:(0,te.SU)(ge.Cq)("billetes",e),class:"sizeBilletes",onClick:t=>y(e)},null,8,ye))),64))],4),(0,n._)("div",De,[(0,n._)("div",Ee,[(0,n._)("div",Ae,[(0,n._)("div",Ne,[(0,n.Uk)(" Importe entrado: "+(0,i.zw)(r.value),1),Te,f.value?((0,n.wg)(),(0,n.iD)("div",Oe," Importe a devolver: "+(0,i.zw)(l.value),1)):((0,n.wg)(),(0,n.iD)("div",Me," Importe pendiente: "+(0,i.zw)(s.value),1)),d.value?((0,n.wg)(),(0,n.iD)("div",xe," Importe manual: "+(0,i.zw)(d.value),1)):(0,n.kq)("",!0)])])]),(0,n._)("div",Pe,[(0,n._)("div",ze,[(0,n._)("div",{style:(0,i.j5)([{flex:"0 0 35%","align-content":"center"},{visibility:C.value?"visible":"hidden"}])},[((0,n.wg)(),(0,n.j4)(ve.Z,{key:0,tipo_importe:"",onClickKey:M}))],4),(0,n._)("div",{style:(0,i.j5)({visibility:C.value?"visible":"hidden"})},[Re,Be,(0,n.wy)((0,n._)("input",{type:"text",readonly:"",onFocus:t[0]||(t[0]=e=>{e.currentTarget?.blur?.()}),"onUpdate:modelValue":t[1]||(t[1]=e=>D.value=e),class:"cashlogyCierreFondoCaja_selected",style:{"text-align":"end","border-radius":"4px"}},null,544),[[le.nr,D.value]])],4),C.value?((0,n.wg)(),(0,n.iD)("div",Fe,[(0,n.Wm)((0,te.SU)(ue.$v),{onClick:O,color:"success",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1}),(0,n.Wm)((0,te.SU)(ue.$v),{onClick:x,color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cancelar ")])),_:1})])):((0,n.wg)(),(0,n.iD)("div",Ie,[(0,n.Wm)((0,te.SU)(ue.$v),{disabled:v.value,onClick:b,color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cancelar ")])),_:1},8,["disabled"]),(0,n.Wm)((0,te.SU)(ue.$v),{disabled:v.value,onClick:k,color:"warning",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cobro Manual ")])),_:1},8,["disabled"])]))])])])])):(0,n.kq)("",!0),"VUELTA"==B.value?((0,n.wg)(),(0,n.iD)("div",Se,[(0,n.Uk)(" Dispensando"),Ze,(0,n.Uk)(" Importe a devolver: "+(0,i.zw)(l.value),1)])):(0,n.kq)("",!0),"CANCELAR"==B.value?((0,n.wg)(),(0,n.iD)("div",je,[(0,n.Uk)(" Cancelando"),Ue,(0,n.Uk)(" Importe a devolver: "+(0,i.zw)(l.value),1)])):(0,n.kq)("",!0)])):(0,n.kq)("",!0),"PANTALLA_FALTA_CAMBIO_DEVOLUCION"==F.value?((0,n.wg)(),(0,n.iD)("div",Ve,[(0,n._)("div",He,[qe,(0,n._)("span",null,"Importe falta devolver: "+(0,i.zw)(l.value),1),(0,n.Wm)((0,te.SU)(ue.$v),{onClick:t[2]||(t[2]=e=>(0,te.SU)(z).R("AÑADIR")),color:"success",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" añadir cambios ")])),_:1}),(0,n.Wm)((0,te.SU)(ue.$v),{onClick:t[3]||(t[3]=e=>(0,te.SU)(z).R("MANUAL")),color:"warning",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(P.value),1)])),_:1}),p.value?((0,n.wg)(),(0,n.j4)((0,te.SU)(ue.$v),{key:0,onClick:t[4]||(t[4]=e=>(0,te.SU)(z).R("CANCELAR")),color:"danger",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" cancelar ")])),_:1})):(0,n.kq)("",!0)])])):(0,n.kq)("",!0),"AÑADIR_CAMBIOS"==F.value?((0,n.wg)(),(0,n.iD)("div",Le,[(0,n.Wm)(de.Z,{tabla:_.value,style:{flex:"0 0 75%"}},null,8,["tabla"]),(0,n._)("div",$e,[(0,n._)("span",null,"Importe introducido : "+(0,i.zw)(u.value),1),(0,n._)("span",null,"Importe total: "+(0,i.zw)(c.value),1),(0,n._)("span",null,"Importe falta devolver: "+(0,i.zw)(l.value),1),(0,n.Wm)((0,te.SU)(ue.$v),{disabled:m.value,onClick:R,color:"success",class:"boton-Cashlogy"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1},8,["disabled"])])])):(0,n.kq)("",!0),"SOLO_DISPENSAR"==F.value?((0,n.wg)(),(0,n.iD)("div",We,[(0,n._)("div",null,[(0,n.Uk)((0,i.zw)(g.value),1),Ge,(0,n.Uk)(" Importe a devolver: "+(0,i.zw)(l.value),1)])])):(0,n.kq)("",!0),"ERROR_DEVOLUCION"==F.value?((0,n.wg)(),(0,n.j4)(fe.Z,{key:4,ref_key:"CashlogyErrorDevolucion_ref",ref:o},null,512)):(0,n.kq)("",!0)])),_:1},8,["enProceso"]))}},Ke=a(40089);const Ye=(0,Ke.Z)(Je,[["__scopeId","data-v-98d6db00"]]);var Qe=Ye,Xe=a(91076),et=a(20065),tt=a(22483),at=a(36852),nt=a(46375),it={name:"CobroView",components:{CambioComponent:ae.Z,MDBCard:ue.Yl,MDBBtn:ue.$v,MDBCardBody:ue.H7,MDBCardText:ue.Pp,NumpadComponent:se.Z,VolverComponent:ne.Z,ModalTkrsComponent:ie.Z,MDBIcon:ue.vm,MDBModal:ue.j3,MDBModalBody:ue.Yz,CashlogyCobroView:Qe},setup(e,{expose:t}){const a=(0,et.oR)(),i=(0,tt.tv)(),o=(0,te.iH)(!1),r=(0,te.iH)(!1),s=(0,n.Fl)((()=>a.state.Datafono.procesoActual)),l=(0,te.iH)(null),u=(0,te.iH)("EFECTIVO"),c=(0,te.iH)(0),d=(0,te.iH)(null),f=(0,te.iH)(!1),v=(0,te.iH)(!1),m=(0,te.iH)(0),p=(0,te.iH)(!1),g=(0,te.iH)(0),h=(0,te.iH)(0),w=(0,te.iH)([]),_=(0,te.iH)(null),b=(0,n.Fl)((()=>Z.value?.lista)),C=(0,n.Fl)((()=>Z.value?.dataVersion||0)),k=((0,te.iH)(at.U),(0,te.iH)()),y=(0,n.Fl)((()=>D.value&&"PAGO COMBINADO"==k.value?Z.value?.listaDeudas||[]:D.value&&"PAGO DEUDA"==k.value?Z.value?.lista||[]:null)),D=(0,n.Fl)((()=>"PAGO DEUDA"==Z.value?.modo||"PAGO COMBINADO"==Z.value?.modo)),E=((0,n.f3)("resetGeneral"),(0,te.iH)(null));let A=(0,n.Fl)((()=>{if(F.value&&F.value-m.value<0)return 0;if(F.value){let e=h.value==F.value?B.value:0;return F.value-(g.value+m.value+e)}if(h.value-m.value<0)return 0;{let e=h.value==F.value?B.value:0;return"RECOGER ENCARGO"!=Z?.value?.modo&&"PAGO DEUDA"!=Z?.value?.modo&&"PAGO COMBINADO"!=Z?.value?.modo||(e=B.value),Math.round(100*(h.value-(g.value+m.value+e)))/100}}));function N(){const e=Z?.value?.modo||{};return"PAGO DEUDA"==e&&F.value>0?(Math.round(100*(g.value+m.value-F.value))/100).toFixed(2):"RECOGER ENCARGO"==e?(Math.round(100*(B.value+g.value+m.value-h.value))/100).toFixed(2):(Math.round(100*(g.value+m.value+B.value-h.value))/100).toFixed(2)}const T=(0,n.Fl)((()=>a.state.Trabajadores.indexActivo)),M=(0,n.Fl)((()=>a.state.Trabajadores.arrayTrabajadores)),O=(0,n.Fl)((()=>a.state.Cestas.arrayCestas)),x=(0,n.Fl)((()=>{const e=a.state.Cestas.Descuento;return void 0===e||isNaN(e)?0:e})),P=(0,n.Fl)((()=>M.value&&void 0!=T.value&&null!=T.value&&M.value[T.value]?M.value[T.value]:null)),z=(0,n.Fl)((()=>a.state.Deudas.deudasSeleccionadas)),R=(0,n.Fl)((()=>a.state.Encargos.encargoSeleccionado)),B=(0,n.Fl)((()=>{if(z.value.length>0){let e=0;for(const t of z.value)t.dejaCuenta&&(e+=t.dejaCuenta);return e}return R.value&&"RECOGER ENCARGO"==Z?.value?.modo&&R.value.dejaCuenta||0})),F=(0,n.Fl)((()=>a.state.Deudas.totalAPagar));function I(e){m.value=Number(e),e>=ee(Z.value)?u.value="TKRS":u.value="EFECTIVO"}function S(e){p.value||(m.value<ee(Z.value)&&m.value>=0?"TARJETA"===e&&m.value>0?re().fire("Oops...","De momento el Ticket Restaurant solo se puede combinar con EFECTIVO","error"):u.value=e:re().fire("¡Eo!","El ticket resturant ya cubre el total de la venta","error"))}const Z=(0,n.Fl)((()=>{if(O.value&&Array.isArray(M.value)&&"number"===typeof T.value&&M.value[T.value]){const e=M.value[T.value].idCesta;for(let t=0;t<O.value.length;t++)if(O.value[t]._id==e)return O.value[t]}return null}));async function j(e){window.__globalKeydownHandler&&document.removeEventListener("keydown",window.__globalKeydownHandler);const t=Z.value?Z.value.lista.filter((e=>e.pagado)).reduce(((e,t)=>e+t.subtotal),0):0;h.value=Z.value?ee(Z.value)-t:0,o.value=!0}async function U(){return Math.round(100*h.value)/100-B.value>=3e3&&!Z.value?.idCliente?re().fire({title:"Cliente Requerido",text:"Para cobrar mas de 3000€, debe seleccionar un cliente de facturación.",icon:"info"}):Math.round(100*h.value)/100-B.value>=1e3&&"EFECTIVO"==u.value?re().fire({title:"Vaya...",text:"No se puede cobrar mas de 1000€ en efectivo.",icon:"info"}):void(p.value?we.Z.Warn(`cobrar loading.value: ${p.value}`,"modalCobroView.vue"):(p.value=!0,we.Z.Info("cobrar inicio","modalCobroView.vue"),"PAGO COMBINADO"==Z.value.modo?await V():"PAGO DEUDA"==Z.value.modo?await H():await q()))}async function V(){try{const e=JSON.parse(JSON.stringify(Z.value.lista)),t=e.some((e=>e.pagado));if("TARJETA"==u.value){a.dispatch("Datafono/setEstado","PENDIENTE");const e=await Xe.Z.post("tickets/crearPagoCombinadoPaytef",{total:ee(Z.value),idCesta:Z.value._id,idTrabajador:P.value._id,tipo:u.value,tkrsData:{cantidadTkrs:Number((Math.round(100*m.value)/100).toFixed(2)),formaPago:"EFECTIVO"},honei:t,dejaCuenta:B.value,arrayDeudas:z.value});if(!e.data)throw Error("Pago con datáfono invalido")}else{if("EFECTIVO"==u.value&&A.value>0&&await _.value.activado()){let e=await _.value.run(h.value,g.value,m.value);if(e.cancelado)throw new Error("Pago cancelado")}const e=await Xe.Z.post("tickets/crearPagoCombinado",{total:ee(Z.value),idCesta:Z.value._id,idTrabajador:P.value._id,tipo:u.value,tkrsData:{cantidadTkrs:Number((Math.round(100*m.value)/100).toFixed(2)),formaPago:"EFECTIVO"},honei:t,dejaCuenta:B.value,arrayDeudas:z.value});if(!e.data&&"Esperando tarjeta del cliente..."==s.value)throw Error("Pendiente de terminar transacción del datáfono");if(!e.data)throw Error("No se ha podido crear el ticket")}re().fire({icon:"success",title:"Venta registrada correctamente",showConfirmButton:!1,timer:500}),await Xe.Z.post("impresora/saludo").catch((e=>{re().fire("Oops...",e.message,"error")})),await Xe.Z.post("cestas/deselectClient",{idCesta:a.getters["Cestas/getCestaBaseActivo"]}),await Xe.Z.post("cestas/borrarCesta",{idCesta:a.getters["Cestas/getCestaBaseActivo"],quitarCliente:!0}),G(),K(),await X(Z.value._id),u.value="EFECTIVO",Q(!0)}catch(e){re().fire("Oops...",e.message,"error")}p.value=!1,oe(),we.Z.Info("cobrar fin","modalCobroView.vue")}async function H(){try{let e;if("TARJETA"==u.value)e=await Xe.Z.post("deudas/crearPagoDeudaPaytef",{total:ee(Z.value),pagoParcial:F.value,idCesta:Z.value._id,idTrabajador:P.value._id,tipo:u.value,tkrsData:{cantidadTkrs:m.value,formaPago:"EFECTIVO"},arrayDeudas:z.value});else{if("EFECTIVO"==u.value&&A.value>0&&await _.value.activado()){let e=await _.value.run(h.value,g.value,m.value);if(e.cancelado)throw new Error("Pago cancelado")}e=await Xe.Z.post("deudas/crearPagoDeuda",{total:ee(Z.value),pagoParcial:F.value,idCesta:Z.value._id,idTrabajador:P.value._id,tipo:u.value,tkrsData:{cantidadTkrs:m.value,formaPago:"EFECTIVO"},arrayDeudas:z.value})}if(!e.data){if("TARJETA"==u.value)throw Error("Pago con datáfono invalido");throw"Esperando tarjeta del cliente..."==s.value?Error("Pendiente de terminar transacción del datáfono"):Error("No se ha podido crear el pago deuda")}re().fire({icon:"success",title:"Pago deuda registrada correctamente",showConfirmButton:!1,timer:500}),await Xe.Z.post("impresora/saludo").catch((e=>{re().fire("Oops...",e.message,"error")})),await Xe.Z.post("cestas/deselectClient",{idCesta:a.getters["Cestas/getCestaBaseActivo"]}),G(),K(),await X(Z.value._id),u.value="EFECTIVO",Q(!0)}catch(e){re().fire("Oops...",e.message,"error")}p.value=!1,oe()}async function q(){try{const e=JSON.parse(JSON.stringify(Z.value.lista)),t=e.some((e=>e.pagado));let n;const i="PAGO SEPARADO"==Z.value.modo,o="RECOGER ENCARGO"==Z.value.modo||"MODIFICAR PEDIDO"==Z.value.modo,r=i||o?B.value:0,l=o?Z.value.nombreCliente:null,c=ee(Z.value);if("TARJETA"==u.value)a.dispatch("Datafono/setEstado","PENDIENTE"),n=await Xe.Z.post("tickets/crearTicketPaytef",{total:ee(Z.value),idCesta:Z.value._id,idTrabajador:P.value._id,tipo:u.value,tkrsData:{cantidadTkrs:Number((Math.round(100*m.value)/100).toFixed(2)),formaPago:"EFECTIVO"},honei:t,dejaCuenta:B.value});else{if("EFECTIVO"==u.value&&A.value>0&&await _.value.activado()){let e=await _.value.run(h.value,g.value,m.value);if(e.cancelado)throw new Error("Pago cancelado")}n=await Xe.Z.post("tickets/crearTicket",{total:c,idCesta:Z.value._id,idTrabajador:P.value._id,tipo:u.value,tkrsData:{cantidadTkrs:Number((Math.round(100*m.value)/100).toFixed(2)),formaPago:"EFECTIVO"},honei:t,dejaCuenta:B.value})}if(!n.data){if("TARJETA"==u.value)throw Error("Pago con datáfono invalido");throw"Esperando tarjeta del cliente..."==s.value?Error("Hay una transacción pendiente del datáfono."):Error("No se ha podido crear el ticket")}if(r>0&&o&&"TARJETA"!=u.value){const e=n.data;Xe.Z.post("movimientos/nuevoMovimiento",{cantidad:r,concepto:"dejaACuenta",idTrabajador:P.value._id,tipo:"SALIDA",idTicket:e,nombreCliente:l}).then((t=>{if(!t.data)throw Error("No se ha podido realizar la salida de dinero");if(r>c){const t=Math.round(100*(r-c))/100;$(t,l,P.value._id,e)}})).catch((e=>{re().fire("Oops...",e.message,"error")}))}re().fire({icon:"success",title:"Venta registrada correctamente",showConfirmButton:!1,timer:500}),await Xe.Z.post("impresora/saludo").catch((e=>{re().fire("Oops...",e.message,"error")})),(v.value&&"TARJETA"!=u.value||o)&&await L(),o&&await Xe.Z.post("cestas/deselectClient",{idCesta:a.getters["Cestas/getCestaBaseActivo"]}),(i||o)&&await X(Z.value._id),o&&(Xe.Z.post("encargos/setEntregado",{id:R.value._id}),J()),W(),u.value="EFECTIVO",Q(!0)}catch(e){re().fire("Oops...",e.message,"error")}p.value=!1,oe(),we.Z.Info("cobrar fin","modalCobroView.vue")}async function L(){await Xe.Z.post("tickets/getUltimoTicket").then((async e=>{e.data[0]?._id?await Xe.Z.post("impresora/imprimirTicket",{idTicket:e.data[0]?._id}).catch((e=>{re().fire("Oops...",e.message,"error")})):re().fire("AVISO","Crea un ticket en esta caja abierta","info")}))}function $(e,t,a,n){Xe.Z.post("movimientos/nuevoMovimiento",{cantidad:e,concepto:"dejaACuentaSobrante",idTrabajador:a,tipo:"SALIDA",idTicket:n,nombreCliente:t}).then((e=>{if(!e.data)throw Error("No se ha podido realizar la salida de dinero")})).catch((e=>{console.log("Oops...",e.message,"error")}))}function W(){let e=!1;O.value.forEach((t=>{if(!e&&t.trabajador===M.value[T.value]._id&&"DEVOLUCION"!=t.modo){e=!0;let a=t._id;Xe.Z.post("cestas/cambiarCestaTrabajador",{idCesta:a,idTrabajador:M.value[T.value]._id})}}))}function G(){a.dispatch("Deudas/deleteDeudasSeleccionadas")}function J(){a.dispatch("Encargos/deleteEncargoSeleccionado")}function K(){a.dispatch("Deudas/deleteTotalAPagar")}async function Y(){we.Z.Info(`cancelarVenta loading:${p.value}`,"modalCobroView.vue"),Q(),oe(),"PAGO DEUDA"==Z.value.modo||"PAGO COMBINADO"==Z.value.modo?(K(),G(),await X(Z.value._id)):"PAGO SEPARADO"==Z.value.modo&&await Xe.Z.post("cestas/DevolverProductosACestaSep",{cesta:a.getters["Cestas/getCestaBaseActivo"],articulos:Z.value.lista}).then((async e=>{await X(Z.value._id)}))}function Q(e=!1){window.__globalKeydownHandler&&document.addEventListener("keydown",window.__globalKeydownHandler);const t=i.currentRoute.value.path;a.dispatch("ModalCobroView/cerrarModalCobroView"),"/cestas"===t&&e&&i.push("/main"),o.value=!1}async function X(e){Xe.Z.post("cestas/fulminarCesta",{idCesta:e}).catch((e=>{re().fire({icon:"error",title:"Error al eliminar la cesta utilizada.",showConfirmButton:!1,timer:500})})),await Xe.Z.post("cestas/cambiarCestaTrabajador",{idCesta:a.getters["Cestas/getCestaBaseActivo"],idTrabajador:M.value[a.state.Trabajadores.indexActivo]._id}).then((e=>{a.dispatch("Cestas/setCestaBaseAction",null)}))}function ee(e){const t=e.detalleIva,a=Object.keys(t).filter((e=>e.startsWith("importe"))).reduce(((e,a)=>e+t[a]),0);return Math.round(100*a)/100}function ae(){Xe.Z.get("caja/estadoCaja").then((e=>{1==e.data&&re().fire("Caja cerrada automáticamente.","La caja de ayer se ha cerrado automáticamente debido a que no se cerró.","error"),1!=e.data&&3!=e.data||void 0==a.getters["Trabajadores/getTrabajadorActivo"]?._id?void 0==a.getters["Trabajadores/getTrabajadorActivo"]?._id&&i.push("/menu/fichajes"):i.push("/abrirCaja")})).catch((e=>{re().fire("Oops...",e.message,"error")}))}function ne(e){g.value+=e,w.value.push(e)}function ie(){w.value.pop();let e=0;w.value.forEach((t=>{e+=t})),g.value=e}function oe(){g.value=0,m.value=0,w.value=[],A=(0,n.Fl)((()=>h.value-m.value<0?0:h.value-(g.value+m.value)))}function se(e){if(!e||"undefined"===typeof e.subtotal||null===e.subtotal)return"0.00";if(C?.value&&C.value>=at.U){const t="undefined"!==typeof e.descuentoTienda&&null!==e.descuentoTienda?e.descuentoTienda:0,a=new nt.Z(e.subtotal),n=new nt.Z(t).div(100),i=a.minus(a.times(n));return i.toFixed(2)}{const t=new nt.Z(e.subtotal),a=new nt.Z(x.value||0),n=t.minus(t.times(a));return n.toFixed(2)}}function le(e){h.value=Number(e)}return(0,n.JJ)("setTkrs",I),t({abrirModal:j,eliminarAlPagarFnc:X,deleteEncargoSeleccionado:J,imprimirTicket:L}),(0,n.bv)((()=>{ae(),Xe.Z.post("parametros/getParametros").then((e=>{"3G"!==e.data?.tipoDatafono&&"0.0.0.0"!=e.data?.ipTefpay||(c.value=1),void 0!=e.data?.params?.SempreTicket?"Si"==e.data?.params?.SempreTicket&&(v.value=!0):v.value=!1,void 0!=e.data?.params?.prohibirTkRestaurant?"Si"==e.data?.params?.prohibirTkRestaurant&&(f.value=!0):f.value=!1}))})),(0,n.YP)((()=>Z.value?Z.value.modo:void 0),(e=>{k.value=e||""}),{immediate:!0}),{DescuentoCliente:x,cesta:Z,getTotal:ee,cobrar:U,formaPago:u,modalTkrsRef:d,prohibirTkRestaurant:f,setFormaPago:S,loading:p,tipoDatafono3G:c,eliminarAlPagarFnc:X,modalNumpad:r,cancelarVenta:Y,modalCobro:o,abrirModal:j,sumar:ne,totalRecibido:g,aPagar:h,numPadRef:l,deshacer:ie,limpiar:oe,procesoDatafono:s,setTkrs:I,cantidadTkrs:m,setAPagar:le,cuenta:A,productos:b,cliente:E,dejaCuenta:B,deudasSeleccionadas:z,montoDeuda:F,CashlogyCobroViewRef:_,valorSobra:N,productosDeuda:y,mostrarListaDeudas:D,modoCesta:k,calcularImporteItem:se}}};const ot=(0,Ke.Z)(it,[["render",ee],["__scopeId","data-v-0dd29e1c"]]);var rt=ot},46375:function(e,t,a){a(57658),a(30541),a(23767),a(8585),a(68696);var n,i,o=9e15,r=1e9,s="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",u="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",c={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-o,maxE:o,crypto:!1},d=!0,f="[DecimalError] ",v=f+"Invalid argument: ",m=f+"Precision limit exceeded",p=f+"crypto unavailable",g="[object Decimal]",h=Math.floor,w=Math.pow,_=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,b=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,C=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,k=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,y=1e7,D=7,E=9007199254740991,A=l.length-1,N=u.length-1,T={toStringTag:g};function M(e){var t,a,n,i=e.length-1,o="",r=e[0];if(i>0){for(o+=r,t=1;t<i;t++)n=e[t]+"",a=D-n.length,a&&(o+=U(a)),o+=n;r=e[t],n=r+"",a=D-n.length,a&&(o+=U(a))}else if(0===r)return"0";for(;r%10===0;)r/=10;return o+r}function O(e,t,a){if(e!==~~e||e<t||e>a)throw Error(v+e)}function x(e,t,a,n){var i,o,r,s;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=D,i=0):(i=Math.ceil((t+1)/D),t%=D),o=w(10,D-t),s=e[i]%o|0,null==n?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),r=a<4&&99999==s||a>3&&49999==s||5e4==s||0==s):r=(a<4&&s+1==o||a>3&&s+1==o/2)&&(e[i+1]/o/100|0)==w(10,t-2)-1||(s==o/2||0==s)&&0==(e[i+1]/o/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),r=(n||a<4)&&9999==s||!n&&a>3&&4999==s):r=((n||a<4)&&s+1==o||!n&&a>3&&s+1==o/2)&&(e[i+1]/o/1e3|0)==w(10,t-3)-1,r}function P(e,t,a){for(var n,i,o=[0],r=0,l=e.length;r<l;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=s.indexOf(e.charAt(r++)),n=0;n<o.length;n++)o[n]>a-1&&(void 0===o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/a|0,o[n]%=a)}return o.reverse()}function z(e,t){var a,n,i;if(t.isZero())return t;n=t.d.length,n<32?(a=Math.ceil(n/3),i=(1/Q(4,a)).toString()):(a=16,i="2.3283064365386962890625e-10"),e.precision+=a,t=Y(e,1,t.times(i),new e(1));for(var o=a;o--;){var r=t.times(t);t=r.times(r).minus(r).times(8).plus(1)}return e.precision-=a,t}T.absoluteValue=T.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),B(e)},T.ceil=function(){return B(new this.constructor(this),this.e+1,2)},T.clampedTo=T.clamp=function(e,t){var a,n=this,i=n.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(v+t);return a=n.cmp(e),a<0?e:n.cmp(t)>0?t:new i(n)},T.comparedTo=T.cmp=function(e){var t,a,n,i,o=this,r=o.d,s=(e=new o.constructor(e)).d,l=o.s,u=e.s;if(!r||!s)return l&&u?l!==u?l:r===s?0:!r^l<0?1:-1:NaN;if(!r[0]||!s[0])return r[0]?l:s[0]?-u:0;if(l!==u)return l;if(o.e!==e.e)return o.e>e.e^l<0?1:-1;for(n=r.length,i=s.length,t=0,a=n<i?n:i;t<a;++t)if(r[t]!==s[t])return r[t]>s[t]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1},T.cosine=T.cos=function(){var e,t,a=this,n=a.constructor;return a.d?a.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(a.e,a.sd())+D,n.rounding=1,a=z(n,X(n,a)),n.precision=e,n.rounding=t,B(2==i||3==i?a.neg():a,e,t,!0)):new n(1):new n(NaN)},T.cubeRoot=T.cbrt=function(){var e,t,a,n,i,o,r,s,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(d=!1,o=c.s*w(c.s*c,1/3),o&&Math.abs(o)!=1/0?n=new f(o.toString()):(a=M(c.d),e=c.e,(o=(e-a.length+1)%3)&&(a+=1==o||-2==o?"0":"00"),o=w(a,1/3),e=h((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?a="5e"+e:(a=o.toExponential(),a=a.slice(0,a.indexOf("e")+1)+e),n=new f(a),n.s=c.s),r=(e=f.precision)+3;;)if(s=n,l=s.times(s).times(s),u=l.plus(c),n=R(u.plus(c).times(s),u.plus(l),r+2,1),M(s.d).slice(0,r)===(a=M(n.d)).slice(0,r)){if(a=a.slice(r-3,r+1),"9999"!=a&&(i||"4999"!=a)){+a&&(+a.slice(1)||"5"!=a.charAt(0))||(B(n,e+1,1),t=!n.times(n).times(n).eq(c));break}if(!i&&(B(s,e+1,0),s.times(s).times(s).eq(c))){n=s;break}r+=4,i=1}return d=!0,B(n,e,f.rounding,t)},T.decimalPlaces=T.dp=function(){var e,t=this.d,a=NaN;if(t){if(e=t.length-1,a=(e-h(this.e/D))*D,e=t[e],e)for(;e%10==0;e/=10)a--;a<0&&(a=0)}return a},T.dividedBy=T.div=function(e){return R(this,new this.constructor(e))},T.dividedToIntegerBy=T.divToInt=function(e){var t=this,a=t.constructor;return B(R(t,new a(e),0,1,1),a.precision,a.rounding)},T.equals=T.eq=function(e){return 0===this.cmp(e)},T.floor=function(){return B(new this.constructor(this),this.e+1,3)},T.greaterThan=T.gt=function(e){return this.cmp(e)>0},T.greaterThanOrEqualTo=T.gte=function(e){var t=this.cmp(e);return 1==t||0===t},T.hyperbolicCosine=T.cosh=function(){var e,t,a,n,i,o=this,r=o.constructor,s=new r(1);if(!o.isFinite())return new r(o.s?1/0:NaN);if(o.isZero())return s;a=r.precision,n=r.rounding,r.precision=a+Math.max(o.e,o.sd())+4,r.rounding=1,i=o.d.length,i<32?(e=Math.ceil(i/3),t=(1/Q(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=Y(r,1,o.times(t),new r(1),!0);for(var l,u=e,c=new r(8);u--;)l=o.times(o),o=s.minus(l.times(c.minus(l.times(c))));return B(o,r.precision=a,r.rounding=n,!0)},T.hyperbolicSine=T.sinh=function(){var e,t,a,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,a=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=Y(o,2,i,i,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:0|e,i=i.times(1/Q(5,e)),i=Y(o,2,i,i,!0);for(var r,s=new o(5),l=new o(16),u=new o(20);e--;)r=i.times(i),i=i.times(s.plus(r.times(l.times(r).plus(u))))}return o.precision=t,o.rounding=a,B(i,t,a,!0)},T.hyperbolicTangent=T.tanh=function(){var e,t,a=this,n=a.constructor;return a.isFinite()?a.isZero()?new n(a):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,R(a.sinh(),a.cosh(),n.precision=e,n.rounding=t)):new n(a.s)},T.inverseCosine=T.acos=function(){var e=this,t=e.constructor,a=e.abs().cmp(1),n=t.precision,i=t.rounding;return-1!==a?0===a?e.isNeg()?Z(t,n,i):new t(0):new t(NaN):e.isZero()?Z(t,n+4,i).times(.5):(t.precision=n+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=n,t.rounding=i,e.times(2))},T.inverseHyperbolicCosine=T.acosh=function(){var e,t,a=this,n=a.constructor;return a.lte(1)?new n(a.eq(1)?0:NaN):a.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(a.e),a.sd())+4,n.rounding=1,d=!1,a=a.times(a).minus(1).sqrt().plus(a),d=!0,n.precision=e,n.rounding=t,a.ln()):new n(a)},T.inverseHyperbolicSine=T.asinh=function(){var e,t,a=this,n=a.constructor;return!a.isFinite()||a.isZero()?new n(a):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(a.e),a.sd())+6,n.rounding=1,d=!1,a=a.times(a).plus(1).sqrt().plus(a),d=!0,n.precision=e,n.rounding=t,a.ln())},T.inverseHyperbolicTangent=T.atanh=function(){var e,t,a,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?B(new o(i),e,t,!0):(o.precision=a=n-i.e,i=R(i.plus(1),new o(1).minus(i),a+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)},T.inverseSine=T.asin=function(){var e,t,a,n,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),a=o.precision,n=o.rounding,-1!==t?0===t?(e=Z(o,a+4,n).times(.5),e.s=i.s,e):new o(NaN):(o.precision=a+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=a,o.rounding=n,i.times(2)))},T.inverseTangent=T.atan=function(){var e,t,a,n,i,o,r,s,l,u=this,c=u.constructor,f=c.precision,v=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=N)return r=Z(c,f+4,v).times(.25),r.s=u.s,r}else{if(!u.s)return new c(NaN);if(f+4<=N)return r=Z(c,f+4,v).times(.5),r.s=u.s,r}for(c.precision=s=f+10,c.rounding=1,a=Math.min(28,s/D+2|0),e=a;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(d=!1,t=Math.ceil(s/D),n=1,l=u.times(u),r=new c(u),i=u;-1!==e;)if(i=i.times(l),o=r.minus(i.div(n+=2)),i=i.times(l),r=o.plus(i.div(n+=2)),void 0!==r.d[t])for(e=t;r.d[e]===o.d[e]&&e--;);return a&&(r=r.times(2<<a-1)),d=!0,B(r,c.precision=f,c.rounding=v,!0)},T.isFinite=function(){return!!this.d},T.isInteger=T.isInt=function(){return!!this.d&&h(this.e/D)>this.d.length-2},T.isNaN=function(){return!this.s},T.isNegative=T.isNeg=function(){return this.s<0},T.isPositive=T.isPos=function(){return this.s>0},T.isZero=function(){return!!this.d&&0===this.d[0]},T.lessThan=T.lt=function(e){return this.cmp(e)<0},T.lessThanOrEqualTo=T.lte=function(e){return this.cmp(e)<1},T.logarithm=T.log=function(e){var t,a,n,i,o,r,s,l,u=this,c=u.constructor,f=c.precision,v=c.rounding,m=5;if(null==e)e=new c(10),t=!0;else{if(e=new c(e),a=e.d,e.s<0||!a||!a[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(a=u.d,u.s<0||!a||!a[0]||u.eq(1))return new c(a&&!a[0]?-1/0:1!=u.s?NaN:a?0:1/0);if(t)if(a.length>1)o=!0;else{for(i=a[0];i%10===0;)i/=10;o=1!==i}if(d=!1,s=f+m,r=$(u,s),n=t?S(c,s+10):$(e,s),l=R(r,n,s,1),x(l.d,i=f,v))do{if(s+=10,r=$(u,s),n=t?S(c,s+10):$(e,s),l=R(r,n,s,1),!o){+M(l.d).slice(i+1,i+15)+1==1e14&&(l=B(l,f+1,0));break}}while(x(l.d,i+=10,v));return d=!0,B(l,f,v)},T.minus=T.sub=function(e){var t,a,n,i,o,r,s,l,u,c,f,v,m=this,p=m.constructor;if(e=new p(e),!m.d||!e.d)return m.s&&e.s?m.d?e.s=-e.s:e=new p(e.d||m.s!==e.s?m:NaN):e=new p(NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(u=m.d,v=e.d,s=p.precision,l=p.rounding,!u[0]||!v[0]){if(v[0])e.s=-e.s;else{if(!u[0])return new p(3===l?-0:0);e=new p(m)}return d?B(e,s,l):e}if(a=h(e.e/D),c=h(m.e/D),u=u.slice(),o=c-a,o){for(f=o<0,f?(t=u,o=-o,r=v.length):(t=v,a=c,r=u.length),n=Math.max(Math.ceil(s/D),r)+2,o>n&&(o=n,t.length=1),t.reverse(),n=o;n--;)t.push(0);t.reverse()}else{for(n=u.length,r=v.length,f=n<r,f&&(r=n),n=0;n<r;n++)if(u[n]!=v[n]){f=u[n]<v[n];break}o=0}for(f&&(t=u,u=v,v=t,e.s=-e.s),r=u.length,n=v.length-r;n>0;--n)u[r++]=0;for(n=v.length;n>o;){if(u[--n]<v[n]){for(i=n;i&&0===u[--i];)u[i]=y-1;--u[i],u[n]+=y}u[n]-=v[n]}for(;0===u[--r];)u.pop();for(;0===u[0];u.shift())--a;return u[0]?(e.d=u,e.e=I(u,a),d?B(e,s,l):e):new p(3===l?-0:0)},T.modulo=T.mod=function(e){var t,a=this,n=a.constructor;return e=new n(e),!a.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||a.d&&!a.d[0]?B(new n(a),n.precision,n.rounding):(d=!1,9==n.modulo?(t=R(a,e.abs(),0,3,1),t.s*=e.s):t=R(a,e,0,n.modulo,1),t=t.times(e),d=!0,a.minus(t))},T.naturalExponential=T.exp=function(){return L(this)},T.naturalLogarithm=T.ln=function(){return $(this)},T.negated=T.neg=function(){var e=new this.constructor(this);return e.s=-e.s,B(e)},T.plus=T.add=function(e){var t,a,n,i,o,r,s,l,u,c,f=this,v=f.constructor;if(e=new v(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new v(e.d||f.s===e.s?f:NaN)):e=new v(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(u=f.d,c=e.d,s=v.precision,l=v.rounding,!u[0]||!c[0])return c[0]||(e=new v(f)),d?B(e,s,l):e;if(o=h(f.e/D),n=h(e.e/D),u=u.slice(),i=o-n,i){for(i<0?(a=u,i=-i,r=c.length):(a=c,n=o,r=u.length),o=Math.ceil(s/D),r=o>r?o+1:r+1,i>r&&(i=r,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(r=u.length,i=c.length,r-i<0&&(i=r,a=c,c=u,u=a),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/y|0,u[i]%=y;for(t&&(u.unshift(t),++n),r=u.length;0==u[--r];)u.pop();return e.d=u,e.e=I(u,n),d?B(e,s,l):e},T.precision=T.sd=function(e){var t,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(v+e);return a.d?(t=j(a.d),e&&a.e+1>t&&(t=a.e+1)):t=NaN,t},T.round=function(){var e=this,t=e.constructor;return B(new t(e),e.e+1,t.rounding)},T.sine=T.sin=function(){var e,t,a=this,n=a.constructor;return a.isFinite()?a.isZero()?new n(a):(e=n.precision,t=n.rounding,n.precision=e+Math.max(a.e,a.sd())+D,n.rounding=1,a=K(n,X(n,a)),n.precision=e,n.rounding=t,B(i>2?a.neg():a,e,t,!0)):new n(NaN)},T.squareRoot=T.sqrt=function(){var e,t,a,n,i,o,r=this,s=r.d,l=r.e,u=r.s,c=r.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?r:1/0);for(d=!1,u=Math.sqrt(+r),0==u||u==1/0?(t=M(s),(t.length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=h((l+1)/2)-(l<0||l%2),u==1/0?t="5e"+l:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+l),n=new c(t)):n=new c(u.toString()),a=(l=c.precision)+3;;)if(o=n,n=o.plus(R(r,o,a+2,1)).times(.5),M(o.d).slice(0,a)===(t=M(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),"9999"!=t&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(B(n,l+1,1),e=!n.times(n).eq(r));break}if(!i&&(B(o,l+1,0),o.times(o).eq(r))){n=o;break}a+=4,i=1}return d=!0,B(n,l,c.rounding,e)},T.tangent=T.tan=function(){var e,t,a=this,n=a.constructor;return a.isFinite()?a.isZero()?new n(a):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,a=a.sin(),a.s=1,a=R(a,new n(1).minus(a.times(a)).sqrt(),e+10,0),n.precision=e,n.rounding=t,B(2==i||4==i?a.neg():a,e,t,!0)):new n(NaN)},T.times=T.mul=function(e){var t,a,n,i,o,r,s,l,u,c=this,f=c.constructor,v=c.d,m=(e=new f(e)).d;if(e.s*=c.s,!v||!v[0]||!m||!m[0])return new f(!e.s||v&&!v[0]&&!m||m&&!m[0]&&!v?NaN:v&&m?0*e.s:e.s/0);for(a=h(c.e/D)+h(e.e/D),l=v.length,u=m.length,l<u&&(o=v,v=m,m=o,r=l,l=u,u=r),o=[],r=l+u,n=r;n--;)o.push(0);for(n=u;--n>=0;){for(t=0,i=l+n;i>n;)s=o[i]+m[n]*v[i-n-1]+t,o[i--]=s%y|0,t=s/y|0;o[i]=(o[i]+t)%y|0}for(;!o[--r];)o.pop();return t?++a:o.shift(),e.d=o,e.e=I(o,a),d?B(e,f.precision,f.rounding):e},T.toBinary=function(e,t){return ee(this,2,e,t)},T.toDecimalPlaces=T.toDP=function(e,t){var a=this,n=a.constructor;return a=new n(a),void 0===e?a:(O(e,0,r),void 0===t?t=n.rounding:O(t,0,8),B(a,e+a.e+1,t))},T.toExponential=function(e,t){var a,n=this,i=n.constructor;return void 0===e?a=F(n,!0):(O(e,0,r),void 0===t?t=i.rounding:O(t,0,8),n=B(new i(n),e+1,t),a=F(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+a:a},T.toFixed=function(e,t){var a,n,i=this,o=i.constructor;return void 0===e?a=F(i):(O(e,0,r),void 0===t?t=o.rounding:O(t,0,8),n=B(new o(i),e+i.e+1,t),a=F(n,!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+a:a},T.toFraction=function(e){var t,a,n,i,o,r,s,l,u,c,f,m,p=this,g=p.d,h=p.constructor;if(!g)return new h(p);if(u=a=new h(1),n=l=new h(0),t=new h(n),o=t.e=j(g)-p.e-1,r=o%D,t.d[0]=w(10,r<0?D+r:r),null==e)e=o>0?t:u;else{if(s=new h(e),!s.isInt()||s.lt(u))throw Error(v+s);e=s.gt(t)?o>0?t:u:s}for(d=!1,s=new h(M(g)),c=h.precision,h.precision=o=g.length*D*2;;){if(f=R(s,t,0,1,1),i=a.plus(f.times(n)),1==i.cmp(e))break;a=n,n=i,i=u,u=l.plus(f.times(i)),l=i,i=t,t=s.minus(f.times(i)),s=i}return i=R(e.minus(a),n,0,1,1),l=l.plus(i.times(u)),a=a.plus(i.times(n)),l.s=u.s=p.s,m=R(u,n,o,1).minus(p).abs().cmp(R(l,a,o,1).minus(p).abs())<1?[u,n]:[l,a],h.precision=c,d=!0,m},T.toHexadecimal=T.toHex=function(e,t){return ee(this,16,e,t)},T.toNearest=function(e,t){var a=this,n=a.constructor;if(a=new n(a),null==e){if(!a.d)return a;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:O(t,0,8),!a.d)return e.s?a:e;if(!e.d)return e.s&&(e.s=a.s),e}return e.d[0]?(d=!1,a=R(a,e,0,t,1).times(e),d=!0,B(a)):(e.s=a.s,a=e),a},T.toNumber=function(){return+this},T.toOctal=function(e,t){return ee(this,8,e,t)},T.toPower=T.pow=function(e){var t,a,n,i,o,r,s=this,l=s.constructor,u=+(e=new l(e));if(!s.d||!e.d||!s.d[0]||!e.d[0])return new l(w(+s,u));if(s=new l(s),s.eq(1))return s;if(n=l.precision,o=l.rounding,e.eq(1))return B(s,n,o);if(t=h(e.e/D),t>=e.d.length-1&&(a=u<0?-u:u)<=E)return i=V(l,s,a,n),e.s<0?new l(1).div(i):B(i,n,o);if(r=s.s,r<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(r=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=r,s}return a=w(+s,u),t=0!=a&&isFinite(a)?new l(a+"").e:h(u*(Math.log("0."+M(s.d))/Math.LN10+s.e+1)),t>l.maxE+1||t<l.minE-1?new l(t>0?r/0:0):(d=!1,l.rounding=s.s=1,a=Math.min(12,(t+"").length),i=L(e.times($(s,n+a)),n),i.d&&(i=B(i,n+5,1),x(i.d,n,o)&&(t=n+10,i=B(L(e.times($(s,t+a)),t),t+5,1),+M(i.d).slice(n+1,n+15)+1==1e14&&(i=B(i,n+1,0)))),i.s=r,d=!0,l.rounding=o,B(i,n,o))},T.toPrecision=function(e,t){var a,n=this,i=n.constructor;return void 0===e?a=F(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(O(e,1,r),void 0===t?t=i.rounding:O(t,0,8),n=B(new i(n),e,t),a=F(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+a:a},T.toSignificantDigits=T.toSD=function(e,t){var a=this,n=a.constructor;return void 0===e?(e=n.precision,t=n.rounding):(O(e,1,r),void 0===t?t=n.rounding:O(t,0,8)),B(new n(a),e,t)},T.toString=function(){var e=this,t=e.constructor,a=F(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+a:a},T.truncated=T.trunc=function(){return B(new this.constructor(this),this.e+1,1)},T.valueOf=T.toJSON=function(){var e=this,t=e.constructor,a=F(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+a:a};var R=function(){function e(e,t,a){var n,i=0,o=e.length;for(e=e.slice();o--;)n=e[o]*t+i,e[o]=n%a|0,i=n/a|0;return i&&e.unshift(i),e}function t(e,t,a,n){var i,o;if(a!=n)o=a>n?1:-1;else for(i=o=0;i<a;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function a(e,t,a,n){for(var i=0;a--;)e[a]-=i,i=e[a]<t[a]?1:0,e[a]=i*n+e[a]-t[a];for(;!e[0]&&e.length>1;)e.shift()}return function(i,o,r,s,l,u){var c,d,f,v,m,p,g,w,_,b,C,k,E,A,N,T,M,O,x,P,z=i.constructor,R=i.s==o.s?1:-1,F=i.d,I=o.d;if(!F||!F[0]||!I||!I[0])return new z(i.s&&o.s&&(F?!I||F[0]!=I[0]:I)?F&&0==F[0]||!I?0*R:R/0:NaN);for(u?(m=1,d=i.e-o.e):(u=y,m=D,d=h(i.e/m)-h(o.e/m)),x=I.length,M=F.length,_=new z(R),b=_.d=[],f=0;I[f]==(F[f]||0);f++);if(I[f]>(F[f]||0)&&d--,null==r?(A=r=z.precision,s=z.rounding):A=l?r+(i.e-o.e)+1:r,A<0)b.push(1),p=!0;else{if(A=A/m+2|0,f=0,1==x){for(v=0,I=I[0],A++;(f<M||v)&&A--;f++)N=v*u+(F[f]||0),b[f]=N/I|0,v=N%I|0;p=v||f<M}else{for(v=u/(I[0]+1)|0,v>1&&(I=e(I,v,u),F=e(F,v,u),x=I.length,M=F.length),T=x,C=F.slice(0,x),k=C.length;k<x;)C[k++]=0;P=I.slice(),P.unshift(0),O=I[0],I[1]>=u/2&&++O;do{v=0,c=t(I,C,x,k),c<0?(E=C[0],x!=k&&(E=E*u+(C[1]||0)),v=E/O|0,v>1?(v>=u&&(v=u-1),g=e(I,v,u),w=g.length,k=C.length,c=t(g,C,w,k),1==c&&(v--,a(g,x<w?P:I,w,u))):(0==v&&(c=v=1),g=I.slice()),w=g.length,w<k&&g.unshift(0),a(C,g,k,u),-1==c&&(k=C.length,c=t(I,C,x,k),c<1&&(v++,a(C,x<k?P:I,k,u))),k=C.length):0===c&&(v++,C=[0]),b[f++]=v,c&&C[0]?C[k++]=F[T]||0:(C=[F[T]],k=1)}while((T++<M||void 0!==C[0])&&A--);p=void 0!==C[0]}b[0]||b.shift()}if(1==m)_.e=d,n=p;else{for(f=1,v=b[0];v>=10;v/=10)f++;_.e=f+d*m-1,B(_,l?r+_.e+1:r,s,p)}return _}}();function B(e,t,a,n){var i,o,r,s,l,u,c,f,v,m=e.constructor;e:if(null!=t){if(f=e.d,!f)return e;for(i=1,s=f[0];s>=10;s/=10)i++;if(o=t-i,o<0)o+=D,r=t,c=f[v=0],l=c/w(10,i-r-1)%10|0;else if(v=Math.ceil((o+1)/D),s=f.length,v>=s){if(!n)break e;for(;s++<=v;)f.push(0);c=l=0,i=1,o%=D,r=o-D+1}else{for(c=s=f[v],i=1;s>=10;s/=10)i++;o%=D,r=o-D+i,l=r<0?0:c/w(10,i-r-1)%10|0}if(n=n||t<0||void 0!==f[v+1]||(r<0?c:c%w(10,i-r-1)),u=a<4?(l||n)&&(0==a||a==(e.s<0?3:2)):l>5||5==l&&(4==a||n||6==a&&(o>0?r>0?c/w(10,i-r):0:f[v-1])%10&1||a==(e.s<0?8:7)),t<1||!f[0])return f.length=0,u?(t-=e.e+1,f[0]=w(10,(D-t%D)%D),e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=v,s=1,v--):(f.length=v+1,s=w(10,D-o),f[v]=r>0?(c/w(10,i-r)%w(10,r)|0)*s:0),u)for(;;){if(0==v){for(o=1,r=f[0];r>=10;r/=10)o++;for(r=f[0]+=s,s=1;r>=10;r/=10)s++;o!=s&&(e.e++,f[0]==y&&(f[0]=1));break}if(f[v]+=s,f[v]!=y)break;f[v--]=0,s=1}for(o=f.length;0===f[--o];)f.pop()}return d&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function F(e,t,a){if(!e.isFinite())return W(e);var n,i=e.e,o=M(e.d),r=o.length;return t?(a&&(n=a-r)>0?o=o.charAt(0)+"."+o.slice(1)+U(n):r>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+U(-i-1)+o,a&&(n=a-r)>0&&(o+=U(n))):i>=r?(o+=U(i+1-r),a&&(n=a-i-1)>0&&(o=o+"."+U(n))):((n=i+1)<r&&(o=o.slice(0,n)+"."+o.slice(n)),a&&(n=a-r)>0&&(i+1===r&&(o+="."),o+=U(n))),o}function I(e,t){var a=e[0];for(t*=D;a>=10;a/=10)t++;return t}function S(e,t,a){if(t>A)throw d=!0,a&&(e.precision=a),Error(m);return B(new e(l),t,1,!0)}function Z(e,t,a){if(t>N)throw Error(m);return B(new e(u),t,a,!0)}function j(e){var t=e.length-1,a=t*D+1;if(t=e[t],t){for(;t%10==0;t/=10)a--;for(t=e[0];t>=10;t/=10)a++}return a}function U(e){for(var t="";e--;)t+="0";return t}function V(e,t,a,n){var i,o=new e(1),r=Math.ceil(n/D+4);for(d=!1;;){if(a%2&&(o=o.times(t),te(o.d,r)&&(i=!0)),a=h(a/2),0===a){a=o.d.length-1,i&&0===o.d[a]&&++o.d[a];break}t=t.times(t),te(t.d,r)}return d=!0,o}function H(e){return 1&e.d[e.d.length-1]}function q(e,t,a){for(var n,i,o=new e(t[0]),r=0;++r<t.length;){if(i=new e(t[r]),!i.s){o=i;break}n=o.cmp(i),(n===a||0===n&&o.s===a)&&(o=i)}return o}function L(e,t){var a,n,i,o,r,s,l,u=0,c=0,f=0,v=e.constructor,m=v.rounding,p=v.precision;if(!e.d||!e.d[0]||e.e>17)return new v(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);null==t?(d=!1,l=p):l=t,s=new v(.03125);while(e.e>-2)e=e.times(s),f+=5;for(n=Math.log(w(2,f))/Math.LN10*2+5|0,l+=n,a=o=r=new v(1),v.precision=l;;){if(o=B(o.times(e),l,1),a=a.times(++c),s=r.plus(R(o,a,l,1)),M(s.d).slice(0,l)===M(r.d).slice(0,l)){i=f;while(i--)r=B(r.times(r),l,1);if(null!=t)return v.precision=p,r;if(!(u<3&&x(r.d,l-n,m,u)))return B(r,v.precision=p,m,d=!0);v.precision=l+=10,a=o=s=new v(1),c=0,u++}r=s}}function $(e,t){var a,n,i,o,r,s,l,u,c,f,v,m=1,p=10,g=e,h=g.d,w=g.constructor,_=w.rounding,b=w.precision;if(g.s<0||!h||!h[0]||!g.e&&1==h[0]&&1==h.length)return new w(h&&!h[0]?-1/0:1!=g.s?NaN:h?0:g);if(null==t?(d=!1,c=b):c=t,w.precision=c+=p,a=M(h),n=a.charAt(0),!(Math.abs(o=g.e)<15e14))return u=S(w,c+2,b).times(o+""),g=$(new w(n+"."+a.slice(1)),c-p).plus(u),w.precision=b,null==t?B(g,b,_,d=!0):g;while(n<7&&1!=n||1==n&&a.charAt(1)>3)g=g.times(e),a=M(g.d),n=a.charAt(0),m++;for(o=g.e,n>1?(g=new w("0."+a),o++):g=new w(n+"."+a.slice(1)),f=g,l=r=g=R(g.minus(1),g.plus(1),c,1),v=B(g.times(g),c,1),i=3;;){if(r=B(r.times(v),c,1),u=l.plus(R(r,new w(i),c,1)),M(u.d).slice(0,c)===M(l.d).slice(0,c)){if(l=l.times(2),0!==o&&(l=l.plus(S(w,c+2,b).times(o+""))),l=R(l,new w(m),c,1),null!=t)return w.precision=b,l;if(!x(l.d,c-p,_,s))return B(l,w.precision=b,_,d=!0);w.precision=c+=p,u=r=g=R(f.minus(1),f.plus(1),c,1),v=B(g.times(g),c,1),i=s=1}l=u,i+=2}}function W(e){return String(e.s*e.s/0)}function G(e,t){var a,n,i;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(a<0&&(a=n),a+=+t.slice(n+1),t=t.substring(0,n)):a<0&&(a=t.length),n=0;48===t.charCodeAt(n);n++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(n,i),t){if(i-=n,e.e=a=a-n-1,e.d=[],n=(a+1)%D,a<0&&(n+=D),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=D;n<i;)e.d.push(+t.slice(n,n+=D));t=t.slice(n),n=D-t.length}else n-=i;for(;n--;)t+="0";e.d.push(+t),d&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function J(e,t){var a,n,i,o,r,s,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),k.test(t))return G(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(b.test(t))a=16,t=t.toLowerCase();else if(_.test(t))a=2;else{if(!C.test(t))throw Error(v+t);a=8}for(o=t.search(/p/i),o>0?(l=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),r=o>=0,n=e.constructor,r&&(t=t.replace(".",""),s=t.length,o=s-o,i=V(n,new n(a),o,2*o)),u=P(t,a,y),c=u.length-1,o=c;0===u[o];--o)u.pop();return o<0?new n(0*e.s):(e.e=I(u,c),e.d=u,d=!1,r&&(e=R(e,i,4*s)),l&&(e=e.times(Math.abs(l)<54?w(2,l):He.pow(2,l))),d=!0,e)}function K(e,t){var a,n=t.d.length;if(n<3)return t.isZero()?t:Y(e,2,t,t);a=1.4*Math.sqrt(n),a=a>16?16:0|a,t=t.times(1/Q(5,a)),t=Y(e,2,t,t);for(var i,o=new e(5),r=new e(16),s=new e(20);a--;)i=t.times(t),t=t.times(o.plus(i.times(r.times(i).minus(s))));return t}function Y(e,t,a,n,i){var o,r,s,l,u=e.precision,c=Math.ceil(u/D);for(d=!1,l=a.times(a),s=new e(n);;){if(r=R(s.times(l),new e(t++*t++),u,1),s=i?n.plus(r):n.minus(r),n=R(r.times(l),new e(t++*t++),u,1),r=s.plus(n),void 0!==r.d[c]){for(o=c;r.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=n,n=r,r=o}return d=!0,r.d.length=c+1,r}function Q(e,t){var a=e;while(--t)a*=e;return a}function X(e,t){var a,n=t.s<0,o=Z(e,e.precision,1),r=o.times(.5);if(t=t.abs(),t.lte(r))return i=n?4:1,t;if(a=t.divToInt(o),a.isZero())i=n?3:2;else{if(t=t.minus(a.times(o)),t.lte(r))return i=H(a)?n?2:3:n?4:1,t;i=H(a)?n?1:4:n?3:2}return t.minus(o).abs()}function ee(e,t,a,i){var o,l,u,c,d,f,v,m,p,g=e.constructor,h=void 0!==a;if(h?(O(a,1,r),void 0===i?i=g.rounding:O(i,0,8)):(a=g.precision,i=g.rounding),e.isFinite()){for(v=F(e),u=v.indexOf("."),h?(o=2,16==t?a=4*a-3:8==t&&(a=3*a-2)):o=t,u>=0&&(v=v.replace(".",""),p=new g(1),p.e=v.length-u,p.d=P(F(p),10,o),p.e=p.d.length),m=P(v,10,o),l=d=m.length;0==m[--d];)m.pop();if(m[0]){if(u<0?l--:(e=new g(e),e.d=m,e.e=l,e=R(e,p,a,i,0,o),m=e.d,l=e.e,f=n),u=m[a],c=o/2,f=f||void 0!==m[a+1],f=i<4?(void 0!==u||f)&&(0===i||i===(e.s<0?3:2)):u>c||u===c&&(4===i||f||6===i&&1&m[a-1]||i===(e.s<0?8:7)),m.length=a,f)for(;++m[--a]>o-1;)m[a]=0,a||(++l,m.unshift(1));for(d=m.length;!m[d-1];--d);for(u=0,v="";u<d;u++)v+=s.charAt(m[u]);if(h){if(d>1)if(16==t||8==t){for(u=16==t?4:3,--d;d%u;d++)v+="0";for(m=P(v,o,t),d=m.length;!m[d-1];--d);for(u=1,v="1.";u<d;u++)v+=s.charAt(m[u])}else v=v.charAt(0)+"."+v.slice(1);v=v+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)v="0"+v;v="0."+v}else if(++l>d)for(l-=d;l--;)v+="0";else l<d&&(v=v.slice(0,l)+"."+v.slice(l))}else v=h?"0p+0":"0";v=(16==t?"0x":2==t?"0b":8==t?"0o":"")+v}else v=W(e);return e.s<0?"-"+v:v}function te(e,t){if(e.length>t)return e.length=t,!0}function ae(e){return new this(e).abs()}function ne(e){return new this(e).acos()}function ie(e){return new this(e).acosh()}function oe(e,t){return new this(e).plus(t)}function re(e){return new this(e).asin()}function se(e){return new this(e).asinh()}function le(e){return new this(e).atan()}function ue(e){return new this(e).atanh()}function ce(e,t){e=new this(e),t=new this(t);var a,n=this.precision,i=this.rounding,o=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(a=t.s<0?Z(this,n,i):new this(0),a.s=e.s):!e.d||t.isZero()?(a=Z(this,o,1).times(.5),a.s=e.s):t.s<0?(this.precision=o,this.rounding=1,a=this.atan(R(e,t,o,1)),t=Z(this,o,1),this.precision=n,this.rounding=i,a=e.s<0?a.minus(t):a.plus(t)):a=this.atan(R(e,t,o,1)):(a=Z(this,o,1).times(t.s>0?.25:.75),a.s=e.s):a=new this(NaN),a}function de(e){return new this(e).cbrt()}function fe(e){return B(e=new this(e),e.e+1,2)}function ve(e,t,a){return new this(e).clamp(t,a)}function me(e){if(!e||"object"!==typeof e)throw Error(f+"Object expected");var t,a,n,i=!0===e.defaults,s=["precision",1,r,"rounding",0,8,"toExpNeg",-o,0,"toExpPos",0,o,"maxE",0,o,"minE",-o,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(a=s[t],i&&(this[a]=c[a]),void 0!==(n=e[a])){if(!(h(n)===n&&n>=s[t+1]&&n<=s[t+2]))throw Error(v+a+": "+n);this[a]=n}if(a="crypto",i&&(this[a]=c[a]),void 0!==(n=e[a])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(v+a+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(p);this[a]=!0}else this[a]=!1}return this}function pe(e){return new this(e).cos()}function ge(e){return new this(e).cosh()}function he(e){var t,a,n;function i(e){var t,a,n,o=this;if(!(o instanceof i))return new i(e);if(o.constructor=i,ke(e))return o.s=e.s,void(d?!e.d||e.e>i.maxE?(o.e=NaN,o.d=null):e.e<i.minE?(o.e=0,o.d=[0]):(o.e=e.e,o.d=e.d.slice()):(o.e=e.e,o.d=e.d?e.d.slice():e.d));if(n=typeof e,"number"===n){if(0===e)return o.s=1/e<0?-1:1,o.e=0,void(o.d=[0]);if(e<0?(e=-e,o.s=-1):o.s=1,e===~~e&&e<1e7){for(t=0,a=e;a>=10;a/=10)t++;return void(d?t>i.maxE?(o.e=NaN,o.d=null):t<i.minE?(o.e=0,o.d=[0]):(o.e=t,o.d=[e]):(o.e=t,o.d=[e]))}return 0*e!==0?(e||(o.s=NaN),o.e=NaN,void(o.d=null)):G(o,e.toString())}if("string"===n)return 45===(a=e.charCodeAt(0))?(e=e.slice(1),o.s=-1):(43===a&&(e=e.slice(1)),o.s=1),k.test(e)?G(o,e):J(o,e);if("bigint"===n)return e<0?(e=-e,o.s=-1):o.s=1,G(o,e.toString());throw Error(v+e)}if(i.prototype=T,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=me,i.clone=he,i.isDecimal=ke,i.abs=ae,i.acos=ne,i.acosh=ie,i.add=oe,i.asin=re,i.asinh=se,i.atan=le,i.atanh=ue,i.atan2=ce,i.cbrt=de,i.ceil=fe,i.clamp=ve,i.cos=pe,i.cosh=ge,i.div=we,i.exp=_e,i.floor=be,i.hypot=Ce,i.ln=ye,i.log=De,i.log10=Ae,i.log2=Ee,i.max=Ne,i.min=Te,i.mod=Me,i.mul=Oe,i.pow=xe,i.random=Pe,i.round=ze,i.sign=Re,i.sin=Be,i.sinh=Fe,i.sqrt=Ie,i.sub=Se,i.sum=Ze,i.tan=je,i.tanh=Ue,i.trunc=Ve,void 0===e&&(e={}),e&&!0!==e.defaults)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(a=n[t++])||(e[a]=this[a]);return i.config(e),i}function we(e,t){return new this(e).div(t)}function _e(e){return new this(e).exp()}function be(e){return B(e=new this(e),e.e+1,3)}function Ce(){var e,t,a=new this(0);for(d=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)a.d&&(a=a.plus(t.times(t)));else{if(t.s)return d=!0,new this(1/0);a=t}return d=!0,a.sqrt()}function ke(e){return e instanceof He||e&&e.toStringTag===g||!1}function ye(e){return new this(e).ln()}function De(e,t){return new this(e).log(t)}function Ee(e){return new this(e).log(2)}function Ae(e){return new this(e).log(10)}function Ne(){return q(this,arguments,-1)}function Te(){return q(this,arguments,1)}function Me(e,t){return new this(e).mod(t)}function Oe(e,t){return new this(e).mul(t)}function xe(e,t){return new this(e).pow(t)}function Pe(e){var t,a,n,i,o=0,s=new this(1),l=[];if(void 0===e?e=this.precision:O(e,1,r),n=Math.ceil(e/D),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));o<n;)i=t[o],i>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:l[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(p);for(t=crypto.randomBytes(n*=4);o<n;)i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24),i>=214e7?crypto.randomBytes(4).copy(t,o):(l.push(i%1e7),o+=4);o=n/4}else for(;o<n;)l[o++]=1e7*Math.random()|0;for(n=l[--o],e%=D,n&&e&&(i=w(10,D-e),l[o]=(n/i|0)*i);0===l[o];o--)l.pop();if(o<0)a=0,l=[0];else{for(a=-1;0===l[0];a-=D)l.shift();for(n=1,i=l[0];i>=10;i/=10)n++;n<D&&(a-=D-n)}return s.e=a,s.d=l,s}function ze(e){return B(e=new this(e),e.e+1,this.rounding)}function Re(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Be(e){return new this(e).sin()}function Fe(e){return new this(e).sinh()}function Ie(e){return new this(e).sqrt()}function Se(e,t){return new this(e).sub(t)}function Ze(){var e=0,t=arguments,a=new this(t[e]);for(d=!1;a.s&&++e<t.length;)a=a.plus(t[e]);return d=!0,B(a,this.precision,this.rounding)}function je(e){return new this(e).tan()}function Ue(e){return new this(e).tanh()}function Ve(e){return B(e=new this(e),e.e+1,1)}T[Symbol.for("nodejs.util.inspect.custom")]=T.toString,T[Symbol.toStringTag]="Decimal";var He=T.constructor=he(c);l=new He(l),u=new He(u),t["Z"]=He}}]);
//# sourceMappingURL=30.8d3754e2.js.map