"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[888],{30888:function(a,l,o){o.r(l),o.d(l,{default:function(){return q}});var e=o(73396),i=o(87139),r=o(49242);const n=a=>((0,e.dD)("data-v-e5627d30"),a=a(),(0,e.Cn)(),a),s={class:"container-fluid"},t=n((()=>(0,e._)("div",{class:"row"},[(0,e._)("h2",null,"ABRIR CAJA")],-1))),d={class:"row p-2",style:{"text-align":"center"}},c=n((()=>(0,e._)("img",{src:"/img/1cts.png",width:"84",height:"84"},null,-1))),u=n((()=>(0,e._)("img",{src:"/img/2cts.png",width:"84",height:"84"},null,-1))),v=n((()=>(0,e._)("img",{src:"/img/5cts.png",width:"84",height:"84"},null,-1))),_=n((()=>(0,e._)("img",{src:"/img/10cts.png",width:"84",height:"84"},null,-1))),g=n((()=>(0,e._)("img",{src:"/img/20cts.png",width:"84",height:"84"},null,-1))),m=n((()=>(0,e._)("img",{src:"/img/50cts.png",width:"84",height:"84"},null,-1))),f=n((()=>(0,e._)("img",{src:"/img/uneuro.png",width:"84",height:"84"},null,-1))),w=n((()=>(0,e._)("img",{src:"/img/doseuros.png",width:"84",height:"84"},null,-1))),b={class:"row mx-auto mt-4"},h=["width"],z=n((()=>(0,e._)("br",null,null,-1))),C=["width"],p=n((()=>(0,e._)("br",null,null,-1))),y=["width"],k=n((()=>(0,e._)("br",null,null,-1))),D=["width"],A=n((()=>(0,e._)("br",null,null,-1))),N=["width"],$=n((()=>(0,e._)("br",null,null,-1))),j=["width"],S=n((()=>(0,e._)("br",null,null,-1))),B=["width"],x=n((()=>(0,e._)("br",null,null,-1))),M={class:"row mx-auto mt-4"},E={class:"text-center"},Z={class:"position-absolute bottom-0 start-0 mb-4 ms-2"},T={class:"row"},U={class:"col"},H={class:"col"};function F(a,l,o,n,F,R){const V=(0,e.up)("MDBIcon"),W=(0,e.up)("MDBBtn"),I=(0,e.up)("MDBModalBody"),O=(0,e.up)("MDBModal");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",s,[t,(0,e._)("div",d,[(0,e._)("div",{class:"col",onClick:l[0]||(l[0]=a=>n.setActivo(0))},[c,(0,e._)("label",{class:(0,i.C_)({infoDineros:0==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[0].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",onClick:l[1]||(l[1]=a=>n.setActivo(1))},[u,(0,e._)("label",{class:(0,i.C_)({infoDineros:1==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[1].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",onClick:l[2]||(l[2]=a=>n.setActivo(2))},[v,(0,e._)("label",{class:(0,i.C_)({infoDineros:2==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[2].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",onClick:l[3]||(l[3]=a=>n.setActivo(3))},[_,(0,e._)("label",{class:(0,i.C_)({infoDineros:3==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[3].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",onClick:l[4]||(l[4]=a=>n.setActivo(4))},[g,(0,e._)("label",{class:(0,i.C_)({infoDineros:4==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[4].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",onClick:l[5]||(l[5]=a=>n.setActivo(5))},[m,(0,e._)("label",{class:(0,i.C_)({infoDineros:5==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[5].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",onClick:l[6]||(l[6]=a=>n.setActivo(6))},[f,(0,e._)("label",{class:(0,i.C_)({infoDineros:6==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[6].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",onClick:l[7]||(l[7]=a=>n.setActivo(7))},[w,(0,e._)("label",{class:(0,i.C_)({infoDineros:7==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[7].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)])]),(0,e._)("div",b,[(0,e._)("div",{class:"col",style:{"text-align":"center"},onClick:l[8]||(l[8]=a=>n.setActivo(8))},[(0,e._)("img",{src:"/img/5euros.png",width:n.sizeBilletes},null,8,h),(0,e.Uk)(),z,(0,e._)("label",{class:(0,i.C_)({infoDineros:8==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[8].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",style:{"text-align":"center"},onClick:l[9]||(l[9]=a=>n.setActivo(9))},[(0,e._)("img",{src:"/img/10euros.png",width:n.sizeBilletes},null,8,C),p,(0,e._)("label",{class:(0,i.C_)({infoDineros:9==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[9].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",style:{"text-align":"center"},onClick:l[10]||(l[10]=a=>n.setActivo(10))},[(0,e._)("img",{src:"/img/20euros.png",width:n.sizeBilletes},null,8,y),k,(0,e._)("label",{class:(0,i.C_)({infoDineros:10==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[10].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",style:{"text-align":"center"},onClick:l[11]||(l[11]=a=>n.setActivo(11))},[(0,e._)("img",{src:"/img/50euros.png",width:n.sizeBilletes},null,8,D),A,(0,e._)("label",{class:(0,i.C_)({infoDineros:11==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[11].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",style:{"text-align":"center"},onClick:l[12]||(l[12]=a=>n.setActivo(12))},[(0,e._)("img",{src:"/img/100euros.png",width:n.sizeBilletes},null,8,N),$,(0,e._)("label",{class:(0,i.C_)({infoDineros:12==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[12].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",style:{"text-align":"center"},onClick:l[13]||(l[13]=a=>n.setActivo(13))},[(0,e._)("img",{src:"/img/200euros.png",width:n.sizeBilletes},null,8,j),S,(0,e._)("label",{class:(0,i.C_)({infoDineros:13==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[13].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,e._)("div",{class:"col",style:{"text-align":"center"},onClick:l[14]||(l[14]=a=>n.setActivo(14))},[(0,e._)("img",{src:"/img/500euros.png",width:n.sizeBilletes},null,8,B),x,(0,e._)("label",{class:(0,i.C_)({infoDineros:14==n.activo,unidadesSize:!0})},(0,i.zw)(n.infoDinero[14].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)])]),(0,e._)("div",{class:"d-flex justify-content-center mt-4",onClick:l[15]||(l[15]=a=>n.setActivo(null))},[(0,e._)("p",null,[(0,e.Wm)(V,{icon:"box"}),(0,e.Uk)("   "),(0,e._)("span",{class:(0,i.C_)([{infoDineros:null==n.activo,unidadesSize:!0},"border border-2 rounded"])},(0,i.zw)(a.$t("cambio_de_emergencia","Cambio de emergencia"))+": "+(0,i.zw)(n.cambioEmergencia)+" €",3)])]),(0,e._)("div",M,[(0,e._)("div",E,[(0,e._)("a",{class:"boton",onClick:l[16]||(l[16]=a=>n.addNumero(0))},"0"),(0,e._)("a",{class:"boton",onClick:l[17]||(l[17]=a=>n.addNumero(1))},"1"),(0,e._)("a",{class:"boton",onClick:l[18]||(l[18]=a=>n.addNumero(2))},"2"),(0,e._)("a",{class:"boton",onClick:l[19]||(l[19]=a=>n.addNumero(3))},"3"),(0,e._)("a",{class:"boton",onClick:l[20]||(l[20]=a=>n.addNumero(4))},"4"),(0,e._)("a",{class:"boton",onClick:l[21]||(l[21]=a=>n.addNumero(5))},"5"),(0,e._)("a",{class:"boton",onClick:l[22]||(l[22]=a=>n.addNumero(6))},"6"),(0,e._)("a",{class:"boton",onClick:l[23]||(l[23]=a=>n.addNumero(7))},"7"),(0,e._)("a",{class:"boton",onClick:l[24]||(l[24]=a=>n.addNumero(8))},"8"),(0,e._)("a",{class:"boton",onClick:l[25]||(l[25]=a=>n.addNumero(9))},"9"),(0,e.wy)((0,e._)("a",{class:"boton",onClick:l[26]||(l[26]=a=>n.addComa())},",",512),[[r.F8,null==n.activo]]),(0,e._)("a",{class:"boton",onClick:l[27]||(l[27]=a=>n.borrarNumero())},"<")])]),(0,e._)("div",Z,[(0,e.Wm)(W,{color:"primary",style:{"font-size":"27px"},size:"lg",onClick:l[28]||(l[28]=a=>n.abrirModalConfirmacion())},{default:(0,e.w5)((()=>[(0,e.Uk)((0,i.zw)(a.$t("abrir_con","ABRIR CON"))+" "+(0,i.zw)(n.getTotal.toFixed(2))+" € ",1)])),_:1}),(0,e.Wm)(W,{color:"warning",style:{"font-size":"27px"},size:"lg",onClick:l[29]||(l[29]=a=>n.volver()),disabled:n.loading},{default:(0,e.w5)((()=>[(0,e.Uk)((0,i.zw)(a.$t("volver","VOLVER")),1)])),_:1},8,["disabled"])])]),(0,e.Wm)(O,{id:"modalConfirmacionApertura",tabindex:"-1",labelledby:"tituloModalConfirmacionApertura",modelValue:n.modalConfirmacionApertura,"onUpdate:modelValue":l[32]||(l[32]=a=>n.modalConfirmacionApertura=a),centered:"",staticBackdrop:""},{default:(0,e.w5)((()=>[(0,e.Wm)(I,null,{default:(0,e.w5)((()=>[(0,e._)("div",T,[(0,e._)("div",U,[(0,e.Wm)(W,{color:"danger",class:"w-100",size:"lg",onClick:l[30]||(l[30]=a=>n.modalConfirmacionApertura=!1),disabled:n.loading},{default:(0,e.w5)((()=>[(0,e.Uk)((0,i.zw)(a.$t("cancelar","Cancelar")),1)])),_:1},8,["disabled"])]),(0,e._)("div",H,[n.loading?((0,e.wg)(),(0,e.j4)(W,{key:1,color:"success",size:"lg",class:"w-100",disabled:n.loading},{default:(0,e.w5)((()=>[(0,e.Uk)((0,i.zw)(a.$t("cargando","Cargando"))+"...",1)])),_:1},8,["disabled"])):((0,e.wg)(),(0,e.j4)(W,{key:0,color:"success",size:"lg",class:"w-100",onClick:l[31]||(l[31]=a=>n.abrirCaja()),disabled:n.loading},{default:(0,e.w5)((()=>[(0,e.Uk)((0,i.zw)(a.$t("confirmar","Confirmar")),1)])),_:1},8,["disabled"]))])])])),_:1})])),_:1},8,["modelValue"])],64)}o(57658);var R=o(44870),V=o(44161),W=o(54455),I=o(42492),O=o.n(I),P=o(74313),Y=o(20065),G={name:"AbrirCajaView",components:{MDBModal:P.j3,MDBModalBody:P.Yz,MDBBtn:P.$v},setup(){const a=(0,Y.oR)(),l=(0,R.iH)(!1),o=(0,R.iH)(null),i=((0,e.Fl)((()=>69)),(0,R.iH)([{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""}])),r=(0,R.iH)(0),n=0,s="160",t=(0,R.iH)(0),d=(0,R.iH)(0),c=(0,e.Fl)((()=>{let a=0;return a+=.01*i.value[0].valor,a+=.02*i.value[1].valor,a+=.05*i.value[2].valor,a+=.1*i.value[3].valor,a+=.2*i.value[4].valor,a+=.5*i.value[5].valor,a+=1*i.value[6].valor,a+=2*i.value[7].valor,a+=5*i.value[8].valor,a+=10*i.value[9].valor,a+=20*i.value[10].valor,a+=50*i.value[11].valor,a+=100*i.value[12].valor,a+=200*i.value[13].valor,a+=500*i.value[14].valor,a+=Number(d.value.toString()),a})),u=(0,R.iH)(!1),v=(0,e.Fl)((()=>{const a=[{_id:"0.01",valor:.01*i.value[0].valor,unidades:i.value[0].valor},{_id:"0.02",valor:.02*i.value[1].valor,unidades:i.value[1].valor},{_id:"0.05",valor:.05*i.value[2].valor,unidades:i.value[2].valor},{_id:"0.10",valor:.1*i.value[3].valor,unidades:i.value[3].valor},{_id:"0.20",valor:.2*i.value[4].valor,unidades:i.value[4].valor},{_id:"0.50",valor:.5*i.value[5].valor,unidades:i.value[5].valor},{_id:"1",valor:1*i.value[6].valor,unidades:i.value[6].valor},{_id:"2",valor:2*i.value[7].valor,unidades:i.value[7].valor},{_id:"5",valor:5*i.value[8].valor,unidades:i.value[8].valor},{_id:"10",valor:10*i.value[9].valor,unidades:i.value[9].valor},{_id:"20",valor:20*i.value[10].valor,unidades:i.value[10].valor},{_id:"50",valor:50*i.value[11].valor,unidades:i.value[11].valor},{_id:"100",valor:100*i.value[12].valor,unidades:i.value[12].valor},{_id:"200",valor:200*i.value[13].valor,unidades:i.value[13].valor},{_id:"500",valor:500*i.value[14].valor,unidades:i.value[14].valor}];return a}));function _(a){r.value=a}function g(){W.Z.push("/menu/caja")}function m(){null==r.value&&(d.value=d.value.toString()+".")}function f(a){null==r.value?d.value=Number(d.value.toString()+a):i.value[r.value].valor=Number(i.value[r.value].valor.toString()+a)}function w(){i.value=[{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""}],t.value=0}async function b(){function a(){V.Z.post("clientes/descargarClientesFinales").then((a=>{if(!a.data)throw Error("No se han podido descargar los clientes finales")})).catch((a=>{}))}function l(){V.Z.get("tarifas/descargarTarifas").then((a=>{if(!a.data)throw Error("No se han podido descargar las tarifas especiales")})).catch((a=>{}))}function o(){V.Z.get("trabajadores/actualizarTrabajadores").then((a=>{if(!a.data)throw Error("No se ha podido actualizar los trabajadores")})).catch((a=>{}))}async function e(){await V.Z.post("teclado/actualizarTeclado").then((a=>{if(!a.data)throw Error("No se ha podido actualizar el teclado")})).catch((a=>{}))}function i(){V.Z.get("promociones/descargarPromociones").then((a=>{if(!a.data)throw Error("No se han podido actualizar las promociones")})).catch((a=>{}))}function r(){V.Z.get("parametros/actualizarParametros").then((a=>{if(!a.data)throw Error("No se han podido actualizar los parámetros")})).catch((a=>{}))}a(),l(),r(),i(),await e(),o(),document.location.href=`http://${window.location.hostname}:${window.location.port}`}function h(){u.value=!0}function z(){u.value=!1}async function C(){h();try{await b()}catch(l){console.log("error cargar todo:",l.message),z()}try{const l=(await V.Z.post("/caja/abrirCaja",{total:c.value,detalle:v.value,cambioEmergencia:Number(d.value.toString()),idDependienta:a.getters["Trabajadores/getTrabajadorActivo"]._id})).data;if(!l)throw Error("No se ha podido abrir la caja")}catch(l){O().fire("Error",l.message,"error"),z()}z()}function p(){null==r.value?d.value=Number(d.value.toString().slice(0,-1)):i.value[r.value].valor=Number(i.value[r.value].valor.toString().slice(0,-1))}function y(){l.value=!0}function k(){l.value=!1}return(0,e.bv)((()=>{if(V.Z.get("caja/getMonedasUltimoCierre").then((a=>{if(a.data&&a.data){d.value=a.data.cambioEmergencia||0;for(let l=0;l<a.data.array.length;l++)i.value[l].valor=a.data.array[l]}else O().fire("Oops...","No se ha podido cargar la información (backend)","warning")})).catch((a=>{O().fire("Error","No se ha podido cargar la información del último cierre (petición)","error")})),void 0==a.getters["Trabajadores/getTrabajadorActivo"]?._id)return W.Z.push("/menu/fichajes");V.Z.post("impresora/abrirCajon").catch((a=>{console.log("No se ha podido abrir el cajon -> "+a)}))})),{ejemplo:o,volver:g,infoDinero:i,activo:r,totalClearOne:n,sizeBilletes:s,setActivo:_,addNumero:f,resetTodo:w,borrarNumero:p,getTotal:c,cantidad3G:t,abrirCaja:C,abrirModalConfirmacion:y,cerrarModalConfirmacion:k,modalConfirmacionApertura:l,cambioEmergencia:d,addComa:m,loading:u}}},J=o(40089);const L=(0,J.Z)(G,[["render",F],["__scopeId","data-v-e5627d30"]]);var q=L}}]);
//# sourceMappingURL=888.4ef1d497.js.map