"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[983],{87185:function(e,a,l){l.d(a,{Z:function(){return p}});var n=l(73396);const i={class:"btn-group-vertical mt-1"},o={class:"btn-group"},t={class:"btn-group"},d={class:"btn-group"},u={class:"btn-group"},s={class:"btn-group"};function c(e,a,l,c,r,v){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",o,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[0]||(a[0]=e=>c.addTecla("1"))}," 1 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[1]||(a[1]=e=>c.addTecla("2"))}," 2 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[2]||(a[2]=e=>c.addTecla("3"))}," 3 ")]),(0,n._)("div",t,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[3]||(a[3]=e=>c.addTecla("4"))}," 4 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[4]||(a[4]=e=>c.addTecla("5"))}," 5 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[5]||(a[5]=e=>c.addTecla("6"))}," 6 ")]),(0,n._)("div",d,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[6]||(a[6]=e=>c.addTecla("7"))}," 7 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[7]||(a[7]=e=>c.addTecla("8"))}," 8 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[8]||(a[8]=e=>c.addTecla("9"))}," 9 ")]),(0,n._)("div",u,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[9]||(a[9]=e=>c.deleteTecla())}," < "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[10]||(a[10]=e=>c.addTecla("0"))}," 0 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:a[11]||(a[11]=e=>c.okValue(Number(c.cantidad)))}," OK ")]),(0,n._)("div",s,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonComa",onClick:a[12]||(a[12]=e=>c.addTecla("."))}," , ")])])}var r=l(44870),v={name:"NumpadComponent",setup(e,{expose:a}){const l=(0,r.iH)("0"),i=(0,n.f3)("okValue"),o=(0,r.iH)("5.5rem"),t=(0,r.iH)("5.5rem");function d(e){"."===e&&(l.value=l.value.replace(".","")),l.value+=e,"0"==l.value[0]&&(l.value=l.value.slice(1))}function u(){l.value=l.value.slice(0,-1),""===l.value&&(l.value="0")}function s(e){l.value=Number(e).toString()}return a({cantidad:l,setValor:s}),{okValue:i,cantidad:l,addTecla:d,deleteTecla:u,setValor:s,anchoTecla:o,altoTecla:t}}},_=l(40089);const m=(0,_.Z)(v,[["render",c],["__scopeId","data-v-0545dbcb"]]);var p=m},5983:function(e,a,l){l.r(a),l.d(a,{default:function(){return ae}});var n=l(73396),i=l(87139),o=l(49242);const t=e=>((0,n.dD)("data-v-51cd1374"),e=e(),(0,n.Cn)(),e),d={class:"row p-2",style:{"text-align":"center"}},u=t((()=>(0,n._)("img",{src:"/img/1cts.png",width:"84",height:"84"},null,-1))),s=t((()=>(0,n._)("img",{src:"/img/2cts.png",width:"84",height:"84"},null,-1))),c=t((()=>(0,n._)("img",{src:"/img/5cts.png",width:"84",height:"84"},null,-1))),r=t((()=>(0,n._)("img",{src:"/img/10cts.png",width:"84",height:"84"},null,-1))),v=t((()=>(0,n._)("img",{src:"/img/20cts.png",width:"84",height:"84"},null,-1))),_=t((()=>(0,n._)("img",{src:"/img/50cts.png",width:"84",height:"84"},null,-1))),m=t((()=>(0,n._)("img",{src:"/img/uneuro.png",width:"84",height:"84"},null,-1))),p=t((()=>(0,n._)("img",{src:"/img/doseuros.png",width:"84",height:"84"},null,-1))),b={class:"row mx-auto mt-4"},g=["width"],f=t((()=>(0,n._)("br",null,null,-1))),w=["width"],C=t((()=>(0,n._)("br",null,null,-1))),z=["width"],y=t((()=>(0,n._)("br",null,null,-1))),h=["width"],k=t((()=>(0,n._)("br",null,null,-1))),D=["width"],T=t((()=>(0,n._)("br",null,null,-1))),A=["width"],x=t((()=>(0,n._)("br",null,null,-1))),B=["width"],M=t((()=>(0,n._)("br",null,null,-1))),j={class:"row"},$={class:"col-md-9"},N={key:0},S={class:"d-flex"},H={class:"col-md-3 text-end"},W={class:"row"},V={class:"col"},U={class:"input-group input-group-lg"},F={class:"input-group-text",id:"inputGroup-sizing-lg"},R={class:"row"},I={class:"col text-center"};function O(e,a,l,t,O,Z){const G=(0,n.up)("MDBCardTitle"),J=(0,n.up)("MDBCardText"),P=(0,n.up)("MDBBtn"),Y=(0,n.up)("MDBCardBody"),q=(0,n.up)("MDBCard"),E=(0,n.up)("NumpadComponent"),L=(0,n.up)("MDBModalTitle"),K=(0,n.up)("MDBModalHeader"),Q=(0,n.up)("MDBModalBody"),X=(0,n.up)("MDBModalFooter"),ee=(0,n.up)("MDBModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",d,[(0,n._)("div",{class:"col",onClick:a[0]||(a[0]=e=>t.setActivo(0))},[u,(0,n._)("label",{class:(0,i.C_)([{seleccionado:0==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[0])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:a[1]||(a[1]=e=>t.setActivo(1))},[s,(0,n._)("label",{class:(0,i.C_)([{seleccionado:1==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[1])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:a[2]||(a[2]=e=>t.setActivo(2))},[c,(0,n._)("label",{class:(0,i.C_)([{seleccionado:2==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[2])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:a[3]||(a[3]=e=>t.setActivo(3))},[r,(0,n._)("label",{class:(0,i.C_)([{seleccionado:3==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[3])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:a[4]||(a[4]=e=>t.setActivo(4))},[v,(0,n._)("label",{class:(0,i.C_)([{seleccionado:4==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[4])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:a[5]||(a[5]=e=>t.setActivo(5))},[_,(0,n._)("label",{class:(0,i.C_)([{seleccionado:5==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[5])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:a[6]||(a[6]=e=>t.setActivo(6))},[m,(0,n._)("label",{class:(0,i.C_)([{seleccionado:6==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[6])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:a[7]||(a[7]=e=>t.setActivo(7))},[p,(0,n._)("label",{class:(0,i.C_)([{seleccionado:7==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[7])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)])]),(0,n._)("div",b,[(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:a[8]||(a[8]=e=>t.setActivo(8))},[(0,n._)("img",{src:"/img/5euros.png",width:t.sizeBilletes},null,8,g),(0,n.Uk)(),f,(0,n._)("label",{class:(0,i.C_)([{seleccionado:8==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[8])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:a[9]||(a[9]=e=>t.setActivo(9))},[(0,n._)("img",{src:"/img/10euros.png",width:t.sizeBilletes},null,8,w),C,(0,n._)("label",{class:(0,i.C_)([{seleccionado:9==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[9])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:a[10]||(a[10]=e=>t.setActivo(10))},[(0,n._)("img",{src:"/img/20euros.png",width:t.sizeBilletes},null,8,z),y,(0,n._)("label",{class:(0,i.C_)([{seleccionado:10==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[10])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:a[11]||(a[11]=e=>t.setActivo(11))},[(0,n._)("img",{src:"/img/50euros.png",width:t.sizeBilletes},null,8,h),k,(0,n._)("label",{class:(0,i.C_)([{seleccionado:11==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[11])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:a[12]||(a[12]=e=>t.setActivo(12))},[(0,n._)("img",{src:"/img/100euros.png",width:t.sizeBilletes},null,8,D),T,(0,n._)("label",{class:(0,i.C_)([{seleccionado:12==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[12])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:a[13]||(a[13]=e=>t.setActivo(13))},[(0,n._)("img",{src:"/img/200euros.png",width:t.sizeBilletes},null,8,A),x,(0,n._)("label",{class:(0,i.C_)([{seleccionado:13==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[13])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:a[14]||(a[14]=e=>t.setActivo(14))},[(0,n._)("img",{src:"/img/500euros.png",width:t.sizeBilletes},null,8,B),M,(0,n._)("label",{class:(0,i.C_)([{seleccionado:14==t.indexActivo},"unidadesSize"])},(0,i.zw)(t.infoDinero[14])+" "+(0,i.zw)(e.$t("unidades","unidades")),3)])]),(0,n._)("div",j,[(0,n._)("div",$,[(0,n.Wm)(q,{class:"sizeInfoCaja"},{default:(0,n.w5)((()=>[(0,n.Wm)(Y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(G,{class:"estiloTituloInfo"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("informacion_de_la_caja","Información de la caja")),1)])),_:1}),(0,n.Wm)(J,{class:"estiloInfoCaja sizeCajaInfo"},{default:(0,n.w5)((()=>[(0,n._)("p",null,(0,i.zw)(e.$t("total_contado","Total contado"))+": "+(0,i.zw)(t.total)+" euros",1),t.trabajadorActivo?((0,n.wg)(),(0,n.iD)("p",N,(0,i.zw)(e.$t("dependienta_responsable","Dependienta responsable"))+": "+(0,i.zw)(t.trabajadorActivo.nombre),1)):(0,n.kq)("",!0)])),_:1}),(0,n._)("div",S,[(0,n.Wm)(P,{color:"primary",class:"w-100",size:"lg",onClick:a[15]||(a[15]=e=>t.confirmarCierre())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("cerrar_caja","Cerrar caja")),1)])),_:1}),t.estadoTurno?((0,n.wg)(),(0,n.j4)(P,{key:0,onClick:a[16]||(a[16]=e=>t.cambioTurno()),color:"primary",class:"w-50",size:"lg"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("anular_cambio_turno","Anular cambio turno")),1)])),_:1})):((0,n.wg)(),(0,n.j4)(P,{key:1,onClick:a[17]||(a[17]=e=>t.anularTurno()),color:"primary",class:"w-50",size:"lg"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("cambio_turno","Cambio turno")),1)])),_:1}))])])),_:1})])),_:1})]),(0,n._)("div",H,[(0,n.Wm)(E,{ref:"numpadRef"},null,512)])]),(0,n.Wm)(ee,{id:"modalConfirmar",tabindex:"-1",labelledby:"modalConfirmarLabel",modelValue:t.modalConfirmar,"onUpdate:modelValue":a[21]||(a[21]=e=>t.modalConfirmar=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(K,null,{default:(0,n.w5)((()=>[(0,n.Wm)(L,{id:"modalConfirmarLabel"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("confirmacion_de_cierre","Confirmación de cierre")),1)])),_:1})])),_:1}),(0,n.Wm)(Q,null,{default:(0,n.w5)((()=>[(0,n._)("div",W,[(0,n._)("div",V,[(0,n._)("div",U,[(0,n._)("span",F,(0,i.zw)(e.$t("datafono_manual","Datáfono manual")),1),t.numpadRef2?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",(0,n.dG)({key:0,type:"text",class:"form-control","onUpdate:modelValue":a[18]||(a[18]=e=>t.numpadRef2.cantidad=e)},(0,n.mx)(t.cargarTotal3G(),!0)),null,16)),[[o.nr,t.numpadRef2.cantidad]]):(0,n.kq)("",!0)])])]),(0,n._)("div",R,[(0,n._)("div",I,[(0,n.Wm)(E,{ref:"numpadRef2"},null,512)])])])),_:1}),(0,n.Wm)(X,null,{default:(0,n.w5)((()=>[(0,n.Wm)(P,{color:"secondary",onClick:a[19]||(a[19]=e=>t.modalConfirmar=!1),size:"lg"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("cerrar","Cerrar")),1)])),_:1}),(0,n.Wm)(P,{color:"primary",size:"lg",onClick:a[20]||(a[20]=e=>t.cerrarCaja())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("confirmar_cierre","Confirmar cierre")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}l(57658);var Z=l(44870),G=l(87185),J=l(74313),P=l(20065),Y=l(42492),q=l.n(Y),E=l(44161),L=l(22483),K=l(74834),Q={name:"CerrarCajaComponent",components:{NumpadComponent:G.Z,MDBCard:J.Yl,MDBCardBody:J.H7,MDBCardTitle:J.QM,MDBCardText:J.Pp,MDBBtn:J.$v,MDBModal:J.j3,MDBModalHeader:J.ol,MDBModalTitle:J.wo,MDBModalBody:J.Yz,MDBModalFooter:J.ab},setup(){const e=(0,Z.iH)(null),a="140",l=(0,Z.iH)(0),i=(0,Z.iH)(!0),o=(0,Z.iH)(null),t=(0,Z.iH)(null),d=(0,P.oR)(),u=(0,L.tv)(),s=(0,Z.iH)([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),c=(0,Z.iH)("Cerrar"),r=(0,Z.iH)(null),v=(0,Z.iH)(!1),_=(0,n.Fl)((()=>d.state.Caja.arrayVentas)),m=(0,n.Fl)((()=>d.state.Trabajadores.arrayTrabajadores)),p=(0,n.Fl)((()=>d.state.Trabajadores.indexActivo)),b=(0,n.Fl)((()=>m.value&&null!=p.value&&void 0!=p.value&&m.value[p.value]?m.value[p.value]:null));function g(a){e.value=a,o.value.setValor(s.value[a])}const f=(0,n.Fl)((()=>{let e=0;return e+=.01*s.value[0],e+=.02*s.value[1],e+=.05*s.value[2],e+=.1*s.value[3],e+=.2*s.value[4],e+=.5*s.value[5],e+=1*s.value[6],e+=2*s.value[7],e+=5*s.value[8],e+=10*s.value[9],e+=20*s.value[10],e+=50*s.value[11],e+=100*s.value[12],e+=200*s.value[13],e+=500*s.value[14],e}));function w(){const e=[{_id:"0.01",valor:.01*s.value[0],unidades:s.value[0]},{_id:"0.02",valor:.02*s.value[1],unidades:s.value[1]},{_id:"0.05",valor:.05*s.value[2],unidades:s.value[2]},{_id:"0.10",valor:.1*s.value[3],unidades:s.value[3]},{_id:"0.20",valor:.2*s.value[4],unidades:s.value[4]},{_id:"0.50",valor:.5*s.value[5],unidades:s.value[5]},{_id:"1",valor:1*s.value[6],unidades:s.value[6]},{_id:"2",valor:2*s.value[7],unidades:s.value[7]},{_id:"5",valor:5*s.value[8],unidades:s.value[8]},{_id:"10",valor:10*s.value[9],unidades:s.value[9]},{_id:"20",valor:20*s.value[10],unidades:s.value[10]},{_id:"50",valor:50*s.value[11],unidades:s.value[11]},{_id:"100",valor:100*s.value[12],unidades:s.value[12]},{_id:"200",valor:200*s.value[13],unidades:s.value[13]},{_id:"500",valor:500*s.value[14],unidades:s.value[14]}];return e}async function C(){try{const e=await E.Z.post("caja/cerrarCaja",{total:f.value,detalleMonedas:w(),infoDinero:s.value,cantidad3G:Number(t.value.cantidad),idDependienta:b.value._id});if(!e.data)throw Error("No se ha podido cerrar la caja");q().fire({title:"Caja cerrada correctamente",icon:"success",confirmButtonText:"Continuar"}).then((e=>{e.isConfirmed&&u.push("/abrirCaja")}))}catch(e){q().fire("Oops...",e.message,"error")}}function z(){i.value=!0,r.value=!0}function y(){E.Z.post("/caja/cambioTurno").then((e=>{null!=e&&(v.value=!1)}))}function h(){E.Z.post("caja/anularTurno").then((e=>{null!=e&&(v.value=!0)}))}const k=(0,n.Fl)((()=>o.value?Number(o.value.cantidad):null));function D(e,a,l){const n=new Date;n.setTime(n.getTime()+24*l*60*60*1e3);let i="expires="+n.toUTCString();document.cookie=e+"="+a+";"+i+";path=/"}function T(e){let a=e+"=",l=decodeURIComponent(document.cookie),n=l.split(";");for(let i=0;i<n.length;i++){let e=n[i];while(" "==e.charAt(0))e=e.substring(1);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return""}function A(){if(i.value&&(i.value=!1,_&&_.value?.length>0)){let e=0;_.value.forEach((a=>{"DATAFONO_3G"==a.tipoPago&&(e+=a.total)})),t.value.setValor(e)}}return(0,n.YP)(k,(()=>{null!=e.value&&void 0!=e.value&&(s.value[e.value]=k.value,D("datosCierre",JSON.stringify(s.value),7))})),(0,n.bv)((()=>{K.W.cargarVentas(),E.Z.post("/caja/comprovarTurno").then((e=>{v.value=e.data.info.estado}));try{const e=T("datosCierre");""!=e&&(s.value=JSON.parse(e))}catch(e){q().fire("Oops...","No hay datos del último cierre","info")}})),(0,n.JJ)("okValue",(()=>r.value?C():z())),{infoDinero:s,setActivo:g,indexActivo:e,sizeBilletes:a,total:f,numpadRef:o,cerrarCaja:C,modo:c,trabajadorActivo:b,modalConfirmar:r,confirmarCierre:z,cantidad3G:l,numpadRef2:t,estadoTurno:v,cambioTurno:y,anularTurno:h,cargarTotal3G:A,itsMyFirstTimePleaseBeCareful:i}}},X=l(40089);const ee=(0,X.Z)(Q,[["render",O],["__scopeId","data-v-51cd1374"]]);var ae=ee}}]);
//# sourceMappingURL=983.0f97491a.js.map