"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[325],{61837:function(a,e,l){l.d(e,{Z:function(){return g}});var n=l(73396);const t={class:"btn-group-vertical mt-1"},o={class:"btn-group"},i={class:"btn-group"},d={class:"btn-group"},s={class:"btn-group"},u={class:"btn-group"};function c(a,e,l,c,r,v){return(0,n.wg)(),(0,n.iD)("div",t,[(0,n._)("div",o,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[0]||(e[0]=a=>c.addTecla("1"))}," 1 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[1]||(e[1]=a=>c.addTecla("2"))}," 2 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[2]||(e[2]=a=>c.addTecla("3"))}," 3 ")]),(0,n._)("div",i,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[3]||(e[3]=a=>c.addTecla("4"))}," 4 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[4]||(e[4]=a=>c.addTecla("5"))}," 5 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[5]||(e[5]=a=>c.addTecla("6"))}," 6 ")]),(0,n._)("div",d,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[6]||(e[6]=a=>c.addTecla("7"))}," 7 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[7]||(e[7]=a=>c.addTecla("8"))}," 8 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[8]||(e[8]=a=>c.addTecla("9"))}," 9 ")]),(0,n._)("div",s,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[9]||(e[9]=a=>c.deleteTecla())}," < "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[10]||(e[10]=a=>c.addTecla("0"))}," 0 "),(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonNumpad",onClick:e[11]||(e[11]=a=>c.okValue(Number(c.cantidad)))}," OK ")]),(0,n._)("div",u,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary py-3 botonComa",onClick:e[12]||(e[12]=a=>c.addTecla("."))}," , ")])])}l(42492);var r=l(32066),v=l(1865),m=l(44870);const p=(0,r.io)("http://"+v.Z.state.TocGameURL+":5051");var b={props:{skipBalanza:{type:Boolean,default:!1}},name:"NumpadComponent",setup(a,{expose:e}){const l=(0,m.iH)("0"),t=(0,n.f3)("okValue"),o=(0,m.iH)("5.5rem"),i=(0,m.iH)("5.5rem");(0,n.Fl)((()=>v.Z.state.Weight.lastWeight));function d(a){"."===a&&(l.value=l.value.replace(".","")),l.value+=a,"0"==l.value[0]&&(l.value=l.value.slice(1))}function s(){l.value=l.value.slice(0,-1),""===l.value&&(l.value="0")}function u(a){l.value=Number(a).toString()}return p.on("setBalanzaValue",(e=>{e&&!a.skipBalanza&&u(e)})),e({cantidad:l,setValor:u}),(0,n.bv)((async()=>{a.skipBalanza||u((await(0,n.Fl)((()=>v.Z.state.Weight.lastWeight))).value)})),{okValue:t,cantidad:l,addTecla:d,deleteTecla:s,setValor:u,anchoTecla:o,altoTecla:i}}},_=l(40089);const f=(0,_.Z)(b,[["render",c],["__scopeId","data-v-6fec6be8"]]);var g=f},75325:function(a,e,l){l.r(e),l.d(e,{default:function(){return oa}});var n=l(73396),t=l(87139),o=l(49242);const i=a=>((0,n.dD)("data-v-5521e4de"),a=a(),(0,n.Cn)(),a),d={class:"row p-2",style:{"text-align":"center"}},s=i((()=>(0,n._)("img",{src:"/img/1cts.png",width:"84",height:"84"},null,-1))),u=i((()=>(0,n._)("img",{src:"/img/2cts.png",width:"84",height:"84"},null,-1))),c=i((()=>(0,n._)("img",{src:"/img/5cts.png",width:"84",height:"84"},null,-1))),r=i((()=>(0,n._)("img",{src:"/img/10cts.png",width:"84",height:"84"},null,-1))),v=i((()=>(0,n._)("img",{src:"/img/20cts.png",width:"84",height:"84"},null,-1))),m=i((()=>(0,n._)("img",{src:"/img/50cts.png",width:"84",height:"84"},null,-1))),p=i((()=>(0,n._)("img",{src:"/img/uneuro.png",width:"84",height:"84"},null,-1))),b=i((()=>(0,n._)("img",{src:"/img/doseuros.png",width:"84",height:"84"},null,-1))),_={class:"row mx-auto mt-1"},f=["width"],g=i((()=>(0,n._)("br",null,null,-1))),w=["width"],C=i((()=>(0,n._)("br",null,null,-1))),y=["width"],z=i((()=>(0,n._)("br",null,null,-1))),k=["width"],h=i((()=>(0,n._)("br",null,null,-1))),D=["width"],B=i((()=>(0,n._)("br",null,null,-1))),A=["width"],T=i((()=>(0,n._)("br",null,null,-1))),x=["width"],M=i((()=>(0,n._)("br",null,null,-1))),j={class:"row"},N={class:"col-md-9"},$={key:0,style:{"font-size":"0.5rem",zoom:"0.6"},class:"spinner-border",role:"status"},H=i((()=>(0,n._)("span",{class:"visually-hidden"},"Loading...",-1))),W=[H],S={key:0},P={key:1},F={class:"d-flex"},U={class:"col-md-3 text-end"},Z={class:"row"},V={class:"col"},E={class:"input-group input-group-lg"},q={class:"input-group-text",id:"inputGroup-sizing-lg"},G={class:"row"},I={class:"col text-center"};function O(a,e,l,i,H,O){const R=(0,n.up)("MDBCardTitle"),L=(0,n.up)("MDBIcon"),Y=(0,n.up)("MDBCardText"),J=(0,n.up)("MDBBtn"),K=(0,n.up)("MDBCardBody"),Q=(0,n.up)("MDBCard"),X=(0,n.up)("NumpadComponent"),aa=(0,n.up)("MDBModalTitle"),ea=(0,n.up)("MDBModalHeader"),la=(0,n.up)("MDBModalBody"),na=(0,n.up)("MDBModalFooter"),ta=(0,n.up)("MDBModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",d,[(0,n._)("div",{class:"col",onClick:e[0]||(e[0]=a=>i.setActivo(0))},[s,(0,n._)("label",{class:(0,t.C_)([{seleccionado:0==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[0])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[1]||(e[1]=a=>i.setActivo(1))},[u,(0,n._)("label",{class:(0,t.C_)([{seleccionado:1==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[1])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[2]||(e[2]=a=>i.setActivo(2))},[c,(0,n._)("label",{class:(0,t.C_)([{seleccionado:2==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[2])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[3]||(e[3]=a=>i.setActivo(3))},[r,(0,n._)("label",{class:(0,t.C_)([{seleccionado:3==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[3])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[4]||(e[4]=a=>i.setActivo(4))},[v,(0,n._)("label",{class:(0,t.C_)([{seleccionado:4==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[4])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[5]||(e[5]=a=>i.setActivo(5))},[m,(0,n._)("label",{class:(0,t.C_)([{seleccionado:5==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[5])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[6]||(e[6]=a=>i.setActivo(6))},[p,(0,n._)("label",{class:(0,t.C_)([{seleccionado:6==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[6])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[7]||(e[7]=a=>i.setActivo(7))},[b,(0,n._)("label",{class:(0,t.C_)([{seleccionado:7==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[7])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)])]),(0,n._)("div",_,[(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[8]||(e[8]=a=>i.setActivo(8))},[(0,n._)("img",{src:"/img/5euros.png",width:i.sizeBilletes},null,8,f),(0,n.Uk)(),g,(0,n._)("label",{class:(0,t.C_)([{seleccionado:8==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[8])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[9]||(e[9]=a=>i.setActivo(9))},[(0,n._)("img",{src:"/img/10euros.png",width:i.sizeBilletes},null,8,w),C,(0,n._)("label",{class:(0,t.C_)([{seleccionado:9==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[9])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[10]||(e[10]=a=>i.setActivo(10))},[(0,n._)("img",{src:"/img/20euros.png",width:i.sizeBilletes},null,8,y),z,(0,n._)("label",{class:(0,t.C_)([{seleccionado:10==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[10])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[11]||(e[11]=a=>i.setActivo(11))},[(0,n._)("img",{src:"/img/50euros.png",width:i.sizeBilletes},null,8,k),h,(0,n._)("label",{class:(0,t.C_)([{seleccionado:11==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[11])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[12]||(e[12]=a=>i.setActivo(12))},[(0,n._)("img",{src:"/img/100euros.png",width:i.sizeBilletes},null,8,D),B,(0,n._)("label",{class:(0,t.C_)([{seleccionado:12==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[12])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[13]||(e[13]=a=>i.setActivo(13))},[(0,n._)("img",{src:"/img/200euros.png",width:i.sizeBilletes},null,8,A),T,(0,n._)("label",{class:(0,t.C_)([{seleccionado:13==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[13])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[14]||(e[14]=a=>i.setActivo(14))},[(0,n._)("img",{src:"/img/500euros.png",width:i.sizeBilletes},null,8,x),M,(0,n._)("label",{class:(0,t.C_)([{seleccionado:14==i.indexActivo},"unidadesSize"])},(0,t.zw)(i.infoDinero[14])+" "+(0,t.zw)(a.$t("unidades","unidades")),3)])]),(0,n._)("div",j,[(0,n._)("div",N,[(0,n.Wm)(Q,{class:"sizeInfoCaja"},{default:(0,n.w5)((()=>[(0,n.Wm)(K,null,{default:(0,n.w5)((()=>[(0,n.Wm)(R,{class:"estiloTituloInfo"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("informacion_de_la_caja","Información de la caja")),1)])),_:1}),(0,n.Wm)(Y,{class:"estiloInfoCaja sizeCajaInfo"},{default:(0,n.w5)((()=>[(0,n._)("p",null,[(0,n.Wm)(L,{icon:"money-bill"}),(0,n.Uk)("   "+(0,t.zw)(a.$t("total_contado","Total contado"))+": "+(0,t.zw)(i.total)+" € ",1)]),(0,n._)("p",null,[(0,n.Wm)(L,{icon:"credit-card"}),(0,n.Uk)("   "+(0,t.zw)(a.$t("total_paytef","Total Datáfono "))+" : ",1),null==i.totalPaytef?((0,n.wg)(),(0,n.iD)("div",$,W)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,t.zw)(null==i.totalPaytef?"":i.totalPaytef.toFixed(2)+" €")+"  ",1),null!=i.totalPaytef?((0,n.wg)(),(0,n.j4)(L,{key:1,icon:i.isLanPaytef?"ethernet":"globe"},null,8,["icon"])):(0,n.kq)("",!0)]),i.trabajadorActivo?((0,n.wg)(),(0,n.iD)("p",S,[(0,n.Wm)(L,{icon:"user"}),(0,n.Uk)("   "+(0,t.zw)(a.$t("dependienta_responsable","Dependienta responsable"))+": ",1),(0,n._)("i",null,(0,t.zw)(i.trabajadorActivo.nombre),1)])):(0,n.kq)("",!0),i.trabajadorActivo?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("p",P,[(0,n.Wm)(L,{icon:"user"}),(0,n._)("i",null,"   "+(0,t.zw)(a.$t("sin_dependienta_responsable","Sin dependienta responsable")),1)])),(0,n._)("div",{class:"d-flex",onClick:e[15]||(e[15]=a=>i.setCambioEmergencia())},[(0,n._)("p",null,[(0,n.Wm)(L,{icon:"box"}),(0,n.Uk)("   "),(0,n._)("span",{class:(0,t.C_)([{seleccionado:i.cambioEmActivo},"border border-2 rounded"])},(0,t.zw)(a.$t("cambio_de_emergencia","Cambio de emergencia"))+": "+(0,t.zw)(i.cambioEmergencia)+" €",3)])])])),_:1}),(0,n._)("div",F,[(0,n.Wm)(J,{color:"primary",class:"w-100",size:"lg",onClick:e[16]||(e[16]=a=>i.confirmarCierre()),disabled:i.botonesBloqueados},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("cerrar_caja","Cerrar caja")),1)])),_:1},8,["disabled"]),i.estadoTurno?((0,n.wg)(),(0,n.j4)(J,{key:0,onClick:e[17]||(e[17]=a=>i.cambioTurno()),color:"primary",class:"w-50",size:"lg",disabled:i.botonesBloqueados},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("anular_cambio_turno","Anular cambio turno")),1)])),_:1},8,["disabled"])):((0,n.wg)(),(0,n.j4)(J,{key:1,onClick:e[18]||(e[18]=a=>i.anularTurno()),color:"primary",class:"w-50",size:"lg",disabled:i.botonesBloqueados},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("cambio_turno","Cambio turno")),1)])),_:1},8,["disabled"]))])])),_:1})])),_:1})]),(0,n._)("div",U,[(0,n.Wm)(X,{ref:"numpadRef"},null,512)])]),(0,n.Wm)(ta,{id:"modalConfirmar",tabindex:"-1",labelledby:"modalConfirmarLabel",modelValue:i.modalConfirmar,"onUpdate:modelValue":e[22]||(e[22]=a=>i.modalConfirmar=a)},{default:(0,n.w5)((()=>[(0,n.Wm)(ea,null,{default:(0,n.w5)((()=>[(0,n.Wm)(aa,{id:"modalConfirmarLabel"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("confirmacion_de_cierre","Confirmación de cierre")),1)])),_:1})])),_:1}),(0,n.Wm)(la,null,{default:(0,n.w5)((()=>[(0,n._)("div",Z,[(0,n._)("div",V,[(0,n._)("div",E,[(0,n._)("span",q,(0,t.zw)(a.$t("datafono_manual","Datáfono manual")),1),i.numpadRef2?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",(0,n.dG)({key:0,type:"text",class:"form-control","onUpdate:modelValue":e[19]||(e[19]=a=>i.numpadRef2.cantidad=a)},(0,n.mx)(i.cargarTotal3G(),!0)),null,16)),[[o.nr,i.numpadRef2.cantidad]]):(0,n.kq)("",!0)])])]),(0,n._)("div",G,[(0,n._)("div",I,[(0,n.Wm)(X,{skipBalanza:!0,ref:"numpadRef2"},null,512)])])])),_:1}),(0,n.Wm)(na,null,{default:(0,n.w5)((()=>[(0,n.Wm)(J,{color:"secondary",onClick:e[20]||(e[20]=a=>i.modalConfirmar=!1),size:"lg"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("cerrar","Cerrar")),1)])),_:1}),(0,n.Wm)(J,{color:"primary",size:"lg",onClick:e[21]||(e[21]=a=>i.cerrarCaja())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("confirmar_cierre","Confirmar cierre")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}l(57658);var R=l(44870),L=l(61837),Y=l(74313),J=l(20065),K=l(42492),Q=l.n(K),X=l(44161),aa=l(22483),ea=l(74834),la={name:"CerrarCajaComponent",components:{NumpadComponent:L.Z,MDBCard:Y.Yl,MDBCardBody:Y.H7,MDBCardTitle:Y.QM,MDBCardText:Y.Pp,MDBBtn:Y.$v,MDBCheckbox:Y.IH,MDBModal:Y.j3,MDBModalHeader:Y.ol,MDBModalTitle:Y.wo,MDBModalBody:Y.Yz,MDBModalFooter:Y.ab,MDBIcon:Y.vm,MDBLoading:Y.J$},setup(){const a=(0,R.iH)(0),e="140",l=(0,R.iH)(0),t=(0,R.iH)(!0),o=(0,R.iH)(null),i=(0,R.iH)(null),d=(0,J.oR)(),s=(0,aa.tv)(),u=(0,R.iH)([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),c=(0,R.iH)("Cerrar"),r=(0,R.iH)(null),v=(0,R.iH)(null),m=(0,R.iH)(0),p=(0,R.iH)(!1),b=(0,R.iH)(!1),_=(0,R.iH)(!1),f=(0,R.iH)(null),g=(0,R.iH)(null),w=(0,n.Fl)((()=>d.state.Caja.arrayVentas)),C=(0,n.Fl)((()=>d.state.Trabajadores.arrayTrabajadores)),y=(0,n.Fl)((()=>d.state.Trabajadores.indexActivo)),z=(0,n.Fl)((()=>C.value&&null!=y.value&&void 0!=y.value&&C.value[y.value]?C.value[y.value]:null)),k=(0,n.Fl)((()=>d.state.BtnMenuPrincipal.botonesBloqueados)),h=(0,R.iH)(null);function D(e){p.value&&(p.value=!1),a.value=e,o.value.setValor(u.value[e])}function B(){a.value=null,p.value=!0,o.value.setValor(m.value)}const A=(0,n.Fl)((()=>{let a=0;return a+=.01*u.value[0],a+=.02*u.value[1],a+=.05*u.value[2],a+=.1*u.value[3],a+=.2*u.value[4],a+=.5*u.value[5],a+=1*u.value[6],a+=2*u.value[7],a+=5*u.value[8],a+=10*u.value[9],a+=20*u.value[10],a+=50*u.value[11],a+=100*u.value[12],a+=200*u.value[13],a+=500*u.value[14],a+=Number(m.value.toString()),a}));function T(){const a=[{_id:"0.01",valor:.01*u.value[0],unidades:u.value[0]},{_id:"0.02",valor:.02*u.value[1],unidades:u.value[1]},{_id:"0.05",valor:.05*u.value[2],unidades:u.value[2]},{_id:"0.10",valor:.1*u.value[3],unidades:u.value[3]},{_id:"0.20",valor:.2*u.value[4],unidades:u.value[4]},{_id:"0.50",valor:.5*u.value[5],unidades:u.value[5]},{_id:"1",valor:1*u.value[6],unidades:u.value[6]},{_id:"2",valor:2*u.value[7],unidades:u.value[7]},{_id:"5",valor:5*u.value[8],unidades:u.value[8]},{_id:"10",valor:10*u.value[9],unidades:u.value[9]},{_id:"20",valor:20*u.value[10],unidades:u.value[10]},{_id:"50",valor:50*u.value[11],unidades:u.value[11]},{_id:"100",valor:100*u.value[12],unidades:u.value[12]},{_id:"200",valor:200*u.value[13],unidades:u.value[13]},{_id:"500",valor:500*u.value[14],unidades:u.value[14]}];return a}async function x(){if(null!=z.value&&void 0!=z.value)try{const a=await X.Z.post("caja/cerrarCaja",{total:A.value,detalleMonedas:T(),infoDinero:u.value,cantidad3G:Number(i.value.cantidad),cantidadPaytef:v.value,idDependienta:z.value._id,cambioEmergencia:Number(m.value.toString()),cantidad3GAutomatizado:h.value});if(!a.data)throw Error("No se ha podido cerrar la caja");d.dispatch("BtnMenuPrincipal/bloquearBotones"),Q().fire({backdrop:!1,title:"Caja cerrada correctamente",icon:"success",confirmButtonText:"Continuar"}).then((a=>{a.isConfirmed&&(d.dispatch("BtnMenuPrincipal/desbloquearBotones"),s.push("/abrirCaja"))}))}catch(a){Q().fire("Oops...",a.message,"error")}else Q().fire("Oops...","Necesitas seleccionar un trabajador para poder cerrar","error")}function M(){t.value=!0,r.value=!0}function j(){X.Z.post("/caja/cambioTurno").then((a=>{null!=a&&(_.value=!1)}))}function N(){X.Z.post("caja/anularTurno").then((a=>{null!=a&&(_.value=!0)}))}const $=(0,n.Fl)((()=>o.value?Number(o.value.cantidad):null));function H(a,e,l){const n=new Date;n.setTime(n.getTime()+24*l*60*60*1e3);let t="expires="+n.toUTCString();document.cookie=a+"="+e+";"+t+";path=/"}function W(){if(t.value&&(t.value=!1,w&&w.value?.length>0)){let a=0;w.value.forEach((e=>{const l=e._id,n=g.value[l];if(n&&(e.tipoPago.includes("DATAFONO_3G")||e.datafono3G))a+=e.total-n.valor;else if(e.tipoPago.includes("DATAFONO_3G")||e.anulado&&e.datafono3G)for(const t of e.cesta.lista)t?.pagado||(a+=t.subtotal)})),h.value=Number(a.toFixed(2)),i.value.setValor(a.toFixed(2))}}function S(){X.Z.get("movimientos/getMovTkrsSinExcIntervalo").then((a=>{void 0!=a.data&&null!=a.data&&(f.value=a.data,g.value=f.value.reduce(((a,e)=>(a[e.idTicket]=e,a)),{}))})).catch((a=>{Q().fire("Oops...","Error al mostrar lista","error")}))}return(0,n.YP)($,(()=>{null!=a.value&&void 0!=a.value?(u.value[a.value]=$.value,H("datosCierre",JSON.stringify(u.value),7)):null!=p.value&&void 0!=p.value&&(m.value=$.value)})),(0,n.YP)(m,(async()=>{if(m.value||0===m.value)try{X.Z.post("caja/setCambioEmActual",{valor:0===m.value?0:Number(m.value.toFixed(2))})}catch(a){}})),(0,n.YP)(u,(async()=>{try{const a=T();X.Z.post("caja/setDetalleActual",{detalleActual:a})}catch(a){}}),{deep:!0}),(0,n.bv)((async()=>{ea.W.cargarVentas(),X.Z.post("/caja/comprovarTurno").then((a=>{_.value=a.data.info.estado}));let a=(await X.Z.post("/parametros/totalPaytef")).data;v.value=a[0]?a[0]:0,b.value=!!a[1]&&a[1],S(),X.Z.get("caja/getCambioEmActual").then((a=>{"number"!==typeof a.data||Number.isNaN(a.data)?m.value=0:m.value=a.data})).catch((a=>{m.value=0})),X.Z.get("caja/getDetalleActual").then((a=>{if(a.data)for(const e in a.data)u.value[e]=a.data[e].unidades})).catch((a=>{m.value=0}))})),(0,n.JJ)("okValue",(()=>r.value?x():M())),{infoDinero:u,setActivo:D,indexActivo:a,sizeBilletes:e,total:A,numpadRef:o,cerrarCaja:x,modo:c,trabajadorActivo:z,modalConfirmar:r,confirmarCierre:M,cantidad3G:l,numpadRef2:i,estadoTurno:_,cambioTurno:j,anularTurno:N,totalPaytef:v,isLanPaytef:b,cargarTotal3G:W,itsMyFirstTimePleaseBeCareful:t,cambioEmergencia:m,setCambioEmergencia:B,cambioEmActivo:p,botonesBloqueados:k}}},na=l(40089);const ta=(0,na.Z)(la,[["render",O],["__scopeId","data-v-5521e4de"]]);var oa=ta}}]);
//# sourceMappingURL=325.c553233d.js.map