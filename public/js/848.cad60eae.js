(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[848],{26050:function(a,e,o){o(57658);var n={utf8:{stringToBytes:function(a){return n.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(n.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var e=[],o=0;o<a.length;o++)e.push(255&a.charCodeAt(o));return e},bytesToString:function(a){for(var e=[],o=0;o<a.length;o++)e.push(String.fromCharCode(a[o]));return e.join("")}}};a.exports=n},58258:function(a,e,o){o(57658),function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={rotl:function(a,e){return a<<e|a>>>32-e},rotr:function(a,e){return a<<32-e|a>>>e},endian:function(a){if(a.constructor==Number)return 16711935&o.rotl(a,8)|4278255360&o.rotl(a,24);for(var e=0;e<a.length;e++)a[e]=o.endian(a[e]);return a},randomBytes:function(a){for(var e=[];a>0;a--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(a){for(var e=[],o=0,n=0;o<a.length;o++,n+=8)e[n>>>5]|=a[o]<<24-n%32;return e},wordsToBytes:function(a){for(var e=[],o=0;o<32*a.length;o+=8)e.push(a[o>>>5]>>>24-o%32&255);return e},bytesToHex:function(a){for(var e=[],o=0;o<a.length;o++)e.push((a[o]>>>4).toString(16)),e.push((15&a[o]).toString(16));return e.join("")},hexToBytes:function(a){for(var e=[],o=0;o<a.length;o+=2)e.push(parseInt(a.substr(o,2),16));return e},bytesToBase64:function(a){for(var o=[],n=0;n<a.length;n+=3)for(var t=a[n]<<16|a[n+1]<<8|a[n+2],r=0;r<4;r++)8*n+6*r<=8*a.length?o.push(e.charAt(t>>>6*(3-r)&63)):o.push("=");return o.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/gi,"");for(var o=[],n=0,t=0;n<a.length;t=++n%4)0!=t&&o.push((e.indexOf(a.charAt(n-1))&Math.pow(2,-2*t+8)-1)<<2*t|e.indexOf(a.charAt(n))>>>6-2*t);return o}};a.exports=o}()},88566:function(a){function e(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function o(a){return"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&e(a.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
a.exports=function(a){return null!=a&&(e(a)||o(a)||!!a._isBuffer)}},29564:function(a,e,o){o(23767),o(8585),o(68696),function(){var e=o(58258),n=o(26050).utf8,t=o(88566),r=o(26050).bin,l=function(a,o){a.constructor==String?a=o&&"binary"===o.encoding?r.stringToBytes(a):n.stringToBytes(a):t(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||a.constructor===Uint8Array||(a=a.toString());for(var i=e.bytesToWords(a),s=8*a.length,d=1732584193,u=-271733879,c=-1732584194,f=271733878,p=0;p<i.length;p++)i[p]=16711935&(i[p]<<8|i[p]>>>24)|4278255360&(i[p]<<24|i[p]>>>8);i[s>>>5]|=128<<s%32,i[14+(s+64>>>9<<4)]=s;var m=l._ff,g=l._gg,v=l._hh,h=l._ii;for(p=0;p<i.length;p+=16){var _=d,w=u,b=c,y=f;d=m(d,u,c,f,i[p+0],7,-680876936),f=m(f,d,u,c,i[p+1],12,-389564586),c=m(c,f,d,u,i[p+2],17,606105819),u=m(u,c,f,d,i[p+3],22,-1044525330),d=m(d,u,c,f,i[p+4],7,-176418897),f=m(f,d,u,c,i[p+5],12,1200080426),c=m(c,f,d,u,i[p+6],17,-1473231341),u=m(u,c,f,d,i[p+7],22,-45705983),d=m(d,u,c,f,i[p+8],7,1770035416),f=m(f,d,u,c,i[p+9],12,-1958414417),c=m(c,f,d,u,i[p+10],17,-42063),u=m(u,c,f,d,i[p+11],22,-1990404162),d=m(d,u,c,f,i[p+12],7,1804603682),f=m(f,d,u,c,i[p+13],12,-40341101),c=m(c,f,d,u,i[p+14],17,-1502002290),u=m(u,c,f,d,i[p+15],22,1236535329),d=g(d,u,c,f,i[p+1],5,-165796510),f=g(f,d,u,c,i[p+6],9,-1069501632),c=g(c,f,d,u,i[p+11],14,643717713),u=g(u,c,f,d,i[p+0],20,-373897302),d=g(d,u,c,f,i[p+5],5,-701558691),f=g(f,d,u,c,i[p+10],9,38016083),c=g(c,f,d,u,i[p+15],14,-660478335),u=g(u,c,f,d,i[p+4],20,-405537848),d=g(d,u,c,f,i[p+9],5,568446438),f=g(f,d,u,c,i[p+14],9,-1019803690),c=g(c,f,d,u,i[p+3],14,-187363961),u=g(u,c,f,d,i[p+8],20,1163531501),d=g(d,u,c,f,i[p+13],5,-1444681467),f=g(f,d,u,c,i[p+2],9,-51403784),c=g(c,f,d,u,i[p+7],14,1735328473),u=g(u,c,f,d,i[p+12],20,-1926607734),d=v(d,u,c,f,i[p+5],4,-378558),f=v(f,d,u,c,i[p+8],11,-2022574463),c=v(c,f,d,u,i[p+11],16,1839030562),u=v(u,c,f,d,i[p+14],23,-35309556),d=v(d,u,c,f,i[p+1],4,-1530992060),f=v(f,d,u,c,i[p+4],11,1272893353),c=v(c,f,d,u,i[p+7],16,-155497632),u=v(u,c,f,d,i[p+10],23,-1094730640),d=v(d,u,c,f,i[p+13],4,681279174),f=v(f,d,u,c,i[p+0],11,-358537222),c=v(c,f,d,u,i[p+3],16,-722521979),u=v(u,c,f,d,i[p+6],23,76029189),d=v(d,u,c,f,i[p+9],4,-640364487),f=v(f,d,u,c,i[p+12],11,-421815835),c=v(c,f,d,u,i[p+15],16,530742520),u=v(u,c,f,d,i[p+2],23,-995338651),d=h(d,u,c,f,i[p+0],6,-198630844),f=h(f,d,u,c,i[p+7],10,1126891415),c=h(c,f,d,u,i[p+14],15,-1416354905),u=h(u,c,f,d,i[p+5],21,-57434055),d=h(d,u,c,f,i[p+12],6,1700485571),f=h(f,d,u,c,i[p+3],10,-1894986606),c=h(c,f,d,u,i[p+10],15,-1051523),u=h(u,c,f,d,i[p+1],21,-2054922799),d=h(d,u,c,f,i[p+8],6,1873313359),f=h(f,d,u,c,i[p+15],10,-30611744),c=h(c,f,d,u,i[p+6],15,-1560198380),u=h(u,c,f,d,i[p+13],21,1309151649),d=h(d,u,c,f,i[p+4],6,-145523070),f=h(f,d,u,c,i[p+11],10,-1120210379),c=h(c,f,d,u,i[p+2],15,718787259),u=h(u,c,f,d,i[p+9],21,-343485551),d=d+_>>>0,u=u+w>>>0,c=c+b>>>0,f=f+y>>>0}return e.endian([d,u,c,f])};l._ff=function(a,e,o,n,t,r,l){var i=a+(e&o|~e&n)+(t>>>0)+l;return(i<<r|i>>>32-r)+e},l._gg=function(a,e,o,n,t,r,l){var i=a+(e&n|o&~n)+(t>>>0)+l;return(i<<r|i>>>32-r)+e},l._hh=function(a,e,o,n,t,r,l){var i=a+(e^o^n)+(t>>>0)+l;return(i<<r|i>>>32-r)+e},l._ii=function(a,e,o,n,t,r,l){var i=a+(o^(e|~n))+(t>>>0)+l;return(i<<r|i>>>32-r)+e},l._blocksize=16,l._digestsize=16,a.exports=function(a,o){if(void 0===a||null===a)throw new Error("Illegal argument "+a);var n=e.wordsToBytes(l(a,o));return o&&o.asBytes?n:o&&o.asString?r.bytesToString(n):e.bytesToHex(n)}}()},37848:function(a,e,o){"use strict";o.r(e),o.d(e,{default:function(){return A}});var n=o(73396),t=o(87139),r=o(49242);const l=a=>((0,n.dD)("data-v-77499554"),a=a(),(0,n.Cn)(),a),i=l((()=>(0,n._)("div",{class:"row mt-1"},[(0,n._)("h1",{class:"titulo text-center",style:{"font-weight":"bold"}}," ¡No se han encontrado datos en este TPV! ")],-1))),s=l((()=>(0,n._)("label",{class:"subtitulo"},[(0,n.Uk)(" Hemos intentado cargar los datos de este TPV, pero no ha sido posible. "),(0,n._)("br"),(0,n.Uk)(" Por favor, elija una de la siguiente opciones:")],-1))),d={class:"botonesDiv"},u={class:""},c={class:"form-label"},f={class:"form-label"},p=l((()=>(0,n._)("option",{value:"3G"},"3G",-1))),m=l((()=>(0,n._)("option",{value:"PAYTEF"},"PAYTEF",-1))),g=[p,m],v={style:{"font-size":"20px","font-weight":"bold"}},h={class:"row"},_={style:{"font-size":"20px","font-weight":"bold",color:"green"}},w=l((()=>(0,n._)("div",{class:"row"},[(0,n._)("img",{src:"img/loadingNew.gif",style:{display:"block",margin:"auto",width:"300px"},alt:"Esperando respuesta del servidor"})],-1))),b=l((()=>(0,n._)("hr",null,null,-1))),y=l((()=>(0,n._)("hr",null,null,-1)));function B(a,e,o,l,p,m){const B=(0,n.up)("MDBBtn"),T=(0,n.up)("MDBModalTitle"),P=(0,n.up)("MDBModalHeader"),I=(0,n.up)("MDBInput"),D=(0,n.up)("MDBModalBody"),M=(0,n.up)("MDBModalFooter"),V=(0,n.up)("MDBModal"),k=(0,n.up)("MDBIcon"),W=(0,n.up)("MDBProgressBar"),U=(0,n.up)("MDBProgress");return(0,n.wg)(),(0,n.iD)(n.HY,null,[i,s,(0,n._)("div",d,[(0,n.Wm)(B,{onClick:e[0]||(e[0]=a=>l.irAVentas()),class:"botones",color:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("reintentar","Reintentar")),1)])),_:1}),(0,n.Wm)(B,{onClick:e[1]||(e[1]=a=>l.contrasenyaAdmin=!0),class:"botones",color:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("instalador","Instalador")),1)])),_:1})]),(0,n.Wm)(V,{id:"contrasenyaAdmin",tabindex:"-1",labelledby:"contrasenyaAdmin",modelValue:l.contrasenyaAdmin,"onUpdate:modelValue":e[5]||(e[5]=a=>l.contrasenyaAdmin=a),size:"lg"},{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Acceso al instalador ")])),_:1})])),_:1}),(0,n.Wm)(D,null,{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(I,{modelValue:l.contrasenaIntroducida,"onUpdate:modelValue":e[2]||(e[2]=a=>l.contrasenaIntroducida=a),type:"password",placeholder:"Contraseña de administrador"},null,8,["modelValue"])])])),_:1}),(0,n.Wm)(M,null,{default:(0,n.w5)((()=>[(0,n.Wm)(B,{color:"danger",size:"lg",onClick:e[3]||(e[3]=a=>{l.contrasenyaAdmin=!1,l.contrasenaIntroducida=""})},{default:(0,n.w5)((()=>[(0,n.Uk)("Salir")])),_:1}),(0,n.Wm)(B,{color:"success",size:"lg",onClick:e[4]||(e[4]=a=>l.checkPassword())},{default:(0,n.w5)((()=>[(0,n.Uk)("Acceder")])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(V,{id:"abrirInstalador",tabindex:"-1",labelledby:"abrirInstalador",modelValue:l.abrirInstalador,"onUpdate:modelValue":e[11]||(e[11]=a=>l.abrirInstalador=a),staticBackdrop:!0,size:"xl"},{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("instalador_de_licencia","Instalador de licencia")),1)])),_:1})])),_:1}),(0,n.Wm)(D,null,{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n.Wm)(k,{class:"infoBtn",color:"secondary",fas:"",icon:"info-circle",onClick:e[6]||(e[6]=a=>l.infoTPVmodal=!0)}),(0,n._)("label",c,"Nº "+(0,t.zw)(a.$t("licencia","licencia")),1),(0,n.Wm)(I,{modelValue:l.licencia,"onUpdate:modelValue":e[7]||(e[7]=a=>l.licencia=a),type:"number"},null,8,["modelValue"]),(0,n._)("label",f,(0,t.zw)(a.$t("tipo_datafono","Tipo datáfono")),1),(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.tipoDatafono=a),class:"form-select"},g,512),[[r.bM,l.tipoDatafono]])]),(0,n._)("p",v,(0,t.zw)(a.$t("atencion","¡Atención!"))+" "+(0,t.zw)(a.$t("si_ya_habian_datos","si ya habían datos"))+" "+(0,t.zw)(a.$t("en_este_TPV","en este TPV"))+", "+(0,t.zw)(a.$t("instalar_la_licencia","instalar la licencia"))+" "+(0,t.zw)(a.$t("eliminara_los_datos_antiguos","eliminará los datos antiguos")),1)])),_:1}),(0,n.Wm)(M,null,{default:(0,n.w5)((()=>[(0,n.Wm)(B,{color:"secondary",class:"botonesInstalador",onClick:e[9]||(e[9]=a=>l.confirmarXIP())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("descargar_xip","Descargar por IP")),1)])),_:1}),(0,n.Wm)(B,{color:"success",class:"botonesInstalador",onClick:e[10]||(e[10]=a=>l.confirmar())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("confirmar","Confirmar")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(V,{id:"descargarTPV",tabindex:"-1",labelledby:"descargarTPV",modelValue:l.descargarTPV,"onUpdate:modelValue":e[12]||(e[12]=a=>l.descargarTPV=a),staticBackdrop:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(D,null,{default:(0,n.w5)((()=>[(0,n._)("div",h,[(0,n._)("p",_,(0,t.zw)(a.$t("espera_mientras_se_descargan","Espera mientras descargamos"))+" "+(0,t.zw)(a.$t("los_datos_TPV","los datos del TPV")),1)]),w,(0,n.Wm)(U,{height:20},{default:(0,n.w5)((()=>[(0,n.Wm)(W,{value:l.loadingBar},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(l.loadingBar)+"% ",1)])),_:1},8,["value"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(V,{id:"infoTPVmodal",tabindex:"-1",labelledby:"infoTPVmodal",modelValue:l.infoTPVmodal,"onUpdate:modelValue":e[13]||(e[13]=a=>l.infoTPVmodal=a)},{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(a.$t("descargando","Descargando datos")),1)])),_:1})])),_:1}),(0,n.Wm)(D,null,{default:(0,n.w5)((()=>[(0,n._)("h5",null,[(0,n.Wm)(k,{icon:"wifi"}),(0,n.Uk)(" Estado de conexión")]),(0,n._)("p",{style:(0,t.j5)(!0===l.haveInternet?"color:green;":"color:red;")},[(0,n.Wm)(k,{icon:"angle-right"}),(0,n.Uk)(" "+(0,t.zw)(!0===l.haveInternet?"En línea":"Sin conexión"),1)],4),b,(0,n._)("h5",null,[(0,n.Wm)(k,{icon:"ethernet"}),(0,n.Uk)(" IP del TPV")]),(0,n._)("p",null,[(0,n.Wm)(k,{icon:"angle-right"}),(0,n.Uk)(" "+(0,t.zw)(l.IP),1)]),y,(0,n._)("h5",null,[(0,n.Wm)(k,{icon:"shopping-basket"}),(0,n.Uk)(" Tienda asignada")]),(0,n._)("p",null,[(0,n.Wm)(k,{icon:"angle-right"}),(0,n.Uk)(" "+(0,t.zw)(l.assignatedShop),1)])])),_:1})])),_:1},8,["modelValue"])],64)}o(57658);var T=o(44870),P=o(44161),I=o(54455),D=o(42492),M=o.n(D),V=o(74313),k=o(74834),W=o(29564),U=o.n(W),z={name:"InstallWizard",components:{MDBCard:V.Yl,MDBCardBody:V.H7,MDBCardText:V.Pp,MDBIcon:V.vm,MDBInput:V.u2,MDBModal:V.j3,MDBModalHeader:V.ol,MDBRow:V.uZ,MDBModalTitle:V.wo,MDBContainer:V.L5,MDBCol:V.TK,MDBModalBody:V.Yz,MDBModalFooter:V.ab,MDBBtn:V.$v,MDBProgressBar:V.F5,MDBProgress:V.g9},setup(){const a=(0,T.iH)(""),e=(0,T.iH)(""),o=(0,T.iH)("USB"),n=(0,T.iH)(!1),t=(0,T.iH)("CLEARONE"),r=(0,T.iH)("NO"),l=(0,T.iH)(!1),i=(0,T.iH)(!1),s=(0,T.iH)(!1),d=(0,T.iH)(""),u=(0,T.iH)(!0),c=(0,T.iH)(!1),f=(0,T.iH)(!1),p=(0,T.iH)(0),m=(0,T.iH)(!1),g=(0,T.iH)("No detectado"),v=(0,T.iH)(!1),h=(0,T.iH)("No detectado"),_=(0,T.iH)(!1);function w(){}async function b(){i.value=!0;const l={parametros:{licencia:Number(a.value),password:e.value,tipoImpresora:o.value,tipoDatafono:t.value,impresoraCafeteria:r.value}};f.value=!0,n.value=!1,p.value=20;try{const a=await P.Z.post("/instalador/pedirDatos",{password:l.parametros.password,numLlicencia:l.parametros.licencia,tipoDatafono:l.parametros.tipoDatafono});if(p.value=60,!a.data)throw Error("Los datos introducidos no son correctos");{const a=await P.Z.post("instalador/descargarTodo");if(p.value=100,!a.data)throw f.value=!1,Error("Error en instalador/descargarTodo");I.Z.push("/"),f.value=!1}}catch(s){f.value=!1,n.value=!0,M().fire("Oops...",s.message,"error")}p.value=0}async function y(){P.Z.get("https://jsonplaceholder.typicode.com/posts/1",{timeout:5e3}).then((()=>{v.value=!0})).catch((()=>{v.value=!1}))}async function B(){const a=await P.Z.post("/instalador/getIPTienda",{ip:g.value});h.value=0!=a.data?a.data:"Sin datos"}async function D(){"11c83b692216a77953e935c3d68b3719"==U()(d.value)?(M().fire({icon:"success",title:"¡Bienvenido de nuevo Hit Systems!",showConfirmButton:!1,timer:650}),n.value=!0,m.value=!1,e.value=d.value,d.value=""):"d22bfeac753534fbbcfe66a63cb366c4"==U()(d.value)?(M().fire({icon:"success",title:"¡Bienvenido de nuevo Técnico!",showConfirmButton:!1,timer:650}),n.value=!0,m.value=!1,e.value=d.value,d.value=""):M().fire("¡La contraseña y/o el QR son incorrectos!","Por favor, si no eres un técnico, no accedas a este menu.","error")}async function V(){i.value=!0;Number(a.value),e.value,o.value,t.value,r.value;try{const a=await P.Z.post("/instalador/pedirDatosIP",{ip:g.value});if(!a.data)throw Error("No hemos encontrado tu IP por ningun lado... [Error en instalador/pedirDatos]");{u.value=!1,c.value=!0;const a=await P.Z.post("instalador/descargarTodo");if(!a.data)throw i.value=!1,Error("No hemos encontrado tu IP por ningun lado... [Error en instalador/descargarTodo]");{const e=new Date;e.setTime(e.getTime()+6048e5);let o="expires="+e.toUTCString();document.cookie="datosCierre= ["+a.data[1]+"] ;"+o+";path=/",I.Z.push("/"),k.W.cargarTrabajadoresFichados(),i.value=!1}}}catch(n){i.value=!1,M().fire("Oops...",n.message,"error")}}function W(){I.Z.push("/")}function z(){P.Z.post("instalador/getIP").then((a=>{""!=a.data&&(_.value=!0),g.value=a.data,B()}))}return y(),z(),{irAVentas:W,primeraParte:u,segundaParte:c,testPrint:w,confirmar:b,confirmarXIP:V,licencia:a,haveInternet:v,password:e,tipoImpresora:o,tipoDatafono:t,impresoraCafeteria:r,esperando:i,GetIP:z,abrirInstalador:n,assignatedShop:h,IP:g,ipInSystem:_,infoTPVmodal:l,modalInstalador:s,contrasenyaAdmin:m,descargarTPV:f,loadingBar:p,checkPassword:D,contrasenaIntroducida:d}}},C=o(40089);const H=(0,C.Z)(z,[["render",B],["__scopeId","data-v-77499554"]]);var A=H}}]);
//# sourceMappingURL=848.cad60eae.js.map