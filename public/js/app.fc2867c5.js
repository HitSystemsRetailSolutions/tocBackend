(function(){"use strict";var e={9494:function(e,t,a){var o=a(9242),n=a(3396);const r={class:"container-fluid"};function s(e,t,a,o,s,i){const c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(c)])}var i=a(5658),c={name:"App",components:{},setup(){const{t:e}=(0,i.QT)();return{t:e}}},d=a(89);const u=(0,d.Z)(c,[["render",s]]);var m=u,l=a(8686),f=a(2781),p=a(4161);const h=()=>fetch("http://",window.location.hostname,":3000/traducciones/getTraducciones").then((e=>e.json())).then((e=>e));a(2136),p.Z.defaults.baseURL="http://"+window.location.hostname+":3000",h().then((e=>{const t=e.reduce(((e,t)=>(t.languages.forEach((a=>{const o=Object.keys(a)[0],n=a[o];e[o]||(e[o]={}),e[o][t.key]=n})),e)),{});p.Z.get("traducciones/getIdioma").then((e=>{let a=e.data;const n=(0,i.o)({legacy:!1,locale:a.toLowerCase(),messages:t});(0,o.ri)(m).use(f.Z).use(l.Z).use(n).mount("#app")})).catch((e=>{const t=(0,i.o)({legacy:!1,locale:"es",messages:"null"});(0,o.ri)(m).use(f.Z).use(l.Z).use(t).mount("#app")}))})).catch((e=>{const t=(0,i.o)({legacy:!1,locale:"es",messages:"null"});(0,o.ri)(m).use(f.Z).use(l.Z).use(t).mount("#app")}))},8686:function(e,t,a){a.d(t,{Z:function(){return v}});var o=a(2483),n=a(3396);const r=e=>((0,n.dD)("data-v-0c8da2e0"),e=e(),(0,n.Cn)(),e),s={class:"vh-100",style:{"background-color":"#1d1d1d"}},i=r((()=>(0,n._)("div",{class:"h-50"},[(0,n._)("br"),(0,n._)("br"),(0,n._)("br"),(0,n._)("br"),(0,n._)("br"),(0,n._)("br"),(0,n._)("br"),(0,n._)("br"),(0,n._)("br"),(0,n._)("br"),(0,n._)("div",{class:"pac-man"})],-1))),c=[i];function d(e,t,a,o,r,i){return(0,n.wg)(),(0,n.iD)("div",s,c)}var u=a(4834),m={name:"LoaderComponent",setup(){return setTimeout((function(){u.W.cargarConfiguracion(),u.W.recargarPromosCache(),u.W.cargarCestas(),u.W.cargarVentas(),u.W.cargarTeclado(),u.W.cargarTrabajadoresFichados(),u.W.iniciarToc()}),4e3),{}}},l=a(89);const f=(0,l.Z)(m,[["render",d],["__scopeId","data-v-0c8da2e0"]]);var p=f;const h=[{path:"/",name:"Loader",component:p},{path:"/installWizard",name:"Install Wizard",component:()=>a.e(440).then(a.bind(a,3440))},{path:"/tecnico",name:"Tecnico",component:()=>Promise.all([a.e(313),a.e(99)]).then(a.bind(a,99))},{path:"/abrirCaja",name:"Abrir caja",component:()=>Promise.all([a.e(313),a.e(320)]).then(a.bind(a,3320))},{path:"/main",name:"Main",component:()=>Promise.all([a.e(313),a.e(734)]).then(a.bind(a,1734))},{path:"/cobro",name:"Cobro",component:()=>Promise.all([a.e(313),a.e(599)]).then(a.bind(a,8599))},{path:"/cestas",name:"Cestas",component:()=>Promise.all([a.e(313),a.e(493)]).then(a.bind(a,8493))},{path:"/menu",name:"Menu",component:()=>Promise.all([a.e(313),a.e(149)]).then(a.bind(a,6149)),children:[{path:"caja",component:()=>Promise.all([a.e(313),a.e(941)]).then(a.bind(a,2941)),children:[{path:"cerrarCaja",component:()=>Promise.all([a.e(313),a.e(9)]).then(a.bind(a,7009))},{path:"tickets",component:()=>Promise.all([a.e(313),a.e(444)]).then(a.bind(a,2444))},{path:"entradaDinero",component:()=>Promise.all([a.e(313),a.e(352)]).then(a.bind(a,9352))},{path:"salidaDinero",component:()=>Promise.all([a.e(313),a.e(720)]).then(a.bind(a,5720))},{path:"verUltimoCierre",component:()=>Promise.all([a.e(313),a.e(66)]).then(a.bind(a,8066))}]},{path:"fichajes",component:()=>Promise.all([a.e(313),a.e(365)]).then(a.bind(a,9365))},{path:"pedidos",component:()=>a.e(52).then(a.bind(a,6052))},{path:"encargos",component:()=>Promise.all([a.e(313),a.e(289)]).then(a.bind(a,3289))}]}],g=(0,o.p7)({history:(0,o.PO)("/"),routes:h});var v=g},2136:function(e,t,a){a.r(t),a.d(t,{emitSocket:function(){return d},socket:function(){return c}});a(7658);var o=a(2066),n=a(2781),r=a(8686),s=a(2492),i=a.n(s);const c=(0,o.io)("http://"+n.Z.state.TocGameURL+":5051");function d(e,t=null){c.connected&&c.emit(e,t)}c.on("cargarConfiguracion",(e=>{try{if(!e)throw Error("Error, parametros no es correcto");n.Z.dispatch("Configuracion/setParametros",e)}catch(t){i().fire("Oops...",t.message,"error")}})),c.on("cargarTrabajadores",(e=>{try{if(!e)throw Error("Error, arrayTrabajadores no es correcto");n.Z.dispatch("Trabajadores/setArrayTrabajadores",e)}catch(t){i().fire("Oops...",t.message,"error")}})),c.on("cargarCestas",(e=>{try{if(!e)throw Error("Error, arrayCestas no es correcto");n.Z.dispatch("Cestas/setArrayCestasAction",e)}catch(t){i().fire("Oops...",t.message,"error")}})),c.on("cargarVentas",(e=>{try{if(!e)throw Error("Error, arrayTickets no es correcto");n.Z.dispatch("Caja/setArrayVentas",e)}catch(t){i().fire("Oops...",t.message,"error")}})),c.on("cargarTeclado",(e=>{try{if(!e)throw Error("Error, teclado no es correcto");n.Z.dispatch("Teclado/setTeclado",e)}catch(t){i().fire("Oops...",t.message,"error")}})),c.on("disconnect",(()=>{c.sendBuffer=[]})),c.on("test",(e=>{})),c.on("resDatafono",(e=>{})),c.on("resConsultaPuntos",(e=>{0==e.error?i().fire({icon:"info",text:`Puntos del cliente: ${e.info}`}):i().fire("Oops...",e.mensaje,"error")})),c.on("consultaPaytef",(e=>{e?n.Z.dispatch("Datafono/setEstado","APROBADA"):(n.Z.dispatch("Datafono/setEstado","DENEGADA"),setTimeout((()=>{n.Z.dispatch("Datafono/setEstado","AGAIN")}),3e3))})),c.on("procesoPaytef",(e=>{e?n.Z.dispatch("Datafono/setProceso",e.proceso):n.Z.dispatch("Datafono/setProceso","")})),c.on("consultaPaytefRefund",(e=>{e.ok&&i().fire("OK","Devolución aceptada","success")})),c.on("resDatafono",(e=>{n.Z.dispatch("setEsperandoDatafono",!1),0==e.error?(n.Z.dispatch("Cestas/setIdAction",-1),n.Z.dispatch("setModoActual","NORMAL"),n.Z.dispatch("Clientes/resetClienteActivo"),n.Z.dispatch("Footer/resetMenuActivo"),r.Z.push({name:"Home",params:{tipoToast:"success",mensajeToast:"Ticket creado"}})):i().fire("Oops...",e.mensaje,"error")}))},4834:function(e,t,a){a.d(t,{W:function(){return m}});var o=a(7327),n=(a(7658),a(4161)),r=a(2492),s=a.n(r),i=a(8686),c=a(2136);a(2781);const d="http://"+window.location.hostname+":3000/";class u{constructor(){(0,o.Z)(this,"cargarTrabajadoresFichados",(()=>(0,c.emitSocket)("cargarTrabajadores"))),(0,o.Z)(this,"cargarCestas",(()=>(0,c.emitSocket)("cargarCestas"))),(0,o.Z)(this,"cargarConfiguracion",(()=>(0,c.emitSocket)("cargarConfiguracion"))),(0,o.Z)(this,"recargarPromosCache",(()=>(0,c.emitSocket)("recargarPromociones"))),(0,o.Z)(this,"cargarVentas",(()=>(0,c.emitSocket)("cargarVentas"))),(0,o.Z)(this,"cargarTeclado",(()=>(0,c.emitSocket)("cargarTeclado")))}async todoInstalado(){try{return(await n.Z.get(d+"parametros/todoInstalado")).data}catch(e){return s().fire("Oops...",e.message,"error"),!1}}async hayFichados(){try{return(await n.Z.get(d+"trabajadores/hayFichados")).data}catch(e){return s().fire("Oops...",e.message,"error"),!1}}async cajaAbierta(){try{return(await n.Z.get(d+"caja/estadoCaja")).data}catch(e){return s().fire("Oops...",e.message,"error"),!1}}async getParametros(){try{return(await n.Z.post(d+"parametros/getParametros")).data}catch(e){return s().fire("Oops...",e.message,"error"),null}}async iniciarToc(){await this.todoInstalado()?await this.hayFichados()?await this.cajaAbierta()?i.Z.push("/main"):i.Z.push("/abrirCaja"):i.Z.push("/menu/fichajes"):i.Z.push("/installWizard")}}const m=new u},2781:function(e,t,a){a.d(t,{Z:function(){return b}});var o=a(65),n={namespaced:!0,state:{arrayTrabajadores:[],indexActivo:null},mutations:{setArrayTrabajadoresMutation(e,t){e.arrayTrabajadores=t},setIndexActivoMutation(e,t){e.indexActivo=t}},getters:{getArrayTrabajadores:e=>e.arrayTrabajadores,getIndexActivo:e=>e.trabajadorActivo,getTrabajadorActivo:e=>e.arrayTrabajadores[e.indexActivo]},actions:{setArrayTrabajadores({commit:e},t){e("setArrayTrabajadoresMutation",t)},setIndexActivo({commit:e},t){e("setIndexActivoMutation",t)}}},r=a(4161),s=a(2492),i=a.n(s),c={namespaced:!0,state:{arrayCestas:[],Descuento:0,indexItemActivo:null,cestaActiva:null,cestaActivaIndex:null,cestaBaseSeparado:null},mutations:{setArrayCestasMutation(e,t){e.arrayCestas=t},setDescuentoMutation(e,t){e.Descuento=t},setActivoMutation(e,t){e.indexItemActivo=t},setCestaActivaMutation(e,t){e.cestaActiva=t},setCestaActivaIndexMutation(e,t){e.cestaActivaIndex=t},setCestaBaseMutation(e,t){e.cestaBaseSeparado=t},deleteIndexMutation(e,{index:t,idCesta:a}){r.Z.post("cestas/borrarItemCesta",{idCesta:a,index:t}).then((t=>{if(!t.data)throw Error("No se ha podido eliminar el artículo de la cesta");e.indexItemActivo=null})).catch((e=>{i().fire("Oops...",e.message,"error")}))},deleteListaMutation(e,t){r.Z.post("cestas/borrarCesta",{idCesta:t}).then((e=>{if(!e.data)throw Error("No se ha podido borrar la lista")})).catch((e=>{i().fire("Oops...",e.message,"error")}))},async setClienteMutation(e,{index:t,idCliente:a,nombreCliente:o}){e.arrayCestas[t].idCliente=a,e.arrayCestas[t].nombreCliente=o,await d(e.arrayCestas[t])},async setModoMutation(e,{modo:t,index:a}){e.arrayCestas[a].modo=t,await d(e.arrayCestas[a])}},getters:{getArrayCestas:e=>e.arrayCestas,getCestaActiva:e=>e.cestaActiva,getCestaActivaIndex:e=>e.cestaActivaIndex,getItemActivo:e=>e.indexItemActivo,getCestaBaseActivo:e=>e.cestaBaseSeparado,getDescuento:e=>e.Descuento},actions:{setActivoAction({commit:e},t){e("setActivoMutation",t)},setArrayCestasAction({commit:e},t){e("setArrayCestasMutation",t)},setDescuentoAction({commit:e},t){e("setDescuentoMutation",t)},setCestaActivaAction({commit:e},t){e("setCestaActivaMutation",t)},setCestaActivaIndexAction({commit:e},t){e("setCestaActivaIndexMutation",t)},setCestaBaseAction({commit:e},t){e("setCestaBaseMutation",t)},deleteIndex({commit:e},{index:t,idCesta:a}){e("deleteIndexMutation",{index:t,idCesta:a})},deleteLista({commit:e},t){e("deleteListaMutation",t)},setClienteCesta({commit:e},t){e("setClienteMutation",t)},setModoCesta({commit:e},t){e("setModoMutation",t)}}};async function d(e){}var u={namespaced:!0,state:{cajaAbierta:!1,arrayVentas:[]},mutations:{setArrayVentasMutation(e,t){e.arrayVentas=t}},getters:{},actions:{setArrayVentas({commit:e},t){e("setArrayVentasMutation",t)}}},m={namespaced:!0,state:{objTeclado:[],indexMenuActivo:0,indexSubmenuActivo:0},mutations:{setTecladoMutation(e,t){e.objTeclado=t},setIndexMenuActivoMutation(e,t){e.indexMenuActivo=t,e.indexSubmenuActivo=0},setIndexSubmenuActivoMutation(e,t){e.indexSubmenuActivo=t}},getters:{getTeclado:e=>e.objTeclado},actions:{setTeclado({commit:e},t){e("setTecladoMutation",t)},setIndexMenuActivo({commit:e},t){e("setIndexMenuActivoMutation",t)},setIndexSubmenuActivo({commit:e},t){e("setIndexSubmenuActivoMutation",t)}}},l=a(4834),f={namespaced:!0,state:{parametros:null},getters:{parametros:e=>e.parametros},mutations:{setParametrosMutation(e,t){e.parametros=t}},actions:{setParametros({commit:e},t){e("setParametrosMutation",t),l.W.cargarConfiguracion()}}};let p={waitingForCard:"ESPERANDO TARJETA",cardInserted:"TARJETA INSETADA",enterPIN:"ESPERANDO PIN",cardRemoved:"RETIRE TARJETA",amountConfirmation:"CONFIRME IMPORTE",finished:"FINALIZANDO PROCESO"};var h={namespaced:!0,state:{estado:"",procesoActual:"sin pagos pendientes..."},mutations:{setEstadoMutation(e,t){e.estado=t},setProcesoMutation(e,t){void 0==p[t]||"processing"==t?e.procesoActual="PROCESANDO... ":e.procesoActual=p[t]}},actions:{setEstado({commit:e},t){e("setEstadoMutation",t)},setProceso({commit:e},t){e("setProcesoMutation",t)}}},g={namespaced:!0,state:{vistaEspecial:!1},mutations:{setVistaClienteMutation(e,t){e.vistaEspecial=t},resetMutation(e){e.vistaEspecial=!1}},getters:{},actions:{setVistaCliente({commit:e},t){e("setVistaClienteMutation",t)},reset({commit:e}){e("resetMutation")}}},v={namespaced:!0,state:{unidades:1},mutations:{setUnidadesMutation(e,t){e.unidades=t}},getters:{getUnidades:e=>e.unidades},actions:{setUnidades({commit:e},t){e("setUnidadesMutation",t)}}},b=(0,o.MT)({state:{vistaEspecial:!1,modoActual:"NORMAL",TocGameURL:window.location.hostname},getters:{getModoActual:e=>e.modoActual,getTocGame:e=>e.TocGameURL},mutations:{setModoActualMutation(e,t){e.modoActual=t},setTocGameURLMutation(e,t){e.TocGameURL=t}},actions:{setModoActual({commit:e},t){e("setModoActualMutation",t)},setTocGameURL({commit:e},t){e("setTocGameURLMutation",t)}},modules:{Caja:u,Cestas:c,Trabajadores:n,Teclado:m,Configuracion:f,Datafono:h,EstadoDinamico:g,Unidades:v}})}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,r){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],r=e[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](o[c])}))?o.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{9:"b8dad8a3",52:"95b9cb4c",66:"2a6b8859",99:"4a97d054",149:"8c0d3c89",289:"14ad7a86",313:"60b5b7f2",320:"a839f4c0",352:"70afafd8",365:"dde3766c",440:"2c2e6517",444:"457591ee",493:"ac01acdb",599:"c27bc3f4",720:"75d2a0c7",734:"e45ee2ad",941:"253cfef2"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{9:"f69b6015",149:"40e63e20",289:"4e7fb34f",320:"fd867034",352:"a92e8ab5",365:"8d223952",440:"fb4ce344",444:"38ddef88",493:"ff945d00",599:"531b7ece",720:"a1b9fc2c",734:"b86f98f0",941:"f3cdf8d6"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="toc-game-v4:";a.l=function(o,n,r,s){if(e[o])e[o].push(n);else{var i,c;if(void 0!==r)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var m=d[u];if(m.getAttribute("src")==o||m.getAttribute("data-webpack")==t+r){i=m;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+r),i.src=o),e[o]=[n];var l=function(t,a){i.onerror=i.onload=null,clearTimeout(f);var n=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(a)})),t)return t(a)},f=setTimeout(l.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=l.bind(null,i.onerror),i.onload=l.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,o,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var s=function(a){if(r.onerror=r.onload=null,"load"===a.type)o();else{var s=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=i,r.parentNode&&r.parentNode.removeChild(r),n(c)}};return r.onerror=r.onload=s,r.href=t,a?a.parentNode.insertBefore(r,a.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var n=a[o],r=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(r===e||r===t))return n}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){n=s[o],r=n.getAttribute("data-href");if(r===e||r===t)return n}},o=function(o){return new Promise((function(n,r){var s=a.miniCssF(o),i=a.p+s;if(t(s,i))return n();e(o,i,null,n,r)}))},n={143:0};a.f.miniCss=function(e,t){var a={9:1,149:1,289:1,320:1,352:1,365:1,440:1,444:1,493:1,599:1,720:1,734:1,941:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=o(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,o){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var r=new Promise((function(a,o){n=e[t]=[a,o]}));o.push(n[2]=r);var s=a.p+a.u(t),i=new Error,c=function(o){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,n[1](i)}};a.l(s,c,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,r,s=o[0],i=o[1],c=o[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var u=c(a)}for(t&&t(o);d<s.length;d++)r=s[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},o=self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(9494)}));o=a.O(o)})();
//# sourceMappingURL=app.fc2867c5.js.map