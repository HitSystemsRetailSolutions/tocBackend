"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[893],{687:function(e,a,l){l.r(a),l.d(a,{default:function(){return Tl}});var o=l(73396),n=l(44870),t=l(87139),i=l(74313),s=(l(57658),l(12195)),r=l(66631),c=l(13150),u=l(16683);const d={key:0,style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"space-evenly",height:"100%"}},_={key:1};var v={__name:"CashlogyEstado",setup(e,{expose:a}){const l=(0,n.iH)(null),t=(0,n.iH)(!1),v=(0,n.iH)(null),f=(0,n.iH)(null);let m;function C(){t.value=!0,m?.()}let A=!1;async function p(){A=!0,f.value=null,await(0,u.R_)(l),l.value.start(),t.value=!1;let e=new Promise((e=>{m=e}));while(1){if(t.value)break;try{let a=await c.Z.get_estado();if(f.value="ESTADO",a.err){v.value=null,await Promise.race([(0,u.uz)(3e3),e]);continue}let l,o=a.denominaciones,n=!(0,u.kJ)(a.cantidad_caja_fuerte_pd),t={header:{cols:["Cantidad total","Cantidad reciclador","Cantidad stacker",n?"Cantidad caja fuerte":null].filter((e=>null!=e))},body:[],footer:{head:"Valoración",cols:[]}};for(let e of u.iX)for(let i=o[e].length-1;i>=0;i--){let s=o[e][i],r=a.cantidad_recicladores_pd[e][s],c=a.cantidad_stacker_pd[e][s],u=a.cantidad_caja_fuerte_pd[e][s]??0;l={mob:e,den_cents:s,cols:[{value:r+c+u},{value:r},{value:c},n?{value:u}:null].filter((e=>null!=e))},t.body.push(l)}t.footer.cols=[{value:(0,u.vg)(a.valoracion_total,!0)},{value:(0,u.vg)(a.valoracion_recicladores,!0)},{value:(0,u.vg)(a.valoracion_stacker,!0)},n?{value:(0,u.vg)(a.valoracion_caja_fuerte,!0)}:null].filter((e=>null!=e)),v.value=t,await e;break}catch(a){console.log(a)}}l.value?.end(),A=!1}return(0,o.Ah)((()=>{C()})),a({run:p}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=f.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["ESTADO"==f.value?((0,o.wg)(),(0,o.iD)("div",d,[v.value?((0,o.wg)(),(0,o.j4)(s.Z,{key:0,tabla:v.value,style:{flex:"0 0 75%"}},null,8,["tabla"])):((0,o.wg)(),(0,o.iD)("div",_,"Espere...")),(0,o.Wm)((0,n.SU)(i.$v),{disabled:t.value,onClick:C,color:"info",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" salir ")])),_:1},8,["disabled"])])):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const f=v;var m=f,C=l(92136),A=l(34730);const p=e=>((0,o.dD)("data-v-0deaad74"),e=e(),(0,o.Cn)(),e),b={key:0,class:"frame-Cashlogy"},y={class:"col-8 h-100"},g={class:"frame-Cashlogy flex-column"},w={style:{"text-align":"center"}},R=p((()=>(0,o._)("br",null,null,-1))),k=p((()=>(0,o._)("br",null,null,-1))),h=p((()=>(0,o._)("br",null,null,-1)));var E={__name:"CashlogyAnadirCambios",setup(e,{expose:a}){const l=(0,n.iH)(null),d=(0,n.iH)(""),_=(0,n.iH)(!1),v=(0,n.iH)({});function f(){_.value=!0,c.Z.boton_pulsar("BOT_ACEPTAR")}const m=(0,n.iH)(null);function p(e){C.socket[e]("Cashlogy.update",E)}function E(e){switch(m.value=e.proceso,e.proceso){case"AÑADIR_CAMBIOS":v.value=(0,u.c)(e),d.value=(0,u.vg)(e.importe_entrado,!0);break}}let U=!1;async function S(){let e;U=!0,m.value=null,await(0,u.R_)(l),l.value.start(),p("on");try{await c.Z.saveGrupoProcesos("AÑADIR_CAMBIOS"),_.value=!1;let a=await c.Z.anadir_cambios();e=await(l.value?.informacionAbort_y_cancel(a)),e?e.importe_entrado=0:e={importe_entrado:a.importe_entrado},e.abort_id||(await c.Z.saveGrupoProcesos(null),await(0,A.i_)(e.importe_entrado,"Añadir cambios","ENTRADA_DINERO"))}catch(a){console.log(a),e={cancelado:!0}}return p("off"),l.value?.end(),U=!1,e}return(0,o.Ah)((()=>{U&&c.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:S}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=m.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["AÑADIR_CAMBIOS"==m.value?((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("div",y,[(0,o._)("div",g,[(0,o.Wm)(s.Z,{tabla:v.value,style:{flex:"0 0 80%"}},null,8,["tabla"])])]),(0,o._)("div",w,[(0,o.Uk)(" Importe introducido :"),R,(0,o.Uk)(" "+(0,t.zw)(d.value)+" ",1),k,h,(0,o.Wm)((0,n.SU)(i.$v),{disabled:_.value,onClick:f,color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1},8,["disabled"])])])):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}},U=l(40089);const S=(0,U.Z)(E,[["__scopeId","data-v-0deaad74"]]);var D=S,I=l(66720),O=l(16136);const N=e=>((0,o.dD)("data-v-70f61262"),e=e(),(0,o.Cn)(),e),T={key:0,class:"w-100 h-100"},L={key:0,class:"frame-Cashlogy flex-column"},P={key:1,class:"frame-Cashlogy flex-column"},H={style:{"text-align":"start"}},Z=N((()=>(0,o._)("br",null,null,-1))),x={key:1,class:"frame-Cashlogy"},j={class:"col-8 h-100"},W={class:"frame-Cashlogy flex-column"},B={class:"col h-100"},$={class:"frame-Cashlogy flex-column"},M={style:{flex:"0 0 70%","align-content":"center"}},z={class:"d-flex flex-column",style:{gap:"2px"}},q={key:2,class:"frame-Cashlogy flex-column"},V={key:3,class:"frame-Cashlogy flex-column"},F={class:"d-flex flex-column",style:{gap:"2px"}},J=N((()=>(0,o._)("span",null,"Falta cambios para la devolución",-1))),K={key:4,class:"frame-Cashlogy flex-column"},G={class:"d-flex flex-column",style:{gap:"2px"}},Y={key:5,class:"frame-Cashlogy flex-column"},X={style:{"text-align":"start"}},Q=1;var ee={__name:"CashlogyDarCambio",setup(e,{expose:a}){const l=(0,n.iH)(null),d=(0,n.iH)(null),_=(0,n.iH)(""),v=(0,n.iH)(""),f=(0,n.iH)(""),m=(0,n.iH)(""),p=(0,n.iH)(!1),b=(0,n.iH)(!1);function y(e){b.value=!0,c.Z.boton_pulsar("ACEPTAR"==e?"BOT_ACEPTAR":"BOT_CANCELAR")}const g=(0,n.iH)({}),w=(0,n.iH)({});let R,k,h=0,E=(0,n.iH)(!1);function U(){let e=0;return(0,u.eh)(k).forEach((({den:a,value:l})=>{e+=l*a})),E.value=h==e,e/100}function S(){let e={header:{cols:["Cantidad actual","Cantidad retirar"]},body:[]};for(let a of u.iX)for(let l=R.denominaciones_dispensables[a].length-1;l>=0;l--){let o=R.denominaciones_dispensables[a][l],n={mob:a,den_cents:o,cols:[{value:R.cantidad_recicladores_pd[a][o]},{value:k[a][o]||"",clickable:!0}]};e.body.push(n)}g.value=e}let D,N=(0,n.iH)(null);function ee(){N.value&&(N.value.col.input=!1,N.value.col.class=N.value.class,N.value=null)}function ae(e,a,l){N.value={row:e,col:a,td_elem:l,class:a.class},a.input=!0,a.class="cashlogyCierreFondoCaja_selected"}function le(e,a,l,o){l==Q&&(N.value&&N.value.col==a||(ee(),ae(e,a,o)))}function oe(e){if(N.value){let a=N.value.row;if("number"==typeof e){let l=10*(k[a.mob][a.den_cents]??0)+e,o=R.cantidad_recicladores_pd[a.mob][a.den_cents];if(l>0&&l<=o){let e=k[a.mob][a.den_cents];k[a.mob][a.den_cents]=l,U()>R.importe_entrado?e?k[a.mob][a.den_cents]=e:delete k[a.mob][a.den_cents]:N.value.col.value=l}}"C"==e&&(delete k[a.mob][a.den_cents],N.value.col.value=""),v.value=(0,u.vg)(U(),!0)}}async function ne(){_.value=(0,u.vg)(R.importe_entrado,!0),k=(0,u.li)(),h=Math.round(100*R.importe_entrado);let e=h,a=[];for(let l of u.iX)for(let e of R.denominaciones_dispensables[l]){let o=R.cantidad_recicladores_pd[l][e];o&&a.push({recicl:o,mob:l,den_cents:e})}a.sort(((e,a)=>-(e.den_cents-a.den_cents)));for(let{recicl:l,mob:o,den_cents:n}of a)if(h>n&&e>=n){let a=Math.min(Math.floor(e/n),l);a>0&&(k[o][n]=a,e-=a*n)}e>0&&(k=(0,u.li)()),v.value=(0,u.vg)(U(),!0),S(),re.value="PANTALLA_INTRODUCIR_CANTIDADES_PARA_CAMBIO";while(1){let e=await new Promise((e=>{D=e}));if("ACEPTAR"==e){if(U(),!E.value)continue;return k}return null}}const te=new u.JQ((e=>{v.value=(0,u.vg)(e,!0),re.value="PANTALLA_FALTA_CAMBIO_DEVOLUCION"}));function ie(){p.value=!0,c.Z.boton_pulsar("BOT_ACEPTAR")}const se=(0,n.iH)(),re=(0,n.iH)(null);function ce(e){C.socket[e]("Cashlogy.update",ue)}function ue(e){switch(re.value=e.proceso,e.proceso){case"DAR_CAMBIO_ENTRADA":if(e.state)switch(se.value=e.state,e.state){case"ENTRADA":_.value=(0,u.vg)(e.importe_entrado,!0);break;case"CANCELAR":v.value=(0,u.vg)(e.importe_a_devolver,!0);break}break;case"DISPENSAR_DENOMINACION":break;case"AÑADIR_CAMBIOS":w.value=(0,u.c)(e),f.value=(0,u.vg)(e.importe_entrado,!0),m.value=(0,u.vg)(e.importe_recicladores,!0);break;case"SOLO_DISPENSAR":v.value=(0,u.vg)(e.importe_a_devolver,!0);break}}async function de(e,a){let o,n=0;while(!o){re.value="ERROR_DEVOLUCION",await(0,u.R_)(d),await d.value.run(a);let t=await te.start(e);if("AÑADIR"==t){re.value=null,p.value=!1;let t=await c.Z.anadir_cambios_y_devolver(e);o=await(l.value?.informacionAbort_y_cancel(t)),o?(o.importe_anadido_en_cambios=n,o.importe_falta_devolver=e):(n+=t.importe_anadido_en_cambios,await c.Z.saveGrupoProcesos(null,{importe_anadido_en_cambios:n}),0==t.importe_falta_devolver?o={importe_falta_devolver:0,importe_anadido_en_cambios:n}:(a=t,e=t.importe_falta_devolver))}else o={importe_falta_devolver:e,importe_anadido_en_cambios:n}}return o}let _e=!1;async function ve(){let e;_e=!0,re.value=null,await(0,u.R_)(l),l.value.start(),ce("on");try{await c.Z.saveGrupoProcesos("DAR_CAMBIO"),b.value=!1;let a=await c.Z.dar_cambio_entrada();if(null!=a.importe_entrado&&await c.Z.saveGrupoProcesos(null,{importe_entrado:a.importe_entrado}),e=await(l.value?.informacionAbort_y_cancel(a)),null==e?.abort_id)if(e=null,a.cancelado){let l=a.importe_falta_devolver??0;0==l?e={cancelado:!0,importe_entrado:a.importe_entrado??0,importe_anadido_en_cambios:0,importe_falta_devolver:0}:(e=await de(l,a),e.cancelado=!0,e.importe_entrado=a.importe_entrado)}else{let o=a.importe_entrado;if(0==o)e={importe_entrado:0,importe_anadido_en_cambios:0};else{R=a;let n=await ne();if(null==n){v.value=(0,u.vg)(o,!0);let n=await c.Z.solo_dispensar(o);e=await(l.value?.informacionAbort_y_cancel(a)),e||(0==n.importe_falta_devolver?e={cancelado:!0,importe_entrado:o,importe_anadido_en_cambios:0}:(e=await de(n.importe_falta_devolver,n),e.cancelado=!0,e.importe_entrado=o))}else{v.value=(0,u.vg)(R.importe_entrado,!0);let t=await c.Z.dispensar_por_denominacion(n,"BOCA");e=await(l.value?.informacionAbort_y_cancel(a)),e||(0==t.importe_falta_devolver?e={importe_entrado:o,importe_falta_devolver:0,importe_anadido_en_cambios:0}:(e=await de(t.importe_falta_devolver,t),e.importe_entrado=o))}}}e.abort_id||(await c.Z.saveGrupoProcesos(null),await(0,A.i_)(e.importe_anadido_en_cambios,"Añadir Cambios","ENTRADA_DINERO"))}catch(a){console.log(a),e={cancelado:!0}}return ce("off"),l.value?.end(),_e=!1,e}return(0,o.Ah)((()=>{_e&&c.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:ve}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=re.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["DAR_CAMBIO_ENTRADA"==re.value?((0,o.wg)(),(0,o.iD)("div",T,["ENTRADA"==se.value?((0,o.wg)(),(0,o.iD)("div",L,[(0,o._)("div",null," Importe entrado: "+(0,t.zw)(_.value),1),(0,o._)("div",null,[(0,o.Wm)((0,n.SU)(i.$v),{style:{"margin-right":"10rem"},disabled:b.value,onClick:a[0]||(a[0]=()=>y("ACEPTAR")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1},8,["disabled"]),(0,o.Wm)((0,n.SU)(i.$v),{disabled:b.value,onClick:a[1]||(a[1]=()=>y("CANCELAR")),color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancelar ")])),_:1},8,["disabled"])])])):(0,o.kq)("",!0),"CANCELAR"==se.value?((0,o.wg)(),(0,o.iD)("div",P,[(0,o._)("div",H,[(0,o.Uk)(" Cancelando"),Z,(0,o.Uk)(" Importe a devolver: "+(0,t.zw)(v.value),1)])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),"PANTALLA_INTRODUCIR_CANTIDADES_PARA_CAMBIO"==re.value?((0,o.wg)(),(0,o.iD)("div",x,[(0,o._)("div",j,[(0,o._)("div",W,[(0,o.Wm)(s.Z,{tabla:g.value,onClickBody:le,style:{flex:"0 0 80%"}},null,8,["tabla"]),(0,o._)("div",null," Importe introducido: "+(0,t.zw)(_.value)+"     Importe a devolver: "+(0,t.zw)(v.value),1)])]),(0,o._)("div",B,[(0,o._)("div",$,[(0,o._)("div",M,[(0,n.SU)(N)?((0,o.wg)(),(0,o.j4)(I.Z,{key:0,onClickKey:oe})):(0,o.kq)("",!0)]),(0,o._)("div",z,[(0,o.Wm)((0,n.SU)(i.$v),{disabled:!(0,n.SU)(E),onClick:a[2]||(a[2]=()=>(0,n.SU)(D)("ACEPTAR")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1},8,["disabled"]),(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[3]||(a[3]=()=>(0,n.SU)(D)("CANCELAR")),color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" cancelar ")])),_:1})])])])])):(0,o.kq)("",!0),"DISPENSAR_DENOMINACION"==re.value?((0,o.wg)(),(0,o.iD)("div",q," Dispensando: "+(0,t.zw)(v.value),1)):(0,o.kq)("",!0),"PANTALLA_FALTA_CAMBIO_DEVOLUCION"==re.value?((0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("div",F,[J,(0,o._)("span",null,"Importe falta devolver: "+(0,t.zw)(v.value),1),(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[4]||(a[4]=e=>(0,n.SU)(te).R("AÑADIR")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" añadir cambios ")])),_:1}),(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[5]||(a[5]=e=>(0,n.SU)(te).R("MANUAL")),color:"warning",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" devolucion manual ")])),_:1})])])):(0,o.kq)("",!0),"AÑADIR_CAMBIOS"==re.value?((0,o.wg)(),(0,o.iD)("div",K,[(0,o.Wm)(s.Z,{tabla:w.value,style:{flex:"0 0 75%"}},null,8,["tabla"]),(0,o._)("div",G,[(0,o._)("span",null,"Importe introducido : "+(0,t.zw)(f.value),1),(0,o._)("span",null,"Importe total: "+(0,t.zw)(m.value),1),(0,o._)("span",null,"Importe falta devolver: "+(0,t.zw)(v.value),1),(0,o.Wm)((0,n.SU)(i.$v),{disabled:p.value,onClick:ie,color:"info",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1},8,["disabled"])])])):(0,o.kq)("",!0),"SOLO_DISPENSAR"==re.value?((0,o.wg)(),(0,o.iD)("div",Y,[(0,o._)("div",X," Dispensando Importe a devolver: "+(0,t.zw)(v.value),1)])):(0,o.kq)("",!0),"ERROR_DEVOLUCION"==re.value?((0,o.wg)(),(0,o.j4)(O.Z,{key:6,ref_key:"CashlogyErrorDevolucion_ref",ref:d},null,512)):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const ae=(0,U.Z)(ee,[["__scopeId","data-v-70f61262"]]);var le=ae,oe=l(49242);const ne=e=>((0,o.dD)("data-v-eaf0abee"),e=e(),(0,o.Cn)(),e),te={key:0,class:"frame-Cashlogy"},ie={class:"col-9 h-100"},se={class:"frame-Cashlogy flex-column"},re={class:"col h-100"},ce={class:"frame-Cashlogy flex-column"},ue={style:{flex:"0 0 40%","align-content":"center"}},de={style:{border:"2px groove grey",padding:"0.35rem 0.75rem 0.625rem 0.75rem"}},_e=ne((()=>(0,o._)("legend",{style:{float:"none",width:"auto",margin:"0","font-size":"1.5rem"}},"Destino billetes",-1))),ve=["value"],fe={style:{"margin-left":"0.2rem"}},me=ne((()=>(0,o._)("br",null,null,-1))),Ce={key:1,class:"frame-Cashlogy flex-column"},Ae=0,pe=1;var be={__name:"CashlogyRetirarEfectivo",setup(e,{expose:a}){const l=(0,n.iH)(null),d=(0,n.iH)(null),_=((0,n.iH)(""),(0,n.iH)(!1)),v=(0,n.iH)({}),f=(0,n.iH)("BOCA"),m=(0,n.iH)(["BOCA","STACKER"]);let p={monedas:{},billetes:{}};function b(){let e=0;return(0,u.eh)(p).forEach((({den:a,value:l})=>{e+=l*a})),e/100}function y(){v.value.footer.cols[pe]={value:(0,u.vg)(b(),!0)}}let g,w=(0,n.iH)(null);function R(){w.value&&(w.value.col.input=!1,w.value.col.class=w.value.class,w.value=null)}function k(e,a,l){w.value={row:e,col:a,td_elem:l,class:a.class},a.input=!0,a.class="cashlogyRetirarEfectivo_col_selected"}function h(e,a,l,o){if(l==Ae)R(),p[e.mob][e.den_cents]=a.value,e.cols[pe].value=a.value;else if(l==pe)w.value&&w.value.col==a||(R(),k(e,a,o));else if(R(),p[e.mob][e.den_cents]){let a=(0,u.li)();a[e.mob][e.den_cents]=p[e.mob][e.den_cents],g(a)}y()}function E(e){if(w.value){let a=w.value.row;if("number"==typeof e){let l=10*(p[a.mob][a.den_cents]??0)+e,o=a.cols[Ae].value;l>0&&l<=o&&(p[a.mob][a.den_cents]=l,w.value.col.value=l)}"C"==e&&(delete p[a.mob][a.den_cents],w.value.col.value=""),y()}}function U(){(0,u.kJ)(p)||(R(),g(p))}function S(){R(),g(null)}async function D(){_.value=!1,N.value="PANTALLA_INTRODUCIR_CANTIDAD";let e=new Promise((e=>{g=e})).then((e=>(_.value=!0,e)));return e}new u.JQ((()=>{N.value="PANTALLA_ERROR_EN_DISPENSAR"}),_);const N=(0,n.iH)(null);function T(e){C.socket[e]("Cashlogy.update",L)}function L(e){switch(N.value=e.proceso,e.proceso){case"DISPENSAR_DENOMINACION":break}}let P=!1;async function H(){let e;P=!0,N.value=null,await(0,u.R_)(l),l.value.start(),T("on"),p=(0,u.li)();try{let a=0;await c.Z.saveGrupoProcesos("RETIRAR_EFECTIVO");let o=await c.Z.consulta_todas_denominaciones(!1);e=await(l.value?.informacionAbort_y_cancel(o)),e&&(e.importe_retirado=0);while(!e){let n=o.cantidad_caja_fuerte_pd,t=!(0,u.kJ)(n);m.value=t?["BOCA","STACKER","CAJA_FUERTE"]:["BOCA","STACKER"];let i=o.denominaciones_dispensables,s={header:{cols:["Cantidad Reciclador","Cantidad Retirar",""]},body:[],footer:{head:"Valoración total",cols:[]}},r=0;for(let e of u.iX)for(let a=i[e].length-1;a>=0;a--){let l=i[e][a],n=o.cantidad_recicladores_pd[e][l];r+=n*l,(p[e][l]??0)>n&&(p[e][l]=n);let t={mob:e,den_cents:l,cols:[{value:n,clickable:!0},{value:p[e][l]||"",clickable:!0},{value:"RETIRAR",clickable:!0,button:!0}]};s.body.push(t)}s.footer.cols=[{value:(0,u.vg)(r/100,!0)},{value:(0,u.vg)(b(),!0)},""],v.value=s;let _=await D();_?(N.value=null,o=await c.Z.dispensar_por_denominacion(_,f.value),e=await(l.value?.informacionAbort_y_cancel(o)),e?e.importe_retirado=a:(N.value="ERROR_DEVOLUCION",await(0,u.R_)(d),await d.value.run(o),a+=o.importe_devuelto,(0,u.eh)(o.cantidad_devuelta_pd).forEach((({mob:e,den:a,value:l})=>{let o=p[e][a];null!=o&&(o=Math.max(o-l,0)),o?p[e][a]=o:delete p[e][a]})),"BOCA"!=f.value&&(0,u.eh)(_).forEach((({mob:e,den:a})=>{delete p[e][a]})))):e={importe_retirado:a}}e.abort_id||(await c.Z.saveGrupoProcesos(null),await(0,A.i_)(e.importe_retirado,"Retirada Cashlogy","SALIDA"))}catch(a){console.log(a),e={cancelado:!0}}return T("off"),l.value?.end(),P=!1,e}return(0,o.Ah)((()=>{P&&c.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:H}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=N.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["PANTALLA_INTRODUCIR_CANTIDAD"==N.value?((0,o.wg)(),(0,o.iD)("div",te,[(0,o._)("div",ie,[(0,o._)("div",se,[(0,o.Wm)(s.Z,{tabla:v.value,disabled:_.value,onClickBody:h,style:{flex:"0 0 80%"}},null,8,["tabla","disabled"])])]),(0,o._)("div",re,[(0,o._)("div",ce,[(0,o._)("div",ue,[(0,n.SU)(w)?((0,o.wg)(),(0,o.j4)(I.Z,{key:0,onClickKey:E})):(0,o.kq)("",!0)]),(0,o._)("fieldset",de,[_e,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(m.value,(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.wy)((0,o._)("input",{type:"radio",value:e,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e)},null,8,ve),[[oe.G2,f.value]]),(0,o._)("label",fe,(0,t.zw)((0,n.SU)(u.bW)(e)),1),me],64)))),256))]),(0,o.Wm)((0,n.SU)(i.$v),{disabled:_.value,onClick:U,color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Retirar todo lo marcado ")])),_:1},8,["disabled"]),(0,o.Wm)((0,n.SU)(i.$v),{disabled:_.value,onClick:S,color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Salir ")])),_:1},8,["disabled"])])])])):(0,o.kq)("",!0),"DISPENSAR_DENOMINACION"==N.value?((0,o.wg)(),(0,o.iD)("div",Ce," Dispensando ")):(0,o.kq)("",!0),"ERROR_DEVOLUCION"==N.value?((0,o.wg)(),(0,o.j4)(O.Z,{key:2,ref_key:"CashlogyErrorDevolucion_ref",ref:d},null,512)):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const ye=(0,U.Z)(be,[["__scopeId","data-v-eaf0abee"]]);var ge=ye;const we=e=>((0,o.dD)("data-v-2f0124fe"),e=e(),(0,o.Cn)(),e),Re={key:0,class:"frame-Cashlogy flex-column"},ke={style:{"text-align":"center"}},he=we((()=>(0,o._)("br",null,null,-1))),Ee={key:0},Ue=we((()=>(0,o._)("br",null,null,-1))),Se={key:1,class:"w-100 h-100"},De={key:0,class:"frame-Cashlogy flex-column"},Ie={class:"items-Cashlogy"},Oe={key:1,class:"frame-Cashlogy flex-column"},Ne={key:2,class:"frame-Cashlogy flex-column"},Te={class:"items-Cashlogy"};var Le={__name:"CashlogyRecaudar",setup(e,{expose:a}){const l=(0,n.iH)(null),s=(0,n.iH)(""),d=(0,n.iH)(""),_=(0,n.iH)(""),v=(0,n.iH)(!1),f=(0,n.iH)(!1),m=new u.JQ((e=>{v.value=!(0,u.kJ)(e.cantidad_caja_fuerte_pd),s.value=(0,u.vg)(e.valoracion_stacker,!0),d.value=(0,u.vg)(e.valoracion_caja_fuerte,!0),y.value="PANTALLA_CONFIRMAR_RETIRAR"}),f);function p(){f.value=!0,c.Z.boton_pulsar("BOT_CANCELAR")}const b=new u.JQ((e=>{_.value=(0,u.vg)(e.importe_recaudado,!0),y.value="PANTALLA_VER_RESULTADO"})),y=(0,n.iH)(null),g=(0,n.iH)();function w(e){C.socket[e]("Cashlogy.update",R)}function R(e){switch(y.value=e.proceso,e.proceso){case"RECAUDAR":switch(g.value=e.state,e.state){case"RETIRAR":break;case"CANCELAR":break}break}}let k=!1;async function h(){let e;k=!0,y.value=null,await(0,u.R_)(l),l.value.start(),w("on");try{let a=await c.Z.consulta_todas_denominaciones(!0);if(e=await(l.value?.informacionAbort_y_cancel(a)),!e){let o=await m.start(a);if("ACEPTAR"==o){y.value=null,f.value=!1;let a=await c.Z.recaudar();e=await(l.value?.informacionAbort_y_cancel(a)),e||(await b.start(a),e={importe_recaudado:a.importe_recaudado,cancelado_despues_de_retirar:a.cancelado_despues_de_retirar})}else e={cancelado:!0}}null==e.abort_id&&await(0,A.i_)(e.importe_recaudado,"Recaudar","SALIDA")}catch(a){console.log(a),e={cancelado:!0}}return w("off"),l.value?.end(),k=!1,e}return(0,o.Ah)((()=>{k&&c.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:h}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=y.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["PANTALLA_CONFIRMAR_RETIRAR"==y.value?((0,o.wg)(),(0,o.iD)("div",Re,[(0,o._)("div",null,[(0,o._)("div",ke,[(0,o.Uk)(" Importe en el Stacker : "+(0,t.zw)(s.value)+" ",1),he,v.value?((0,o.wg)(),(0,o.iD)("span",Ee," Importe en la caja fuerte : "+(0,t.zw)(d.value),1)):(0,o.kq)("",!0)]),(0,o.Uk)(),Ue,(0,o.Wm)((0,n.SU)(i.$v),{disabled:f.value,onClick:a[0]||(a[0]=e=>(0,n.SU)(m).R("ACEPTAR")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Retirar stacker "+(0,t.zw)(v.value?"y caja fuerte":""),1)])),_:1},8,["disabled"]),(0,o.Uk)("     "),(0,o.Wm)((0,n.SU)(i.$v),{disabled:f.value,onClick:a[1]||(a[1]=e=>(0,n.SU)(m).R("CANCELAR")),color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancelar ")])),_:1},8,["disabled"])])])):(0,o.kq)("",!0),"RECAUDAR"==y.value?((0,o.wg)(),(0,o.iD)("div",Se,["RETIRAR"==g.value?((0,o.wg)(),(0,o.iD)("div",De,[(0,o._)("div",Ie,[(0,o.Uk)(" Retirando "),(0,o.Wm)((0,n.SU)(i.$v),{disabled:f.value,onClick:p,color:"warning",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Interrumpir retirada ")])),_:1},8,["disabled"])])])):(0,o.kq)("",!0),"CANCELAR"==g.value?((0,o.wg)(),(0,o.iD)("div",Oe," Cancelando ")):(0,o.kq)("",!0)])):(0,o.kq)("",!0),"PANTALLA_VER_RESULTADO"==y.value?((0,o.wg)(),(0,o.iD)("div",Ne,[(0,o._)("div",Te,[(0,o.Uk)(" Importe recaudado : "+(0,t.zw)(_.value)+" ",1),(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[2]||(a[2]=e=>(0,n.SU)(b).R()),color:"info",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1})])])):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const Pe=(0,U.Z)(Le,[["__scopeId","data-v-2f0124fe"]]);var He=Pe;const Ze=e=>((0,o.dD)("data-v-748f8415"),e=e(),(0,o.Cn)(),e),xe={key:0,class:"frame-Cashlogy"},je={class:"col-9 h-100"},We={class:"frame-Cashlogy flex-column"},Be={class:"col h-100"},$e={class:"frame-Cashlogy flex-column"},Me={style:{flex:"0 0 35%","align-content":"center"}},ze={key:2},qe=Ze((()=>(0,o._)("label",null,"Importe fondo de caja",-1))),Ve=Ze((()=>(0,o._)("br",null,null,-1))),Fe=["disabled"],Je=["disabled"],Ke=Ze((()=>(0,o._)("label",{style:{"margin-left":"0.2rem"}},"Recaudar sólo billetes",-1))),Ge={key:0},Ye=Ze((()=>(0,o._)("br",null,null,-1))),Xe={key:1,style:{border:"2px groove grey",padding:"0.35rem 0.75rem 0.625rem 0.75rem"}},Qe=Ze((()=>(0,o._)("legend",{style:{float:"none",width:"auto",margin:"0","font-size":"1.5rem"}},"Destino billetes",-1))),ea=["value"],aa={style:{"margin-left":"0.2rem"}},la=Ze((()=>(0,o._)("br",null,null,-1))),oa={key:2,style:{flex:"0 0 20%"},class:"items-Cashlogy"},na={key:3,style:{flex:"0 0 20%"},class:"items-Cashlogy"},ta={key:1,class:"frame-Cashlogy"},ia={style:{"text-align":"start"}},sa=Ze((()=>(0,o._)("br",null,null,-1))),ra=Ze((()=>(0,o._)("br",null,null,-1))),ca=Ze((()=>(0,o._)("br",null,null,-1))),ua=Ze((()=>(0,o._)("br",null,null,-1))),da=Ze((()=>(0,o._)("br",null,null,-1))),_a=Ze((()=>(0,o._)("br",null,null,-1))),va={key:0,style:{color:"blue"}},fa={key:1},ma=Ze((()=>(0,o._)("br",null,null,-1))),Ca=Ze((()=>(0,o._)("br",null,null,-1))),Aa=Ze((()=>(0,o._)("br",null,null,-1))),pa=Ze((()=>(0,o._)("br",null,null,-1))),ba=Ze((()=>(0,o._)("br",null,null,-1))),ya={key:2,class:"frame-Cashlogy"},ga={key:3,class:"frame-Cashlogy"},wa={style:{"text-align":"center"}},Ra=Ze((()=>(0,o._)("br",null,null,-1))),ka=Ze((()=>(0,o._)("br",null,null,-1))),ha={key:4,class:"w-100 h-100"},Ea={key:0,class:"frame-Cashlogy flex-column"},Ua={class:"items-Cashlogy"},Sa={key:1,class:"frame-Cashlogy flex-column"},Da={key:5,class:"frame-Cashlogy"},Ia={style:{"text-align":"start"}},Oa=Ze((()=>(0,o._)("br",null,null,-1))),Na=Ze((()=>(0,o._)("br",null,null,-1))),Ta=Ze((()=>(0,o._)("br",null,null,-1))),La=Ze((()=>(0,o._)("br",null,null,-1))),Pa=Ze((()=>(0,o._)("br",null,null,-1))),Ha=Ze((()=>(0,o._)("br",null,null,-1))),Za=0,xa=1;var ja={__name:"CashlogyCierreFondoDeCaja",setup(e,{expose:a}){const l=(0,n.iH)(null),d=(0,n.iH)(null),_=(0,n.iH)(""),v=(0,n.iH)(""),f=(0,n.iH)(""),m=(0,n.iH)(""),p=(0,n.iH)(""),b=(0,n.iH)(""),y=(0,n.iH)(""),g=(0,n.iH)(""),w=(0,n.iH)(""),R=(0,n.iH)(""),k=(0,n.iH)(!1),h=(0,n.iH)(!0),E=((0,n.iH)(""),(0,n.iH)(!1)),U=(0,n.iH)({});let S,D=!1,N=3;const T=(0,n.iH)("STACKER"),L=(0,n.iH)(["STACKER"]);function P(e,a){return S.denominaciones_dispensables[e].indexOf(a)>=0}let H={solo_billetes:!1},Z=0,x=!1,j=!1,W={monedas:{},billetes:{}};function B(){let e=0;return(0,u.eh)(W).forEach((({den:a,value:l})=>{e+=l*a})),e/100}function $(){U.value.footer.cols[N]={value:(0,u.vg)(B(),!0)}}function M(){D=!(0,u.kJ)(S.cantidad_caja_fuerte_pd),N=D?4:3,L.value=D?["STACKER","CAJA_FUERTE"]:["STACKER"],D||(T.value="STACKER");let e={header:{cols:["Cantidad actual","Cantidad reciclador","Cantidad Stacker",D?"Cantidad caja fuerte":null,"Fondo caja"].filter((e=>null!=e))},body:[],footer:{head:"Importe total:",cols:[]}};for(let a of u.iX)for(let l=S.denominaciones[a].length-1;l>=0;l--){let o=S.denominaciones[a][l],n=S.cantidad_recicladores_pd[a][o]??0,t=S.cantidad_stacker_pd[a][o]??0,i=S.cantidad_caja_fuerte_pd[a][o]??0,s="monedas"==a&&k.value,r={mob:a,den_cents:o,cols:[{value:n+t+i,clickable:!s&&P(a,o)},{value:n,clickable:!s&&P(a,o)},{value:t},D?{value:i}:null,P(a,o)?{value:W[a][o],class:"",clickable:!s}:{value:""}].filter((e=>null!=e))};e.body.push(r)}e.footer.cols=[{value:(0,u.vg)(S.valoracion_total,!0)},{value:(0,u.vg)(S.valoracion_recicladores,!0)},{value:(0,u.vg)(S.valoracion_stacker,!0)},D?{value:(0,u.vg)(S.valoracion_caja_fuerte,!0)}:null,{value:(0,u.vg)(B(),!0)}].filter((e=>null!=e)),U.value=e}let z=(0,n.iH)(null);function q(){z.value&&(""==z.value.col.value&&(z.value.col.value=0),z.value.col.input=!1,z.value.col.class=z.value.class,z.value=null)}function V(e,a,l){z.value={row:e,col:a,td_elem:l,class:a.class},a.input=!0}function F(e,a,l,o){if(te.value){if(l==Za||l==xa){if(k.value&&"monedas"==e.mob)return;let a=e.cols[xa].value;W[e.mob][e.den_cents]=a,e.cols[N].value=a,$()}if(l==N){if(k.value&&"monedas"==e.mob)return;z.value&&z.value.col==a||(q(),V(e,a,o))}}}function J(e){if(z.value){let a=z.value.row;if("number"==typeof e){let l=10*(W[a.mob][a.den_cents]??0)+e,o=S.cantidad_recicladores_pd[a.mob][a.den_cents];l<=o&&(W[a.mob][a.den_cents]=l,z.value.col.value=l)}"C"==e&&(W[a.mob][a.den_cents]=0,z.value.col.value=""),$()}}let K=(0,u.vg)(1.23).charAt(1),G=2;function Y(e){j=!1;let a=R.value,[l,o]=a.split(K);if("number"==typeof e){if(null!=o){if(o.length>=G)return}else if(l.length>=8)return;"0"==a&&(a=""),a+=e.toString(),R.value=a}else if("C"==e)a="",R.value=a;else if(e==K){if(null!=o)return;""==a&&(a="0"),a+=e,R.value=a}Z=X(),ee(),M()}function X(){if(!R.value)return 0;let e=R.value,[a,l]=e.split(K);a||(a="0"),l||(l="0");while(l.length<G)l+="0";let o=100*parseInt(a,10)+parseInt(l,10);return o/100}let Q={monedas:{1:390,2:310,5:245,10:245,20:190,50:135,100:150,200:120},billetes:{500:50,1e3:49,2e3:47}};function ee(){let e=Math.round(100*Z),a=k.value,l=e;j=!0;let o=[];for(let n of u.iX)for(let e of S.denominaciones_dispensables[n])"monedas"==n&&a?(W[n][e]=S.cantidad_recicladores_pd[n][e],l-=W[n][e]*e):(o.push({mob:n,den_cents:e,capacidad:Q[n][e]||100,cant_recicl:S.cantidad_recicladores_pd[n][e],cap_den:(Q[n][e]||100)*e}),W[n][e]=0);if(l>0){let e,a;o.sort(((e,a)=>e.den_cents-a.den_cents));do{a=l/o.reduce(((e,a)=>e+a.cap_den),0),e=o.length,o=o.filter((e=>!(Math.floor(a*e.capacidad)>=e.cant_recicl)||(W[e.mob][e.den_cents]=e.cant_recicl,l-=W[e.mob][e.den_cents]*e.den_cents,!1)))}while(e!=o.length);o.forEach((e=>{let o=Math.min(Math.floor(a*e.capacidad),e.cant_recicl);W[e.mob][e.den_cents]=o,l-=o*e.den_cents,e.cant_recicl-=o})),o=o.filter((e=>e.cant_recicl>0));while(l>0&&o.length){let e,a=0,n=0,t=0;for(t=0;t<o.length;t++){if(e=o[t],a+=e.den_cents,a>=l)break;n+=e.den_cents*e.cant_recicl}o=o.slice(0,t),(e.den_cents<=l||n<l)&&a>=l?(W[e.mob][e.den_cents]++,l-=e.den_cents):(o.forEach((e=>{W[e.mob][e.den_cents]++,l-=e.den_cents,e.cant_recicl--})),o=o.filter((e=>e.cant_recicl>0)))}}M()}function ae(){q(),h.value=!0,ee(),M()}const le=new u.JQ((()=>{me.value="PANTALLA_PROCESAR_O_MODIFICAR_FONDO",te.value=!1,E.value=!1,H={importe:Z,importe_empty:x,solo_billetes:k.value,fondo_caja_pd:(0,u.j9)(W),calculado:j},R.value=x?"":(0,u.vg)(Z),h.value=j,q(),M();let e=(0,o.YP)(k,(()=>{q(),h.value=!0,ee(),M()}));return()=>{E.value=!0,e()}}));let ne,te=(0,n.iH)(!1);function ie(){te.value=!0}function se(){Z=X(),x=""==R.value,x||(R.value=(0,u.vg)(Z)),te.value=!1,M()}function re(){Z=H.importe,x=H.importe_empty,R.value=x?"":(0,u.vg)(Z),k.value=H.solo_billetes,W=(0,u.j9)(H.fondo_caja_pd),j=H.calculado,te.value=!1,M()}function ce(){ne="CONTINUAR",E.value=!0,c.Z.boton_pulsar("BOT_ACEPTAR")}function ue(){ne="RECALCULAR",E.value=!0,c.Z.boton_pulsar("BOT_ACEPTAR")}const de=new u.JQ((()=>{me.value="DESEA_RETIRAR_EL_STACKER"}),E);function _e(){E.value=!0,c.Z.boton_pulsar("BOT_CANCELAR")}const ve=new u.JQ((()=>{me.value="VER_RESULTADO"})),fe=(0,n.iH)(),me=(0,n.iH)(null);function Ce(e){C.socket[e]("Cashlogy.update",Ae)}function Ae(e){switch(me.value=e.proceso,e.proceso){case"DISPENSAR_DENOMINACION":break;case"AÑADIR_CAMBIOS":_.value=(0,u.vg)(Z,!0),v.value=(0,u.vg)(e.importe_recicladores,!0);let a=Z-e.importe_recicladores;f.value=(0,u.vg)(a>=0?a:0,!0),m.value="color: "+(a>0?"red":"blue"),p.value=a<0?(0,u.vg)(-a):null;break;case"RECAUDAR":switch(fe.value=e.state,e.state){case"RETIRAR":break;case"CANCELAR":break}break}}let pe=!1;async function be(){let e;pe=!0,me.value=null,await(0,u.R_)(l),l.value.start(),Ce("on"),W=(0,u.li)();try{await c.Z.saveGrupoProcesos("CIERRE_FONDO_DE_CAJA");let a=await c.Z.loadFondoCaja();a||(a={importe:null,solo_billetes:!1}),Z=a.importe??0,x=null==a.importe,k.value=a.solo_billetes,j=!0;let o,n=0;const t=async()=>{let a=S=await c.Z.consulta_todas_denominaciones(!0);if(e=await(l.value?.informacionAbort_y_cancel(a)),e)return{...e,importe_cambios_anadidos:n};null==o&&(o=S.valoracion_total),j?ee():(0,u.eh)(W).forEach((({mob:e,den:a,value:l})=>{let o=S.cantidad_recicladores_pd[e][a];l>o&&(W[e][a]=o)}));let t=await le.start();if("SALIR"==t)return{cancelado:!0,importe_cambios_anadidos:n};if(j&&B()<Z){me.value=null,E.value=!1;let o=await c.Z.anadir_cambios();if(e=await(l.value?.informacionAbort_y_cancel(o)),e)return{...e,importe_cambios_anadidos:n};if(n+=o.importe_entrado,"RECALCULAR"==ne)return;if(await c.Z.saveGrupoProcesos(null,{importe_cambios_anadidos:n}),a=S=await c.Z.consulta_todas_denominaciones(!0),e=await(l.value?.informacionAbort_y_cancel(a)),e)return{...e,importe_cambios_anadidos:n}}let i=a.denominaciones_dispensables,s={monedas:{},billetes:{}};for(let e of u.iX)for(let l of i[e])s[e][l]=a.cantidad_recicladores_pd[e][l]-(W[e][l]??0);me.value=null;let r,v=await c.Z.dispensar_por_denominacion(s,T.value);if(e=await(l.value?.informacionAbort_y_cancel(v)),e)return{...e,importe_cambios_anadidos:n};if(me.value="ERROR_DEVOLUCION",await(0,u.R_)(d),await d.value.run(v))return;if("SI"==await de.start()){if(me.value=null,r=await c.Z.recaudar(),e=await(l.value?.informacionAbort_y_cancel(r)),e)return{...e,importe_cambios_anadidos:n};await c.Z.saveGrupoProcesos(null,{importe_recaudado:r.importe_recaudado})}let f=await c.Z.consulta_todas_denominaciones(!0);return e=await(l.value?.informacionAbort_y_cancel(f)),e||(e={}),e={...e,importe_fondo_de_caja:j?Z:B(),importe_inicial:o,importe_final:f.valoracion_total,importe_retirado:v.importe_devuelto,importe_cambios_anadidos:n,importe_recaudado:r?.importe_recaudado??0,cantidad_recicladores_pd:f.cantidad_recicladores_pd,cantidad_stacker_pd:f.cantidad_stacker_pd,cantidad_caja_fuerte_pd:f.cantidad_caja_fuerte_pd},_.value=(0,u.vg)(e.importe_fondo_de_caja,!0),b.value=(0,u.vg)(e.importe_inicial,!0),y.value=null!=e.importe_final?(0,u.vg)(e.importe_final,!0):"no disponible",g.value=(0,u.vg)(e.importe_cambios_anadidos,!0),w.value=(0,u.vg)(e.importe_recaudado,!0),await ve.start(),e};do{e=await t()}while(!e);e.cancelado||(a={importe:x?null:Z,solo_billetes:k.value},await c.Z.saveFondoCaja(a)),e.abort_id||(await c.Z.saveGrupoProcesos(null),await(0,A.i_)(e.importe_cambios_anadidos,"Añadir Cambios","ENTRADA_DINERO"),await(0,A.i_)(e.importe_retirado,"Retirada Cashlogy","SALIDA"),await(0,A.i_)(e.importe_recaudado,"Recaudar","SALIDA"))}catch(a){console.log(a),e={cancelado:!0}}return Ce("off"),l.value?.end(),pe=!1,e}return(0,o.Ah)((()=>{pe&&c.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:be}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=me.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["PANTALLA_PROCESAR_O_MODIFICAR_FONDO"==me.value?((0,o.wg)(),(0,o.iD)("div",xe,[(0,o._)("div",je,[(0,o._)("div",We,[(0,o.Wm)(s.Z,{tabla:U.value,onClickBody:F,style:{flex:"0 0 90%"}},null,8,["tabla"])])]),(0,o._)("div",Be,[(0,o._)("div",$e,[(0,o._)("div",Me,[(0,n.SU)(te)&&(0,n.SU)(z)?((0,o.wg)(),(0,o.j4)(I.Z,{key:0,onClickKey:J})):(0,n.SU)(te)&&!(0,n.SU)(z)&&h.value?((0,o.wg)(),(0,o.j4)(I.Z,{key:1,tipo_importe:"",onClickKey:Y})):((0,o.wg)(),(0,o.iD)("div",ze))]),(0,o._)("div",null,[qe,Ve,(0,o.wy)((0,o._)("input",{type:"text",disabled:!(0,n.SU)(te),readonly:"",onClick:ae,onFocus:a[0]||(a[0]=e=>{e.currentTarget?.blur?.()}),"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),class:(0,t.C_)((0,n.SU)(te)&&!(0,n.SU)(z)?"cashlogyCierreFondoCaja_selected":""),style:{"text-align":"end","border-radius":"4px"}},null,42,Fe),[[oe.nr,R.value]])]),(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"checkbox",disabled:!(0,n.SU)(te),"onUpdate:modelValue":a[2]||(a[2]=e=>k.value=e)},null,8,Je),[[oe.e8,k.value]]),Ke]),1==L.value.length?((0,o.wg)(),(0,o.iD)("div",Ge,[(0,o.Uk)(" Los billetes se "),Ye,(0,o.Uk)(" retiran a "+(0,t.zw)(L.value[0]),1)])):((0,o.wg)(),(0,o.iD)("fieldset",Xe,[Qe,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(L.value,(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.wy)((0,o._)("input",{type:"radio",value:e,"onUpdate:modelValue":a[3]||(a[3]=e=>T.value=e)},null,8,ea),[[oe.G2,T.value]]),(0,o._)("label",aa,(0,t.zw)((0,n.SU)(u.bW)(e)),1),la],64)))),256))])),(0,n.SU)(te)?((0,o.wg)(),(0,o.iD)("div",oa,[(0,o.Wm)((0,n.SU)(i.$v),{class:"boton-Cashlogy",style:{visibility:"hidden"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" hidden ")])),_:1}),(0,o.Wm)((0,n.SU)(i.$v),{onClick:se,outline:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1}),(0,o.Wm)((0,n.SU)(i.$v),{onClick:re,outline:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancelar ")])),_:1})])):((0,o.wg)(),(0,o.iD)("div",na,[(0,o.Wm)((0,n.SU)(i.$v),{disabled:E.value,onClick:ie,color:"primary",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Modificar ")])),_:1},8,["disabled"]),(0,o.Wm)((0,n.SU)(i.$v),{disabled:E.value,onClick:a[4]||(a[4]=e=>(0,n.SU)(le).R("PROCESAR")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Procesar ")])),_:1},8,["disabled"]),(0,o.Wm)((0,n.SU)(i.$v),{disabled:E.value,onClick:a[5]||(a[5]=e=>(0,n.SU)(le).R("SALIR")),color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Salir ")])),_:1},8,["disabled"])]))])])])):(0,o.kq)("",!0),"AÑADIR_CAMBIOS"==me.value?((0,o.wg)(),(0,o.iD)("div",ta,[(0,o._)("div",ia,[(0,o.Uk)(" Por favor, introduzca efectivo por el importe indicado"),sa,(0,o.Uk)(" para dejar el fondo de caja configurado: "),ra,ca,(0,o.Uk)(" Importe fondo de caja: "+(0,t.zw)(_.value)+" ",1),ua,(0,o.Uk)(" Importe reciclador: "+(0,t.zw)(v.value)+" ",1),da,(0,o.Uk)(" Importe a introducir: "),(0,o._)("span",{style:(0,t.j5)(m.value)},(0,t.zw)(f.value),5),(0,o.Uk)(),_a,p.value?((0,o.wg)(),(0,o.iD)("div",va," Importe en exceso: "+(0,t.zw)(p.value),1)):((0,o.wg)(),(0,o.iD)("div",fa," ")),ma,Ca,(0,o.Uk)(" (*) Si no disponde de las monedas/billetes indicados,"),Aa,(0,o.Uk)(' puede pulsar en "Continuar Cierre"'),pa,(0,o.Uk)(" para terminar el proceso con el almacenado actual. "),ba,(0,o.Wm)((0,n.SU)(i.$v),{disabled:E.value,onClick:ue,color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Recalcular ")])),_:1},8,["disabled"]),(0,o.Uk)("      "),(0,o.Wm)((0,n.SU)(i.$v),{disabled:E.value,onClick:ce,color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Continuar cierre ")])),_:1},8,["disabled"])])])):(0,o.kq)("",!0),"DISPENSAR_DENOMINACION"==me.value?((0,o.wg)(),(0,o.iD)("div",ya," Dispensando ")):(0,o.kq)("",!0),"DESEA_RETIRAR_EL_STACKER"==me.value?((0,o.wg)(),(0,o.iD)("div",ga,[(0,o._)("div",wa,[(0,o.Uk)(" ATENCIÓN - ¿Desea retirar el Stacker? "),Ra,ka,(0,o.Wm)((0,n.SU)(i.$v),{disabled:E.value,onClick:a[6]||(a[6]=e=>(0,n.SU)(de).R("SI")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Sí ")])),_:1},8,["disabled"]),(0,o.Uk)("       "),(0,o.Wm)((0,n.SU)(i.$v),{disabled:E.value,onClick:a[7]||(a[7]=e=>(0,n.SU)(de).R("NO")),color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" No ")])),_:1},8,["disabled"])])])):(0,o.kq)("",!0),"RECAUDAR"==me.value?((0,o.wg)(),(0,o.iD)("div",ha,["RETIRAR"==fe.value?((0,o.wg)(),(0,o.iD)("div",Ea,[(0,o._)("div",Ua,[(0,o.Uk)(" Retirando "),(0,o.Wm)((0,n.SU)(i.$v),{disabled:E.value,onClick:_e,color:"warning",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Interrumpir retirada ")])),_:1},8,["disabled"])])])):(0,o.kq)("",!0),"CANCELAR"==fe.value?((0,o.wg)(),(0,o.iD)("div",Sa," Cancelando ")):(0,o.kq)("",!0)])):(0,o.kq)("",!0),"VER_RESULTADO"==me.value?((0,o.wg)(),(0,o.iD)("div",Da,[(0,o._)("div",Ia,[(0,o.Uk)(" Importe fondo de caja: "+(0,t.zw)(_.value)+" ",1),Oa,(0,o.Uk)(" Importe inicial: "+(0,t.zw)(b.value)+" ",1),Na,(0,o.Uk)(" Importe final: "+(0,t.zw)(y.value)+" ",1),Ta,(0,o.Uk)(" Importe cambios añadidos : "+(0,t.zw)(g.value)+" ",1),La,(0,o.Uk)(" Importe recaudado: "+(0,t.zw)(w.value)+" ",1),Pa,Ha,(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[8]||(a[8]=e=>(0,n.SU)(ve).R()),color:"info",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1})])])):(0,o.kq)("",!0),"ERROR_DEVOLUCION"==me.value?((0,o.wg)(),(0,o.j4)(O.Z,{key:6,ref_key:"CashlogyErrorDevolucion_ref",ref:d},null,512)):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const Wa=(0,U.Z)(ja,[["__scopeId","data-v-748f8415"]]);var Ba=Wa;const $a=e=>((0,o.dD)("data-v-67d77b82"),e=e(),(0,o.Cn)(),e),Ma={key:0,class:"frame-Cashlogy flex-column"},za={key:1,class:"frame-Cashlogy flex-column"},qa={style:{"text-align":"center"}},Va=$a((()=>(0,o._)("br",null,null,-1)));var Fa={__name:"CashlogyResolverIncidencias",setup(e,{expose:a}){const l=(0,n.iH)(null),t=((0,n.iH)(""),new u.JQ((()=>{d.value="PANTALLA_RESOLVER_INCIDENCIAS"}))),s=new u.JQ((()=>{d.value="PANTALLA_FINALIZAR"})),d=(0,n.iH)(null);let _=!1;async function v(){let e;_=!0,d.value=null,await(0,u.R_)(l),l.value.start();try{let a=await t.start();if("CONFIRMAR"==a){d.value=null;let e=await c.Z.resolver_incidencias(),a=await(l.value?.informacionAbort_y_cancel(e));a||(await s.start(),a={})}else e={cancelado:!0}}catch(a){console.log(a),e={cancelado:!0}}return l.value?.end(),_=!1,e}return(0,o.Ah)((()=>{_&&c.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:v}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=d.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["PANTALLA_RESOLVER_INCIDENCIAS"==d.value?((0,o.wg)(),(0,o.iD)("div",Ma,[(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[0]||(a[0]=e=>(0,n.SU)(t).R("CONFIRMAR")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Resolucion de desajuste en contabilidad ")])),_:1}),(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[1]||(a[1]=e=>(0,n.SU)(t).R("SALIR")),color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Salir ")])),_:1})])):(0,o.kq)("",!0),"PANTALLA_FINALIZAR"==d.value?((0,o.wg)(),(0,o.iD)("div",za,[(0,o._)("div",qa,[(0,o.Uk)(" Proceso finalizado "),Va,(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[2]||(a[2]=e=>(0,n.SU)(s).R()),color:"info",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1})])])):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const Ja=(0,U.Z)(Fa,[["__scopeId","data-v-67d77b82"]]);var Ka=Ja;const Ga=e=>((0,o.dD)("data-v-5c3ec171"),e=e(),(0,o.Cn)(),e),Ya={key:0,class:"frame-Cashlogy"},Xa={class:"col-8 h-100"},Qa={class:"frame-Cashlogy flex-column"},el={class:"col h-100"},al={class:"frame-Cashlogy flex-column"},ll={style:{flex:"0 0 20%"},class:"items-Cashlogy"},ol={key:0},nl=Ga((()=>(0,o._)("br",null,null,-1))),tl={key:1,style:{border:"2px groove grey",padding:"0.35rem 0.75rem 0.625rem 0.75rem"}},il=Ga((()=>(0,o._)("legend",{style:{float:"none",width:"auto",margin:"0","font-size":"1.5rem"}},"Destino billetes",-1))),sl=["value"],rl={style:{"margin-left":"0.2rem"}},cl=Ga((()=>(0,o._)("br",null,null,-1))),ul={style:{flex:"0 0 20%"},class:"items-Cashlogy"},dl={key:1,class:"frame-Cashlogy"};var _l={__name:"CashlogyVaciadoCompleto",setup(e,{expose:a}){const l=(0,n.iH)(null),d=(0,n.iH)(null),_=((0,n.iH)(""),(0,n.iH)(!1)),v=(0,n.iH)("STACKER"),f=(0,n.iH)([]),m=(0,n.iH)({});let A=(0,n.iH)(["STACKER"]),p=(0,n.iH)(null),b=2,y=(0,o.Fl)((()=>{let e={monedas:!1,billetes:!1},a=p.value;if(!a)return e;let l={};for(let o of u.iX){l[o]={todas:!0,ninguna:!0};for(let e of a[o]){let a=`${o},${e},${b}`,n=f.value.indexOf(a);n>=0?l[o].ninguna=!1:l[o].todas=!1}}for(let o of u.iX)l[o].todas?e[o]=!1:l[o].ninguna&&(e[o]=!0);return e}));function g(e){let a=p.value;if(!a)return;let l=[];for(let o of u.iX)for(let n of a[o]){let a=`${o},${n},${b}`;o==e?y.value[o]&&l.push(a):f.value.indexOf(a)>=0&&l.push(a)}f.value=l}function w(){let e={monedas:[],billetes:[]};f.value.forEach((a=>{let[l,o,n]=a.split(",");e[l].push(parseInt(o))}));for(let a of u.iX)e[a].sort(((e,a)=>e-a));return e}const R=new u.JQ((()=>{k.value="PANTALLA_SELECCIONAR"}),_),k=(0,n.iH)(null);function h(e){C.socket[e]("Cashlogy.update",E)}function E(e){switch(k.value=e.proceso,e.proceso){case"VACIADO_COMPLETO":break}}let U=!1;async function S(){let e;U=!0,k.value=null,await(0,u.R_)(l),l.value.start(),h("on");try{let a=0;await c.Z.saveGrupoProcesos("VACIADO");let o=await c.Z.consulta_todas_denominaciones(!1);e=await(l.value?.informacionAbort_y_cancel(o)),e&&(e.importe_vaciado_solo_monedas=0);while(!e){let n=o.cantidad_caja_fuerte_pd,t=!(0,u.kJ)(n);A.value=t?["STACKER","CAJA_FUERTE"]:["STACKER"],f.value=[];let i=o.denominaciones_dispensables,s={header:{cols:["Cantidad Reciclador","Cantidad retirado",""]},body:[],footer:{head:"Valoración total",cols:[]}},r=0;for(let e of u.iX)for(let a=i[e].length-1;a>=0;a--){let l=i[e][a],n=o.cantidad_recicladores_pd[e][l];r+=n*l;let t={mob:e,den_cents:l,cols:[{value:n},{value:""},{checkbox:!1}]};s.body.push(t)}s.footer.cols=[{value:(0,u.vg)(r/100,!0)},"",""],m.value=s,p.value=o.denominaciones_dispensables;let _=await R.start();if("VACIAR"==_){k.value=null;let n,t=w(),s=!0,r=!0;for(let e of u.iX)for(let a of i[e]){let l=t[e].indexOf(a)>=0;l||(s=!1),("billetes"==e&&l||"monedas"==e&&!l)&&(r=!1)}n=!s&&(!!r||null),o=await c.Z.vaciado_completo(n,null==n?t:null,v.value),e=await(l.value?.informacionAbort_y_cancel(o)),e?e.importe_vaciado_solo_monedas=a:(k.value="ERROR_DEVOLUCION",await(0,u.R_)(d),await d.value.run(o),a+=o.importe_vaciado_solo_monedas)}else e={importe_vaciado_solo_monedas:a}}e.abort_id||await c.Z.saveGrupoProcesos(null)}catch(a){console.log(a),e={cancelado:!0}}return h("off"),l.value?.end(),U=!1,e}return(0,o.Ah)((()=>{U&&c.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:S}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=k.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["PANTALLA_SELECCIONAR"==k.value?((0,o.wg)(),(0,o.iD)("div",Ya,[(0,o._)("div",Xa,[(0,o._)("div",Qa,[(0,o.Wm)(s.Z,{tabla:m.value,disabled:_.value,checkboxs:f.value,"onUpdate:checkboxs":a[0]||(a[0]=e=>f.value=e),style:{flex:"0 0 80%"}},null,8,["tabla","disabled","checkboxs"])])]),(0,o._)("div",el,[(0,o._)("div",al,[(0,o._)("div",ll,[(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[1]||(a[1]=e=>g("monedas")),color:"info",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)((0,n.SU)(y)["monedas"]?"Todas las monedas":"Ninguna moneda"),1)])),_:1}),(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[2]||(a[2]=e=>g("billetes")),color:"info",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)((0,n.SU)(y)["billetes"]?"Todas los billetes":"Ningun billete"),1)])),_:1})]),1==(0,n.SU)(A).length?((0,o.wg)(),(0,o.iD)("div",ol,[(0,o.Uk)(" Los billetes se "),nl,(0,o.Uk)(" retiran a "+(0,t.zw)((0,n.SU)(A)[0]),1)])):((0,o.wg)(),(0,o.iD)("fieldset",tl,[il,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(A),(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.wy)((0,o._)("input",{type:"radio",value:e,"onUpdate:modelValue":a[3]||(a[3]=e=>v.value=e)},null,8,sl),[[oe.G2,v.value]]),(0,o._)("label",rl,(0,t.zw)((0,n.SU)(u.bW)(e)),1),cl],64)))),256))])),(0,o._)("div",ul,[(0,o.Wm)((0,n.SU)(i.$v),{disabled:_.value,onClick:a[4]||(a[4]=e=>(0,n.SU)(R).R("VACIAR")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Vaciar ")])),_:1},8,["disabled"]),(0,o.Wm)((0,n.SU)(i.$v),{disabled:_.value,onClick:a[5]||(a[5]=e=>(0,n.SU)(R).R("SALIR")),color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Salir ")])),_:1},8,["disabled"])])])])])):(0,o.kq)("",!0),"VACIADO_COMPLETO"==k.value?((0,o.wg)(),(0,o.iD)("div",dl," Vaciando ")):(0,o.kq)("",!0),"ERROR_DEVOLUCION"==k.value?((0,o.wg)(),(0,o.j4)(O.Z,{key:2,ref_key:"CashlogyErrorDevolucion_ref",ref:d},null,512)):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const vl=(0,U.Z)(_l,[["__scopeId","data-v-5c3ec171"]]);var fl=vl;const ml=e=>((0,o.dD)("data-v-51a0ee28"),e=e(),(0,o.Cn)(),e),Cl={key:0,class:"frame-Cashlogy flex-column"},Al={key:1,class:"frame-Cashlogy"},pl={style:{"text-align":"start"}},bl=ml((()=>(0,o._)("br",null,null,-1))),yl=ml((()=>(0,o._)("br",null,null,-1)));var gl={__name:"CashlogyPonerACero",setup(e,{expose:a}){const l=(0,n.iH)(null),s=(0,n.iH)(""),d=(0,n.iH)(""),_=new u.JQ((()=>{f.value="PANTALLA_PONER_A_CERO"})),v=new u.JQ((()=>{f.value="PANTALLA_VER_RESULTADO"})),f=(0,n.iH)(null);let m=!1;async function C(){let e;m=!0,f.value=null,await(0,u.R_)(l),l.value.start();try{let a=await _.start();if("CONFIRMAR"==a){let a=await c.Z.poner_a_cero();e=await(l.value?.informacionAbort_y_cancel(a)),e||(s.value=(0,u.vg)(a.importe_antes,!0),d.value=(0,u.vg)(a.importe_despues,!0),await v.start(),e={importe_antes:a.importe_antes,importe_despues:a.importe_despues})}else e={cancelado:!0}}catch(a){console.log(a),e={cancelado:!0}}return l.value?.end(),m=!1,e}return(0,o.Ah)((()=>{m&&c.Z.boton_pulsar("BOT_ABORTAR_Y_CANCELAR")})),a({run:C}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=f.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["PANTALLA_PONER_A_CERO"==f.value?((0,o.wg)(),(0,o.iD)("div",Cl,[(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[0]||(a[0]=e=>(0,n.SU)(_).R("CONFIRMAR")),color:"success",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" CONFIRMAR PONER A CERO LAS MONEDAS ")])),_:1}),(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[1]||(a[1]=e=>(0,n.SU)(_).R("SALIR")),color:"danger",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Salir ")])),_:1})])):(0,o.kq)("",!0),"PANTALLA_VER_RESULTADO"==f.value?((0,o.wg)(),(0,o.iD)("div",Al,[(0,o._)("div",pl,[(0,o.Uk)(" Importe total antes: "+(0,t.zw)(s.value)+" ",1),bl,(0,o.Uk)(" Importe total actual: "+(0,t.zw)(d.value)+" ",1),yl,(0,o.Wm)((0,n.SU)(i.$v),{onClick:a[2]||(a[2]=e=>(0,n.SU)(v).R()),color:"info",class:"boton-Cashlogy"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1})])])):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const wl=(0,U.Z)(gl,[["__scopeId","data-v-51a0ee28"]]);var Rl=wl,kl=l(75629),hl=l(37532),El={__name:"CashlogyConsultaErrores",setup(e,{expose:a}){const l=(0,n.iH)(null),t=(0,n.iH)(null),i=((0,n.iH)(!1),(0,n.iH)(null));let s=!1;async function c(){s=!0,i.value=null,await(0,u.R_)(l),l.value.start(),i.value="CONSULTA_ERRORES",await(0,u.R_)(t),await t.value.run(null,null),l.value?.end(),s=!1}return(0,o.Ah)((()=>{})),a({run:c}),(e,a)=>((0,o.wg)(),(0,o.j4)(r.Z,{enProceso:null!=i.value,ref_key:"CashlogyPantalla_ref",ref:l},{default:(0,o.w5)((()=>["CONSULTA_ERRORES"==i.value?((0,o.wg)(),(0,o.j4)(hl.Z,{key:0,ref_key:"CashlogyConsultaErrorChild_ref",ref:t,style:{"padding-left":"2rem"}},null,512)):(0,o.kq)("",!0)])),_:1},8,["enProceso"]))}};const Ul=El;var Sl=Ul;const Dl={class:"w-50 mx-auto buttons lista"},Il={class:"mt-2"};var Ol={__name:"CashlogyBackOfficeView",setup(e){const a=(0,n.iH)(null),l=(0,n.iH)(null),s=(0,n.iH)(null),r=(0,n.iH)(null),c=(0,n.iH)(null),u=(0,n.iH)(null),d=(0,n.iH)(null),_=(0,n.iH)(null),v=(0,n.iH)(null),f=(0,n.iH)(null),C=(0,n.iH)(null),A=(0,n.iH)(!1),p=[["Estado de Cashlogy",async()=>{a.value.run()}],["Añadir cambios",async()=>{l.value.run()}],["Dar cambio",async()=>{s.value.run()}],["Retirar efectivo",async()=>{r.value.run()}],["Recaudar",async()=>{c.value.run()}],["Cierre / Fondo de caja",async()=>{u.value.run()}],["Resolver incidencias",async()=>{d.value.run()}],["Vaciado completo",async()=>{_.value.run()}],["Poner a cero las monedas",async()=>{v.value.run()}],["Mantenimiento",async()=>{f.value.run()}],["Consulta errores",async()=>{C.value.run()}]];return(e,b)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Dl,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(p,(a=>(0,o._)("div",Il,[(0,o.Wm)((0,n.SU)(i.$v),{color:"success",size:"lg",class:"w-100",disabled:A.value,onClick:async()=>{A.value=!0,await(a[1]?.()),A.value=!1}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.$t(a[0],a[0])),1)])),_:2},1032,["disabled","onClick"])]))),64))]),(0,o._)("div",null,[(0,o.Wm)(m,{ref_key:"CashlogyEstado_Ref",ref:a},null,512),(0,o.Wm)(D,{ref_key:"CashlogyAnadirCambios_Ref",ref:l},null,512),(0,o.Wm)(le,{ref_key:"CashlogyDarCambio_Ref",ref:s},null,512),(0,o.Wm)(ge,{ref_key:"CashlogyRetirarEfectivo_Ref",ref:r},null,512),(0,o.Wm)(He,{ref_key:"CashlogyRecaudar_Ref",ref:c},null,512),(0,o.Wm)(Ba,{ref_key:"CashlogyCierreFondoDeCaja_Ref",ref:u},null,512),(0,o.Wm)(Ka,{ref_key:"CashlogyResolverIncidencias_Ref",ref:d},null,512),(0,o.Wm)(fl,{ref_key:"CashlogyVaciadoCompleto_Ref",ref:_},null,512),(0,o.Wm)(Rl,{ref_key:"CashlogyPonerACero_Ref",ref:v},null,512),(0,o.Wm)(kl.Z,{ref_key:"CashlogyMantenimiento_Ref",ref:f},null,512),(0,o.Wm)(Sl,{ref_key:"CashlogyConsultaErrores_Ref",ref:C},null,512)])],64))}};const Nl=(0,U.Z)(Ol,[["__scopeId","data-v-4e475166"]]);var Tl=Nl}}]);
//# sourceMappingURL=893.02aecaa1.js.map