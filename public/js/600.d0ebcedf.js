"use strict";(self["webpackChunktoc_game_v4"]=self["webpackChunktoc_game_v4"]||[]).push([[600],{34730:function(a,e,o){o.d(e,{HB:function(){return u},i_:function(){return c},re:function(){return d}});var n=o(91076),i=o(13150),r=o(16683),t=o(28571);let l=t.Z;function s(){return l.state.Trabajadores.arrayTrabajadores&&null!=l.state.Trabajadores.indexActivo?l.state.Trabajadores.arrayTrabajadores[l.state.Trabajadores.indexActivo]??null:null}async function c(a,e,o){null!=a&&a>0&&n.Z.post("movimientos/nuevoMovimiento",{cantidad:a,concepto:e,idTrabajador:s()._id,tipo:o})}async function d(){return i.Z.activado()}async function u(){if(!await i.Z.activado())return null;let a=await i.Z.get_estado();if(a.err)return{err:a.err};let e=(0,r.li)();const o=a=>{(0,r.eh)(a).forEach((({mob:a,den:o,value:n})=>{e[a][o]=(e[a][o]??0)+n}))};o(a.cantidad_recicladores_pd),o(a.cantidad_stacker_pd),o(a.cantidad_caja_fuerte_pd);let n=[];const t={monedas:[1,2,5,10,20,50,100,200],billetes:[500,1e3,2e3,5e3,1e4,2e4,5e4]};for(let i=0;i<t.monedas.length+t.billetes.length;i++)i<t.monedas.length?n[i]=e.monedas[t.monedas[i]]??0:n[i]=e.billetes[t.billetes[i-t.monedas.length]]??0;return{infoDinero:n}}},13150:function(a,e,o){var n=o(91076);function i(a,e){return arguments.length<2?n.Z.get(a).then((a=>a.data)):n.Z.post(a,e,{headers:{"Content-Type":"application/json"}}).then((a=>a.data))}function r(a,e){return a="cashlogy/"+a,arguments.length<2?i(a):i(a,e)}function t(){return r("activado")}function l(a,e){return r("saveGrupoProcesos",{nombre:a,info:e})}function s(a){return r("crearGrupoProcesosDeUnSoloProceso",{info:a})}function c(){return r("get_procesoPrevioInterrumpido")}function d(a){return r("aceptar_procesoPrevioInterrumpido",a)}function u(){return r("aceptar_reset_remoto")}function v(a){return r("importe_entrado_manualmente_en_cobrar",a)}function _(a,e=!0){return r("cobrar",{importe_a_cobrar:a,auto_aceptar:e})}function f(a){return r("anadir_cambios_y_devolver",a)}function m(){return r("anadir_cambios")}function g(a){return r("solo_dispensar",a)}function b(){return r("dar_cambio_entrada")}function p(a,e){return r("dispensar_por_denominacion",{cantidad_retirar_pd:a,destino_billetes:e})}function h(a,e,o){return r("vaciado_completo",{solo_monedas:a,denominaciones_vaciar:e,destino_billetes:o})}function w(a=!1){return r("consulta_todas_denominaciones",a)}function C(){return r("recaudar")}function y(a){return r("mantenimiento",a)}function z(){return r("poner_a_cero")}function k(){return r("resolver_incidencias")}function D(){return r("get_niveles")}function j(a){return r("get_errores",a)}function A(){return r("get_estado")}function N(a){return r("boton_pulsar",a)}function $(){return r("loadFondoCaja")}function S(a){return r("saveFondoCaja",a)}function B(a=!1){return r("reiniciar",a)}function E(a){return r("enviar_comando_inicializacion",a)}function T(){return r("do_stop_proceso_activo")}e["Z"]={activado:t,saveGrupoProcesos:l,crearGrupoProcesosDeUnSoloProceso:s,get_procesoPrevioInterrumpido:c,aceptar_procesoPrevioInterrumpido:d,aceptar_reset_remoto:u,importe_entrado_manualmente_en_cobrar:v,cobrar:_,anadir_cambios_y_devolver:f,anadir_cambios:m,solo_dispensar:g,dar_cambio_entrada:b,dispensar_por_denominacion:p,vaciado_completo:h,consulta_todas_denominaciones:w,recaudar:C,mantenimiento:y,poner_a_cero:z,resolver_incidencias:k,get_niveles:D,get_errores:j,get_estado:A,boton_pulsar:N,loadFondoCaja:$,saveFondoCaja:S,reiniciar:B,enviar_comando_inicializacion:E,do_stop_proceso_activo:T}},16683:function(a,e,o){o.d(e,{Cq:function(){return b},JQ:function(){return m},R_:function(){return l},XX:function(){return p},bW:function(){return g},c:function(){return d},eh:function(){return v},iX:function(){return s},j9:function(){return f},kJ:function(){return _},li:function(){return u},ul:function(){return h},uz:function(){return t},vg:function(){return r}});o(57658);var n=o(73396),i=o(44870);function r(a,e=!1){return a.toFixed(2)+(e?" €":"")}function t(a){return new Promise((e=>{setTimeout(e,a)}))}async function l(...a){function e(){return a.every((a=>a.value))}if(e())return;let o,i=(0,n.YP)(a,(()=>{o?.()}));do{let a=new Promise((a=>{o=a}));await a}while(!e());i?.()}const s=["billetes","monedas"],c=["monedas","billetes"];function d(a){let e,o=a.denominaciones_dispensables,n={header:{cols:["Cantidad reciclador","Cantidad introducida"]},body:[]};for(let i of s)for(let r=o[i].length-1;r>=0;r--){let t=o[i][r];e={mob:i,den_cents:t,cols:[{value:a.cantidad_recicladores_pd[i][t]},{value:a.cantidad_entrado_pd[i][t]}]},n.body.push(e)}return n}function u(){return{monedas:{},billetes:{}}}function v(a){let e=[];if(!a)return e;for(let o of c)a[o]&&Object.keys(a[o]).map((a=>parseInt(a))).sort(((a,e)=>a-e)).forEach((n=>{e.push({mob:o,den:n,value:a[o][n]})}));return e}function _(a){return 0==v(a).length}function f(a){let e=u();return v(a).forEach((({mob:a,den:o,value:n})=>{e[a][o]=n})),e}function m(a,e,o){let n;this.start=function(r){(0,i.dq)(e)?e.value=!1:arguments.length<=2&&(o=e);let t=a?.(r);return new Promise((a=>{n=a})).then((a=>(t&&t(a),o?.(a),(0,i.dq)(e)&&(e.value=!0),a)))},this.R=function(a){n(a)}}function g(a){return"CAJA_FUERTE"==a?"CAJA FUERTE":a}function b(a,e){let o="";return o=e<100?`${e}cts`:100==e?"uneuro":200==e?"doseuros":e/100+"euros",o=`/img/${o}.png`,o}function p(a){return Math.round(100*a)}function h(a){return a/100}},21600:function(a,e,o){o.r(e),o.d(e,{default:function(){return Q}});var n=o(73396),i=o(87139),r=o(49242);const t=a=>((0,n.dD)("data-v-aa456fac"),a=a(),(0,n.Cn)(),a),l={class:"container-fluid"},s=t((()=>(0,n._)("div",{class:"row"},[(0,n._)("h2",null,"ABRIR CAJA")],-1))),c={class:"row p-2",style:{"text-align":"center"}},d=t((()=>(0,n._)("img",{src:"/img/1cts.png",width:"84",height:"84"},null,-1))),u=t((()=>(0,n._)("img",{src:"/img/2cts.png",width:"84",height:"84"},null,-1))),v=t((()=>(0,n._)("img",{src:"/img/5cts.png",width:"84",height:"84"},null,-1))),_=t((()=>(0,n._)("img",{src:"/img/10cts.png",width:"84",height:"84"},null,-1))),f=t((()=>(0,n._)("img",{src:"/img/20cts.png",width:"84",height:"84"},null,-1))),m=t((()=>(0,n._)("img",{src:"/img/50cts.png",width:"84",height:"84"},null,-1))),g=t((()=>(0,n._)("img",{src:"/img/uneuro.png",width:"84",height:"84"},null,-1))),b=t((()=>(0,n._)("img",{src:"/img/doseuros.png",width:"84",height:"84"},null,-1))),p={class:"row mx-auto mt-4"},h=["width"],w=t((()=>(0,n._)("br",null,null,-1))),C=["width"],y=t((()=>(0,n._)("br",null,null,-1))),z=["width"],k=t((()=>(0,n._)("br",null,null,-1))),D=["width"],j=t((()=>(0,n._)("br",null,null,-1))),A=["width"],N=t((()=>(0,n._)("br",null,null,-1))),$=["width"],S=t((()=>(0,n._)("br",null,null,-1))),B=["width"],E=t((()=>(0,n._)("br",null,null,-1))),T={class:"row mx-auto mt-4"},Z={class:"text-center"},x={class:"position-absolute bottom-0 start-0 mb-4 ms-2"},M={key:0,style:{"font-size":"1.5rem"}},P={class:"row"},U={class:"col"},F={class:"col"};function H(a,e,o,t,H,R){const I=(0,n.up)("MDBIcon"),W=(0,n.up)("MDBBtn"),V=(0,n.up)("MDBModalBody"),G=(0,n.up)("MDBModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",l,[s,(0,n._)("div",c,[(0,n._)("div",{class:"col",onClick:e[0]||(e[0]=a=>t.setActivo(0))},[d,(0,n._)("label",{class:(0,i.C_)({infoDineros:0==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[0].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[1]||(e[1]=a=>t.setActivo(1))},[u,(0,n._)("label",{class:(0,i.C_)({infoDineros:1==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[1].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[2]||(e[2]=a=>t.setActivo(2))},[v,(0,n._)("label",{class:(0,i.C_)({infoDineros:2==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[2].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[3]||(e[3]=a=>t.setActivo(3))},[_,(0,n._)("label",{class:(0,i.C_)({infoDineros:3==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[3].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[4]||(e[4]=a=>t.setActivo(4))},[f,(0,n._)("label",{class:(0,i.C_)({infoDineros:4==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[4].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[5]||(e[5]=a=>t.setActivo(5))},[m,(0,n._)("label",{class:(0,i.C_)({infoDineros:5==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[5].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[6]||(e[6]=a=>t.setActivo(6))},[g,(0,n._)("label",{class:(0,i.C_)({infoDineros:6==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[6].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",onClick:e[7]||(e[7]=a=>t.setActivo(7))},[b,(0,n._)("label",{class:(0,i.C_)({infoDineros:7==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[7].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)])]),(0,n._)("div",p,[(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[8]||(e[8]=a=>t.setActivo(8))},[(0,n._)("img",{src:"/img/5euros.png",width:t.sizeBilletes},null,8,h),(0,n.Uk)(),w,(0,n._)("label",{class:(0,i.C_)({infoDineros:8==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[8].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[9]||(e[9]=a=>t.setActivo(9))},[(0,n._)("img",{src:"/img/10euros.png",width:t.sizeBilletes},null,8,C),y,(0,n._)("label",{class:(0,i.C_)({infoDineros:9==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[9].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[10]||(e[10]=a=>t.setActivo(10))},[(0,n._)("img",{src:"/img/20euros.png",width:t.sizeBilletes},null,8,z),k,(0,n._)("label",{class:(0,i.C_)({infoDineros:10==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[10].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[11]||(e[11]=a=>t.setActivo(11))},[(0,n._)("img",{src:"/img/50euros.png",width:t.sizeBilletes},null,8,D),j,(0,n._)("label",{class:(0,i.C_)({infoDineros:11==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[11].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[12]||(e[12]=a=>t.setActivo(12))},[(0,n._)("img",{src:"/img/100euros.png",width:t.sizeBilletes},null,8,A),N,(0,n._)("label",{class:(0,i.C_)({infoDineros:12==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[12].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[13]||(e[13]=a=>t.setActivo(13))},[(0,n._)("img",{src:"/img/200euros.png",width:t.sizeBilletes},null,8,$),S,(0,n._)("label",{class:(0,i.C_)({infoDineros:13==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[13].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)]),(0,n._)("div",{class:"col",style:{"text-align":"center"},onClick:e[14]||(e[14]=a=>t.setActivo(14))},[(0,n._)("img",{src:"/img/500euros.png",width:t.sizeBilletes},null,8,B),E,(0,n._)("label",{class:(0,i.C_)({infoDineros:14==t.activo,unidadesSize:!0})},(0,i.zw)(t.infoDinero[14].valor)+" "+(0,i.zw)(a.$t("unidades","unidades")),3)])]),(0,n._)("div",{class:"d-flex justify-content-center mt-4",onClick:e[15]||(e[15]=a=>t.setActivo(null))},[(0,n._)("p",null,[(0,n.Wm)(I,{icon:"box"}),(0,n.Uk)("   "),(0,n._)("span",{class:(0,i.C_)([{infoDineros:null==t.activo,unidadesSize:!0},"border border-2 rounded"])},(0,i.zw)(a.$t("cambio_de_emergencia","Cambio de emergencia"))+": "+(0,i.zw)(t.cambioEmergencia)+" €",3)])]),(0,n._)("div",T,[(0,n._)("div",Z,[(0,n._)("a",{class:"boton",onClick:e[16]||(e[16]=a=>t.addNumero(0))},"0"),(0,n._)("a",{class:"boton",onClick:e[17]||(e[17]=a=>t.addNumero(1))},"1"),(0,n._)("a",{class:"boton",onClick:e[18]||(e[18]=a=>t.addNumero(2))},"2"),(0,n._)("a",{class:"boton",onClick:e[19]||(e[19]=a=>t.addNumero(3))},"3"),(0,n._)("a",{class:"boton",onClick:e[20]||(e[20]=a=>t.addNumero(4))},"4"),(0,n._)("a",{class:"boton",onClick:e[21]||(e[21]=a=>t.addNumero(5))},"5"),(0,n._)("a",{class:"boton",onClick:e[22]||(e[22]=a=>t.addNumero(6))},"6"),(0,n._)("a",{class:"boton",onClick:e[23]||(e[23]=a=>t.addNumero(7))},"7"),(0,n._)("a",{class:"boton",onClick:e[24]||(e[24]=a=>t.addNumero(8))},"8"),(0,n._)("a",{class:"boton",onClick:e[25]||(e[25]=a=>t.addNumero(9))},"9"),(0,n.wy)((0,n._)("a",{class:"boton",onClick:e[26]||(e[26]=a=>t.addComa())},",",512),[[r.F8,null==t.activo]]),(0,n._)("a",{class:"boton",onClick:e[27]||(e[27]=a=>t.borrarNumero())},"<")])]),(0,n._)("div",x,[(0,n.Wm)(W,{color:"primary",style:{"font-size":"27px"},size:"lg",onClick:e[28]||(e[28]=a=>t.abrirModalConfirmacion())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(a.$t("abrir_con","ABRIR CON"))+" "+(0,i.zw)(t.getTotal.toFixed(2))+" € ",1)])),_:1}),t.conectandoConCashlogy?((0,n.wg)(),(0,n.iD)("span",M,"  Conectando con Cashlogy. Espere...  ")):(0,n.kq)("",!0),(0,n.Wm)(W,{color:"warning",style:{"font-size":"27px"},size:"lg",onClick:e[29]||(e[29]=a=>t.volver()),disabled:t.loading},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(a.$t("volver","VOLVER")),1)])),_:1},8,["disabled"])])]),(0,n.Wm)(G,{id:"modalConfirmacionApertura",tabindex:"-1",labelledby:"tituloModalConfirmacionApertura",modelValue:t.modalConfirmacionApertura,"onUpdate:modelValue":e[32]||(e[32]=a=>t.modalConfirmacionApertura=a),centered:"",staticBackdrop:""},{default:(0,n.w5)((()=>[(0,n.Wm)(V,null,{default:(0,n.w5)((()=>[(0,n._)("div",P,[(0,n._)("div",U,[(0,n.Wm)(W,{color:"danger",class:"w-100",size:"lg",onClick:e[30]||(e[30]=a=>t.modalConfirmacionApertura=!1),disabled:t.loading},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(a.$t("cancelar","Cancelar")),1)])),_:1},8,["disabled"])]),(0,n._)("div",F,[t.loading?((0,n.wg)(),(0,n.j4)(W,{key:1,color:"success",size:"lg",class:"w-100",disabled:t.loading},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(a.$t("cargando","Cargando"))+"...",1)])),_:1},8,["disabled"])):((0,n.wg)(),(0,n.j4)(W,{key:0,color:"success",size:"lg",class:"w-100",onClick:e[31]||(e[31]=a=>t.abrirCaja()),disabled:t.loading},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(a.$t("confirmar","Confirmar")),1)])),_:1},8,["disabled"]))])])])),_:1})])),_:1},8,["modelValue"])],64)}o(57658);var R=o(44870),I=o(91076),W=o(6411),V=o(42492),G=o.n(V),J=o(74313),O=o(20065),q=o(34730),X={name:"AbrirCajaView",components:{MDBModal:J.j3,MDBModalBody:J.Yz,MDBBtn:J.$v},setup(){const a=(0,O.oR)(),e=(0,R.iH)(!1),o=(0,R.iH)(null),i=((0,n.Fl)((()=>69)),(0,R.iH)([{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""}])),r=(0,R.iH)(0),t=0,l="160",s=(0,R.iH)(0),c=(0,R.iH)(0),d=(0,n.Fl)((()=>{let a=0;return a+=.01*i.value[0].valor,a+=.02*i.value[1].valor,a+=.05*i.value[2].valor,a+=.1*i.value[3].valor,a+=.2*i.value[4].valor,a+=.5*i.value[5].valor,a+=1*i.value[6].valor,a+=2*i.value[7].valor,a+=5*i.value[8].valor,a+=10*i.value[9].valor,a+=20*i.value[10].valor,a+=50*i.value[11].valor,a+=100*i.value[12].valor,a+=200*i.value[13].valor,a+=500*i.value[14].valor,a+=Number(c.value.toString()),a})),u=(0,R.iH)(!1),v=(0,n.Fl)((()=>{const a=[{_id:"0.01",valor:.01*i.value[0].valor,unidades:i.value[0].valor},{_id:"0.02",valor:.02*i.value[1].valor,unidades:i.value[1].valor},{_id:"0.05",valor:.05*i.value[2].valor,unidades:i.value[2].valor},{_id:"0.10",valor:.1*i.value[3].valor,unidades:i.value[3].valor},{_id:"0.20",valor:.2*i.value[4].valor,unidades:i.value[4].valor},{_id:"0.50",valor:.5*i.value[5].valor,unidades:i.value[5].valor},{_id:"1",valor:1*i.value[6].valor,unidades:i.value[6].valor},{_id:"2",valor:2*i.value[7].valor,unidades:i.value[7].valor},{_id:"5",valor:5*i.value[8].valor,unidades:i.value[8].valor},{_id:"10",valor:10*i.value[9].valor,unidades:i.value[9].valor},{_id:"20",valor:20*i.value[10].valor,unidades:i.value[10].valor},{_id:"50",valor:50*i.value[11].valor,unidades:i.value[11].valor},{_id:"100",valor:100*i.value[12].valor,unidades:i.value[12].valor},{_id:"200",valor:200*i.value[13].valor,unidades:i.value[13].valor},{_id:"500",valor:500*i.value[14].valor,unidades:i.value[14].valor}];return a}));function _(a){r.value=a}function f(){W.Z.push("/menu/caja")}function m(){null==r.value&&(c.value=c.value.toString()+".")}function g(a){null==r.value?c.value=Number(c.value.toString()+a):i.value[r.value].valor=Number(i.value[r.value].valor.toString()+a)}function b(){i.value=[{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""},{valor:0,style:""}],s.value=0}async function p(){async function a(){I.Z.post("clientes/descargarClientesFinales").then((a=>{if(!a.data)throw Error("No se han podido descargar los clientes finales")})).catch((a=>{}))}async function e(){I.Z.get("tarifas/descargarTarifas").then((a=>{if(!a.data)throw Error("No se han podido descargar las tarifas especiales")})).catch((a=>{}))}async function o(){I.Z.get("trabajadores/actualizarTrabajadores").then((a=>{if(!a.data)throw Error("No se ha podido actualizar los trabajadores")})).catch((a=>{}))}async function n(){await I.Z.post("teclado/actualizarTeclado").then((a=>{if(a.data.error&&"failed"==a.data.restore)throw Error("No se ha podido actualizar el teclado")})).catch((a=>{}))}async function i(){I.Z.get("promociones/descargarPromociones").then((a=>{if(!a.data)throw Error("No se han podido actualizar las promociones")})).catch((a=>{}))}async function r(){I.Z.get("parametros/actualizarParametros").then((a=>{if(!a.data)throw Error("No se han podido actualizar los parámetros")})).catch((a=>{}))}await a(),await e(),await r(),await i(),await n(),await o(),document.location.href=`http://${window.location.hostname}:${window.location.port}`}function h(){u.value=!0}function w(){u.value=!1}async function C(){h();try{await p()}catch(e){console.log("error cargar todo:",e.message),w()}try{const e=(await I.Z.post("/caja/abrirCaja",{total:d.value,detalle:v.value,cambioEmergencia:Number(c.value.toString()),idDependienta:a.getters["Trabajadores/getTrabajadorActivo"]._id})).data;if(!e)throw Error("No se ha podido abrir la caja")}catch(e){G().fire("Error",e.message,"error"),w()}w()}function y(){null==r.value?c.value=Number(c.value.toString().slice(0,-1)):i.value[r.value].valor=Number(i.value[r.value].valor.toString().slice(0,-1))}function z(){e.value=!0}function k(){e.value=!1}const D=(0,R.iH)(!1);let j=!1;return(0,n.Ah)((()=>{j=!0})),(0,n.bv)((()=>{if(D.value=!1,j=!1,(0,q.re)().then((a=>{if(a){D.value=!0;let a=0;I.Z.get("caja/getMonedasUltimoCierre").then((e=>{a=e?.data?.cambioEmergencia||0})).finally((async()=>{while(1){let e=await(0,q.HB)();if(null==e)break;if(j)break;if(e.infoDinero){i.value=e.infoDinero.map((a=>({valor:a,style:""}))),c.value=a;break}e.err}D.value=!1}))}else I.Z.get("caja/getMonedasUltimoCierre").then((a=>{if(a.data&&a.data){c.value=a.data.cambioEmergencia||0;for(let e=0;e<a.data.array.length;e++)i.value[e].valor=a.data.array[e]}else G().fire("Oops...","No se ha podido cargar la información (backend)","warning")})).catch((a=>{G().fire("Error","No se ha podido cargar la información del último cierre (petición)","error")}))})),void 0==a.getters["Trabajadores/getTrabajadorActivo"]?._id)return W.Z.push("/menu/fichajes");I.Z.post("impresora/abrirCajon").catch((a=>{console.log("No se ha podido abrir el cajon -> "+a)}))})),{ejemplo:o,volver:f,infoDinero:i,activo:r,totalClearOne:t,sizeBilletes:l,setActivo:_,addNumero:g,resetTodo:b,borrarNumero:y,getTotal:d,cantidad3G:s,abrirCaja:C,abrirModalConfirmacion:z,cerrarModalConfirmacion:k,modalConfirmacionApertura:e,cambioEmergencia:c,addComa:m,loading:u,conectandoConCashlogy:D}}},Y=o(40089);const L=(0,Y.Z)(X,[["render",H],["__scopeId","data-v-aa456fac"]]);var Q=L}}]);
//# sourceMappingURL=600.d0ebcedf.js.map